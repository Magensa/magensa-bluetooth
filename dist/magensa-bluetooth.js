!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["magensa-bluetooth"]=t():e["magensa-bluetooth"]=t()}(window,(function(){return function(e){var t={};function i(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t),i.d(t,"scanForDevices",(function(){return Ae}));class a extends Error{constructor(e){let{message:t,code:i,name:a}=e;super(t||"Web Bluetooth API threw an unknown, or undocumented error"),this.code=i||1e3,this.name=a||"WebBluetoothError"}}var s=a;const r={filters:[{services:["0508e6f8-ad82-898f-f843-e3410cb60104"]},{services:["0508e6f8-ad82-898f-f843-e3410cb60101"]},{services:["0508e6f8-ad82-898f-f843-e3410cb60103"]}],optionalServices:["0508e6f8-ad82-898f-f843-e3410cb60104","0508e6f8-ad82-898f-f843-e3410cb60103","0508e6f8-ad82-898f-f843-e3410cb60101","0508e6f8-ad82-898f-f843-e3410cb60202","device_information"],keepRepeatedDevices:!1,acceptAllAdvertisements:!1};function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o=class{constructor(){n(this,"logDeviceState",e=>{let t=new CustomEvent("deviceLog",{bubbles:!0,detail:e});window.dispatchEvent(t)}),n(this,"convertArrayToHexString",e=>Array.from(e,e=>("0"+(255&e).toString(16)).slice(-2)).join("").toUpperCase()),n(this,"readTwoByteLength",e=>e[0]<<8|e[1]),n(this,"bufferToUtf8",e=>new TextDecoder("utf-8").decode(Uint8Array.from(e))),n(this,"castDecToHex",e=>parseInt(e.toString(16),16)),n(this,"newArrayPartial",(e,t)=>new Array(t).fill(e)),n(this,"readByteArray",e=>{let t=[];for(let i=0;i<e.byteLength;i++)t.push(e.getUint8(i));return t}),n(this,"hexToAscii",e=>{let t="";for(let i=0;i<e.length&&"00"!==e.substr(i,2);i+=2)t+=String.fromCharCode(parseInt(e.substr(i,2),16));return t.trim()}),n(this,"hexToBytes",e=>{let t=[];for(let i=0;i<e.length;i+=2)t.push(parseInt(e.substr(i,2),16));return t}),n(this,"decodeRLE",e=>{let t=[e[0]],i=0,a=e.length;for(let s=1;s<a;s++)i=s+1,i+1<a&&e[s]===e[i]?(t.push(...this.newArrayPartial(e[s],e[i+1])),s=i+1):t.push(e[s]);return t}),n(this,"buildInitialDataArray",e=>{let t=[];for(let e=Math.min(...Object.keys(this.rawData));e<this.maxBlockId;e++)t=t.concat(...this.rawData[e]);return e?this.checkRle(t):t}),n(this,"checkRle",e=>this.rleFormats[this.initialNotification[0]]?this.decodeRLE(e):e),n(this,"convertCurrencyCode",e=>{let t=e.toLowerCase();return"us"===t?[8,64]:"euro"===t?[9,120]:[0,0]}),n(this,"convertNumToAmount",(e,t)=>{t=t||12;let i=e.toString(),a=[];for(;i.length<t;)i="0"+i;for(let e=0;e<i.length;e+=2)a.push(parseInt(i.substring(e,e+2),16));return a}),n(this,"delayPromise",(e,t)=>new Promise(i=>{setTimeout(i,e,t)})),n(this,"byteArrayToNumber",e=>parseInt(this.convertArrayToHexString(e),10)),this.rleFormats=Object.freeze({0:!1,1:!0,2:!1,3:!0})}};function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var h=class extends o{constructor(){super(),c(this,"formatExpPAN",e=>{let t="object"==typeof e?this.bufferToUtf8(e.slice(4)):e;if(-1!==t.indexOf(";")){let e=this.splitExpPAN(t);return{maskedPAN:e[0],Last4:e[1],expirationDate:e[2],serviceCode:e[3]}}return{maskedPAN:"",Last4:"",expirationDate:"",serviceCode:""}}),c(this,"splitExpPAN",e=>{if(e.length>3){let t=e.replace(";","").replace("?","").split("="),i=t[1].slice(0,4),a=t[1].slice(4,7),s=i.slice(-2)+"/"+i.slice(0,2);return[t[0],t[0].slice(-4),s,a]}return["Not Found","Not Found","Not Found","Not Found"]})}};const d="Success, listening for swipe",l="DynaPro Mini",u="Configuration",m=Object.freeze({code:0,message:"Success, there was no session to clear"}),p=Object.freeze({code:19,message:"GATT operation already in progress."}),v=Object.freeze({code:0,message:"Device Closed"}),g=Object.freeze({eDynamo:3,tDynamo:7,[l]:3,dynaProGo:7}),f=Object.freeze({msr:1,chip:2,chipmsr:3,contactless:4,contactlessmsr:5,contactlesschip:6,all:7});function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var C=class extends h{constructor(){super(),b(this,"tlvParser",(e,t)=>{let i,a,s,r=e.length,n=[],o=0,c=!0,h=null,d=[];for(;o<r;)if(a=e[o],c){i=0;let t=!0;if(0===a)break;for(;t&&o<r;)a=e[o],o++,d[i]=a,t=0===i?(a&this.moreTagBytesFlag1)==this.moreTagBytesFlag1:(a&this.moreTagBytesFlag2)==this.moreTagBytesFlag2,i++;h=this.convertArrayToHexString(d.slice(0,i)),c=!1}else{if(s=0,(a&this.moreLengthFlag)==this.moreLengthFlag){let t=a&this.oneByteLengthMask;o++;let i=0;for(;i<t&&o<r;)a=e[o],o++,s=((255&s)<<8)+a,i++}else s=a&this.oneByteLengthMask,o++;if(h){let i=d[0],a=(o+s>r?r:o+s)-o,c=a>0?this.convertArrayToHexString(e.slice(o,o+a)):"";n.push({tag:h,tagLength:s||c.length+.5,tagValue:this.hexOrAsciiFormatter(h,c,t)}),(i&this.constructedFlag)!=this.constructedFlag&&(o+=s)}c=!0}return n}),b(this,"hexOrAsciiFormatter",(e,t,i)=>{switch(e){case"DFDF1A":return`${t} ${this.trxStatusToString[parseInt(t,16)]}`;case"DFDF4D":case"5F20":return this.hexToAscii(t);case"DFDF25":return i?this.hexToAscii(t?t.substring(0,14):t):t;case"DFDF40":return 128===t?`${t}  CBC-MAC checked in ARQC online response`:1===t;default:return t}}),this.moreTagBytesFlag1=31,this.moreTagBytesFlag2=128,this.constructedFlag=32,this.moreLengthFlag=128,this.oneByteLengthMask=127,this.trxStatusToString=Object.freeze({0:"Approved",1:"Declined",2:"Error",16:"Cancelled By Host",17:"Confirm Amount No",18:"Confirm Amount Timeout",19:"Confirm Amount Cancel",20:"MSR Select Debit",21:"MSR Select Debit",22:"MSR Select Credit/Debit timout",23:"MSR Select Credit/Debit cancel",24:"Signature Capture Cancelled by Host (SC-S Only | SC-F only)",25:"Signature Capture Timeout (SC-S Only | SC-F Only)",26:"Signature Capture Cancelled by Cardholder (SC-S Only | SC-F Only)",27:"PIN Entry Cancelled by Host",28:"PIN entry timeout",29:"PIN entry Cancelled by Cardholder",30:"Manual Selected Cancelled by Host",31:"Manual Selection Timeout",32:"Manual Selction Cancelled by Cardholder",33:"Waiting for Card Cancelled by Host",34:"Waiting for Card Timeout",35:"Cancelled by Card Swipe (MSR) [SCRA] || Waiting for Card Cancelled by Cardholder [PIN]",36:"Waiting for Card ICC Seated",37:"Waiting for Card MSR Swiped",255:"Unknown Transaction Status"})}};class D extends Error{constructor(){super("Device communication error. Length does not match data"),this.name="BleTransmissionError",this.code=1012}}var S=D;class y extends Error{constructor(e){let{code:t,name:i,message:a}=e;super(a),this.name=i||"DeviceError",this.code=t||1e3}}var T=y;function w(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var A=class extends C{constructor(e){super(),w(this,"buildDeviceErr",e=>e instanceof DOMException?new s(e):e instanceof Error?e:new T(e)),w(this,"throwLenErr",()=>new S),w(this,"sendErrToCallback",e=>(this.errorCallback(e),e)),this.errorCallback=e.errorCallback}};const k=Object.freeze({errorCode:8,errorName:"NotFoundError"}),P=Object.freeze({code:19,name:"NetworkError"}),E=Object.freeze({code:1002,name:"DeviceNotFound",message:"Please select device to connect"}),R=Object.freeze({code:1003,name:"GattServerNotConnected",message:"Please connect desired device"}),I=Object.freeze({code:1004,name:"CommandNotSent",message:"Command characteristic not found, device not opened"}),B=Object.freeze({code:1005,name:"CommandNotSent",message:"Device not opened"}),O=Object.freeze({code:1006,name:"CommandNotSent",message:"Application From Host not found.  Device not connected"}),N=Object.freeze({code:1007,name:"ReadFailed",message:"Unable to read data from device. Communication error"}),x=Object.freeze({code:1008,name:"ResponseNotReceived",message:"Command was sent, but response was not received from device"}),L=Object.freeze({code:1009,name:"GetServiceFail",message:"Failed to retrieve primary GATT service. Please connect device"}),M=Object.freeze({code:1013,name:"CommandNotAccepted",message:"Device did not accept command"}),H=e=>Object.freeze({code:1014,name:"MissingRequiredParameter",message:`'${e}' is required to call this function.`}),j=(e,t)=>Object.freeze({code:1015,name:"IncorrectInputType",message:`Parameter type for ${t} was not correct, acceptable type(s) are: ${e.join(", ")}`}),F=(e,t)=>Object.freeze({code:1015,name:"IncorrectInputValue",message:`Parameter value for ${t} was not correct, acceptable value(s) are: ${e.join(", ")}`});function $(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var U=class extends A{constructor(e,t){super(t),$(this,"cardTypes",e=>"all"!==e?f[e]||3:g[this.deviceType]||3),$(this,"connect",()=>new Promise((e,t)=>(this.logDeviceState(`[GATT]: Device Connection Request || ${new Date}`),this.device?this.device.gatt.connect().then(t=>(this.logDeviceState(`[GATT]: Device connected - GATT Server retrieved successfully || ${new Date}`),this.gattServer=t,e())):t(this.buildDeviceErr(E))))),$(this,"disconnect",()=>new Promise(e=>this.device.gatt.connected?(this.device.gatt.disconnect(),e(v)):e(v))),$(this,"cacheCardServiceBase",e=>new Promise((t,i)=>(e=e||0,this.logDeviceState(`[GATT]: Cache Card Service Request || ${new Date}`),this.gattServer?this.findPrimaryService(e).then(e=>t(e)).catch(e=>i(e)):i(this.buildDeviceErr(R))))),$(this,"findPrimaryService",e=>new Promise((t,i)=>this.gattServer.getPrimaryService(this.deviceUUIDs[e]).then(e=>(this.cardService=e,this.logDeviceState(`[GATT]: Success! GATT Card Service retrieved and cached || ${new Date}`),this.device.addEventListener("gattserverdisconnected",this.disconnectHandler),t(e))).catch(a=>a.code===k.errorCode&&a.name===k.errorName?(this.deviceUUIDs[e+1],this.logDeviceState(`[ERROR]: Failed to connect. UUID: ${this.deviceUUIDs[e]} is not valid for this device. Trying again with UUID: ${this.deviceUUIDs[e+1]} || ${new Date}`),t(this.findPrimaryService(e+1))):(this.logDeviceState(`[ERROR]: Failed to retrieve Card Service - UUID: ${this.deviceUUIDs[e]} is not valid for this device. || ${new Date}`),i(a))))),$(this,"connectAndCache",e=>new Promise((t,i)=>{let a=t=>new Promise((i,s)=>t<4?this.connect().then(()=>this.cacheCardServiceBase(e)).then(e=>i(e)).catch(e=>e.code===P.code&&e.name===P.name?setTimeout(()=>(this.logDeviceState(`[ERROR]: Error caching GATT Service - Clearing cache and trying again. || ${new Date}`),this.clearGattCache(),i(a(t+1))),500):(this.logDeviceState(`[ERROR]: Failed to cache GATT Service || ${new Date}`),s(e))):s(this.buildDeviceErr(L)));return a(0).then(e=>t(e)).catch(e=>i(e))})),$(this,"sendArpcBase",e=>new Promise((t,i)=>{if(!this.device.gatt.connected)return i(this.buildDeviceErr(B));if("string"!=typeof e&&"object"!=typeof e)return i(this.buildDeviceErr(j(["string","array of numbers"],"ARPC")));const a="string"==typeof e?e.length/2:e.length,s="string"==typeof e?this.hexToBytes(e):e;return t(this.buildArpcCommand(a,s))})),$(this,"onDestroyHandler",()=>{if(this.device&&this.device.gatt.connected)return this.device.gatt.disconnect()}),$(this,"waitForDeviceResponse",e=>new Promise(t=>{let i=a=>a<e?this.commandRespAvailable?t(!0):setTimeout(()=>i(a+1),200):t(!1);i(0)})),$(this,"disconnectHandler",e=>{this.gattServer=null,this.cardService=null,this.logDeviceState(`[Disconnected]: Disconnect event. Returning event to user, removing device listener || ${new Date}`),this.disconnectCallback(e),this.device.removeEventListener("gattserverdisconnected",this.disconnectHandler)}),$(this,"isDeviceConnected",()=>!!this.device.gatt&&this.device.gatt.connected),this.device=e,this.disconnectCallback=t.disconnectHandler,this.gattServer=null,this.cardService=null,this.deviceUUIDs=["0508e6f8-ad82-898f-f843-e3410cb60104","0508e6f8-ad82-898f-f843-e3410cb60103","0508e6f8-ad82-898f-f843-e3410cb60101"],this.statusVerbosity=Object.freeze({minimum:0,medium:1,verbose:2}),this.currencyCode=Object.freeze({dollar:[8,64],euro:[9,120],pound:[8,38],default:[0,0]}),this.transactionTypes=Object.freeze({purchase:0,cashadvance:1,cashback:2,purchasegoods:4,purchaseservices:8,contactlesscashback:9,cashmanual:18,refund:32,chiponlypayment:80}),this.commandRespAvailable=!1}};function q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var z=class extends U{constructor(e,t){super(e,t),q(this,"validateAmount",e=>(t,i,a)=>{switch(typeof t){case"number":return t.toString().length>12?e(F(["number of 12 digits or less","byte array representation of amount (6 bytes, n12 format)"],t)):this.convertNumToAmount(t);case"object":return 6===t.length?t:e(F(["12 digit or less number","byte array representation of amount (6 bytes, n12 format)"],i));case"undefined":return void 0===a?e(H(i)):a;default:return e(j(["number of 12 digits or less","byte array representation of amount (6 bytes, n12 format)"],i))}}),q(this,"validateRequiredInputs",e=>new Promise((t,i)=>{for(let t=0;t<e.length;t++){let{prop:a,validTypes:s,validValues:r,condition:n,propName:o}=e[t];if(void 0===a&&n)return i(H(o));let c=!1;for(let e=0;e<s.length;e++)if(typeof a===s[e]){c=!0;break}if(!c)return i(j(s,o));if(void 0!==r){let e=!1;for(let t=0;t<r.length;t++)if(a.toLowerCase()===r[t]){e=!0;break}if(!e)return i(F(r,o))}}return t(!0)}))}};function W(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var K=class extends z{constructor(e,t){super(e,t),W(this,"decimalToBinary",e=>{let t=(e>>>0).toString(2);return"00000000".substr(t.length)+t}),W(this,"stringNumToBool",e=>!!+e),W(this,"findNullTerminatedString",e=>{let t;for(let i=0;i<e.length;i++)if(0===e[i]&&0===e[i+1]&&0===e[i+2]){t=i;break}return t?this.convertArrayToHexString(e.slice(2,t)):this.convertArrayToHexString(e.slice(2))}),W(this,"findPinLength",(e,t)=>{let i=12,a=4;return e&&"number"==typeof e&&e<=12&&(i=e>=4?e:12),t&&"number"==typeof t&&t>=4&&(a=t<=i?t:4),parseInt(`${i.toString(16)}${a.toString(16)}`,16)}),W(this,"buildPinOptionsByte",(e,t,i,a)=>{const s=Object.freeze({disabled:"00",englishfrench:"01",allspecified:"10"}),r=`000${e=e&&s[e.toLowerCase()]||s.disabled}${(t="boolean"!=typeof t||t)?"1":"0"}${"boolean"!=typeof t||t?"1":"0"}${a=a&&"string"==typeof a?"iso0"===a.toLowerCase()?"0":"1":"0"}`;return this.logDeviceState(`[PinOptionsByte]: binary string representation: ${r} || byte result: ${parseInt(r,2)}`),parseInt(r,2)})}};function G(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var V=class extends K{constructor(e,t){super(e,t),G(this,"parseDeviceConfiguration",e=>({...this.firstDeviceControlByte(this.decimalToBinary(e[1])),...this.secondDeviceControlByte(this.decimalToBinary(e[2])),...this.maskConfigurationByte(this.decimalToBinary(e[3])),...this.msrConfigurationByte(this.decimalToBinary(e[4])),maskCharacter:this.findMaskCharacter(e[5]),leadingUnmaskedLength:parseInt(this.decimalToBinary(e[6]).slice(4),2),trailingUnmaskedLength:parseInt(this.decimalToBinary(e[6]).slice(0,4),2),emvL2IcsConfig:this.emvL2ConfigOptions[this.decimalToBinary(e[7]).slice(0,4)]||`Unknown/Undocumented EMV L2 ICS ${u}`,...this.contactlessConfig(e[8])})),G(this,"contactlessConfig",e=>({contactlessSupport:this.enabledBrands[this.convertArrayToHexString([e])[0]],contactlessGuiControls:"1"===this.decimalToBinary(e)[5]?"Alternate":"Standard"})),G(this,"findMaskCharacter",e=>{if(48===e)return"ASCII: '0'";{const t=this.convertArrayToHexString([e]),i=this.hexToAscii(t);return i?`ASCII: '${i}'`:`Non-ASCII character in hex: '${t}'`}}),G(this,"firstDeviceControlByte",e=>({requireMutualAuth:this.stringNumToBool(e[0]),msrEncryptionVariant:"1"===e[1]?"DATA":"PIN",isClearTextEnabled:this.stringNumToBool(e[3]),isBeeperModeEnabled:this.stringNumToBool(e[4]),isBitmapLocked:this.stringNumToBool(e[6]),isConfigurationLocked:this.stringNumToBool(e[7])})),G(this,"secondDeviceControlByte",e=>({isArpcMacEnabled:this.stringNumToBool(e[1]),isFinancialIccCardTypeReportingEnabled:this.stringNumToBool(e[2]),arqcBatchDataOutputFormat:"1"===e[3]?"Reserved Format":"DynaPro Format"})),G(this,"maskConfigurationByte",e=>({isIsoMaskEnabled:this.stringNumToBool(e[7]),isCheckDigitEnabled:this.stringNumToBool(e[6]),isMs2Point0Enabled:"00"!==e.slice(4,6)})),G(this,"msrConfigurationByte",e=>({isAAMVAcardEnabled:this.stringNumToBool(e[7]),track3Data:this.trackDataOptions[e.slice(4,6)]||"Unknown",track2Data:this.trackDataOptions[e.slice(2,4)]||"Unknown",track1Data:this.trackDataOptions[e.slice(0,2)]||"Unknown"})),this.trackDataOptions=Object.freeze({"00":"Disabled","01":"Enabled",11:"Required"}),this.emvL2ConfigOptions=Object.freeze({"0000":"No L2 Capability","0001":`${u} C1 (EMVCo certified)`,"0010":`${u} C2`,"0011":`${u} C3`,"0100":`${u} C4 (EMVCo certified)`,"0101":`${u} C5 (EMVCo certified)`,"0110":`${u} C6`,"0111":`${u} C7`}),this.enabledBrands=Object.freeze({0:"All contacless kernals enabled",1:"PayPass/MCL support disabled",2:"payWave support disabled",4:"Expresspay support disabled",8:"D-PAS support disabled"})}};function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Q=class extends V{constructor(e,t){super(e,t),_(this,"findEmvCardholderStatus",e=>({emvCardholderStatus:this.cardholderStatusIds[e]||`Unknown/Undocumented Cardholder Interaction Status ID: ${e}`})),_(this,"findOperationStatus",e=>({operationStatus:this.operationStatus[e]||"Unknown Operation Status"})),_(this,"parseDisplayMessageDone",e=>this.findOperationStatus(e[2])),_(this,"parseEmvCompletion",e=>(console.log("[!-!-!-!- emvCompletion -!-!-!-!",e),{})),_(this,"formatSerialNumber",e=>{this.requestedSn={serialNumber:this.findNullTerminatedString(e)},this.getSerialNumber=!0}),_(this,"formatKsnAndSn",e=>{this.requestedKsn={ksn:this.convertArrayToHexString(e.slice(2,12)),serialNumber:this.convertArrayToHexString(e.slice(12,20))},this.getKsnAvailable=!0}),_(this,"handleBigBlockBegin",e=>{switch(e[1]){case 164:this.arqcArriving=!0,this.arqcTotalLen=this.readTwoByteLength([e[5],e[4]]);break;case 171:this.batchDataArriving=!0,this.batchTotalLen=this.readTwoByteLength([e[5],e[4]]);break;case 24:case 32:case 33:break;default:this.transactionStatusCallback({bufferType:this.bufferTypes[e[1]]||"Buffer type not documented"})}}),_(this,"handleArqcBigBlockFinish",()=>{const e=this.buildInitialDataArray(!1),t=this.convertArrayToHexString(e);return this.logDeviceState(`[ARQC]: ${t}`),this.cardDataObj={...this.cardDataObj,arqcData:t,arqcDataParsed:this.tlvParser(e.slice(2))},this.rawData={},this.arqcArriving=!1,this.isQuickChipTransaction?void 0:this.transactionCallback(this.cardDataObj)}),_(this,"handleBatchBigBlockFinish",()=>{const e=this.buildInitialDataArray(!1),t=this.convertArrayToHexString(e);this.logDeviceState(`[BATCH DATA]: ${t}`),this.transactionHasStarted=!1,this.hasTip=!1;const i=this.tlvParser(e.slice(2)),a=i.find(e=>{let{tag:t}=e;return"DFDF40"===t});return this.cardDataObj=a?{...this.cardDataObj,batchData:t,batchDataParsed:i,signatureRequired:1===a}:{...this.cardDataObj,batchData:t,batchDataParsed:i},this.rawData={},this.batchDataArriving=!1,this.transactionCallback(this.cardDataObj)}),_(this,"handleBigBlockFinish",()=>this.arqcArriving?this.handleArqcBigBlockFinish():this.batchDataArriving?this.handleBatchBigBlockFinish():void 0),_(this,"parseEmvCardholderInteractionStatus",e=>{switch(e[1]){case 2:return{...this.findEmvCardholderStatus(e[1]),amountConfirmed:1===e[4]||2!==e[4]&&"Unknown/Undocumented Amount Confirmed Status"};case 4:return{...this.findEmvCardholderStatus(e[1]),applicationOrLabelName:this.bufferToUtf8(e.slice(4))};case 10:return{...this.findEmvCardholderStatus(e[1]),methodSelected:1===e[4]?"Credit":2===e[4]?"Debit":"Unknown/Undocumented payment method selected"};case 32:return{...this.findEmvCardholderStatus(e[1]),tlvData:this.tlvParser(e.slice(4))};default:return void 0===e[4]?this.findEmvCardholderStatus(e[1]):{...this.findEmvCardholderStatus(e[1]),undocumentedData:this.convertArrayToHexString(e.slice(4))}}}),_(this,"parseCardStatusReport",e=>e.length<4?this.findOperationStatus(e[2]):{...this.findOperationStatus(e[2]),cardStatus:0===e[2]?"Ok":"Error",cardType:this.cardTypesEnum[e[3]]}),_(this,"parseAckResponse",e=>({code:e[1],message:this.ACKSTS[e[1]],commandType:this.pinCommandIds[e[2]]||"Device error or command type not documented"})),_(this,"parseDeviceStateReport",e=>({deviceState:this.deviceState[e[1]],sessionState:this.parseSessionState(this.decimalToBinary(e[2])),deviceStatus:this.parseDeviceStatus(this.decimalToBinary(e[3])),deviceCertStatus:this.parseCertStatus(this.decimalToBinary(e[4])),hardwareStatus:this.parseHardwareStatus(this.decimalToBinary(e[5])),additionalInfo:this.parseAdditionalInfo(this.decimalToBinary(e[6]))})),_(this,"parseSessionState",e=>({powerDidChange:this.stringNumToBool(e[0]),cardDataIsAvailable:this.stringNumToBool(e[4]),panParsedFromCard:this.stringNumToBool(e[5]),externalPanSent:this.stringNumToBool(e[6]),amountWasSent:this.stringNumToBool(e[7])})),_(this,"parseCertStatus",e=>({msrCrlCertExists:this.stringNumToBool(e[0]),pinCrlCertExists:this.stringNumToBool(e[1]),mfgUnbindCertExists:this.stringNumToBool(e[3]),msrCaCertExists:this.stringNumToBool(e[4]),pinCaCertExists:this.stringNumToBool(e[5]),deviceCaCertExists:this.stringNumToBool(e[6]),deviceCertExists:this.stringNumToBool(e[7])})),_(this,"parseDeviceStatus",e=>"00000000"!==e?{pinKeyStatus:this.pinKeyStatusEnum[e.slice(6)],msrKeyStatus:this.msrKeyStatusEnum[e.slice(4,6)],tamperDetected:this.stringNumToBool(e[3]),isAuthenticated:this.stringNumToBool(e[1]),deviceErrorDetected:this.stringNumToBool(e[0])}:"Ok"),_(this,"parseHardwareStatus",e=>({IE3_only:this.stringNumToBool(e[0]),SRED:this.stringNumToBool(e[1]),MagHeadIsProgrammed:this.stringNumToBool(e[6]),tamperSensorsAreActive:this.stringNumToBool(e[7])})),_(this,"parseAdditionalInfo",e=>({ICC_AcquirerMasterKeyIsInjected:!this.stringNumToBool(e[7]),ICC_SessionKeyIsActive:!this.stringNumToBool(e[6]),CAPK_EmvDatabaseIsCorrupted:this.stringNumToBool(e[5]),EmvTerminalDatabaseIsCorrupted:this.stringNumToBool(e[4]),cardIsPresentInChipCardConnector:this.stringNumToBool(e[3])})),_(this,"parseCardData",e=>{const t=this.cardDataIds[e[1]]||"trackNameUnknown";if(0===e[2])switch(t){case"track1":this.cardDataObj={...this.cardDataObj,[t]:this.bufferToUtf8(e.slice(4))};break;case"track2":this.cardDataObj={...this.cardDataObj,[t]:this.bufferToUtf8(e.slice(4)),...this.formatExpPAN(e)};break;case"ksnAndMagnePrintStatus":this.cardDataObj={...this.cardDataObj,ksn:this.convertArrayToHexString(e.slice(4,14)),magnePrintStatus:this.convertArrayToHexString(e.slice(-4))};break;default:this.cardDataObj={...this.cardDataObj,[t]:this.convertArrayToHexString(e.slice(4))}}else this.cardDataObj={...this.cardDataObj,[t]:this.convertStatusToString[e[2]]}}),_(this,"parsePinResponse",e=>(this.logDeviceState(`[PIN Response]: Response from PIN Entry: ${this.convertArrayToHexString(e)}`),e.length>2?{pinData:{...this.findOperationStatus(e[1]),pinKsn:this.convertArrayToHexString(e.slice(2,12)),encryptedPinBlock:this.convertArrayToHexString(e.slice(12,20))}}:this.findOperationStatus(e[1]))),_(this,"parseCardholderResponse",e=>{const t=Object.freeze({113:"Left function key",114:"Middle function key",116:"Right function key",120:"Enter key"});return e.length>2?{...this.findOperationStatus(e[1]),keyPressed:t[e[2]]||"Unknown/Undocumented Key"}:this.findOperationStatus(e[1])}),_(this,"parseTipCashbackReport",e=>(console.log("tip, cashback report",e),e.length>2?{...this.findOperationStatus(e[1]),reportMode:0===e[2]?"Tip":"Cashback",amount:e.slice(3,9),tax:e.slice(9,15),taxRate:e.slice(15,18),tipOrCashbackAmount:e.slice(18,24)}:this.findOperationStatus(e[1]))),this.operationStatus=Object.freeze({0:"Ok",1:"Cardholder Cancel",2:"Timeout",3:"Host Cancel",4:"Verify fail",5:"Keypad Security",6:"Calibration Done",7:"Write with duplicate RID and index",8:"Write with corrupted Key",9:"CA Public Key reached maximum capacity",10:"CA Public Key read with invalid RID or Index"}),this.ACKSTS=Object.freeze({0:"Ok",21:"RID error/Index not found",128:"Device Error: error, tamper, missing certificate or incorrect signature detected",129:"Device not idle",130:"Data Error or Bad Paramater(s)",131:"Length Error: data size is either too small, too large, incomplete, or OID of the cert doesn't match predefined OID",132:"PAN Exists",133:"Missing or Incorrect Key",134:"Device Busy",135:"Device Locked",136:"Auth required",137:"Bad Auth",138:"Device Not Available",139:"Amount Needed - If PIN amount is required, no amount has been set",140:"Battery is critically low",141:"Device is resetting",144:"Certificate does not exist",145:"Expired (Cert/CRL)",146:"Invalid (Cert/CRL/Message)",147:"Revoked (Cert/CRL)",148:"CRL does not exist",149:"Certificate exists",150:"Duplicate KSN/Key"}),this.pinCommandIds=Object.freeze({1:"responseACK",2:"clearSession",3:"swipe",4:"requestPinEntry",5:"cancelCommand",6:"requestCardholderSelection",7:"displayMessage",8:"requestDeviceStatus",9:"requestDeviceConfiguration",10:"requestMsrData",11:"getChallenge",7:"displayMessage",162:"emvTransactionStatus",171:"requestEmvData",48:"getKsn",5:"cancelCommand",26:"requestDeviceInfo",16:"sendBigBlockData",160:"requestTipOrCashback"}),this.cardTypesEnum=Object.freeze({0:"Other",1:"Financial",2:"AAMVA",3:"Manual",4:"Unknown",5:"ICC",6:"Contactless ICC - EMV",7:"Financial MSR + ICC",8:"Contactless ICC - MSD"}),this.deviceState=Object.freeze({0:"Idle",1:"Session",2:"Wait For Card",3:"Wait For PIN",4:"Wait For Selection",5:"Displaying Message",6:"Test (Reserved for future use)",7:"Manual Card Entry",9:"Wait Cardholder Entry",10:"Chip Card",11:"ICC Kernel Test",12:"EMV Transaction",13:"Show PAN"}),this.pinKeyStatusEnum=Object.freeze({"00":"PIN Key OK","01":"PIN Key Exhausted",10:"No PIN Key",11:"PIN Key Not Bound"}),this.msrKeyStatusEnum=Object.freeze({"00":"MSR Key OK","01":"MSR Key Exhausted",10:"No MSR Key",11:"MSR Key Not Bound"}),this.cardDataIds=Object.freeze({1:"track1",2:"track2",3:"track3",4:"encryptedTrack1",5:"encryptedTrack2",6:"encryptedTrack3",7:"magnePrint",64:"encryptedPanAndExp",65:"serialNumber",99:"ksnAndMagnePrintStatus",100:"CBC-MAC"}),this.cardholderStatusIds=Object.freeze({1:"Waiting for amount confirmation selection",2:"Amount confirmation selected",3:"Waiting for multi-payment ICC Application selection",4:"ICC Application selected",7:"Waiting for language selection",8:"Language selected",9:"Waiting for credit/debit selection",10:"Credit/Debit selected",11:"Waiting for Pin Entry for ICC",12:"PIN entered for ICC",13:"Waiting for Pin Entry for MSR",14:"PIN entered for MSR"}),this.bufferTypes=Object.freeze({2:"Device Certificate",50:"Set BIN (MAC)",66:"CSR",161:"EMV data in TLV format, Tag Data (MAC)",162:"RESERVED",163:"RESERVED",164:"EMV data in TLV format, Authorization Request (ARQC)",165:"CA Public Key (MAC)",171:"EMV data in TLV format, Batch Data"}),this.cardDataObj={},this.arqcArriving=!1,this.batchDataArriving=!1,this.arqcTotalLen=0,this.batchTotalLen=0,this.convertStatusToString=Object.freeze({0:"Ok",1:"Empty",2:"Error",4:"Disabled"})}};function J(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Y=class extends Q{constructor(e,t){super(e,t),J(this,"buildSwipeCommand",e=>{let{timeout:t,isFallback:i,toneChoice:a,displayType:s}=e;return[1,3,t||60,!0===i?4:void 0!==s?this.displayTypes[s.toLowerCase()]:2,void 0!==a?this.toneChoice[a.toLowerCase()]:1]}),J(this,"buildEmvCommand",e=>{let{timeout:t,pinTimeout:i,cardType:a,transactionType:s,cashBack:r,currencyCode:n,toneChoice:o,isQuickChip:c,authorizedAmount:h,emvOptions:d,taxAmount:l,taxPercent:u,tipAmount:m,balanceBeforeGenAC:p,balanceAfterGenAC:v,trxCategoryCode:g}=e;return new Promise((e,f)=>{this.isQuickChipTransaction=!1!==c,this.hasTip=this.hasTip||void 0!==m;const b=this.validateAmount(f);let C=[1,162,t||60,i||20,0,void 0!==o?this.toneChoice[o.toLowerCase()]:1,a?this.cardTypes(a.toLowerCase()):this.cardTypes("all"),void 0!==d?this.emvOptions[d.toLowerCase()]:0];const D=b(h,"authorizedAmount",[0,0,0,0,1,0]);if(void 0===D)return f(D);C=C.concat(D),C=void 0!==s?C.concat(this.transactionTypes[s.toLowerCase()]):C.concat(0);const S=b(r,"cashBack",this.newArrayPartial(0,6));if(void 0===S)return f(S);C=C.concat(S);const y=b(p,"balanceBeforeGenAC",this.newArrayPartial(0,6));if(void 0===y)return f(y);C=C.concat(y);const T=b(v,"balanceAfterGenAC",this.newArrayPartial(0,6));if(void 0===T)return f(T);C=C.concat(T),C=n?C.concat(this.currencyCode[n.toLowerCase()]||this.currencyCode.default):C.concat(this.currencyCode.dollar),C.push(void 0!==g?g:0),C.push(this.isQuickChipTransaction?1:0),C.push(this.hasTip?1:void 0!==r?2:0);const w=b(l,"taxAmount",this.newArrayPartial(0,6));if(void 0===w)return f(w);C=C.concat(w),C=void 0!==u?"number"==typeof u?C.concat(this.convertNumToAmount(u,6)):C.concat(u):C.concat(this.newArrayPartial(0,3)),C=C.concat(this.newArrayPartial(0,3));const A=b(m,"tipAmount",this.newArrayPartial(0,6));return void 0===A?f(A):(C=C.concat(A),C=C.concat(this.newArrayPartial(0,9)),e(C))})}),J(this,"buildPinCommand",e=>{let{languageSelection:t,displayType:i,timeout:a,maxPinLength:s,minPinLength:r,toneChoice:n,waitMessage:o,verifyPin:c,pinBlockFormat:h}=e;const d=Object.freeze({enterpin:0,enterpinamount:1,reenterpinamount:2,reenterpin:3,verifypin:4}),l=[1,4,a||30,i&&d[i.toLowerCase()]||0,this.findPinLength(s,r),void 0!==n?this.toneChoice[n.toLowerCase()]:1,this.buildPinOptionsByte(t,o,c,h)];return console.log("[PIN CMD] Built PIN Command: ",l),l}),J(this,"buildArpcCommand",(e,t)=>new Promise((i,a)=>{this.sendBigBlockData(164,e,t).then(()=>i([1,164,...this.newArrayPartial(0,10)])).catch(e=>a(e))})),J(this,"buildTipOrCashbackCmd",e=>{let{timeout:t,commandType:i,toneChoice:a,transactionAmount:s,calculatedTaxAmount:r,taxRate:n,tipSelectionMode:o,leftButton:c,middleButton:h,rightButton:d}=e;return new Promise((e,l)=>{const u=this.validateAmount(l),m=[{prop:i,propName:"commandType",validTypes:["string"],condition:!0,validValues:["tip","cashback"]},{prop:o,propName:"tipSelectionMode",condition:"cashback"!==i.toLowerCase(),validTypes:["string"],validValues:["percent","amount"]},{prop:n,propName:"taxRate",condition:!0,validTypes:["number","object"]}];this.validateRequiredInputs(m).then(()=>{let i=[1,160,void 0!==t?t:30,"string"==typeof a?this.toneChoice[a.toLowerCase()]:this.toneChoice.onebeep];const m=u(s,"transactionAmount");if(void 0===m)return l(m);i=i.concat(m);const p=u(r,"calculatedTaxAmount");return void 0===p?l(p):(i=i.concat(p),i="number"==typeof n?i.concat(this.convertNumToAmount(n,6)):i.concat(n),i.push(void 0===o||"percent"===o?0:1),i=void 0!==c?"number"==typeof c?i.concat(this.convertNumToAmount(c,4)):c:i.concat(this.newArrayPartial(0,2)),i=void 0!==h?"number"==typeof h?i.concat(this.convertNumToAmount(h,4)):h:i.concat(this.newArrayPartial(0,2)),i=void 0!==d?"number"==typeof d?i.concat(this.convertNumToAmount(d,4)):d:i.concat(this.newArrayPartial(0,2)),i=i.concat(this.newArrayPartial(0,26)),e(i))}).catch(e=>l(e))})}),J(this,"buildDisplayCmd",e=>{let{displayTime:t,messageId:i}=e;return new Promise((e,a)=>void 0===i?a(missingRequiredFields("messageId")):e([1,7,void 0!==t?t:15,i]))})}};function X(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Z=class extends Y{constructor(e,t){super(e,t),X(this,"getCardService",()=>new Promise((e,t)=>this.device?this.connectAndCache(2).then(e=>(this.logDeviceState(`[GATT]: Cache AppDataToHostLength Characteristic || ${new Date}`),e.getCharacteristic(this.deviceToHostLen))).then(e=>(this.logDeviceState(`[GATT]: Begin notifications on AppDataToHostLength Characteristic || ${new Date}`),e.startNotifications())).then(e=>(this.logDeviceState(`[GATT]: Add listener to notifications || ${new Date}`),e.removeEventListener("characteristicvaluechanged",this.dataWatcher),e.addEventListener("characteristicvaluechanged",this.dataWatcher),this.cardDataListener=e,this.logDeviceState(`[GATT]: Cache AppDataToHost Characteristic || ${new Date}`),this.cardService.getCharacteristic(this.deviceToHostData))).then(e=>(this.receiveDataChar=e,this.logDeviceState(`[GATT]: Cache AppDataFromHostLength Characteristic || ${new Date}`),this.cardService.getCharacteristic(this.deviceFromHostLen))).then(e=>(this.sendLenToDevice=e,this.logDeviceState(`[GATT]: Cache AppDataFromHost Characteristic || ${new Date}`),this.cardService.getCharacteristic(this.deviceFromHostData))).then(e=>(this.commandCharacteristic=e,window&&(window.removeEventListener("beforeunload",this.onDestroyHandler),window.addEventListener("beforeunload",this.onDestroyHandler)),this.logDeviceState(`[GATT]: Successfully cached all GATT services and characteristics. Returning successful pair to user || ${new Date}`),this.delayPromise(400))).then(()=>e({code:0,message:"Device Open"})).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(E)))),X(this,"dataWatcher",e=>{let t=e.target.value.getUint8(0);return this.logDeviceState(`[NOTIFY: AppDataToHostLength]: ${this.convertArrayToHexString([t])} || ${new Date}`),this.commandSent&&3===t?(this.commandRespAvailable=!0,void(this.commandSent=!1)):this.readCommandResp()}),X(this,"readCommandResp",()=>new Promise((e,t)=>this.receiveDataChar?this.receiveDataChar.readValue().then(e=>this.readValueHandler(e)).then(t=>e(t)).catch(i=>i.code===p.code&&i.message===p.message?(this.logDeviceState(`[INFO]: Read failed due to device being busy. Attempting read again || ${new Date}`),this.delayPromise(100).then(()=>e(this.readCommandResp()))):t(this.buildDeviceErr(i))):t(this.buildDeviceErr(N)))),X(this,"readValueHandler",e=>new Promise(t=>{const i=this.readByteArray(e);if(this.logDeviceState(`[READ: AppDataToHost]: ${this.convertArrayToHexString(i)} || ${new Date}`),i.length)switch(i[0]){case this.reportIds.responseAck:return t(this.parseAckResponse(i));case this.reportIds.deviceStateReport:return t(this.handleDeviceStateReport(i));case this.reportIds.cardStatusReport:return t(this.handleCardStatusReport(i));case this.reportIds.cardDataReport:return t(this.handleCardDataReport(i));case this.reportIds.emvCardholderStatus:return t(this.handleCardholderStatusReport(i));case this.reportIds.emvCompletion:return t(this.handleEmvCompletion(i));case this.reportIds.bigBlockData:return t(this.handleBigBlockData(i));case this.reportIds.getKsn:return t(this.formatKsnAndSn(i));case this.reportIds.requestSn:return t(this.formatSerialNumber(i));case this.reportIds.deviceConfig:return t(this.parseDeviceConfiguration(i));case this.reportIds.pinResponse:return t(this.transactionCallback(this.parsePinResponse(pinResp)));case this.reportIds.selectionResponse:return t(this.parseCardholderResponse(i));case this.reportIds.displayResp:return t(this.transactionStatusCallback(this.findOperationStatus(i[1])));case this.reportIds.tipCashbackReport:return t(this.parseTipCashbackReport(i));default:return this.logDeviceState(`[Data Resp]: There is no parser for this data, returning to caller: ${this.convertArrayToHexString(i)} || ${new Date}`),t(this.transactionCallback(i))}else t(i)})),X(this,"handleEmvCompletion",e=>(console.log("[!] EMV Completion: ",e),this.transactionStatusCallback(this.parseEmvCompletion(e)))),X(this,"handleBigBlockData",e=>{switch(e[2]){case 0:this.handleBigBlockBegin(e);break;case 99:this.maxBlockId=Math.max(...Object.keys(this.rawData))+1,this.handleBigBlockFinish();break;default:this.rawData={...this.rawData,[e[2]]:e.slice(4)}}}),X(this,"handleCardholderStatusReport",e=>this.transactionStatusCallback(this.parseEmvCardholderInteractionStatus(e))),X(this,"handleCardStatusReport",e=>new Promise(t=>(this.transactionStatusCallback(this.parseCardStatusReport(e)),this.swipeHasBegun||this.transactionHasStarted?this.sendCommandWithResp(this.swipeHasBegun?[1,10,0]:[1,171,0]).then(e=>t(this.transactionStatusCallback(e))).catch(e=>this.sendErrToCallback(this.buildDeviceErr(e))):t()))),X(this,"handleDeviceStateReport",e=>{this.dataGathered&&(this.dataGathered=!1,this.transactionCallback({swipeData:this.cardDataObj})),this.transactionStatusCallback(this.parseDeviceStateReport(e))}),X(this,"handleCardDataReport",e=>{this.swipeHasBegun&&(this.swipeHasBegun=!1,this.dataGathered=!0),3!==e.length?this.parseCardData(e):(this.logDeviceState("[ERROR] Undocumented Card Data below"),this.logDeviceState(e))}),X(this,"requestCardSwipe",e=>new Promise((t,i)=>(this.swipeHasBegun=!0,this.cardDataObj={},this.device.gatt.connected?this.sendCommandWithResp(this.clearSessionCmd).then(t=>(this.transactionStatusCallback(t),this.sendCommandWithResp(this.buildSwipeCommand(e||{})))).then(e=>t(e)).catch(e=>i(e)):i(this.buildDeviceErr(B))))),X(this,"startTransaction",e=>new Promise((t,i)=>(this.transactionHasStarted=!0,this.cardDataObj={},this.logDeviceState(`[INFO]: EMV transaction begun || ${new Date}`),this.buildEmvCommand(e||{}).then(e=>this.sendCommandWithResp(e)).then(e=>t(e)).catch(e=>i(this.buildDeviceErr(e)))))),X(this,"requestPinEntry",e=>new Promise((t,i)=>(this.logDeviceState(`[PIN]: Request for PIN entry start || ${new Date}`),console.log("pinoptions: ",e),this.device.gatt.connected?this.sendCommandWithResp(this.buildPinCommand(e||{})).then(e=>t(e)).catch(e=>i(e)):i(this.buildDeviceErr(B))))),X(this,"sendBigBlockData",(e,t,i)=>new Promise((a,s)=>{let r=[1,16,e,0,255&t];if(t<60){r=r.concat(...this.newArrayPartial(0,60)),this.logDeviceState(`[Send Big Block Data Legacy]: ${this.convertArrayToHexString(r)}`);let n=[1,16,e,1,t,...i];return n.length<65&&(n=n.concat(...this.newArrayPartial(0,65-n.length))),this.sendPinCommand(r).then(()=>this.sendPinCommand(n)).then(()=>a()).catch(e=>s(this.buildDeviceErr(e)))}return r=r.concat([t>>8&255,t>>16&255,t>>24&255,1,...this.newArrayPartial(0,56)]),this.sendExtendedBigBlockData(e,t,i,r).then(()=>a())})),X(this,"sendExtendedBigBlockData",(e,t,i,a)=>new Promise((s,r)=>{const n=Math.ceil(t/60);let o=!1,c=[];this.logDeviceState(`[Send Big Block Data Extended]: ${this.convertArrayToHexString(a)} || ${new Date}`);const h=()=>new Promise((e,t)=>{if(o)return this.delayPromise(500).then(()=>e(h()));const i=c.shift();return i?(o=!0,i.queuedPromise().then(()=>i.resolve()).then(()=>(o=!1,e(h()))).catch(e=>(o=!1,t(i.reject(e))))):e(!0)}),d=e=>new Promise((t,i)=>{c.push({queuedPromise:e,resolve:t,reject:i})});d(()=>new Promise(e=>this.sendPinCommand(a).then(()=>e())));for(let t=0,a=1;a<=n;a++){let s=i.slice(t,t+60),r=[1,16,e,a,s.length,...s];65!==r.length&&(r=r.concat(...this.newArrayPartial(0,65-r.length))),d(()=>new Promise(e=>this.sendPinCommand(r).then(()=>e())))}return this.logDeviceState(`[Send Big Block Data Extended]: Executing queue of ${c.length} commands || ${new Date}`),h().then(e=>s(e)).catch(e=>r(e))})),X(this,"sendArpc",e=>new Promise((t,i)=>this.sendArpcBase(e).then(e=>this.delayPromise(200,e)).then(e=>(console.log("passed through command: ",e),this.sendCommandWithResp(e))).then(e=>(this.logDeviceState(`[Send ARPC Result]: ${this.convertArrayToHexString(e)}`),t(e))).catch(e=>i(this.buildDeviceErr(e))))),X(this,"requestTipOrCashback",e=>new Promise((t,i)=>(this.hasTip=!0,this.buildTipOrCashbackCmd(e).then(e=>(console.log("returned with this command:",e,this.convertArrayToHexString(e)),this.sendCommandWithResp(e))).then(e=>(console.log("tip-cashback resp: ",e),t(e))).catch(e=>i(this.buildDeviceErr(e)))))),X(this,"setDisplayMessage",e=>new Promise((t,i)=>this.device&&this.device.gatt.connected?this.buildDisplayCmd(e||{}).then(e=>this.sendCommandWithResp(e)).then(e=>t(e)).catch(e=>i(this.buildDeviceErr(e))):i(this.buildDeviceErr(B)))),X(this,"sendPinCommand",e=>new Promise((t,i)=>(this.logDeviceState(`[AppFromHostLength]: ${this.convertArrayToHexString([e.length])} || ${new Date}`),this.sendLenToDevice?this.sendLenToDevice.writeValue(Uint8Array.of(e.length)).then(()=>(this.logDeviceState(`[AppFromHostData]: ${this.convertArrayToHexString(e)} || ${new Date}`),this.commandSent=!0,t(this.commandCharacteristic.writeValue(Uint8Array.from(e))))).catch(e=>(this.commandSent=!1,i(e))):i(this.buildDeviceErr(O))))),X(this,"sendCommandWithResp",e=>new Promise((t,i)=>this.sendPinCommand(e).then(()=>this.commandRespAvailable?Promise.resolve(!0):this.waitForDeviceResponse(16)).then(t=>t?this.readCommandResp():this.tryCommandAgain(e)).then(e=>(this.commandRespAvailable=!1,t(e))).catch(e=>(this.commandRespAvailable=!1,i(this.buildDeviceErr(e)))))),X(this,"tryCommandAgain",e=>new Promise((t,i)=>this.sendPinCommand(e).then(()=>this.waitForDeviceResponse(5)).then(e=>e?t(this.readCommandResp()):i(this.buildDeviceErr(x))))),X(this,"cancelTransaction",()=>new Promise((e,t)=>this.commandCharacteristic?this.sendCommandWithResp([1,5,0]).then(t=>e(t)).catch(e=>t(e)):t(this.buildDeviceErr(I)))),X(this,"clearSession",()=>new Promise((e,t)=>(this.logDeviceState(`[ClearSession]: Request to clear session || ${new Date}`),this.sendLenToDevice?this.sendCommandWithResp(this.clearSessionCmd).then(t=>(this.transactionStatusCallback(t),this.logDeviceState(`[ClearSession]: Received clear session response || ${new Date}`),this.clearInternalState(),e(t))).catch(e=>t(this.buildDeviceErr(e))):e(m)))),X(this,"closePinDevice",()=>new Promise((e,t)=>this.cardDataListener?this.cardDataListener.stopNotifications().then(()=>(this.logDeviceState(`[Close Device]: GATT notifications stopped. Clearing JS cache || ${new Date}`),this.cardDataListener.removeEventListener("characteristicvaluechanged",this.dataWatcher),this.cardDataListener=null,this.clearGattCache(),e(this.disconnect()))).catch(e=>t(e)):this.disconnect().then(()=>(this.logDeviceState(`[Close Device]: Device Closed. Clearing JS cache || ${new Date}`),this.clearGattCache(),e())).catch(e=>t(e)))),X(this,"closeDevice",()=>new Promise((e,t)=>this.device.gatt.connected?this.clearSession().then(()=>this.closePinDevice()).then(()=>e(v)).catch(e=>(this.disconnect(),t(this.buildDeviceErr(e)))):e(v))),X(this,"clearInternalState",()=>{this.commandSent=!1,this.commandRespAvailable=!1,this.dataGathered=!1,this.isQuickChipTransaction=!0}),X(this,"clearGattCache",()=>{this.transactionHasStarted=!1,this.receiveDataChar=null,this.commandCharacteristic=null,this.sendLenToDevice=null,this.clearInternalState(),this.hasTip=!1,this.swipeHasBegun=!1,this.transactionHasStarted=!1}),this.transactionCallback=t.transactionCallback||t,this.transactionStatusCallback=t.transactionStatusCallback,this.deviceFromHostLen="0508e6f8-ad82-898f-f843-e3410cb60220",this.deviceFromHostData="0508e6f8-ad82-898f-f843-e3410cb60221",this.deviceToHostLen="0508e6f8-ad82-898f-f843-e3410cb60222",this.deviceToHostData="0508e6f8-ad82-898f-f843-e3410cb60223",this.cardDataListener=null,this.receiveDataChar=null,this.commandCharacteristic=null,this.sendLenToDevice=null,this.commandSent=!1,this.swipeHasBegun=!1,this.transactionHasStarted=!1,this.dataGathered=!1,this.isQuickChipTransaction=!0,this.hasTip=!1,this.emvOptions=Object.freeze({normal:0,bypasspin:1,forceonline:2,acquirernotavailable:4}),this.displayTypes=Object.freeze({swipeidlealternate:0,swipecard:1,pleaseswipe:2,pleaseswipeagain:3,chiperroruseswipe:4}),this.reportIds=Object.freeze({responseAck:1,endSession:2,requestCardSwipe:3,cardStatusReport:34,deviceStateReport:32,cardDataReport:35,emvCardholderStatus:44,bigBlockData:41,emvCompletion:162,getKsn:48,requestSn:26,deviceConfig:9,pinResponse:36,selectionResponse:37,displayResp:39,tipCashbackReport:48}),this.toneChoice=Object.freeze({nosound:0,onebeep:1,twobeeps:2}),this.initialNotification=[0],this.clearSessionCmd=[1,2,0]}};function ee(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var te=class extends Z{constructor(e,t){super(e,t),ee(this,"getDeviceInfo",()=>new Promise((e,t)=>this.device?this.gatherDeviceInfo().then(t=>e(t)).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(E)))),ee(this,"gatherDeviceInfo",()=>new Promise((e,t)=>{this.checkIfDeviceIdle().then(()=>this.getDeviceInfoProceed()).then(t=>e({...t,deviceName:this.device.name,isConnected:this.device.gatt.connected})).catch(e=>t(e))})),ee(this,"getDeviceInfoBase",()=>new Promise(e=>{this.sendCommandWithResp([1,26,5]).then(t=>e(t))})),ee(this,"getDeviceInfoProceed",()=>new Promise((e,t)=>{this.sendPinCommand([0,26,5]).then(()=>this.getSerialNumber||this.waitForSn(5)).then(e=>e?Promise.resolve():t(this.buildDeviceErr(x))).then(()=>{let t={serialNumber:this.hexToAscii(this.requestedSn.serialNumber)};return this.getSerialNumber=!1,this.requestedSn=null,e(t)}).catch(e=>t(e))})),ee(this,"checkIfDeviceIdle",()=>new Promise(e=>{this.getDeviceInfoBase().then(t=>"Device not idle"===t.message?this.clearSession().then(()=>this.getDeviceInfoBase()):(this.transactionStatusCallback(t),e())).then(t=>(this.transactionStatusCallback(t),e()))})),ee(this,"waitForSn",e=>new Promise(t=>{let i=a=>a<e?this.getSerialNumber?t(!0):setTimeout(()=>i(a+1),200):t(!1);i(0)})),this.getKsnAvailable=!1,this.requestedKsn=null,this.getSerialNumber=!1,this.requestedSn=null,this.deviceType=l}};function ie(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ae=class extends Z{constructor(e,t){super(e,t),ie(this,"getDeviceInfo",()=>new Promise((e,t)=>this.device?this.gatherDeviceInfo().then(t=>e(t)).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(E)))),ie(this,"gatherDeviceInfo",()=>new Promise((e,t)=>{this.checkIfDeviceIdle().then(()=>this.getDeviceInfoProceed()).then(t=>e({...t,deviceName:this.device.name,isConnected:this.device.gatt.connected})).catch(e=>t(e))})),ie(this,"getDeviceInfoBase",()=>new Promise(e=>{this.sendCommandWithResp([1,26,5]).then(t=>e(t))})),ie(this,"getDeviceInfoProceed",()=>new Promise((e,t)=>{this.sendPinCommand([0,26,5]).then(()=>this.getSerialNumber?Promise.resolve(!0):this.waitForSn(5)).then(e=>e?Promise.resolve():t(this.buildDeviceErr(x))).then(()=>{let t={serialNumber:this.hexToAscii(this.requestedSn.serialNumber)};return this.getSerialNumber=!1,this.requestedSn=null,e(t)}).catch(e=>t(e))})),ie(this,"checkIfDeviceIdle",()=>new Promise(e=>{this.getDeviceInfoBase().then(t=>"Device not idle"===t.message?this.clearSession().then(()=>this.getDeviceInfoBase()):(this.transactionStatusCallback(t),e())).then(t=>(this.transactionStatusCallback(t),e()))})),ie(this,"waitForSn",e=>new Promise(t=>{let i=a=>a<e?this.getSerialNumber?t(!0):setTimeout(()=>i(a+1),200):t(!1);i(0)})),this.getKsnAvailable=!1,this.requestedKsn=null,this.getSerialNumber=!1,this.requestedSn=null,this.deviceType="dynaProGo"}};function se(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var re=class extends U{constructor(e,t){super(e,t),se(this,"trackIndices",e=>Object.freeze({track1DecodeStatus:e,track2DecodeStatus:e+1,track3DecodeStatus:e+2,track1Len:e+3,track2Len:e+4,track3Len:e+5,cardEncodeType:e+6,track1Start:e+7,track1End:e+118,track2Start:e+119,track2End:e+230,track3Start:e+231,track3End:e+342,cardStatus:e+343,magnePrintStatusStart:e+344,magnePrintStatusEnd:e+347,magnePrintLen:e+348,magnePrintStart:e+349,magnePrintEnd:e+476,serialNumberStart:e+477,serialNumberEnd:e+492,deviceEncStatusStart:e+493,deviceEncStatusEnd:e+494,ksnStart:e+495,ksnEnd:e+504,track1MaskedLen:e+505,track2MaskedLen:e+506,track3MaskedLen:e+507,track1MaskedStart:e+508,track1MaskedEnd:e+619,track2MaskedStart:e+620,track2MaskedEnd:e+731,track3MaskedStart:e+732,track3MaskedEnd:e+843,encSessionIdStart:e+844,encSessionIdEnd:e+851,track1AbsLen:e+852,track2AbsLen:e+853,track3AbsLen:e+854,magnePrintAbsLen:e+855})),se(this,"parseHidData",e=>{let t=this.trackIndices(this.offset),i={};return this.dataNames.forEach(a=>{let s=e.slice(t[`${a}Start`],t[`${a}End`]+1);t.hasOwnProperty(`${a}Len`)&&(s=s.slice(0,e[t[`${a}Len`]])),i="track2Masked"===a?this.formatTrack2Masked(i,a,this.bufferToUtf8(s)):t.hasOwnProperty(`${a}DecodeStatus`)?this.formatTrackWithDecode(i,a,e[t[`${a}DecodeStatus`]],this.convertArrayToHexString(s)):"serialNumber"===a?this.formatSerialNumber(i,s):{...i,[a]:a.toLowerCase().includes("masked")?this.bufferToUtf8(s):this.convertArrayToHexString(s)}}),{swipeData:{...i}}}),se(this,"formatSerialNumber",(e,t)=>({...e,serialNumber:this.bufferToUtf8(t.length>7?t.slice(0,7):t)})),se(this,"formatTrack2Masked",(e,t,i)=>({...e,[t]:i,...this.formatExpPAN(i)})),se(this,"formatTrackWithDecode",(e,t,i,a)=>({...e,[t]:a,[`${t}DecodeStatus`]:0===i?"Ok":"Error",[`${t}DecodeStatusCode`]:i})),this.dataNames=["track1","track2","track3","ksn","magnePrint","magnePrintStatus","serialNumber","encSessionId","track1Masked","track2Masked","track3Masked"],this.offset=3}};function ne(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var oe=class extends re{constructor(e,t){super(e,t),ne(this,"parseTransactionStatus",e=>{let t=this.readTwoByteLength([e[1],e[2]]),i=e.slice(3);return i.length===t?this.parseNotifications(i):this.throwLenErr()}),ne(this,"parseNotifications",e=>{let t=e.slice(6),i=this.readTwoByteLength([t[0],t[1]]),a=t.slice(2),s=a[0],r=a[2];return a.length===i?{transactionStatus:{statusCode:s,statusMsg:this.TrxStatusEnum[s]||"Status code message not documented",progressCode:r,progressMsg:this.TrxProgressIndicator[r]||"Progress code message not documented"}}:this.throwLenErr()}),this.TrxStatusEnum=Object.freeze({0:"Transaction Started and Idle",1:"Card is Inserted",2:"Error",3:"Transaction Progress Change",4:"Waiting for User Response",5:"Timed Out",6:"Transaction Complete",7:"Cancelled by Host",8:"Card Removed",9:"Contactless Token Detected, Powering Up Card",10:"MSR Swipe Detected"}),this.TrxProgressIndicator=Object.freeze({0:"No transaction in progress",1:"Waiting for cardholder to present payment",2:"Powering up the card",3:"Selecting the application",4:"Waiting for user language selection",5:"Waiting for user application selection",6:"Initiating application",7:"Reading application data",8:"Offline data authentication",9:"Process restrictions",10:"Cardholder verification",11:"Terminal risk management",12:"Terminal action analysis",13:"Generating first application cryptogram",14:"Card action analysis",15:"Online processing",16:"Waiting online processing response",17:"Transaction Complete",18:"Transaction Error",19:"Transaction Approved",20:"Transaction Declined",21:"Transaction Cancelled by MSR Swipe",22:"EMV error - Conditions Not Satisfied",23:"EMV error - Card Blocked",24:"Application selection failed",25:"EMV error - Card Not Accepted",26:"Empty Candidate List",27:"Application Blocked",41:"Contactless Remove Card",42:"Collision Detected",43:"Refer to Mobile Device Prompt",44:"Contactless Transaction Complete",45:"Request Switch to ICC/MSR - Kernel has refused contactless payment",46:"Wrong Card Type (MSD or EMV)",47:"No Application Interchange Profile (Tag 82) Received",49:"Magnetic stripe decoding error.",60:"Magnetic stripe decoding during Technical Fallback. Revert to MSR, powering up but not receiving an Answer to Reset from card.",61:"Magnetic stripe card decoded during MSR Fallback. Device reverted to MSR, but encountered fatal errors.",62:"Magnetic stripe card decoded during a No Fallback MSR read."})}};function ce(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var he=class extends oe{constructor(e,t){super(e,t),ce(this,"parseEmvData",(e,t)=>t?{arqcData:this.convertArrayToHexString(e.slice(11)),arqcDataParsed:this.tlvParser(e.slice(13),!0)}:{signatureRequired:128===e[11]?"CBC-MAC checked in ARQC online response":1===e[11],batchData:this.convertArrayToHexString(e.slice(11)),batchDataParsed:this.tlvParser(e.slice(14),!0)}),ce(this,"parseEmvCommandResponse",e=>{const t=e.slice(4,6);return parseInt(t.join(""))?{code:parseInt(this.convertArrayToHexString(t),16),name:"StartTransactionError",message:this.emvResultCodes[t[1]]||"Transaction Error Message not yet documented"}:{code:0,message:"Success, transaction has started"}}),ce(this,"parseUserSelectionRequest",e=>({userSelectionRequest:{selectionType:0===e[0]?"Application Selection":"Language Selection",timeRemaining:e[1],menuItems:this.convertArrayToHexString(e.slice(2))}})),this.emvResultCodes=Object.freeze({129:"Failure, DUKPT scheme is not loaded",130:"Failure, DUKPT scheme is loaded but all of its keys have been used",131:"Failure, DUKPT scheme is not loaded (Security Level not 3 or 4)",132:"Invalid Total Transaction Time Field",133:"Invalid Card Type Field",134:"Invalid Options Field",135:"Invalid Amount Authorized Field",136:"Invalid Transaction Type Field",137:"Invalid Cash Back Field",138:"Invalid Transaction Currency Code Field",142:"Invalid Reporting Option",143:"Transaction Already In Progress",145:"Invalid Device Serial Number",150:"Invalid System Date and Time"})}};function de(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var le=class extends he{constructor(e,t){super(e,t),de(this,"getCardServiceBase",e=>new Promise((t,i)=>this.device?this.connectAndCache(e).then(e=>e.getCharacteristic(this.cardDataNotification)).then(e=>(this.logDeviceState(`[GATT NOTIFICATIONS]: Request to cache characteristics, start notifications, and attach listeners. || ${new Date}`),e.startNotifications())).then(e=>(e.removeEventListener("characteristicvaluechanged",this.cardDataHandler),e.addEventListener("characteristicvaluechanged",this.cardDataHandler),this.cardDataListener=e,Promise.resolve())).then(()=>this.cardService.getCharacteristic(this.commandCharId)).then(e=>(this.commandCharacteristic=e,window&&(window.removeEventListener("beforeunload",this.onDestroyHandler),window.addEventListener("beforeunload",this.onDestroyHandler)),Promise.resolve())).then(()=>this.cardService.getCharacteristic(this.dataReadyId)).then(e=>e.startNotifications()).then(e=>(e.removeEventListener("characteristicvaluechanged",this.dataReadyHandler),e.addEventListener("characteristicvaluechanged",this.dataReadyHandler),this.dataReadyCharacteristic=e,Promise.resolve())).then(()=>this.cardService.getCharacteristic(this.dataReadStatusId)).then(e=>(this.dataReadStatusCharacteristic=e,this.logDeviceState(`[GATT NOTIFICATIONS]: Success! Cached characteristics, started notifications, and attached listeners. || ${new Date}`),t({code:0,message:"Device Open"}))).catch(e=>i(e)):i(this.buildDeviceErr(E)))),de(this,"dataReadyHandler",e=>{let t=e.target.value,i=this.readByteArray(t);this.logDeviceState(`dataReady listener: ${this.convertArrayToHexString(i)}`),this.commandSent&&(this.commandRespAvailable=!0,this.commandSent=!1)}),de(this,"cardDataHandler",e=>{let t=e.target.value;if(255!==t.getUint8(0)){let e=this.readByteArray(t);this.rawData={...this.rawData,[e[0]]:e.slice(1)}}else{if(this.maxBlockId=t.getUint8(1),this.checkNotificationLength()){if(this.initialNotification=this.rleFormats[this.rawData[0][0]]?this.decodeRLE(this.rawData[0]):this.rawData[0],this.logDeviceState(this.rawData),0===this.initialNotification[0]||1===this.initialNotification[0])return this.returnToUser(this.transactionCallback)(this.parseHidData(this.buildInitialDataArray(!0)));{let e=this.convertArrayToHexString([this.initialNotification[7],this.initialNotification[8]]);return this.findNotificationType(e)}}this.sendErrToCallback(this.throwLenErr())}}),de(this,"findNotificationType",e=>{let t=this.buildInitialDataArray(!0);switch(e){case"0300":return this.logDeviceState("==Transaction Status=="),this.returnToUser(this.transactionStatusCallback)(this.parseTransactionStatus(t));case"0301":return this.logDeviceState("==Display Message Request=="),this.returnToUser(this.displayCallback)({displayMessage:this.bufferToUtf8(t.slice(11))});case"0302":return this.logDeviceState("==User Selection Request=="),this.logDeviceState(this.convertArrayToHexString(t)),this.returnToUser(this.transactionStatusCallback)(this.parseUserSelectionRequest(buildNotification));case"0303":return this.logDeviceState("==ARQC Message=="),this.returnToUser(this.transactionCallback)(this.parseEmvData(t,!0));case"0304":return this.logDeviceState("==Batch Data Message=="),this.returnToUser(this.transactionCallback)(this.parseEmvData(t,!1));default:this.logDeviceState(`Undocumented Notification ID: ${e}`,t),this.logDeviceState(this.convertArrayToHexString(t))}}),de(this,"startTransaction",e=>new Promise((t,i)=>this.device.gatt.connected?this.sendCommandWithResp(this.buildEmvCommand(e||{})).then(a=>{let s=this.parseEmvCommandResponse(a);return this.logDeviceState(s),0===s.code?t(s):918!==s.code?i(this.buildDeviceErr(s)):this.setDeviceDateTime().then(()=>this.delayPromise(500)).then(()=>t(this.startTransaction(e)))}).catch(e=>i(this.buildDeviceErr(e))):i(this.buildDeviceErr(B)))),de(this,"buildEmvCommand",e=>{let{timeout:t,cardType:i,transactionType:a,cashBack:s,currencyCode:r,reportVerbosity:n,emvOptions:o,authorizedAmount:c}=e;console.log(`timeout: ${t} || cardType: ${i} || transactionType: ${a} || emvOptions: ${o} || authorizedAmount: ${c} || cashBack: ${s} || currencyCode: ${r} || reportVerbosity: ${n}`);let h=[...this.emvCommandBase,t||60,i?this.cardTypes(i.toLowerCase()):3,void 0!==o?this.emvOptions[o.toLowerCase()]:128];return console.log("base command: ",h),h=c?h.concat(this.convertNumToAmount(c)):h.concat([0,0,0,0,1,0]),h=a?h.concat(this.transactionTypes[a.toLowerCase()]||0):h.concat(0),h=s?h.concat(this.convertNumToAmount(s)):h.concat(this.newArrayPartial(0,6)),h=r?h.concat(this.currencyCode[r.toLowerCase()]||this.currencyCode.default):h.concat([8,64]),h.push(n?this.statusVerbosity[n.toLowerCase()]||0:1),h}),de(this,"readCommandValue",()=>new Promise(e=>this.commandCharacteristic.readValue().then(t=>e(this.readByteArray(t))))),de(this,"readBatteryLevel",()=>new Promise(e=>this.sendCommandWithResp([69,0]).then(t=>e(t[2])))),de(this,"checkNotificationLength",()=>Math.max(...Object.keys(this.rawData))===this.maxBlockId-1),de(this,"sendCommandWithResp",e=>new Promise((t,i)=>this.commandCharacteristic?(this.logDeviceState(`Sending command: ${this.convertArrayToHexString(e)}`),this.commandSent=!0,this.commandCharacteristic.writeValue(Uint8Array.from(e)).then(()=>this.commandRespAvailable?Promise.resolve(!0):this.waitForDeviceResponse(15)).then(e=>(this.commandRespAvailable=!1,e?this.readCommandValue():i(this.buildDeviceErr(x)))).then(e=>t(e)).catch(e=>i(this.buildDeviceErr(e)))):i(this.buildDeviceErr(I)))),de(this,"returnToUser",e=>t=>(this.initialNotification=null,this.maxBlockId=null,this.rawData={},e(t))),de(this,"buildDateTimeCommand",e=>{let t=[73,34,0,0,3,12,0,28];t=t.concat(this.newArrayPartial(0,17));const i=e instanceof Date?e:new Date;return t.push(this.castDecToHex(i.getMonth()+1)),t.push(this.castDecToHex(i.getDate())),t.push(this.castDecToHex(i.getHours())),t.push(this.castDecToHex(i.getMinutes())),t.push(this.castDecToHex(i.getSeconds())),t.push(0),t.push(this.castDecToHex(i.getFullYear()-2008)),t=t.concat(this.newArrayPartial(0,4)),t}),de(this,"setDeviceDateTime",e=>new Promise((t,i)=>this.sendCommandWithResp(this.buildDateTimeCommand(e)).then(e=>t(e)).catch(e=>i(this.buildDeviceErr(e))))),de(this,"getKsn",()=>new Promise((e,t)=>this.device.gatt.connected?this.sendCommandWithResp([9,0]).then(e=>this.convertArrayToHexString(e.slice(2))).then(t=>e(t)):t(this.buildDeviceErr(R)))),de(this,"getDeviceSn",()=>new Promise(e=>this.sendCommandWithResp([0,1,3]).then(e=>this.bufferToUtf8(e.slice(2))).then(t=>e(t)))),de(this,"gatherDeviceInfo",()=>new Promise((e,t)=>{let i,a;this.readBatteryLevel().then(e=>(i=e,this.getDeviceSn())).then(t=>(a=t,e([i,a]))).catch(e=>t(e))})),de(this,"getDeviceInfo",()=>new Promise((e,t)=>this.device.gatt.connected?this.gatherDeviceInfo().then(t=>e({deviceName:this.device.name,deviceType:this.deviceType,batteryLevel:t[0],serialNumber:t[1],isConnected:this.device.gatt.connected})).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(B)))),de(this,"sendUserSelection",e=>new Promise((t,i)=>this.device.gatt.connected?this.sendCommandWithResp([73,8,0,0,3,2,0,2,0,e]).then(e=>(this.logDeviceState(`[User Selection Resp]: ${this.convertArrayToHexString(e)}`),t({userSelectionResponse:this.resultCodes[this.convertArrayToHexString(e.slice(4,6))]||"Unknown or undocumented result code"}))).catch(e=>i(this.buildDeviceErr(e))):i(this.buildDeviceErr(B)))),de(this,"buildArpcCommand",(e,t)=>[73,e+6,0,0,3,3,0,e,...t]),de(this,"sendArpc",e=>new Promise((t,i)=>this.sendArpcBase(e).then(e=>this.sendCommandWithResp(e)).then(e=>{this.logDeviceState(`[Send ARPC Resp]: ${this.convertArrayToHexString(e)}`);const i=e.length>5?this.convertArrayToHexString(e.slice(4,6)):"";return t({sendArpcResponse:this.resultCodes[i]||"Unknown or undocumented result code"})}).catch(e=>i(this.buildDeviceErr(e))))),de(this,"clearGattCache",()=>{window&&window.removeEventListener("beforeunload",this.onDestroyHandler),this.maxBlockId=null,this.initialNotification=null,this.rawData={},this.dataReadStatusCharacteristic=null,this.dataReadyCharacteristic=null,this.commandCharacteristic=null,this.cardDataListener=null}),de(this,"ceaseNotifications",()=>new Promise(e=>this.cardDataListener?this.cardDataListener.stopNotifications().then(()=>(this.cardDataListener.removeEventListener("characteristicvaluechanged",this.cardDataHandler),this.dataReadStatusCharacteristic.stopNotifications())).then(()=>(this.dataReadyCharacteristic.removeEventListener("characteristicvaluechanged",this.dataReadyHandler),e())):e())),de(this,"cancelTransaction",()=>new Promise((e,t)=>this.commandCharacteristic?this.commandCharacteristic.writeValue(this.cancelEmvCommand).then(()=>e()).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(I)))),de(this,"closeDevice",()=>new Promise((e,t)=>this.device.gatt.connected?this.ceaseNotifications().then(()=>(this.clearGattCache(),this.disconnect())).then(()=>e({code:0,message:"Device Closed"})).catch(e=>t(this.buildDeviceErr(e))):e({code:0,message:"Device Closed"}))),de(this,"clearSession",()=>new Promise((e,t)=>this.device&&this.device.gatt.connected?e("SCRA devices do not carry a session"):t(this.buildDeviceErr(B)))),this.transactionCallback=t.transactionCallback||t,this.displayCallback=t.displayCallback,this.transactionStatusCallback=t.transactionStatusCallback,this.userSelectionCallback=t.userSelectionCallback,this.maxBlockId=null,this.initialNotification=null,this.rawData={},this.dataReadStatusCharacteristic=null,this.dataReadyCharacteristic=null,this.commandCharacteristic=null,this.cardDataListener=null,this.cardDataNotification="0508e6f8-ad82-898f-f843-e3410cb60201",this.commandCharId="0508e6f8-ad82-898f-f843-e3410cb60200",this.dataReadyId="0508e6f8-ad82-898f-f843-e3410cb60202",this.dataReadStatusId="0508e6f8-ad82-898f-f843-e3410cb60203",this.emvOptions=Object.freeze({normal:0,bypasspin:1,forceonline:2,quickchip:128,pinbypassquickchip:129,forceonlinequickchip:130}),this.resultCodes=Object.freeze({"0000":"Success","038B":"Invalid Selection Status","038C":"Invalid Selection Result","038D":"Failure, no transaction currently in progress","038F":"Failure, transaction already in progress"}),this.emvCommandBase=[73,25,0,0,3,0,0,19],this.cancelEmvCommand=Uint8Array.of(73,6,0,0,3,4,0,0)}};function ue(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var me=class extends le{constructor(e,t){super(e,t),ue(this,"getCardService",()=>new Promise((e,t)=>this.getCardServiceBase(1).then(t=>e(t)).catch(e=>t(this.buildDeviceErr(e))))),ue(this,"requestCardSwipe",()=>new Promise((e,t)=>this.device.gatt.connected?e({code:0,message:d}):this.getCardServiceBase(1).then(()=>e({code:0,message:d})).catch(e=>t(this.buildDeviceErr(e))))),this.deviceType="eDynamo"}};function pe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ve=class extends le{constructor(e,t){super(e,t),pe(this,"getCardService",()=>new Promise((e,t)=>this.getCardServiceBase().then(t=>e(t)).catch(e=>t(this.buildDeviceErr(e))))),pe(this,"requestCardSwipe",()=>new Promise((e,t)=>this.device.gatt.connected?this.sendCommandWithResp(this.setHeadAlwaysOn).then(i=>0===parseInt(i)?e({code:0,message:d}):t(this.buildDeviceErr(M))).catch(e=>t(e)):this.getCardServiceBase().then(()=>this.sendCommandWithResp(this.setHeadAlwaysOn)).then(i=>0===parseInt(i)?e({code:0,message:d}):t(this.buildDeviceErr(M))).catch(e=>t(e)))),this.setHeadAlwaysOn=[88,1,1],this.deviceType="tDynamo"}};const ge=e=>()=>Promise.resolve(`${e?"SCRA":"PinPad"} devices do not use this command`);class fe{constructor(e){let{getCardService:t,startTransaction:i,cancelTransaction:a,sendCommandWithResp:s,clearSession:r,closeDevice:n,getDeviceInfo:o,requestCardSwipe:c,isDeviceConnected:h,disconnect:d,requestPinEntry:l,setDisplayMessage:u,sendUserSelection:m,sendArpc:p,setDeviceDateTime:v,requestTipOrCashback:g}=e;this.openDevice=t,this.startTransaction=i,this.cancelTransaction=a,this.sendCommand=s,this.clearSession=r,this.closeDevice=n,this.deviceInfo=o,this.requestCardSwipe=c,this.isDeviceOpen=h,this.forceDisconnect=d,this.requestPinEntry=l||ge(!0),this.setDisplayMessage=u||ge(!0),this.sendUserSelection=m||ge(),this.sendArpcResponse=p||(()=>Promise.resolve("Feature Pending Completion")),this.setDeviceDateTime=v||ge(),this.requestTipOrCashback=g||ge(!0)}}const be={eDynamo:(e,t)=>new me(e,t),tDynamo:(e,t)=>new ve(e,t),dynaProGo:(e,t)=>new ae(e,t),[l]:(e,t)=>new te(e,t)},Ce=(e,t,i)=>({id:e.id,name:e.name,deviceType:i,deviceInterface:new fe(be[i](e,t))}),De=new RegExp(/^eDynamo-/),Se=new RegExp(/^tDynamo-/),ye=new RegExp(/^DPMini/),Te=new RegExp(/^DPG/),we=(e,t)=>{if(t){const e=(e=>{const t=["dynaProGo",l,"eDynamo","tDynamo"];let i="";for(let a=0;a<t.length;a++)if(e.toLowerCase()===t[a].toLowerCase()){i=t[a];break}return i})(t);if(console.log("[!!]: ",e),e)return e}return i=e,Se.test(i)?"tDynamo":De.test(i)?"eDynamo":Te.test(i)?"dynaProGo":ye.test(i)?l:"";var i},Ae=(e,t,i)=>new Promise((a,n)=>{if("object"==typeof e&&void 0===e.transactionCallback)return n("When providing multiple callbacks in an object, 'transactionCallback' must be provided");e=(e=>{const t="function"==typeof(e=e||(e=>{console.warn("Callback not provided to 'scanForDevices' function. Please provide at least one callback function to this method"),console.log("transactionCallback data: ",e)})),i=i=>e[i]?e[i]:t?e:e.transactionCallback;return e.errorCallback=e.errorCallback||(e=>console.error("[MagensaBluetooth Internal Error]: ",e)),e.transactionStatusCallback=e.transactionStatusCallback||i("transactionStatusCallback"),e.userSelectionCallback=e.userSelectionCallback||i("userSelectionCallback"),e.displayCallback=e.displayCallback||i("displayCallback"),e.disconnectHandler=e.disconnectHandler||i("transactionCallback"),e})(e);const o=t?(e=>({filters:[{namePrefix:e}],optionalServices:["0508e6f8-ad82-898f-f843-e3410cb60104","0508e6f8-ad82-898f-f843-e3410cb60103","0508e6f8-ad82-898f-f843-e3410cb60101","0508e6f8-ad82-898f-f843-e3410cb60202","device_information"],keepRepeatedDevices:!1,acceptAllAdvertisements:!1}))(t):r;return navigator.bluetooth.requestDevice(o).then(t=>{const s=we(t.name,i);return s?a(Ce(t,e,s)):(r=t,new Promise((e,t)=>{let i;return r.gatt.connect().then(e=>e.getPrimaryService("device_information")).then(e=>e.getCharacteristic("model_number_string")).then(e=>e.readValue()).then(e=>(i=new TextDecoder("utf-8").decode(e).trim(),Promise.resolve(r.gatt.disconnect()))).then(()=>e(i)).catch(i=>i.code===k.errorCode&&i.name===k.errorName&&i.message.includes("0000180a-0000-1000-8000-00805f9b34fb")?r.gatt.connected?Promise.resolve(r.gatt.disconnect()).then(()=>e("dynaProGo")):e("dynaProGo"):t(i))})).then(i=>i?a(Ce(t,e,i)):n("Selected device is not supported")).catch(e=>n(e));var r}).catch(e=>n("object"==typeof e?new s(e):"Selected device is not supported"))})}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZXJyb3JIYW5kbGVyL2FwaUVycm9yLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2NvbmZpZ3VyYXRpb25zL2luZGV4LmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3V0aWxzL2luZGV4LmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3BhcnNlcnMvc3dpcGVQYXJzZXIuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3BhcnNlcnMvZW12UGFyc2VyLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2Vycm9ySGFuZGxlci9sZW5ndGhFcnJvci5qcyIsIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC8uL3NyYy9lcnJvckhhbmRsZXIvZGV2aWNlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZXJyb3JIYW5kbGVyL2luZGV4LmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2Vycm9ySGFuZGxlci9lcnJDb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZGV2aWNlcy9iYXNlQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvdXRpbHMvcGluVmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC8uL3NyYy91dGlscy9waW5VdGlscy5qcyIsIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC8uL3NyYy9wYXJzZXJzL3BpbkNvbmZpZ3VyYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvcGFyc2Vycy9waW5TdGF0dXNQYXJzZXIuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvY29tbWFuZEJ1aWxkZXJzL3BpbkNtZEJ1aWxkZXIuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZGV2aWNlcy9waW5QYWQuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZGV2aWNlcy9keW5hUHJvTWluaS5qcyIsIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC8uL3NyYy9kZXZpY2VzL2R5bmFQcm9Hby5qcyIsIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC8uL3NyYy9wYXJzZXJzL3NjcmFTd2lwZVBhcnNlci5qcyIsIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC8uL3NyYy9wYXJzZXJzL3RyeFN0YXR1c1BhcnNlci5qcyIsIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC8uL3NyYy9wYXJzZXJzL3NjcmFFbXZQYXJzZXIuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZGV2aWNlcy9zY3JhLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2RldmljZXMvZUR5bmFtby5qcyIsIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC8uL3NyYy9kZXZpY2VzL3REeW5hbW8uanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvdXRpbHMvaW5zdGFuY2lhdGVEZXZpY2UuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvdXRpbHMvaWRlbnRpZnlEZXZpY2UuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZGV2aWNlRW50cnkuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkFwaUVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJjb2RlIiwic3VwZXIiLCJ0aGlzIiwiYWxsRGV2aWNlQ29uZmlnIiwiZmlsdGVycyIsInNlcnZpY2VzIiwib3B0aW9uYWxTZXJ2aWNlcyIsImtlZXBSZXBlYXRlZERldmljZXMiLCJhY2NlcHRBbGxBZHZlcnRpc2VtZW50cyIsIlV0aWxpdGllcyIsImxvZ0luZm8iLCJsb2dFdmVudCIsIkN1c3RvbUV2ZW50IiwiYnViYmxlcyIsImRldGFpbCIsImRpc3BhdGNoRXZlbnQiLCJhcnJheSIsIkFycmF5IiwiZnJvbSIsImJ5dGUiLCJ0b1N0cmluZyIsInNsaWNlIiwiam9pbiIsInRvVXBwZXJDYXNlIiwidHdvQnl0ZXMiLCJhcnJheUJ1ZmZlciIsIlRleHREZWNvZGVyIiwiZGVjb2RlIiwiVWludDhBcnJheSIsIm51bSIsInBhcnNlSW50IiwicmVwZXRpdGlvbnMiLCJmaWxsIiwiZGF0YVZpZXciLCJ2YWx1ZUFycmF5IiwiYnl0ZUxlbmd0aCIsInB1c2giLCJnZXRVaW50OCIsImhleFN0cmluZyIsImFzY2lpUmVzcCIsImxlbmd0aCIsInN1YnN0ciIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsInRyaW0iLCJoZXhTdHIiLCJieXRlcyIsImN1cnJlbnQiLCJhcnJheVNlZ21lbnQiLCJyZXR1cm5TZWdtZW50IiwibmV4dEluZGV4IiwiaW5pdGlhbExlbmd0aCIsIm5ld0FycmF5UGFydGlhbCIsImNoZWNrRm9yUmxlIiwicmV0dXJuQXJyYXkiLCJNYXRoIiwibWluIiwia2V5cyIsInJhd0RhdGEiLCJtYXhCbG9ja0lkIiwiY29uY2F0IiwiY2hlY2tSbGUiLCJybGVGb3JtYXRzIiwiaW5pdGlhbE5vdGlmaWNhdGlvbiIsImRlY29kZVJMRSIsImN1cnJlbmN5U3RyaW5nIiwiY3VycmVuY3kiLCJ0b0xvd2VyQ2FzZSIsIm9wdGlvbmFsTGVuIiwic3RyaW5nTnVtIiwicmV0dXJuQXJyIiwic3Vic3RyaW5nIiwiZGVsYXkiLCJwYXNzZWRWYWx1ZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImJ5dGVBcnJheSIsImNvbnZlcnRBcnJheVRvSGV4U3RyaW5nIiwiZnJlZXplIiwiMCIsIlN3aXBlUGFyc2VyIiwic3RyaW5nRGF0YSIsImJ1ZmZlclRvVXRmOCIsImluZGV4T2YiLCJmb3JtYXR0ZWRTdHJpbmciLCJzcGxpdEV4cFBBTiIsIm1hc2tlZFBBTiIsIkxhc3Q0IiwiZXhwaXJhdGlvbkRhdGUiLCJzZXJ2aWNlQ29kZSIsImV4cFBBTiIsInJlcGxhY2UiLCJzcGxpdCIsImV4cCIsImZvcm1hdHRlZEV4cCIsInN3aXBlTGlzdGVuaW5nIiwiZHBNaW5pIiwiY29uZmlnU3RyIiwibm9TZXNzaW9uVG9DbGVhciIsImdhdHRCdXN5Iiwic3VjY2Vzc2Z1bENsb3NlIiwiY2FyZFR5cGVBbGwiLCJjYXJkVHlwZXNPYmoiLCJFbXZQYXJzZXIiLCJkYXRhIiwiaXNNc3IiLCJpVGFnIiwiYnl0ZVZhbHVlIiwibGVuZ3RoVmFsdWUiLCJkYXRhTGVuZ3RoIiwicmVzdWx0IiwiaVRMViIsImJUYWciLCJ0YWdCeXRlcyIsIlRhZ0J1ZmZlciIsImJNb3JlVGFnQnl0ZXMiLCJtb3JlVGFnQnl0ZXNGbGFnMSIsIm1vcmVUYWdCeXRlc0ZsYWcyIiwibW9yZUxlbmd0aEZsYWciLCJuTGVuZ3RoQnl0ZXMiLCJvbmVCeXRlTGVuZ3RoTWFzayIsImlMZW4iLCJ0YWdCeXRlIiwibGVuIiwidmFsdWVCeXRlcyIsImhleE9yQXNjaWlGb3JtYXR0ZXIiLCJjb25zdHJ1Y3RlZEZsYWciLCJ0cnhTdGF0dXNUb1N0cmluZyIsImhleFRvQXNjaWkiLCJMZW5ndGhFcnJvciIsIkRldmljZUVycm9yIiwiRXJyb3JIYW5kbGVyIiwiY2FsbGJhY2tzIiwiZXJyIiwiRE9NRXhjZXB0aW9uIiwiZXJyb3JDYWxsYmFjayIsIm5vdEZvdW5kT2JqIiwiZXJyb3JDb2RlIiwiZXJyb3JOYW1lIiwiYXBpTmV0d29ya0VyciIsImRldmljZU5vdEZvdW5kIiwiZ2F0dFNlcnZlck5vdENvbm5lY3RlZCIsImNvbW1hbmROb3RTZW50IiwiZGV2aWNlTm90T3BlbiIsImNvbW1hbmROb3RTZW50RnJvbUhvc3QiLCJyZWFkRmFpbGVkIiwicmVzcG9uc2VOb3RSZWNlaXZlZCIsImdldFNlcnZpY2VGYWlsIiwiY29tbWFuZE5vdEFjY2VwdGVkIiwibWlzc2luZ1JlcXVpcmVkRmllbGRzIiwiZmllbGROYW1lIiwid3JvbmdJbnB1dFR5cGVzIiwiYWNjZXB0YWJsZVR5cGVzIiwicHJvcGVydHlOYW1lIiwid3JvbmdJbnB1dFZhbHVlcyIsImFjY2VwdGFibGVWYWxzIiwiRGV2aWNlQmFzZSIsImRldmljZSIsImNhcmRUeXBlU3RyIiwiZGV2aWNlVHlwZSIsInJlamVjdCIsImxvZ0RldmljZVN0YXRlIiwiRGF0ZSIsImdhdHQiLCJjb25uZWN0IiwidGhlbiIsInNlcnZlciIsImdhdHRTZXJ2ZXIiLCJidWlsZERldmljZUVyciIsImNvbm5lY3RlZCIsImRpc2Nvbm5lY3QiLCJzZXJ2aWNlSW5kZXgiLCJmaW5kUHJpbWFyeVNlcnZpY2UiLCJzZXJ2aWNlIiwiY2F0Y2giLCJnZXRQcmltYXJ5U2VydmljZSIsImRldmljZVVVSURzIiwiY2FyZFNlcnZpY2UiLCJhZGRFdmVudExpc3RlbmVyIiwiZGlzY29ubmVjdEhhbmRsZXIiLCJvcHRpb25hbEluZGV4IiwidHJ5VG9Db25uZWN0IiwidHJ5Q291bnQiLCJpbm5lclJlc29sdmUiLCJpbm5lclJlamVjdCIsImNhY2hlQ2FyZFNlcnZpY2VCYXNlIiwiY2FjaGVTZXJ2aWNlUmVzcCIsImNsZWFyR2F0dENhY2hlIiwiYXJwY1Jlc3AiLCJkYXRhTGVuIiwiaW5wdXREYXRhIiwiaGV4VG9CeXRlcyIsImJ1aWxkQXJwY0NvbW1hbmQiLCJtYXhUcmllcyIsIndhaXRGb3JSZXNwb25zZSIsInRyeU51bWJlciIsImNvbW1hbmRSZXNwQXZhaWxhYmxlIiwiZXZlbnQiLCJkaXNjb25uZWN0Q2FsbGJhY2siLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic3RhdHVzVmVyYm9zaXR5IiwiY3VycmVuY3lDb2RlIiwidHJhbnNhY3Rpb25UeXBlcyIsIlBpblZhbGlkYXRpb24iLCJjYWxsQmFja3MiLCJwYXJlbnRSZWplY3QiLCJhbW91bnQiLCJwcm9wTmFtZSIsImRlZmF1bHRWYWwiLCJjb252ZXJ0TnVtVG9BbW91bnQiLCJ2YWxpZGF0aW9uQ29uZmlnIiwicHJvcCIsInZhbGlkVHlwZXMiLCJ2YWxpZFZhbHVlcyIsImNvbmRpdGlvbiIsInR5cGVJc1ZhbGlkIiwiaW5keCIsInZhbHNBcmVWYWxpZCIsImluZGV4IiwiUGluVXRpbHMiLCJiaW5hcnlOdW0iLCJudWxsVGVybWluYXRlZEFycmF5IiwidGFyZ2V0SW5kZXgiLCJtYXhMZW4iLCJtaW5MZW4iLCJtYXhMZW5ndGgiLCJtaW5MZW5ndGgiLCJsYW5ndWFnZVNlbGVjdGlvbiIsIndhaXRNZXNzYWdlIiwidmVyaWZ5UGluIiwicGluQmxvY2tGb3JtYXQiLCJsYW5ndWFnZVByb21wdHMiLCJiaW5hcnlSZXN1bHQiLCJkaXNhYmxlZCIsIlBhcnNlUGluQ29uZmlnIiwiY29uZmlnQXJyIiwiZmlyc3REZXZpY2VDb250cm9sQnl0ZSIsImRlY2ltYWxUb0JpbmFyeSIsInNlY29uZERldmljZUNvbnRyb2xCeXRlIiwibWFza0NvbmZpZ3VyYXRpb25CeXRlIiwibXNyQ29uZmlndXJhdGlvbkJ5dGUiLCJtYXNrQ2hhcmFjdGVyIiwiZmluZE1hc2tDaGFyYWN0ZXIiLCJsZWFkaW5nVW5tYXNrZWRMZW5ndGgiLCJ0cmFpbGluZ1VubWFza2VkTGVuZ3RoIiwiZW12TDJJY3NDb25maWciLCJlbXZMMkNvbmZpZ09wdGlvbnMiLCJjb250YWN0bGVzc0NvbmZpZyIsImNvbnRhY3RsZXNzQnl0ZSIsImNvbnRhY3RsZXNzU3VwcG9ydCIsImVuYWJsZWRCcmFuZHMiLCJjb250YWN0bGVzc0d1aUNvbnRyb2xzIiwibnVtQ2hhciIsIm51bUNoYXJUb0hleCIsIm51bUNoYXJUb0FzY2lpIiwiZGV2aWNlQ29udHJvbEJ5dGUiLCJyZXF1aXJlTXV0dWFsQXV0aCIsInN0cmluZ051bVRvQm9vbCIsIm1zckVuY3J5cHRpb25WYXJpYW50IiwiaXNDbGVhclRleHRFbmFibGVkIiwiaXNCZWVwZXJNb2RlRW5hYmxlZCIsImlzQml0bWFwTG9ja2VkIiwiaXNDb25maWd1cmF0aW9uTG9ja2VkIiwiZGV2aWNlQ3RybEJ5dGUiLCJpc0FycGNNYWNFbmFibGVkIiwiaXNGaW5hbmNpYWxJY2NDYXJkVHlwZVJlcG9ydGluZ0VuYWJsZWQiLCJhcnFjQmF0Y2hEYXRhT3V0cHV0Rm9ybWF0IiwibWFza0NvbmZpZ0J5dGUiLCJpc0lzb01hc2tFbmFibGVkIiwiaXNDaGVja0RpZ2l0RW5hYmxlZCIsImlzTXMyUG9pbnQwRW5hYmxlZCIsIm1zckNvbmZpZ0J5dGUiLCJpc0FBTVZBY2FyZEVuYWJsZWQiLCJ0cmFjazNEYXRhIiwidHJhY2tEYXRhT3B0aW9ucyIsInRyYWNrMkRhdGEiLCJ0cmFjazFEYXRhIiwiUGluU3RhdHVzUGFyc2VyIiwiY2FyZEhvbGRlclN0YXR1c0J5dGUiLCJlbXZDYXJkaG9sZGVyU3RhdHVzIiwiY2FyZGhvbGRlclN0YXR1c0lkcyIsInN0YXR1c0lkIiwib3BlcmF0aW9uU3RhdHVzIiwiZGlzcGxheVN0YXR1cyIsImZpbmRPcGVyYXRpb25TdGF0dXMiLCJjb21tYW5kUmVzcCIsImNvbnNvbGUiLCJsb2ciLCJyZXF1ZXN0ZWRTbiIsInNlcmlhbE51bWJlciIsImZpbmROdWxsVGVybWluYXRlZFN0cmluZyIsImdldFNlcmlhbE51bWJlciIsInJlcXVlc3RlZEtzbiIsImtzbiIsImdldEtzbkF2YWlsYWJsZSIsImJpZ0Jsb2NrRGF0YSIsImFycWNBcnJpdmluZyIsImFycWNUb3RhbExlbiIsInJlYWRUd29CeXRlTGVuZ3RoIiwiYmF0Y2hEYXRhQXJyaXZpbmciLCJiYXRjaFRvdGFsTGVuIiwidHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayIsImJ1ZmZlclR5cGUiLCJidWZmZXJUeXBlcyIsImFycWMiLCJidWlsZEluaXRpYWxEYXRhQXJyYXkiLCJkYXRhRm9yQXJxYyIsImNhcmREYXRhT2JqIiwiYXJxY0RhdGEiLCJhcnFjRGF0YVBhcnNlZCIsInRsdlBhcnNlciIsImlzUXVpY2tDaGlwVHJhbnNhY3Rpb24iLCJ0cmFuc2FjdGlvbkNhbGxiYWNrIiwiYmF0Y2giLCJkYXRhRm9yQmF0Y2giLCJ0cmFuc2FjdGlvbkhhc1N0YXJ0ZWQiLCJoYXNUaXAiLCJwYXJzZWRCYXRjaERhdGEiLCJpc1NpZ25hdHVyZVJlcXVpcmVkIiwiZmluZCIsInRhZyIsImJhdGNoRGF0YSIsImJhdGNoRGF0YVBhcnNlZCIsInNpZ25hdHVyZVJlcXVpcmVkIiwiaGFuZGxlQXJxY0JpZ0Jsb2NrRmluaXNoIiwiaGFuZGxlQmF0Y2hCaWdCbG9ja0ZpbmlzaCIsImNhcmRob2xkZXJSZXNwIiwiZmluZEVtdkNhcmRob2xkZXJTdGF0dXMiLCJhbW91bnRDb25maXJtZWQiLCJhcHBsaWNhdGlvbk9yTGFiZWxOYW1lIiwibWV0aG9kU2VsZWN0ZWQiLCJ0bHZEYXRhIiwidW5kb2N1bWVudGVkRGF0YSIsImNhcmRTdGF0dXMiLCJjYXJkVHlwZSIsImNhcmRUeXBlc0VudW0iLCJhY2tSZXNwIiwiQUNLU1RTIiwiY29tbWFuZFR5cGUiLCJwaW5Db21tYW5kSWRzIiwiZGV2aWNlUmVzcCIsImRldmljZVN0YXRlIiwic2Vzc2lvblN0YXRlIiwicGFyc2VTZXNzaW9uU3RhdGUiLCJkZXZpY2VTdGF0dXMiLCJwYXJzZURldmljZVN0YXR1cyIsImRldmljZUNlcnRTdGF0dXMiLCJwYXJzZUNlcnRTdGF0dXMiLCJoYXJkd2FyZVN0YXR1cyIsInBhcnNlSGFyZHdhcmVTdGF0dXMiLCJhZGRpdGlvbmFsSW5mbyIsInBhcnNlQWRkaXRpb25hbEluZm8iLCJiaW5hcnlTdHJpbmciLCJwb3dlckRpZENoYW5nZSIsImNhcmREYXRhSXNBdmFpbGFibGUiLCJwYW5QYXJzZWRGcm9tQ2FyZCIsImV4dGVybmFsUGFuU2VudCIsImFtb3VudFdhc1NlbnQiLCJtc3JDcmxDZXJ0RXhpc3RzIiwicGluQ3JsQ2VydEV4aXN0cyIsIm1mZ1VuYmluZENlcnRFeGlzdHMiLCJtc3JDYUNlcnRFeGlzdHMiLCJwaW5DYUNlcnRFeGlzdHMiLCJkZXZpY2VDYUNlcnRFeGlzdHMiLCJkZXZpY2VDZXJ0RXhpc3RzIiwicGluS2V5U3RhdHVzIiwicGluS2V5U3RhdHVzRW51bSIsIm1zcktleVN0YXR1cyIsIm1zcktleVN0YXR1c0VudW0iLCJ0YW1wZXJEZXRlY3RlZCIsImlzQXV0aGVudGljYXRlZCIsImRldmljZUVycm9yRGV0ZWN0ZWQiLCJJRTNfb25seSIsIlNSRUQiLCJNYWdIZWFkSXNQcm9ncmFtbWVkIiwidGFtcGVyU2Vuc29yc0FyZUFjdGl2ZSIsIklDQ19BY3F1aXJlck1hc3RlcktleUlzSW5qZWN0ZWQiLCJJQ0NfU2Vzc2lvbktleUlzQWN0aXZlIiwiQ0FQS19FbXZEYXRhYmFzZUlzQ29ycnVwdGVkIiwiRW12VGVybWluYWxEYXRhYmFzZUlzQ29ycnVwdGVkIiwiY2FyZElzUHJlc2VudEluQ2hpcENhcmRDb25uZWN0b3IiLCJwYXJ0aWFsTm90aWZpY2F0aW9uIiwidHJhY2tLZXkiLCJjYXJkRGF0YUlkcyIsImZvcm1hdEV4cFBBTiIsIm1hZ25lUHJpbnRTdGF0dXMiLCJjb252ZXJ0U3RhdHVzVG9TdHJpbmciLCJwaW5SZXNwIiwicGluRGF0YSIsInBpbktzbiIsImVuY3J5cHRlZFBpbkJsb2NrIiwic2VsZWN0aW9uUmVzcCIsImRldmljZUtleXMiLCJrZXlQcmVzc2VkIiwicmVwb3J0IiwicmVwb3J0TW9kZSIsInRheCIsInRheFJhdGUiLCJ0aXBPckNhc2hiYWNrQW1vdW50IiwiUGluQ21kQnVpbGRlciIsInRpbWVvdXQiLCJpc0ZhbGxiYWNrIiwidG9uZUNob2ljZSIsImRpc3BsYXlUeXBlIiwiZGlzcGxheVR5cGVzIiwicGluVGltZW91dCIsInRyYW5zYWN0aW9uVHlwZSIsImNhc2hCYWNrIiwiaXNRdWlja0NoaXAiLCJhdXRob3JpemVkQW1vdW50IiwiZW12T3B0aW9ucyIsInRheEFtb3VudCIsInRheFBlcmNlbnQiLCJ0aXBBbW91bnQiLCJiYWxhbmNlQmVmb3JlR2VuQUMiLCJiYWxhbmNlQWZ0ZXJHZW5BQyIsInRyeENhdGVnb3J5Q29kZSIsInZhbGlkYXRvciIsInZhbGlkYXRlQW1vdW50IiwiY29tbWFuZCIsImNhcmRUeXBlcyIsImF1dGhBbW91bnQiLCJjYXNoYmFja0FtbnQiLCJiYWxhbmNlQmVmb3JlQW1udCIsImJhbGFuY2VBZnRlckFtbnQiLCJkb2xsYXIiLCJ0YXhBbW50IiwidGlwQW1udCIsIm1heFBpbkxlbmd0aCIsIm1pblBpbkxlbmd0aCIsInBpbkRpc3BsYXlPcHRpb25zIiwicGluQ21kIiwiZmluZFBpbkxlbmd0aCIsImJ1aWxkUGluT3B0aW9uc0J5dGUiLCJzZW5kQmlnQmxvY2tEYXRhIiwidHJhbnNhY3Rpb25BbW91bnQiLCJjYWxjdWxhdGVkVGF4QW1vdW50IiwidGlwU2VsZWN0aW9uTW9kZSIsImxlZnRCdXR0b24iLCJtaWRkbGVCdXR0b24iLCJyaWdodEJ1dHRvbiIsInByb3BzVG9WYWxpZGF0ZSIsInZhbGlkYXRlUmVxdWlyZWRJbnB1dHMiLCJ0aXBDYXNoYmFja0NtZCIsIm9uZWJlZXAiLCJ0cnhBbW50IiwiY2FsY1RheEFtbnQiLCJkaXNwbGF5VGltZSIsIm1lc3NhZ2VJZCIsIlBpblBhZCIsInBhcmVudFJlc29sdmUiLCJjb25uZWN0QW5kQ2FjaGUiLCJnZXRDaGFyYWN0ZXJpc3RpYyIsImRldmljZVRvSG9zdExlbiIsImNoYXJhY3RlcmlzdGljIiwic3RhcnROb3RpZmljYXRpb25zIiwiZGF0YVdhdGNoZXIiLCJjYXJkRGF0YUxpc3RlbmVyIiwiZGV2aWNlVG9Ib3N0RGF0YSIsInJlY2VpdmVEYXRhQ2hhciIsImRldmljZUZyb21Ib3N0TGVuIiwic2VuZExlblRvRGV2aWNlIiwiZGV2aWNlRnJvbUhvc3REYXRhIiwiY29tbWFuZENoYXJhY3RlcmlzdGljIiwib25EZXN0cm95SGFuZGxlciIsImRlbGF5UHJvbWlzZSIsImRhdGFFdmVudCIsInRhcmdldCIsImNvbW1hbmRTZW50IiwicmVhZENvbW1hbmRSZXNwIiwicmVhZFZhbHVlIiwicmVhZFZhbHVlSGFuZGxlciIsInJlYWRCeXRlQXJyYXkiLCJyZXBvcnRJZHMiLCJyZXNwb25zZUFjayIsInBhcnNlQWNrUmVzcG9uc2UiLCJkZXZpY2VTdGF0ZVJlcG9ydCIsImhhbmRsZURldmljZVN0YXRlUmVwb3J0IiwiY2FyZFN0YXR1c1JlcG9ydCIsImhhbmRsZUNhcmRTdGF0dXNSZXBvcnQiLCJjYXJkRGF0YVJlcG9ydCIsImhhbmRsZUNhcmREYXRhUmVwb3J0IiwiaGFuZGxlQ2FyZGhvbGRlclN0YXR1c1JlcG9ydCIsImVtdkNvbXBsZXRpb24iLCJoYW5kbGVFbXZDb21wbGV0aW9uIiwiaGFuZGxlQmlnQmxvY2tEYXRhIiwiZ2V0S3NuIiwiZm9ybWF0S3NuQW5kU24iLCJyZXF1ZXN0U24iLCJmb3JtYXRTZXJpYWxOdW1iZXIiLCJkZXZpY2VDb25maWciLCJwYXJzZURldmljZUNvbmZpZ3VyYXRpb24iLCJwaW5SZXNwb25zZSIsInBhcnNlUGluUmVzcG9uc2UiLCJzZWxlY3Rpb25SZXNwb25zZSIsInBhcnNlQ2FyZGhvbGRlclJlc3BvbnNlIiwiZGlzcGxheVJlc3AiLCJ0aXBDYXNoYmFja1JlcG9ydCIsInBhcnNlVGlwQ2FzaGJhY2tSZXBvcnQiLCJwYXJzZUVtdkNvbXBsZXRpb24iLCJoYW5kbGVCaWdCbG9ja0JlZ2luIiwibWF4IiwiaGFuZGxlQmlnQmxvY2tGaW5pc2giLCJwYXJzZUVtdkNhcmRob2xkZXJJbnRlcmFjdGlvblN0YXR1cyIsInBhcnNlQ2FyZFN0YXR1c1JlcG9ydCIsInN3aXBlSGFzQmVndW4iLCJzZW5kQ29tbWFuZFdpdGhSZXNwIiwic2VuZEVyclRvQ2FsbGJhY2siLCJkYXRhR2F0aGVyZWQiLCJzd2lwZURhdGEiLCJwYXJzZURldmljZVN0YXRlUmVwb3J0IiwicGFyc2VDYXJkRGF0YSIsInN3aXBlT3B0aW9ucyIsImNsZWFyU2Vzc2lvbkNtZCIsImJ1aWxkU3dpcGVDb21tYW5kIiwicmVzcCIsImJ1aWxkRW12Q29tbWFuZCIsImVtdkNvbW1tYW5kIiwicGluT3B0aW9ucyIsImJ1aWxkUGluQ29tbWFuZCIsImRhdGFUeXBlIiwiYmxvY2taZXJvIiwibGVnYWN5RGF0YSIsInNlbmRQaW5Db21tYW5kIiwic2VuZEV4dGVuZGVkQmlnQmxvY2tEYXRhIiwibnVtYmVyT2ZCbG9ja3MiLCJjZWlsIiwid29ya2luZ09uUHJvbWlzZSIsImNvbW1hbmRCbG9ja3MiLCJiZWdpblF1ZXVlIiwiYmVnaW5RdWV1ZVJlc29sdmUiLCJiZWdpblF1ZXVlUmVqZWN0IiwiZGF0YUJsb2NrIiwic2hpZnQiLCJxdWV1ZWRQcm9taXNlIiwiZW5xdWV1ZSIsImJsb2NrIiwiZGF0YUZvckJsb2NrIiwiYmxvY2tDbWQiLCJiZWdpblF1ZVJlc3AiLCJzZW5kQXJwY0Jhc2UiLCJhcnBjQ21kIiwiY21kIiwidGlwQ2FzaGJhY2tPcHRpb25zIiwiYnVpbGRUaXBPckNhc2hiYWNrQ21kIiwiZGlzcGxheU9wdGlvbnMiLCJidWlsZERpc3BsYXlDbWQiLCJ3cml0ZUNvbW1hbmQiLCJ3cml0ZVZhbHVlIiwib2YiLCJ3YWl0Rm9yRGV2aWNlUmVzcG9uc2UiLCJ3YWl0UmVzcCIsInRyeUNvbW1hbmRBZ2FpbiIsInJlc3BvbnNlIiwiY2xlYXJJbnRlcm5hbFN0YXRlIiwic3RvcE5vdGlmaWNhdGlvbnMiLCJjbGVhclNlc3Npb24iLCJjbG9zZVBpbkRldmljZSIsImVuZFNlc3Npb24iLCJyZXF1ZXN0Q2FyZFN3aXBlIiwiRHBNaW5pIiwiZ2F0aGVyRGV2aWNlSW5mbyIsImRldmljZUluZm8iLCJjaGVja0lmRGV2aWNlSWRsZSIsImdldERldmljZUluZm9Qcm9jZWVkIiwiZGV2aWNlTmFtZSIsImlzQ29ubmVjdGVkIiwid2FpdEZvclNuIiwicmV0dXJuU24iLCJnZXREZXZpY2VJbmZvQmFzZSIsIkR5bmFQcm9HbyIsIlNjcmFTd2lwZVBhcnNlciIsIm9mZnNldCIsInRyYWNrMURlY29kZVN0YXR1cyIsInRyYWNrMkRlY29kZVN0YXR1cyIsInRyYWNrM0RlY29kZVN0YXR1cyIsInRyYWNrMUxlbiIsInRyYWNrMkxlbiIsInRyYWNrM0xlbiIsImNhcmRFbmNvZGVUeXBlIiwidHJhY2sxU3RhcnQiLCJ0cmFjazFFbmQiLCJ0cmFjazJTdGFydCIsInRyYWNrMkVuZCIsInRyYWNrM1N0YXJ0IiwidHJhY2szRW5kIiwibWFnbmVQcmludFN0YXR1c1N0YXJ0IiwibWFnbmVQcmludFN0YXR1c0VuZCIsIm1hZ25lUHJpbnRMZW4iLCJtYWduZVByaW50U3RhcnQiLCJtYWduZVByaW50RW5kIiwic2VyaWFsTnVtYmVyU3RhcnQiLCJzZXJpYWxOdW1iZXJFbmQiLCJkZXZpY2VFbmNTdGF0dXNTdGFydCIsImRldmljZUVuY1N0YXR1c0VuZCIsImtzblN0YXJ0Iiwia3NuRW5kIiwidHJhY2sxTWFza2VkTGVuIiwidHJhY2syTWFza2VkTGVuIiwidHJhY2szTWFza2VkTGVuIiwidHJhY2sxTWFza2VkU3RhcnQiLCJ0cmFjazFNYXNrZWRFbmQiLCJ0cmFjazJNYXNrZWRTdGFydCIsInRyYWNrMk1hc2tlZEVuZCIsInRyYWNrM01hc2tlZFN0YXJ0IiwidHJhY2szTWFza2VkRW5kIiwiZW5jU2Vzc2lvbklkU3RhcnQiLCJlbmNTZXNzaW9uSWRFbmQiLCJ0cmFjazFBYnNMZW4iLCJ0cmFjazJBYnNMZW4iLCJ0cmFjazNBYnNMZW4iLCJtYWduZVByaW50QWJzTGVuIiwidHJhY2tQb3NpdGlvbnMiLCJ0cmFja0luZGljZXMiLCJ0cmFja0luZm8iLCJkYXRhTmFtZXMiLCJmb3JFYWNoIiwiZGF0YVByb3AiLCJ0cmFja0RhdGEiLCJmb3JtYXRUcmFjazJNYXNrZWQiLCJmb3JtYXRUcmFja1dpdGhEZWNvZGUiLCJpbmNsdWRlcyIsInRyYWNrMk1hc2tlZCIsImRlY29kZVN0YXR1c1ZhbHVlIiwidHJhY2tWYWx1ZSIsIlRyeFN0YXR1c1BhcnNlciIsIm5vdGlmaWNhdGlvbiIsIm5ld05vdGlmaWNhdGlvbiIsInBhcnNlTm90aWZpY2F0aW9ucyIsInRocm93TGVuRXJyIiwibm90aWZpY2F0aW9uU2xpY2UiLCJuZXdOb3RpZmljYXRpb25TbGljZSIsIm5vdGlmaWNhdGlvbkxlbmd0aCIsIm5vdGlmaWNhdGlvbkNvbnRlbnQiLCJ0cnhTdGF0dXNDb2RlIiwidHJ4UHJvZ3Jlc3NDb2RlIiwidHJhbnNhY3Rpb25TdGF0dXMiLCJzdGF0dXNDb2RlIiwic3RhdHVzTXNnIiwiVHJ4U3RhdHVzRW51bSIsInByb2dyZXNzQ29kZSIsInByb2dyZXNzTXNnIiwiVHJ4UHJvZ3Jlc3NJbmRpY2F0b3IiLCJTY3JhRW12UGFyc2VyIiwiZW12RGF0YSIsImlzQXJxYyIsInJlc3VsdENvZGUiLCJlbXZSZXN1bHRDb2RlcyIsInNlbGVjdGlvblJlcXVlc3QiLCJ1c2VyU2VsZWN0aW9uUmVxdWVzdCIsInNlbGVjdGlvblR5cGUiLCJ0aW1lUmVtYWluaW5nIiwibWVudUl0ZW1zIiwiZHVrcHRGYWlsdXJlQmFzZSIsImludmFsaWRCYXNlIiwiU2NyYSIsImNhcmREYXRhTm90aWZpY2F0aW9uIiwiY2FyZERhdGFIYW5kbGVyIiwiY29tbWFuZENoYXJJZCIsImRhdGFSZWFkeUlkIiwiZGF0YVJlYWR5SGFuZGxlciIsImRhdGFSZWFkeUNoYXJhY3RlcmlzdGljIiwiZGF0YVJlYWRTdGF0dXNJZCIsImRhdGFSZWFkU3RhdHVzQ2hhcmFjdGVyaXN0aWMiLCJldmVudFZhbHVlIiwiZm9ybWF0dGVkRXZlbnRWYWx1ZSIsIm5vdGlmaWNhdGlvbkFycmF5IiwiY2hlY2tOb3RpZmljYXRpb25MZW5ndGgiLCJyZXR1cm5Ub1VzZXIiLCJwYXJzZUhpZERhdGEiLCJub3RpZmljYXRpb25JZCIsImZpbmROb3RpZmljYXRpb25UeXBlIiwiYnVpbHROb3RpZmljYXRpb24iLCJwYXJzZVRyYW5zYWN0aW9uU3RhdHVzIiwiZGlzcGxheUNhbGxiYWNrIiwiZGlzcGxheU1lc3NhZ2UiLCJwYXJzZVVzZXJTZWxlY3Rpb25SZXF1ZXN0IiwiYnVpbGROb3RpZmljYXRpb24iLCJwYXJzZUVtdkRhdGEiLCJwYXJzZUVtdkNvbW1hbmRSZXNwb25zZSIsInNldERldmljZURhdGVUaW1lIiwic3RhcnRUcmFuc2FjdGlvbiIsInJlcG9ydFZlcmJvc2l0eSIsImVtdkNvbW1hbmRCYXNlIiwicmVhZENvbW1hbmRWYWx1ZSIsInNwZWNpZmllZENhbGxiYWNrIiwicmV0dXJuT2JqIiwic3BlY2lmaWNUaW1lIiwiZGF0ZVRpbWVDb21tYW5kIiwiY2FzdERlY1RvSGV4IiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsImdldEZ1bGxZZWFyIiwiYnVpbGREYXRlVGltZUNvbW1hbmQiLCJmb3JtYXR0ZWRWYWx1ZSIsImJhdHRlcnkiLCJzZXJpYWxOdW0iLCJyZWFkQmF0dGVyeUxldmVsIiwicmVzcEJhdHRlcnkiLCJnZXREZXZpY2VTbiIsInJlc3BTbiIsImJhdHRlcnlMZXZlbCIsInNlbGVjdGlvblJlc3VsdCIsInVzZXJTZWxlY3Rpb25SZXNwb25zZSIsInJlc3VsdENvZGVzIiwic2VuZEFycGNSZXNwb25zZSIsImNhbmNlbEVtdkNvbW1hbmQiLCJjZWFzZU5vdGlmaWNhdGlvbnMiLCJ1c2VyU2VsZWN0aW9uQ2FsbGJhY2siLCJFRHluYW1vIiwiZ2V0Q2FyZFNlcnZpY2VCYXNlIiwiVER5bmFtbyIsInNldEhlYWRBbHdheXNPbiIsInNldEhlYWRPcGVuUmVzcCIsImNvbW1hbmROb3RVc2VkIiwiaXNTY3JhIiwiRGV2aWNlSW50ZXJmYWNlIiwiZ2V0Q2FyZFNlcnZpY2UiLCJjYW5jZWxUcmFuc2FjdGlvbiIsImNsb3NlRGV2aWNlIiwiZ2V0RGV2aWNlSW5mbyIsImlzRGV2aWNlQ29ubmVjdGVkIiwicmVxdWVzdFBpbkVudHJ5Iiwic2V0RGlzcGxheU1lc3NhZ2UiLCJzZW5kVXNlclNlbGVjdGlvbiIsInNlbmRBcnBjIiwicmVxdWVzdFRpcE9yQ2FzaGJhY2siLCJvcGVuRGV2aWNlIiwic2VuZENvbW1hbmQiLCJpc0RldmljZU9wZW4iLCJmb3JjZURpc2Nvbm5lY3QiLCJuZXdEZXZpY2VJbnN0YW5jZSIsIkR5blByb0dvIiwiYnVpbGREZXZpY2VPYmplY3QiLCJkZXZpY2VUeXBlU3RyaW5nIiwiaWQiLCJkZXZpY2VJbnRlcmZhY2UiLCJlRHluYW1vUGF0dGVybiIsIlJlZ0V4cCIsInREeW5hbW9QYXR0ZXJuIiwiZHBNaW5pUGF0dGVybiIsImRwR29QYXR0ZXJuIiwiZmluZERldmljZVR5cGVTdHJpbmciLCJuYW1lU3RyIiwidHlwZVN0ciIsImZvcm1hdHRlZFN0ciIsImRldmljZVR5cGVTdHIiLCJkZXZpY2VUeXBlQXJyIiwicmV0dXJuU3RyIiwiZm9ybWF0VHlwZVN0cmluZyIsInRlc3QiLCJzY2FuRm9yRGV2aWNlcyIsImlzRnVuY1R5cGUiLCJkYXRhT2JqIiwid2FybiIsInByb3BBc3NpZ25tZW50IiwiZXJyT2JqIiwiZXJyb3IiLCJhcnJhbmdlQ2FsbGJhY2tzIiwib3B0aW9ucyIsIm5hbWVQcmVmaXgiLCJmaW5kRGV2aWNlQnlEZXZpY2VOYW1lIiwibmF2aWdhdG9yIiwiYmx1ZXRvb3RoIiwicmVxdWVzdERldmljZSIsImRldmljZVR5cGVOYW1lIiwic2VsZWN0ZWREZXZpY2UiLCJtb2RlbE5hbWVTdHJpbmciXSwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxFQUFNQyxHQUMxQixpQkFBWkMs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RWJjLE1BQU16QyxHQUFPMkIsRUFBTzNCLElESkM0bkIsUUNLNUJubEIsTUFBTXpDLEdBQ0wyQixFQUQ0QixpQkFBUjNCLEVBQ1osSUFBSTFJLEVBQVMwSSxHQUNkIiwiZmlsZSI6Im1hZ2Vuc2EtYmx1ZXRvb3RoLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibWFnZW5zYS1ibHVldG9vdGhcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wibWFnZW5zYS1ibHVldG9vdGhcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImNsYXNzIEFwaUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoeyBtZXNzYWdlLCBjb2RlLCBuYW1lIH0pIHtcclxuICAgICAgICBzdXBlciggKG1lc3NhZ2UgfHwgXCJXZWIgQmx1ZXRvb3RoIEFQSSB0aHJldyBhbiB1bmtub3duLCBvciB1bmRvY3VtZW50ZWQgZXJyb3JcIiApKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSAoY29kZSB8fCAxMDAwKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSAobmFtZSB8fCBcIldlYkJsdWV0b290aEVycm9yXCIpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwaUVycm9yOyIsImNvbnN0IGFsbERldmljZUNvbmZpZyA9IHtcclxuICAgIGZpbHRlcnM6IFtcclxuICAgICAgICB7IHNlcnZpY2VzOiBbXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDRcIl0gfSxcclxuICAgICAgICB7IHNlcnZpY2VzOiBbXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDFcIl0gfSwgXHJcbiAgICAgICAgeyBzZXJ2aWNlczogW1wiMDUwOGU2ZjgtYWQ4Mi04OThmLWY4NDMtZTM0MTBjYjYwMTAzXCJdIH1cclxuICAgIF0sXHJcbiAgICBvcHRpb25hbFNlcnZpY2VzOiBbXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDRcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDNcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDFcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAyMDJcIixcclxuICAgICAgICAnZGV2aWNlX2luZm9ybWF0aW9uJ1xyXG4gICAgXSxcclxuICAgIGtlZXBSZXBlYXRlZERldmljZXM6IGZhbHNlLFxyXG4gICAgYWNjZXB0QWxsQWR2ZXJ0aXNlbWVudHM6IGZhbHNlXHJcbn1cclxuXHJcbmNvbnN0IGZpbmREZXZpY2VCeURldmljZU5hbWUgPSBkZXZpY2VOYW1lID0+ICh7XHJcbiAgICBmaWx0ZXJzOiBbXHJcbiAgICAgICAgeyBuYW1lUHJlZml4OiBkZXZpY2VOYW1lIH1cclxuICAgIF0sXHJcbiAgICBvcHRpb25hbFNlcnZpY2VzOiBbXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDRcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDNcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDFcIixcclxuICAgICAgICBcIjA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDIwMlwiLFxyXG4gICAgICAgICdkZXZpY2VfaW5mb3JtYXRpb24nXHJcbiAgICBdLFxyXG4gICAga2VlcFJlcGVhdGVkRGV2aWNlczogZmFsc2UsXHJcbiAgICBhY2NlcHRBbGxBZHZlcnRpc2VtZW50czogZmFsc2VcclxufSk7XHJcblxyXG5cclxuZXhwb3J0IHtcclxuICAgIGFsbERldmljZUNvbmZpZyxcclxuICAgIGZpbmREZXZpY2VCeURldmljZU5hbWVcclxufSIsImNsYXNzIFV0aWxpdGllcyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAgICAgdGhpcy5ybGVGb3JtYXRzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIDB4MDA6IGZhbHNlLCAgICAvL05vcm1hbFxyXG4gICAgICAgICAgICAweDAxOiB0cnVlLCAgICAgLy9STEUgZm9ybWF0XHJcbiAgICAgICAgICAgIDB4MDI6IGZhbHNlLCAgICAvL05vdGlmeSBVbmNvbXByZXNzZWRcclxuICAgICAgICAgICAgMHgwMzogdHJ1ZSAgICAgIC8vTm90aWZ5IFJMRSBmb3JtYXRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgfTtcclxuXHJcbiAgICAgbG9nRGV2aWNlU3RhdGUgPSBsb2dJbmZvID0+IHtcclxuICAgICAgICBsZXQgbG9nRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJkZXZpY2VMb2dcIiwgeyBcclxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcclxuICAgICAgICAgICAgZGV0YWlsOiBsb2dJbmZvIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChsb2dFdmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29udmVydEFycmF5VG9IZXhTdHJpbmcgPSBhcnJheSA9PlxyXG4gICAgICAgIEFycmF5LmZyb20oYXJyYXksIGJ5dGUgPT5cclxuICAgICAgICAgICAgKCcwJyArIChieXRlICYgMHhGRikudG9TdHJpbmcoMTYpKS5zbGljZSgtMilcclxuICAgICAgICApLmpvaW4oJycpLnRvVXBwZXJDYXNlKClcclxuICAgIFxyXG4gICAgcmVhZFR3b0J5dGVMZW5ndGggPSB0d29CeXRlcyA9PiAodHdvQnl0ZXNbMF0gPDwgOCkgfCB0d29CeXRlc1sxXTtcclxuXHJcbiAgICBidWZmZXJUb1V0ZjggPSBhcnJheUJ1ZmZlciA9PlxyXG4gICAgICAgIG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKS5kZWNvZGUoVWludDhBcnJheS5mcm9tKGFycmF5QnVmZmVyKSk7XHJcblxyXG4gICAgY2FzdERlY1RvSGV4ID0gbnVtID0+IHBhcnNlSW50KCBudW0udG9TdHJpbmcoMTYpLCAxNik7XHJcblxyXG4gICAgbmV3QXJyYXlQYXJ0aWFsID0gKG51bSwgcmVwZXRpdGlvbnMpID0+IG5ldyBBcnJheShyZXBldGl0aW9ucykuZmlsbChudW0pO1xyXG5cclxuICAgIHJlYWRCeXRlQXJyYXkgPSBkYXRhVmlldyA9PiB7XHJcbiAgICAgICAgbGV0IHZhbHVlQXJyYXkgPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFWaWV3LmJ5dGVMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YWx1ZUFycmF5LnB1c2goZGF0YVZpZXcuZ2V0VWludDgoaSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlQXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgaGV4VG9Bc2NpaSA9IGhleFN0cmluZyA9PiB7XHJcbiAgICAgICAgbGV0IGFzY2lpUmVzcCA9ICcnO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyAoaSA8IGhleFN0cmluZy5sZW5ndGggJiYgaGV4U3RyaW5nLnN1YnN0cihpLCAyKSAhPT0gJzAwJyk7IGkgKz0gMikge1xyXG4gICAgICAgICAgICBhc2NpaVJlc3AgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShcclxuICAgICAgICAgICAgICAgIHBhcnNlSW50KGhleFN0cmluZy5zdWJzdHIoaSwgMiksIDE2KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYXNjaWlSZXNwLnRyaW0oKTtcclxuICAgIH1cclxuXHJcbiAgICBoZXhUb0J5dGVzID0gaGV4U3RyID0+IHtcclxuICAgICAgICBsZXQgYnl0ZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBjdXJyZW50ID0gMDsgY3VycmVudCA8IGhleFN0ci5sZW5ndGg7IGN1cnJlbnQgKz0gMilcclxuICAgICAgICAgICAgYnl0ZXMucHVzaCggcGFyc2VJbnQoaGV4U3RyLnN1YnN0cihjdXJyZW50LCAyKSwgMTYpICk7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gYnl0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZGVjb2RlUkxFID0gYXJyYXlTZWdtZW50ID0+IHtcclxuICAgICAgICBsZXQgcmV0dXJuU2VnbWVudCA9IFsgYXJyYXlTZWdtZW50WzBdIF07XHJcbiAgICBcclxuICAgICAgICBsZXQgbmV4dEluZGV4ID0gMDtcclxuICAgICAgICBsZXQgaW5pdGlhbExlbmd0aCA9IGFycmF5U2VnbWVudC5sZW5ndGg7XHJcbiAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGluaXRpYWxMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBuZXh0SW5kZXggPSBpICsgMTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAobmV4dEluZGV4ICsgMSA8IGluaXRpYWxMZW5ndGgpIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGFycmF5U2VnbWVudFtpXSA9PT0gYXJyYXlTZWdtZW50W25leHRJbmRleF0pIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblNlZ21lbnQucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5uZXdBcnJheVBhcnRpYWwoYXJyYXlTZWdtZW50W2ldLCBhcnJheVNlZ21lbnRbbmV4dEluZGV4ICsgMV0pXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vYWRqdXN0IGluZGV4IGFjY29yZGluZ2x5LCBwcmlvciB0byBiZWluZyBpbmNyZW1lbnRlZCBieSB0aGUgaXRlcmF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgIGkgPSBuZXh0SW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSByZXR1cm5TZWdtZW50LnB1c2goYXJyYXlTZWdtZW50W2ldKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuU2VnbWVudC5wdXNoKGFycmF5U2VnbWVudFtpXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmV0dXJuU2VnbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBidWlsZEluaXRpYWxEYXRhQXJyYXkgPSBjaGVja0ZvclJsZSA9PiB7XHJcbiAgICAgICAgbGV0IHJldHVybkFycmF5ID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSBNYXRoLm1pbiguLi5PYmplY3Qua2V5cyh0aGlzLnJhd0RhdGEpKTsgaSA8IHRoaXMubWF4QmxvY2tJZDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJldHVybkFycmF5ID0gcmV0dXJuQXJyYXkuY29uY2F0KC4uLnRoaXMucmF3RGF0YVtpXSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoIWNoZWNrRm9yUmxlKSA/IHJldHVybkFycmF5IDogdGhpcy5jaGVja1JsZShyZXR1cm5BcnJheSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tSbGUgPSByZXR1cm5BcnJheSA9PiAodGhpcy5ybGVGb3JtYXRzWyB0aGlzLmluaXRpYWxOb3RpZmljYXRpb25bMF0gXSkgPyB0aGlzLmRlY29kZVJMRShyZXR1cm5BcnJheSkgOiByZXR1cm5BcnJheTtcclxuXHJcbiAgICBjb252ZXJ0Q3VycmVuY3lDb2RlID0gY3VycmVuY3lTdHJpbmcgPT4ge1xyXG4gICAgICAgIGxldCBjdXJyZW5jeSA9IGN1cnJlbmN5U3RyaW5nLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgIHJldHVybiAoY3VycmVuY3kgPT09ICd1cycpID8gWzB4MDgsIDB4NDBdIDogXHJcbiAgICAgICAgICAgIChjdXJyZW5jeSA9PT0gJ2V1cm8nKSA/IFsweDA5LCAweDc4XSA6IFsweDAwLCAweDAwXTtcclxuICAgIH1cclxuXHJcbiAgICAvL0NvbnZlcnQgbnVtYmVyIHRvIDYgYnl0ZSBhcnJheS5cclxuICAgIGNvbnZlcnROdW1Ub0Ftb3VudCA9IChudW0sIG9wdGlvbmFsTGVuKSA9PiB7XHJcbiAgICAgICAgb3B0aW9uYWxMZW4gPSBvcHRpb25hbExlbiB8fCAxMjtcclxuXHJcbiAgICAgICAgbGV0IHN0cmluZ051bSA9IG51bS50b1N0cmluZygpO1xyXG4gICAgICAgIGxldCByZXR1cm5BcnIgPSBbXTtcclxuXHJcbiAgICAgICAgd2hpbGUgKHN0cmluZ051bS5sZW5ndGggPCBvcHRpb25hbExlbilcclxuICAgICAgICAgICAgc3RyaW5nTnVtID0gXCIwXCIgKyBzdHJpbmdOdW07XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyaW5nTnVtLmxlbmd0aDsgaSArPSAyKVxyXG4gICAgICAgICAgICByZXR1cm5BcnIucHVzaChcclxuICAgICAgICAgICAgICAgIHBhcnNlSW50KHN0cmluZ051bS5zdWJzdHJpbmcoaSwgKGkgKyAyKSksIDE2KVxyXG4gICAgICAgICAgICApXHJcbiAgICBcclxuICAgICAgICByZXR1cm4gcmV0dXJuQXJyO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGF5UHJvbWlzZSA9IChkZWxheSwgcGFzc2VkVmFsdWUpID0+XHJcbiAgICAgICAgbmV3IFByb21pc2UoIHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5LCBwYXNzZWRWYWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgYnl0ZUFycmF5VG9OdW1iZXIgPSBieXRlQXJyYXkgPT4gcGFyc2VJbnQodGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhieXRlQXJyYXkpLCAxMCk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFV0aWxpdGllczsiLCJpbXBvcnQgVXRpbGl0aWVzIGZyb20gXCIuLi91dGlsc1wiO1xyXG5cclxuY2xhc3MgU3dpcGVQYXJzZXIgZXh0ZW5kcyBVdGlsaXRpZXMge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBmb3JtYXRFeHBQQU4gPSByYXdEYXRhID0+IHtcclxuICAgICAgICBsZXQgc3RyaW5nRGF0YSA9ICh0eXBlb2YgcmF3RGF0YSA9PT0gJ29iamVjdCcpID8gdGhpcy5idWZmZXJUb1V0ZjgocmF3RGF0YS5zbGljZSg0KSkgOiByYXdEYXRhO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKHN0cmluZ0RhdGEuaW5kZXhPZignOycpICE9PSAtMSkge1xyXG4gICAgICAgICAgICBsZXQgZm9ybWF0dGVkU3RyaW5nID0gdGhpcy5zcGxpdEV4cFBBTihzdHJpbmdEYXRhKTtcclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbWFza2VkUEFOOiBmb3JtYXR0ZWRTdHJpbmdbMF0sXHJcbiAgICAgICAgICAgICAgICBMYXN0NDogZm9ybWF0dGVkU3RyaW5nWzFdLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJhdGlvbkRhdGU6IGZvcm1hdHRlZFN0cmluZ1syXSxcclxuICAgICAgICAgICAgICAgIHNlcnZpY2VDb2RlOiBmb3JtYXR0ZWRTdHJpbmdbM11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHJldHVybiB7XHJcbiAgICAgICAgICAgIG1hc2tlZFBBTjogXCJcIixcclxuICAgICAgICAgICAgTGFzdDQ6IFwiXCIsXHJcbiAgICAgICAgICAgIGV4cGlyYXRpb25EYXRlOiBcIlwiLFxyXG4gICAgICAgICAgICBzZXJ2aWNlQ29kZTogXCJcIlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzcGxpdEV4cFBBTiA9IHN0cmluZ0RhdGEgPT4ge1xyXG4gICAgICAgIGlmIChzdHJpbmdEYXRhLmxlbmd0aCA+IDMpIHtcclxuICAgICAgICAgICAgbGV0IGV4cFBBTiA9IHN0cmluZ0RhdGEucmVwbGFjZSgnOycsJycpLnJlcGxhY2UoJz8nLCcnKS5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBsZXQgZXhwID0gZXhwUEFOWzFdLnNsaWNlKDAsIDQpO1xyXG4gICAgICAgICAgICBsZXQgc2VydmljZUNvZGUgPSBleHBQQU5bMV0uc2xpY2UoNCwgNyk7XHJcbiAgICAgICAgICAgIGxldCBmb3JtYXR0ZWRFeHAgPSBleHAuc2xpY2UoLTIpICsgJy8nICsgZXhwLnNsaWNlKDAsIDIpO1xyXG4gICAgICAgICAgICBsZXQgbWFza2VkUEFOID0gZXhwUEFOWzBdO1xyXG4gICAgICAgICAgICBsZXQgbGFzdEZvdXIgPSBleHBQQU5bMF0uc2xpY2UoLTQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFttYXNrZWRQQU4sIGxhc3RGb3VyLCBmb3JtYXR0ZWRFeHAsIHNlcnZpY2VDb2RlXVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHJldHVybiBbXCJOb3QgRm91bmRcIiwgXCJOb3QgRm91bmRcIiwgXCJOb3QgRm91bmRcIiwgXCJOb3QgRm91bmRcIl1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFN3aXBlUGFyc2VyOyIsImNvbnN0IG9wZW5TdWNjZXNzID0gXCJEZXZpY2UgT3BlblwiO1xyXG5jb25zdCBjbG9zZVN1Y2Nlc3MgPSBcIkRldmljZSBDbG9zZWRcIlxyXG5jb25zdCBzdWNjZXNzQ29kZSA9IDA7XHJcbmNvbnN0IHN3aXBlTGlzdGVuaW5nID0gXCJTdWNjZXNzLCBsaXN0ZW5pbmcgZm9yIHN3aXBlXCJcclxuY29uc3QgZGV2aWNlTm90SWRsZSA9IFwiRGV2aWNlIG5vdCBpZGxlXCI7XHJcbmNvbnN0IHREeW5hbW8gPSBcInREeW5hbW9cIjtcclxuY29uc3QgZUR5bmFtbyA9IFwiZUR5bmFtb1wiO1xyXG5jb25zdCBkeW5hUHJvR28gPSBcImR5bmFQcm9Hb1wiO1xyXG5jb25zdCBkcE1pbmkgPSBcIkR5bmFQcm8gTWluaVwiO1xyXG5cclxuY29uc3QgY29uZmlnU3RyID0gXCJDb25maWd1cmF0aW9uXCI7XHJcbmNvbnN0IHVua25vd24gPSBcIlVua25vd25cIjtcclxuY29uc3QgYXNjaWkgPSBcIkFTQ0lJXCI7XHJcblxyXG5jb25zdCBub1Nlc3Npb25Ub0NsZWFyID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAwLFxyXG4gICAgbWVzc2FnZTogXCJTdWNjZXNzLCB0aGVyZSB3YXMgbm8gc2Vzc2lvbiB0byBjbGVhclwiXHJcbn0pO1xyXG5cclxuY29uc3QgZ2F0dEJ1c3kgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvZGU6IDE5LCBcclxuICAgIG1lc3NhZ2U6IFwiR0FUVCBvcGVyYXRpb24gYWxyZWFkeSBpbiBwcm9ncmVzcy5cIlxyXG59KTtcclxuXHJcbmNvbnN0IHN1Y2Nlc3NmdWxDbG9zZSA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogc3VjY2Vzc0NvZGUsXHJcbiAgICBtZXNzYWdlOiBjbG9zZVN1Y2Nlc3NcclxufSk7XHJcblxyXG5jb25zdCBjYXJkVHlwZUFsbCA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgW2VEeW5hbW9dOiAweDAzLFxyXG4gICAgW3REeW5hbW9dOiAweDA3LFxyXG4gICAgW2RwTWluaV06IDB4MDMsXHJcbiAgICBbZHluYVByb0dvXTogMHgwN1xyXG59KTtcclxuXHJcbmNvbnN0IGNhcmRUeXBlc09iaiA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgJ21zcic6IDB4MDEsXHJcbiAgICAnY2hpcCc6IDB4MDIsXHJcbiAgICAnY2hpcG1zcic6IDB4MDMsXHJcbiAgICAnY29udGFjdGxlc3MnOiAweDA0LFxyXG4gICAgJ2NvbnRhY3RsZXNzbXNyJzogMHgwNSxcclxuICAgICdjb250YWN0bGVzc2NoaXAnOjB4MDYsXHJcbiAgICAnYWxsJzogMHgwN1xyXG59KTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgICBvcGVuU3VjY2VzcyxcclxuICAgIHN1Y2Nlc3NDb2RlLFxyXG4gICAgc3dpcGVMaXN0ZW5pbmcsXHJcbiAgICBkZXZpY2VOb3RJZGxlLFxyXG4gICAgY2xvc2VTdWNjZXNzLFxyXG4gICAgbm9TZXNzaW9uVG9DbGVhcixcclxuICAgIHREeW5hbW8sXHJcbiAgICBlRHluYW1vLFxyXG4gICAgZHluYVByb0dvLFxyXG4gICAgZHBNaW5pLFxyXG4gICAgY2FyZFR5cGVBbGwsXHJcbiAgICBjYXJkVHlwZXNPYmosXHJcbiAgICBnYXR0QnVzeSxcclxuICAgIHN1Y2Nlc3NmdWxDbG9zZSxcclxuICAgIGNvbmZpZ1N0cixcclxuICAgIHVua25vd24sXHJcbiAgICBhc2NpaVxyXG59XHJcbiIsImltcG9ydCBTd2lwZVBhcnNlciBmcm9tICcuL3N3aXBlUGFyc2VyJztcclxuaW1wb3J0IHsgZHluYVByb0dvIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuXHJcbmNsYXNzIEVtdlBhcnNlciBleHRlbmRzIFN3aXBlUGFyc2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMubW9yZVRhZ0J5dGVzRmxhZzEgPSAweDFGO1xyXG4gICAgICAgIHRoaXMubW9yZVRhZ0J5dGVzRmxhZzIgPSAweDgwO1xyXG4gICAgICAgIHRoaXMuY29uc3RydWN0ZWRGbGFnID0gMHgyMDtcclxuICAgICAgICB0aGlzLm1vcmVMZW5ndGhGbGFnID0gMHg4MDtcclxuICAgICAgICB0aGlzLm9uZUJ5dGVMZW5ndGhNYXNrID0gMHg3RjtcclxuXHJcbiAgICAgICAgdGhpcy50cnhTdGF0dXNUb1N0cmluZyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIkFwcHJvdmVkXCIsXHJcbiAgICAgICAgICAgIDB4MDE6IFwiRGVjbGluZWRcIixcclxuICAgICAgICAgICAgMHgwMjogXCJFcnJvclwiLFxyXG4gICAgICAgICAgICAweDEwOiBcIkNhbmNlbGxlZCBCeSBIb3N0XCIsXHJcbiAgICAgICAgICAgIDB4MTE6IFwiQ29uZmlybSBBbW91bnQgTm9cIixcclxuICAgICAgICAgICAgMHgxMjogXCJDb25maXJtIEFtb3VudCBUaW1lb3V0XCIsXHJcbiAgICAgICAgICAgIDB4MTM6IFwiQ29uZmlybSBBbW91bnQgQ2FuY2VsXCIsXHJcbiAgICAgICAgICAgIDB4MTQ6IFwiTVNSIFNlbGVjdCBEZWJpdFwiLFxyXG4gICAgICAgICAgICAweDE1OiBcIk1TUiBTZWxlY3QgRGViaXRcIixcclxuICAgICAgICAgICAgMHgxNjogXCJNU1IgU2VsZWN0IENyZWRpdC9EZWJpdCB0aW1vdXRcIixcclxuICAgICAgICAgICAgMHgxNzogXCJNU1IgU2VsZWN0IENyZWRpdC9EZWJpdCBjYW5jZWxcIixcclxuICAgICAgICAgICAgMHgxODogXCJTaWduYXR1cmUgQ2FwdHVyZSBDYW5jZWxsZWQgYnkgSG9zdCAoU0MtUyBPbmx5IHwgU0MtRiBvbmx5KVwiLFxyXG4gICAgICAgICAgICAweDE5OiBcIlNpZ25hdHVyZSBDYXB0dXJlIFRpbWVvdXQgKFNDLVMgT25seSB8IFNDLUYgT25seSlcIixcclxuICAgICAgICAgICAgMHgxQTogXCJTaWduYXR1cmUgQ2FwdHVyZSBDYW5jZWxsZWQgYnkgQ2FyZGhvbGRlciAoU0MtUyBPbmx5IHwgU0MtRiBPbmx5KVwiLFxyXG4gICAgICAgICAgICAweDFCOiBcIlBJTiBFbnRyeSBDYW5jZWxsZWQgYnkgSG9zdFwiLFxyXG4gICAgICAgICAgICAweDFDOiBcIlBJTiBlbnRyeSB0aW1lb3V0XCIsXHJcbiAgICAgICAgICAgIDB4MUQ6IFwiUElOIGVudHJ5IENhbmNlbGxlZCBieSBDYXJkaG9sZGVyXCIsXHJcbiAgICAgICAgICAgIDB4MUU6IFwiTWFudWFsIFNlbGVjdGVkIENhbmNlbGxlZCBieSBIb3N0XCIsXHJcbiAgICAgICAgICAgIDB4MUY6IFwiTWFudWFsIFNlbGVjdGlvbiBUaW1lb3V0XCIsXHJcbiAgICAgICAgICAgIDB4MjA6IFwiTWFudWFsIFNlbGN0aW9uIENhbmNlbGxlZCBieSBDYXJkaG9sZGVyXCIsXHJcbiAgICAgICAgICAgIDB4MjE6IFwiV2FpdGluZyBmb3IgQ2FyZCBDYW5jZWxsZWQgYnkgSG9zdFwiLFxyXG4gICAgICAgICAgICAweDIyOiBcIldhaXRpbmcgZm9yIENhcmQgVGltZW91dFwiLFxyXG4gICAgICAgICAgICAweDIzOiBcIkNhbmNlbGxlZCBieSBDYXJkIFN3aXBlIChNU1IpIFtTQ1JBXSB8fCBXYWl0aW5nIGZvciBDYXJkIENhbmNlbGxlZCBieSBDYXJkaG9sZGVyIFtQSU5dXCIsXHJcbiAgICAgICAgICAgIDB4MjQ6IFwiV2FpdGluZyBmb3IgQ2FyZCBJQ0MgU2VhdGVkXCIsXHJcbiAgICAgICAgICAgIDB4MjU6IFwiV2FpdGluZyBmb3IgQ2FyZCBNU1IgU3dpcGVkXCIsXHJcbiAgICAgICAgICAgIDB4RkY6IFwiVW5rbm93biBUcmFuc2FjdGlvbiBTdGF0dXNcIixcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0bHZQYXJzZXIgPSAoZGF0YSwgaXNNc3IpID0+IHtcclxuICAgICAgICBsZXQgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoO1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgICAgICBsZXQgaVRMViA9IDA7XHJcbiAgICAgICAgbGV0IGlUYWc7XHJcbiAgICAgICAgbGV0IGJUYWcgPSB0cnVlO1xyXG4gICAgICAgIGxldCBieXRlVmFsdWU7XHJcbiAgICAgICAgbGV0IGxlbmd0aFZhbHVlO1xyXG4gICAgICAgIGxldCB0YWdCeXRlcyA9IG51bGw7XHJcbiAgICAgICAgbGV0IFRhZ0J1ZmZlciA9IFtdO1xyXG5cclxuICAgICAgICB3aGlsZSAoaVRMViA8IGRhdGFMZW5ndGgpIHtcclxuICAgICAgICAgICAgYnl0ZVZhbHVlID0gZGF0YVtpVExWXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChiVGFnKSB7XHJcbiAgICAgICAgICAgICAgICBpVGFnID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBiTW9yZVRhZ0J5dGVzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYnl0ZVZhbHVlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9GaXJzdCBieXRlIG9mIHRhZyBjYW5ub3QgYmUgemVyby5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoYk1vcmVUYWdCeXRlcyAmJiAoaVRMViA8IGRhdGFMZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnl0ZVZhbHVlID0gZGF0YVtpVExWXTtcclxuICAgICAgICAgICAgICAgICAgICBpVExWKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFRhZ0J1ZmZlcltpVGFnXSA9IGJ5dGVWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYk1vcmVUYWdCeXRlcyA9IChpVGFnID09PSAwKSA/ICgoYnl0ZVZhbHVlICYgdGhpcy5tb3JlVGFnQnl0ZXNGbGFnMSkgPT0gdGhpcy5tb3JlVGFnQnl0ZXNGbGFnMSkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoKGJ5dGVWYWx1ZSAmIHRoaXMubW9yZVRhZ0J5dGVzRmxhZzIpID09IHRoaXMubW9yZVRhZ0J5dGVzRmxhZzIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpVGFnKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGFnQnl0ZXMgPSB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKFRhZ0J1ZmZlci5zbGljZSgwLCBpVGFnKSk7XHJcbiAgICAgICAgICAgICAgICBiVGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZW5ndGhWYWx1ZSA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKChieXRlVmFsdWUgJiB0aGlzLm1vcmVMZW5ndGhGbGFnKSA9PSB0aGlzLm1vcmVMZW5ndGhGbGFnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5MZW5ndGhCeXRlcyA9IGJ5dGVWYWx1ZSAmIHRoaXMub25lQnl0ZUxlbmd0aE1hc2s7XHJcbiAgICAgICAgICAgICAgICAgICAgaVRMVisrO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpTGVuID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChpTGVuIDwgbkxlbmd0aEJ5dGVzKSAmJiAoaVRMViA8IGRhdGFMZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVWYWx1ZSA9IGRhdGFbaVRMVl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlUTFYrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoVmFsdWUgPSAoKGxlbmd0aFZhbHVlICYgMHgwMDAwMDBGRikgPDwgOCkgKyBieXRlVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlMZW4rKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZW5ndGhWYWx1ZSA9IGJ5dGVWYWx1ZSAmIHRoaXMub25lQnl0ZUxlbmd0aE1hc2s7XHJcbiAgICAgICAgICAgICAgICAgICAgaVRMVisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0YWdCeXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWdCeXRlID0gVGFnQnVmZmVyWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgZW5kSW5kZXggPSAoKGlUTFYgKyBsZW5ndGhWYWx1ZSkgPiBkYXRhTGVuZ3RoKSA/IGRhdGFMZW5ndGggOiBpVExWICsgbGVuZ3RoVmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsZW4gPSBlbmRJbmRleCAtIGlUTFY7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlQnl0ZXMgPSAobGVuID4gMCkgPyB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKGRhdGEuc2xpY2UoaVRMViwgaVRMViArIGxlbikpIDogXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRhZ1wiOiB0YWdCeXRlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0YWdMZW5ndGhcIjogKCFsZW5ndGhWYWx1ZSkgPyAodmFsdWVCeXRlcy5sZW5ndGggKyAxIC8gMikgOiBsZW5ndGhWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0YWdWYWx1ZVwiOiB0aGlzLmhleE9yQXNjaWlGb3JtYXR0ZXIodGFnQnl0ZXMsIHZhbHVlQnl0ZXMsIGlzTXNyKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoICEoKHRhZ0J5dGUgJiB0aGlzLmNvbnN0cnVjdGVkRmxhZykgPT0gdGhpcy5jb25zdHJ1Y3RlZEZsYWcpICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpVExWICs9IGxlbmd0aFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBiVGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGhleE9yQXNjaWlGb3JtYXR0ZXIgPSAodGFnQnl0ZXMsIHZhbHVlQnl0ZXMsIGlzTXNyKSA9PiB7XHJcbiAgICAgICAgc3dpdGNoKHRhZ0J5dGVzKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJERkRGMUFcIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHt2YWx1ZUJ5dGVzfSAke3RoaXMudHJ4U3RhdHVzVG9TdHJpbmdbIHBhcnNlSW50KHZhbHVlQnl0ZXMsIDE2KSBdfWBcclxuICAgICAgICAgICAgY2FzZSBcIkRGREY0RFwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiNUYyMFwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGV4VG9Bc2NpaSh2YWx1ZUJ5dGVzKTtcclxuICAgICAgICAgICAgY2FzZSBcIkRGREYyNVwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChpc01zcikgPyB0aGlzLmhleFRvQXNjaWkoICh2YWx1ZUJ5dGVzID8gdmFsdWVCeXRlcy5zdWJzdHJpbmcoMCwgMTQpIDogdmFsdWVCeXRlcykgKSA6IHZhbHVlQnl0ZXM7XHJcbiAgICAgICAgICAgIGNhc2UgXCJERkRGNDBcIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiAodmFsdWVCeXRlcyA9PT0gMHg4MCkgPyBgJHt2YWx1ZUJ5dGVzfSAgQ0JDLU1BQyBjaGVja2VkIGluIEFSUUMgb25saW5lIHJlc3BvbnNlYCA6ICh2YWx1ZUJ5dGVzID09PSAweDAxKTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZUJ5dGVzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRW12UGFyc2VyOyIsImNsYXNzIExlbmd0aEVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJEZXZpY2UgY29tbXVuaWNhdGlvbiBlcnJvci4gTGVuZ3RoIGRvZXMgbm90IG1hdGNoIGRhdGFcIik7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gXCJCbGVUcmFuc21pc3Npb25FcnJvclwiO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IDEwMTI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExlbmd0aEVycm9yOyIsImNsYXNzIERldmljZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoeyBjb2RlLCBuYW1lLCBtZXNzYWdlIH0pIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSAobmFtZSB8fCBcIkRldmljZUVycm9yXCIpO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IChjb2RlIHx8IDEwMDApXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IERldmljZUVycm9yOyIsImltcG9ydCBFbXZQYXJzZXIgZnJvbSAnLi4vcGFyc2Vycy9lbXZQYXJzZXInXHJcbmltcG9ydCBBcGlFcnJvciBmcm9tICcuL2FwaUVycm9yJztcclxuaW1wb3J0IExlbmd0aEVycm9yIGZyb20gJy4vbGVuZ3RoRXJyb3InO1xyXG5pbXBvcnQgRGV2aWNlRXJyb3IgZnJvbSAnLi9kZXZpY2VFcnJvcic7XHJcblxyXG5jbGFzcyBFcnJvckhhbmRsZXIgZXh0ZW5kcyBFbXZQYXJzZXIge1xyXG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrID0gY2FsbGJhY2tzLmVycm9yQ2FsbGJhY2s7XHJcbiAgICB9O1xyXG5cclxuICAgIGJ1aWxkRGV2aWNlRXJyID0gZXJyID0+IChlcnIgaW5zdGFuY2VvZiBET01FeGNlcHRpb24pID8gXHJcbiAgICAgICAgbmV3IEFwaUVycm9yKGVycikgOiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpID8gXHJcbiAgICAgICAgICAgIGVyciA6IG5ldyBEZXZpY2VFcnJvcihlcnIpO1xyXG5cclxuICAgIHRocm93TGVuRXJyID0gKCkgPT4gbmV3IExlbmd0aEVycm9yKCk7XHJcblxyXG4gICAgc2VuZEVyclRvQ2FsbGJhY2sgPSBlcnIgPT4ge1xyXG4gICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjayhlcnIpO1xyXG4gICAgICAgIHJldHVybiBlcnI7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBFcnJvckhhbmRsZXI7IiwiY29uc3Qgbm90Rm91bmRPYmogPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGVycm9yQ29kZTogOCxcclxuICAgIGVycm9yTmFtZTogXCJOb3RGb3VuZEVycm9yXCJcclxufSk7XHJcblxyXG5jb25zdCBhcGlOZXR3b3JrRXJyID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAxOSxcclxuICAgIG5hbWU6ICdOZXR3b3JrRXJyb3InXHJcbn0pO1xyXG5cclxuY29uc3QgZGV2aWNlTm90Rm91bmQgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvZGU6IDEwMDIsXHJcbiAgICBuYW1lOiAnRGV2aWNlTm90Rm91bmQnLFxyXG4gICAgbWVzc2FnZTogXCJQbGVhc2Ugc2VsZWN0IGRldmljZSB0byBjb25uZWN0XCJcclxufSk7XHJcblxyXG5jb25zdCBnYXR0U2VydmVyTm90Q29ubmVjdGVkID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAxMDAzLFxyXG4gICAgbmFtZTogXCJHYXR0U2VydmVyTm90Q29ubmVjdGVkXCIsXHJcbiAgICBtZXNzYWdlOiBcIlBsZWFzZSBjb25uZWN0IGRlc2lyZWQgZGV2aWNlXCJcclxufSk7XHJcblxyXG5jb25zdCBjb21tYW5kTm90U2VudCA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMTAwNCwgXHJcbiAgICBuYW1lOiBcIkNvbW1hbmROb3RTZW50XCIsIFxyXG4gICAgbWVzc2FnZTogXCJDb21tYW5kIGNoYXJhY3RlcmlzdGljIG5vdCBmb3VuZCwgZGV2aWNlIG5vdCBvcGVuZWRcIlxyXG59KTtcclxuXHJcbmNvbnN0IGRldmljZU5vdE9wZW4gPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvZGU6IDEwMDUsIFxyXG4gICAgbmFtZTogXCJDb21tYW5kTm90U2VudFwiLCBcclxuICAgIG1lc3NhZ2U6IFwiRGV2aWNlIG5vdCBvcGVuZWRcIlxyXG59KTtcclxuXHJcbmNvbnN0IGNvbW1hbmROb3RTZW50RnJvbUhvc3QgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvZGU6IDEwMDYsIFxyXG4gICAgbmFtZTogXCJDb21tYW5kTm90U2VudFwiLCBcclxuICAgIG1lc3NhZ2U6IFwiQXBwbGljYXRpb24gRnJvbSBIb3N0IG5vdCBmb3VuZC4gIERldmljZSBub3QgY29ubmVjdGVkXCJcclxufSk7XHJcblxyXG5jb25zdCByZWFkRmFpbGVkID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAxMDA3LCBcclxuICAgIG5hbWU6IFwiUmVhZEZhaWxlZFwiLCBcclxuICAgIG1lc3NhZ2U6IFwiVW5hYmxlIHRvIHJlYWQgZGF0YSBmcm9tIGRldmljZS4gQ29tbXVuaWNhdGlvbiBlcnJvclwiXHJcbn0pO1xyXG5cclxuY29uc3QgcmVzcG9uc2VOb3RSZWNlaXZlZCA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMTAwOCwgXHJcbiAgICBuYW1lOiAnUmVzcG9uc2VOb3RSZWNlaXZlZCcsIFxyXG4gICAgbWVzc2FnZTogXCJDb21tYW5kIHdhcyBzZW50LCBidXQgcmVzcG9uc2Ugd2FzIG5vdCByZWNlaXZlZCBmcm9tIGRldmljZVwiXHJcbn0pO1xyXG5cclxuY29uc3QgZ2V0U2VydmljZUZhaWwgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvZGU6IDEwMDksIFxyXG4gICAgbmFtZTogXCJHZXRTZXJ2aWNlRmFpbFwiLCBcclxuICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJldHJpZXZlIHByaW1hcnkgR0FUVCBzZXJ2aWNlLiBQbGVhc2UgY29ubmVjdCBkZXZpY2VcIlxyXG59KTtcclxuXHJcbmNvbnN0IGNvbW1hbmROb3RBY2NlcHRlZCA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMTAxMyxcclxuICAgIG5hbWU6IFwiQ29tbWFuZE5vdEFjY2VwdGVkXCIsXHJcbiAgICBtZXNzYWdlOiBcIkRldmljZSBkaWQgbm90IGFjY2VwdCBjb21tYW5kXCJcclxufSk7XHJcblxyXG5jb25zdCBtaXNzaW5nUmVxdWlyZWRGaWVsZHMgPSBmaWVsZE5hbWUgPT4gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAxMDE0LFxyXG4gICAgbmFtZTogXCJNaXNzaW5nUmVxdWlyZWRQYXJhbWV0ZXJcIixcclxuICAgIG1lc3NhZ2U6IGAnJHtmaWVsZE5hbWV9JyBpcyByZXF1aXJlZCB0byBjYWxsIHRoaXMgZnVuY3Rpb24uYFxyXG59KTtcclxuXHJcbmNvbnN0IHdyb25nSW5wdXRUeXBlcyA9IChhY2NlcHRhYmxlVHlwZXMsIHByb3BlcnR5TmFtZSkgPT4gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAxMDE1LFxyXG4gICAgbmFtZTogXCJJbmNvcnJlY3RJbnB1dFR5cGVcIixcclxuICAgIG1lc3NhZ2U6IGBQYXJhbWV0ZXIgdHlwZSBmb3IgJHtwcm9wZXJ0eU5hbWV9IHdhcyBub3QgY29ycmVjdCwgYWNjZXB0YWJsZSB0eXBlKHMpIGFyZTogJHthY2NlcHRhYmxlVHlwZXMuam9pbihcIiwgXCIpfWBcclxufSk7XHJcblxyXG5jb25zdCB3cm9uZ0lucHV0VmFsdWVzID0gKGFjY2VwdGFibGVWYWxzLCBwcm9wZXJ0eU5hbWUpID0+IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMTAxNSxcclxuICAgIG5hbWU6IFwiSW5jb3JyZWN0SW5wdXRWYWx1ZVwiLFxyXG4gICAgbWVzc2FnZTogYFBhcmFtZXRlciB2YWx1ZSBmb3IgJHtwcm9wZXJ0eU5hbWV9IHdhcyBub3QgY29ycmVjdCwgYWNjZXB0YWJsZSB2YWx1ZShzKSBhcmU6ICR7YWNjZXB0YWJsZVZhbHMuam9pbihcIiwgXCIpfWBcclxufSk7XHJcblxyXG5leHBvcnQge1xyXG4gICAgY29tbWFuZE5vdEFjY2VwdGVkLFxyXG4gICAgY29tbWFuZE5vdFNlbnQsXHJcbiAgICByZXNwb25zZU5vdFJlY2VpdmVkLFxyXG4gICAgZGV2aWNlTm90Rm91bmQsXHJcbiAgICBkZXZpY2VOb3RPcGVuLFxyXG4gICAgZ2F0dFNlcnZlck5vdENvbm5lY3RlZCxcclxuICAgIHJlYWRGYWlsZWQsXHJcbiAgICBjb21tYW5kTm90U2VudEZyb21Ib3N0LFxyXG4gICAgZ2V0U2VydmljZUZhaWwsXHJcbiAgICBub3RGb3VuZE9iaixcclxuICAgIGFwaU5ldHdvcmtFcnIsXHJcbiAgICBtaXNzaW5nUmVxdWlyZWRGaWVsZHMsXHJcbiAgICB3cm9uZ0lucHV0VHlwZXMsXHJcbiAgICB3cm9uZ0lucHV0VmFsdWVzXHJcbn1cclxuIiwiaW1wb3J0IEVycm9ySGFuZGxlciBmcm9tICcuLi9lcnJvckhhbmRsZXInO1xyXG5pbXBvcnQgeyBcclxuICAgIGRldmljZU5vdEZvdW5kLCBcclxuICAgIGdhdHRTZXJ2ZXJOb3RDb25uZWN0ZWQsXHJcbiAgICBnZXRTZXJ2aWNlRmFpbCxcclxuICAgIG5vdEZvdW5kT2JqLFxyXG4gICAgZGV2aWNlTm90T3BlbixcclxuICAgIGFwaU5ldHdvcmtFcnIsXHJcbiAgICB3cm9uZ0lucHV0VHlwZXNcclxufSBmcm9tICcuLi9lcnJvckhhbmRsZXIvZXJyQ29uc3RhbnRzJztcclxuaW1wb3J0IHsgY2FyZFR5cGVBbGwsIGNhcmRUeXBlc09iaiwgc3VjY2Vzc2Z1bENsb3NlIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuXHJcbmNsYXNzIERldmljZUJhc2UgZXh0ZW5kcyBFcnJvckhhbmRsZXIge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsYmFja3MpIHtcclxuICAgICAgICBzdXBlcihjYWxsYmFja3MpO1xyXG5cclxuICAgICAgICB0aGlzLmRldmljZSA9IGRldmljZTtcclxuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RDYWxsYmFjayA9IGNhbGxiYWNrcy5kaXNjb25uZWN0SGFuZGxlcjtcclxuICAgICAgICB0aGlzLmdhdHRTZXJ2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2FyZFNlcnZpY2UgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmRldmljZVVVSURzID0gW1xyXG4gICAgICAgICAgICBcIjA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDEwNFwiLFxyXG4gICAgICAgICAgICBcIjA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDEwM1wiLCBcclxuICAgICAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDFcIlxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdHVzVmVyYm9zaXR5ID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIFwibWluaW11bVwiOiAweDAwLFxyXG4gICAgICAgICAgICAnbWVkaXVtJzogMHgwMSxcclxuICAgICAgICAgICAgJ3ZlcmJvc2UnOiAweDAyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVuY3lDb2RlID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgICdkb2xsYXInOiBbMHgwOCwgMHg0MF0sXHJcbiAgICAgICAgICAgICdldXJvJzogWzB4MDksIDB4NzhdLFxyXG4gICAgICAgICAgICAncG91bmQnOiBbMHgwOCwgMHgyNl0sXHJcbiAgICAgICAgICAgICdkZWZhdWx0JzogWzB4MDAsIDB4MDBdIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uVHlwZXMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgJ3B1cmNoYXNlJzogMHgwMCxcclxuICAgICAgICAgICAgJ2Nhc2hhZHZhbmNlJzogMHgwMSxcclxuICAgICAgICAgICAgJ2Nhc2hiYWNrJzogMHgwMixcclxuICAgICAgICAgICAgJ3B1cmNoYXNlZ29vZHMnOiAweDA0LFxyXG4gICAgICAgICAgICAncHVyY2hhc2VzZXJ2aWNlcyc6IDB4MDgsXHJcbiAgICAgICAgICAgICdjb250YWN0bGVzc2Nhc2hiYWNrJzogMHgwOSxcclxuICAgICAgICAgICAgJ2Nhc2htYW51YWwnOiAweDEyLFxyXG4gICAgICAgICAgICAncmVmdW5kJzogMHgyMCwgXHJcbiAgICAgICAgICAgICdjaGlwb25seXBheW1lbnQnOiAweDUwXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY29tbWFuZFJlc3BBdmFpbGFibGUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjYXJkVHlwZXMgPSBjYXJkVHlwZVN0ciA9PiAoY2FyZFR5cGVTdHIgIT09ICdhbGwnKSA/IFxyXG4gICAgICAgIChjYXJkVHlwZXNPYmpbIGNhcmRUeXBlU3RyIF0gfHwgMHgwMykgOiAoY2FyZFR5cGVBbGxbIHRoaXMuZGV2aWNlVHlwZSBdIHx8IDB4MDMpO1xyXG4gICAgICAgIFxyXG5cclxuICAgIGNvbm5lY3QgPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtHQVRUXTogRGV2aWNlIENvbm5lY3Rpb24gUmVxdWVzdCB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgIHJldHVybiAodGhpcy5kZXZpY2UpID9cclxuICAgICAgICAgICAgdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0KClcclxuICAgICAgICAgICAgICAgIC50aGVuKHNlcnZlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0dBVFRdOiBEZXZpY2UgY29ubmVjdGVkIC0gR0FUVCBTZXJ2ZXIgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseSB8fCAke25ldyBEYXRlKCl9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYXR0U2VydmVyID0gc2VydmVyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90Rm91bmQpIClcclxuICAgIH0pO1xyXG5cclxuICAgIGRpc2Nvbm5lY3QgPSAoKSA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiAge1xyXG4gICAgICAgIGlmICghdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHN1Y2Nlc3NmdWxDbG9zZSApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRldmljZS5nYXR0LmRpc2Nvbm5lY3QoKVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggc3VjY2Vzc2Z1bENsb3NlIClcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBjYWNoZUNhcmRTZXJ2aWNlQmFzZSA9IHNlcnZpY2VJbmRleCA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHNlcnZpY2VJbmRleCA9IHNlcnZpY2VJbmRleCB8fCAwO1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtHQVRUXTogQ2FjaGUgQ2FyZCBTZXJ2aWNlIFJlcXVlc3QgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICByZXR1cm4gKCF0aGlzLmdhdHRTZXJ2ZXIpID8gXHJcbiAgICAgICAgICAgIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihnYXR0U2VydmVyTm90Q29ubmVjdGVkKSApXHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgdGhpcy5maW5kUHJpbWFyeVNlcnZpY2Uoc2VydmljZUluZGV4KVxyXG4gICAgICAgICAgICAudGhlbihzZXJ2aWNlID0+IHJlc29sdmUoc2VydmljZSkpXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpXHJcbiAgICB9KTtcclxuXHJcbiAgICBmaW5kUHJpbWFyeVNlcnZpY2UgPSBzZXJ2aWNlSW5kZXggPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+XHJcbiAgICAgICAgdGhpcy5nYXR0U2VydmVyLmdldFByaW1hcnlTZXJ2aWNlKHRoaXMuZGV2aWNlVVVJRHNbc2VydmljZUluZGV4XSlcclxuICAgICAgICAudGhlbihzZXJ2aWNlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jYXJkU2VydmljZSA9IHNlcnZpY2U7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbR0FUVF06IFN1Y2Nlc3MhIEdBVFQgQ2FyZCBTZXJ2aWNlIHJldHJpZXZlZCBhbmQgY2FjaGVkIHx8ICR7bmV3IERhdGUoKX1gKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGV2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ2dhdHRzZXJ2ZXJkaXNjb25uZWN0ZWQnLCB0aGlzLmRpc2Nvbm5lY3RIYW5kbGVyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHNlcnZpY2UgKTtcclxuICAgICAgICB9KS5jYXRjaCggZXJyID0+IHtcclxuICAgICAgICAgICAgaWYgKGVyci5jb2RlID09PSBub3RGb3VuZE9iai5lcnJvckNvZGUgJiYgZXJyLm5hbWUgPT09IG5vdEZvdW5kT2JqLmVycm9yTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiggdGhpcy5kZXZpY2VVVUlEc1tzZXJ2aWNlSW5kZXggKyAxXSAhPT0gXCJ1bmRlZmluZWRcIiApKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBbRVJST1JdOiBGYWlsZWQgdG8gY29ubmVjdC4gVVVJRDogJHt0aGlzLmRldmljZVVVSURzWyBzZXJ2aWNlSW5kZXggXX0gaXMgbm90IHZhbGlkIGZvciB0aGlzIGRldmljZS4gVHJ5aW5nIGFnYWluIHdpdGggVVVJRDogJHt0aGlzLmRldmljZVVVSURzWyBzZXJ2aWNlSW5kZXggKyAxIF19IHx8ICR7bmV3IERhdGUoKX1gXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuZmluZFByaW1hcnlTZXJ2aWNlKHNlcnZpY2VJbmRleCArIDEpICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbRVJST1JdOiBGYWlsZWQgdG8gcmV0cmlldmUgQ2FyZCBTZXJ2aWNlIC0gVVVJRDogJHt0aGlzLmRldmljZVVVSURzWyBzZXJ2aWNlSW5kZXggXX0gaXMgbm90IHZhbGlkIGZvciB0aGlzIGRldmljZS4gfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoIGVyciApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgY29ubmVjdEFuZENhY2hlID0gb3B0aW9uYWxJbmRleCA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cclxuICAgICAgICBsZXQgdHJ5VG9Db25uZWN0ID0gdHJ5Q291bnQgPT4gbmV3IFByb21pc2UoIChpbm5lclJlc29sdmUsIGlubmVyUmVqZWN0KSA9PiAodHJ5Q291bnQgPCA0KSA/IFxyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3QoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oICgpID0+IHRoaXMuY2FjaGVDYXJkU2VydmljZUJhc2Uob3B0aW9uYWxJbmRleCkgKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oIGNhY2hlU2VydmljZVJlc3AgPT4gaW5uZXJSZXNvbHZlKCBjYWNoZVNlcnZpY2VSZXNwIClcclxuICAgICAgICAgICAgICAgICkuY2F0Y2goIGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVyci5jb2RlID09PSBhcGlOZXR3b3JrRXJyLmNvZGUgJiYgZXJyLm5hbWUgPT09IGFwaU5ldHdvcmtFcnIubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0VSUk9SXTogRXJyb3IgY2FjaGluZyBHQVRUIFNlcnZpY2UgLSBDbGVhcmluZyBjYWNoZSBhbmQgdHJ5aW5nIGFnYWluLiB8fCAke25ldyBEYXRlKCl9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyR2F0dENhY2hlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5uZXJSZXNvbHZlKCB0cnlUb0Nvbm5lY3QoIHRyeUNvdW50ICsgMSApICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtFUlJPUl06IEZhaWxlZCB0byBjYWNoZSBHQVRUIFNlcnZpY2UgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5uZXJSZWplY3QoIGVyciApXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICBpbm5lclJlamVjdCggdGhpcy5idWlsZERldmljZUVycihnZXRTZXJ2aWNlRmFpbCkgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiB0cnlUb0Nvbm5lY3QoMCkudGhlbihcclxuICAgICAgICAgICAgY2FjaGVTZXJ2aWNlUmVzcCA9PiByZXNvbHZlKCBjYWNoZVNlcnZpY2VSZXNwKVxyXG4gICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNlbmRBcnBjQmFzZSA9IGFycGNSZXNwID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKVxyXG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGRldmljZU5vdE9wZW4pICk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgYXJwY1Jlc3AgIT09ICdzdHJpbmcnICYmIHR5cGVvZiBhcnBjUmVzcCAhPT0gJ29iamVjdCcpXHJcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoIHdyb25nSW5wdXRUeXBlcyhbJ3N0cmluZycsICdhcnJheSBvZiBudW1iZXJzJ10sIFwiQVJQQ1wiKSApICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGFMZW4gPSAodHlwZW9mIGFycGNSZXNwID09PSAnc3RyaW5nJykgPyAoYXJwY1Jlc3AubGVuZ3RoIC8gMikgOiBhcnBjUmVzcC5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgaW5wdXREYXRhID0gKHR5cGVvZiBhcnBjUmVzcCA9PT0gJ3N0cmluZycpID8gdGhpcy5oZXhUb0J5dGVzKGFycGNSZXNwKSA6IGFycGNSZXNwO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzb2x2ZShcclxuICAgICAgICAgICAgdGhpcy5idWlsZEFycGNDb21tYW5kKGRhdGFMZW4sIGlucHV0RGF0YSlcclxuICAgICAgICApXHJcbiAgICB9KTtcclxuXHJcbiAgICBvbkRlc3Ryb3lIYW5kbGVyID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmRldmljZSAmJiB0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCkgXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRldmljZS5nYXR0LmRpc2Nvbm5lY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICB3YWl0Rm9yRGV2aWNlUmVzcG9uc2UgPSBtYXhUcmllcyA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiB7XHJcblxyXG4gICAgICAgIGxldCB3YWl0Rm9yUmVzcG9uc2UgPSB0cnlOdW1iZXIgPT4gXHJcbiAgICAgICAgICAgICh0cnlOdW1iZXIgPCBtYXhUcmllcykgPyBcclxuICAgICAgICAgICAgICAgICh0aGlzLmNvbW1hbmRSZXNwQXZhaWxhYmxlKSA/IHJlc29sdmUoIHRydWUgKSA6IHNldFRpbWVvdXQoKCkgPT4gd2FpdEZvclJlc3BvbnNlKHRyeU51bWJlciArIDEpLCAyMDApXHJcbiAgICAgICAgICAgIDogcmVzb2x2ZSggZmFsc2UgKTtcclxuXHJcbiAgICAgICAgd2FpdEZvclJlc3BvbnNlKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGlzY29ubmVjdEhhbmRsZXIgPSBldmVudCA9PiB7XHJcbiAgICAgICAgdGhpcy5nYXR0U2VydmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNhcmRTZXJ2aWNlID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0Rpc2Nvbm5lY3RlZF06IERpc2Nvbm5lY3QgZXZlbnQuIFJldHVybmluZyBldmVudCB0byB1c2VyLCByZW1vdmluZyBkZXZpY2UgbGlzdGVuZXIgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RDYWxsYmFjayhldmVudCk7XHJcbiAgICAgICAgdGhpcy5kZXZpY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcignZ2F0dHNlcnZlcmRpc2Nvbm5lY3RlZCcsIHRoaXMuZGlzY29ubmVjdEhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRGV2aWNlQ29ubmVjdGVkID0gKCkgPT4gKHRoaXMuZGV2aWNlLmdhdHQpID8gdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQgOiBmYWxzZTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRGV2aWNlQmFzZTsiLCJpbXBvcnQgRGV2aWNlQmFzZSBmcm9tICcuLi9kZXZpY2VzL2Jhc2VDbGFzcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgbWlzc2luZ1JlcXVpcmVkRmllbGRzLFxyXG4gICAgd3JvbmdJbnB1dFR5cGVzLFxyXG4gICAgd3JvbmdJbnB1dFZhbHVlc1xyXG59IGZyb20gJy4uL2Vycm9ySGFuZGxlci9lcnJDb25zdGFudHMnO1xyXG5cclxuY2xhc3MgUGluVmFsaWRhdGlvbiBleHRlbmRzIERldmljZUJhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsQmFja3MpIHtcclxuICAgICAgICBzdXBlcihkZXZpY2UsIGNhbGxCYWNrcyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFsaWRhdGVBbW91bnQgPSBwYXJlbnRSZWplY3QgPT4gKGFtb3VudCwgcHJvcE5hbWUsIGRlZmF1bHRWYWwpID0+IHtcclxuICAgICAgICBzd2l0Y2godHlwZW9mKGFtb3VudCkpIHtcclxuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoYW1vdW50LnRvU3RyaW5nKCkubGVuZ3RoID4gMTIpID8gcGFyZW50UmVqZWN0KHdyb25nSW5wdXRWYWx1ZXMoWydudW1iZXIgb2YgMTIgZGlnaXRzIG9yIGxlc3MnLCAnYnl0ZSBhcnJheSByZXByZXNlbnRhdGlvbiBvZiBhbW91bnQgKDYgYnl0ZXMsIG4xMiBmb3JtYXQpJ10sIGFtb3VudCkpIFxyXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5jb252ZXJ0TnVtVG9BbW91bnQoYW1vdW50KTtcclxuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoYW1vdW50Lmxlbmd0aCA9PT0gNikgPyBhbW91bnQgXHJcbiAgICAgICAgICAgICAgICAgICAgOiBwYXJlbnRSZWplY3Qod3JvbmdJbnB1dFZhbHVlcyhbJzEyIGRpZ2l0IG9yIGxlc3MgbnVtYmVyJywgJ2J5dGUgYXJyYXkgcmVwcmVzZW50YXRpb24gb2YgYW1vdW50ICg2IGJ5dGVzLCBuMTIgZm9ybWF0KSddLCBwcm9wTmFtZSkpO1xyXG4gICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh0eXBlb2YoZGVmYXVsdFZhbCkgPT09ICd1bmRlZmluZWQnKSA/IHBhcmVudFJlamVjdChtaXNzaW5nUmVxdWlyZWRGaWVsZHMocHJvcE5hbWUpKSA6IGRlZmF1bHRWYWw7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50UmVqZWN0KHdyb25nSW5wdXRUeXBlcyhbJ251bWJlciBvZiAxMiBkaWdpdHMgb3IgbGVzcycsICdieXRlIGFycmF5IHJlcHJlc2VudGF0aW9uIG9mIGFtb3VudCAoNiBieXRlcywgbjEyIGZvcm1hdCknXSwgcHJvcE5hbWUpKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgdmFsaWRhdGVSZXF1aXJlZElucHV0cyA9IHZhbGlkYXRpb25Db25maWcgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsaWRhdGlvbkNvbmZpZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgeyBwcm9wLCB2YWxpZFR5cGVzLCB2YWxpZFZhbHVlcywgY29uZGl0aW9uLCBwcm9wTmFtZSB9ID0gdmFsaWRhdGlvbkNvbmZpZ1tpXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YocHJvcCkgPT09ICd1bmRlZmluZWQnICYmIGNvbmRpdGlvbilcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobWlzc2luZ1JlcXVpcmVkRmllbGRzKHByb3BOYW1lKSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgdHlwZUlzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaW5keCA9IDA7IGluZHggPCB2YWxpZFR5cGVzLmxlbmd0aDsgaW5keCsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHByb3ApID09PSB2YWxpZFR5cGVzW2luZHhdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZUlzVmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXR5cGVJc1ZhbGlkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdCh3cm9uZ0lucHV0VHlwZXModmFsaWRUeXBlcywgcHJvcE5hbWUpKTsgXHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mKHZhbGlkVmFsdWVzKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIGxldCB2YWxzQXJlVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB2YWxpZFZhbHVlcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcC50b0xvd2VyQ2FzZSgpID09PSB2YWxpZFZhbHVlc1tpbmRleF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsc0FyZVZhbGlkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdmFsc0FyZVZhbGlkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Qod3JvbmdJbnB1dFZhbHVlcyh2YWxpZFZhbHVlcywgcHJvcE5hbWUpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGluVmFsaWRhdGlvbjsiLCJpbXBvcnQgUGluVmFsaWRhdGlvbiBmcm9tICcuL3BpblZhbGlkYXRpb24nO1xyXG5cclxuY2xhc3MgUGluVXRpbHMgZXh0ZW5kcyBQaW5WYWxpZGF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGRldmljZSwgY2FsbEJhY2tzKSB7XHJcbiAgICAgICAgc3VwZXIoZGV2aWNlLCBjYWxsQmFja3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlY2ltYWxUb0JpbmFyeSA9IG51bSA9PiB7XHJcbiAgICAgICAgbGV0IGJpbmFyeU51bSA9IChudW0gPj4+IDApLnRvU3RyaW5nKDIpO1xyXG4gICAgICAgIHJldHVybiBcIjAwMDAwMDAwXCIuc3Vic3RyKGJpbmFyeU51bS5sZW5ndGgpICsgYmluYXJ5TnVtO1xyXG4gICAgfVxyXG5cclxuICAgIHN0cmluZ051bVRvQm9vbCA9IHN0cmluZ051bSA9PiAhIStzdHJpbmdOdW07XHJcblxyXG4gICAgZmluZE51bGxUZXJtaW5hdGVkU3RyaW5nID0gbnVsbFRlcm1pbmF0ZWRBcnJheSA9PiB7XHJcbiAgICAgICAgbGV0IHRhcmdldEluZGV4O1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bGxUZXJtaW5hdGVkQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKG51bGxUZXJtaW5hdGVkQXJyYXlbaV0gPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsVGVybWluYXRlZEFycmF5W2kgKyAxXSA9PT0gMCAmJiBudWxsVGVybWluYXRlZEFycmF5W2kgKyAyXSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEluZGV4ID0gaTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICh0YXJnZXRJbmRleCkgPyBcclxuICAgICAgICAgICAgdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhudWxsVGVybWluYXRlZEFycmF5LnNsaWNlKDIsIHRhcmdldEluZGV4KSApIFxyXG4gICAgICAgICAgICA6IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcobnVsbFRlcm1pbmF0ZWRBcnJheS5zbGljZSgyKSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbmRQaW5MZW5ndGggPSAobWF4TGVuLCBtaW5MZW4pID0+IHtcclxuICAgICAgICBsZXQgbWF4TGVuZ3RoID0gMTI7XHJcbiAgICAgICAgbGV0IG1pbkxlbmd0aCA9IDQ7XHJcblxyXG4gICAgICAgIGlmIChtYXhMZW4pIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXhMZW4gPT09ICdudW1iZXInICYmIG1heExlbiA8PSAxMilcclxuICAgICAgICAgICAgICAgIG1heExlbmd0aCA9IChtYXhMZW4gPj0gNCkgPyBtYXhMZW4gOiAxMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChtaW5MZW4pIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtaW5MZW4gPT09ICdudW1iZXInICYmIG1pbkxlbiA+PTQpXHJcbiAgICAgICAgICAgICAgICBtaW5MZW5ndGggPSAobWluTGVuIDw9IG1heExlbmd0aCkgPyBtaW5MZW4gOiA0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KGAke21heExlbmd0aC50b1N0cmluZygxNil9JHttaW5MZW5ndGgudG9TdHJpbmcoMTYpfWAsIDE2KTtcclxuICAgIH1cclxuXHJcbiAgICBidWlsZFBpbk9wdGlvbnNCeXRlID0gKGxhbmd1YWdlU2VsZWN0aW9uLCB3YWl0TWVzc2FnZSwgdmVyaWZ5UGluLCBwaW5CbG9ja0Zvcm1hdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGxhbmd1YWdlUHJvbXB0cyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICBcImRpc2FibGVkXCI6IFwiMDBcIixcclxuICAgICAgICAgICAgXCJlbmdsaXNoZnJlbmNoXCI6IFwiMDFcIixcclxuICAgICAgICAgICAgXCJhbGxzcGVjaWZpZWRcIjogXCIxMFwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxhbmd1YWdlU2VsZWN0aW9uID0gKGxhbmd1YWdlU2VsZWN0aW9uKSA/IChsYW5ndWFnZVByb21wdHNbIGxhbmd1YWdlU2VsZWN0aW9uLnRvTG93ZXJDYXNlKCkgXSB8fCBsYW5ndWFnZVByb21wdHMuZGlzYWJsZWQpIDogbGFuZ3VhZ2VQcm9tcHRzLmRpc2FibGVkO1xyXG4gICAgICAgIHdhaXRNZXNzYWdlID0gKHR5cGVvZiB3YWl0TWVzc2FnZSA9PT0gJ2Jvb2xlYW4nKSA/IHdhaXRNZXNzYWdlIDogdHJ1ZTtcclxuICAgICAgICB2ZXJpZnlQaW4gPSAodHlwZW9mIHdhaXRNZXNzYWdlID09PSAnYm9vbGVhbicpID8gd2FpdE1lc3NhZ2UgOiB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHBpbkJsb2NrRm9ybWF0ID0gKHBpbkJsb2NrRm9ybWF0ICYmIHR5cGVvZihwaW5CbG9ja0Zvcm1hdCkgPT09ICdzdHJpbmcnKSA/IFxyXG4gICAgICAgICAgICAgICAgKHBpbkJsb2NrRm9ybWF0LnRvTG93ZXJDYXNlKCkgPT09ICdpc28wJykgPyAnMCcgOiAnMScgXHJcbiAgICAgICAgICAgIDogJzAnO1xyXG5cclxuICAgICAgICBjb25zdCBiaW5hcnlSZXN1bHQgPSBgMDAwJHtsYW5ndWFnZVNlbGVjdGlvbn0keygod2FpdE1lc3NhZ2UpID8gJzEnIDogJzAnKX0keygodmVyaWZ5UGluKSA/ICcxJyA6ICcwJyl9JHtwaW5CbG9ja0Zvcm1hdH1gO1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtQaW5PcHRpb25zQnl0ZV06IGJpbmFyeSBzdHJpbmcgcmVwcmVzZW50YXRpb246ICR7YmluYXJ5UmVzdWx0fSB8fCBieXRlIHJlc3VsdDogJHtwYXJzZUludChiaW5hcnlSZXN1bHQsIDIpfWApXHJcblxyXG4gICAgICAgIHJldHVybiBwYXJzZUludChiaW5hcnlSZXN1bHQsIDIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQaW5VdGlsczsiLCJpbXBvcnQgUGluVXRpbHMgZnJvbSAnLi4vdXRpbHMvcGluVXRpbHMnO1xyXG5pbXBvcnQgeyBjb25maWdTdHIsIHVua25vd24sIGFzY2lpIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuXHJcbmNsYXNzIFBhcnNlUGluQ29uZmlnIGV4dGVuZHMgUGluVXRpbHMge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsQmFja3MpIHtcclxuICAgICAgICBzdXBlcihkZXZpY2UsIGNhbGxCYWNrcyk7XHJcblxyXG4gICAgICAgIHRoaXMudHJhY2tEYXRhT3B0aW9ucyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICBcIjAwXCI6IFwiRGlzYWJsZWRcIixcclxuICAgICAgICAgICAgXCIwMVwiOiBcIkVuYWJsZWRcIixcclxuICAgICAgICAgICAgXCIxMVwiOiBcIlJlcXVpcmVkXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5lbXZMMkNvbmZpZ09wdGlvbnMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgXCIwMDAwXCI6IFwiTm8gTDIgQ2FwYWJpbGl0eVwiLFxyXG4gICAgICAgICAgICBcIjAwMDFcIjogYCR7Y29uZmlnU3RyfSBDMSAoRU1WQ28gY2VydGlmaWVkKWAsXHJcbiAgICAgICAgICAgIFwiMDAxMFwiOiBgJHtjb25maWdTdHJ9IEMyYCxcclxuICAgICAgICAgICAgXCIwMDExXCI6IGAke2NvbmZpZ1N0cn0gQzNgLFxyXG4gICAgICAgICAgICBcIjAxMDBcIjogYCR7Y29uZmlnU3RyfSBDNCAoRU1WQ28gY2VydGlmaWVkKWAsXHJcbiAgICAgICAgICAgIFwiMDEwMVwiOiBgJHtjb25maWdTdHJ9IEM1IChFTVZDbyBjZXJ0aWZpZWQpYCxcclxuICAgICAgICAgICAgXCIwMTEwXCI6IGAke2NvbmZpZ1N0cn0gQzZgLFxyXG4gICAgICAgICAgICBcIjAxMTFcIjogYCR7Y29uZmlnU3RyfSBDN2BcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5lbmFibGVkQnJhbmRzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIFwiMFwiOiBcIkFsbCBjb250YWNsZXNzIGtlcm5hbHMgZW5hYmxlZFwiLFxyXG4gICAgICAgICAgICBcIjFcIjogXCJQYXlQYXNzL01DTCBzdXBwb3J0IGRpc2FibGVkXCIsXHJcbiAgICAgICAgICAgIFwiMlwiOiBcInBheVdhdmUgc3VwcG9ydCBkaXNhYmxlZFwiLFxyXG4gICAgICAgICAgICBcIjRcIjogXCJFeHByZXNzcGF5IHN1cHBvcnQgZGlzYWJsZWRcIixcclxuICAgICAgICAgICAgXCI4XCI6IFwiRC1QQVMgc3VwcG9ydCBkaXNhYmxlZFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VEZXZpY2VDb25maWd1cmF0aW9uID0gY29uZmlnQXJyID0+ICh7XHJcbiAgICAgICAgLi4udGhpcy5maXJzdERldmljZUNvbnRyb2xCeXRlKCB0aGlzLmRlY2ltYWxUb0JpbmFyeShjb25maWdBcnJbMV0pICksXHJcbiAgICAgICAgLi4udGhpcy5zZWNvbmREZXZpY2VDb250cm9sQnl0ZSggdGhpcy5kZWNpbWFsVG9CaW5hcnkoY29uZmlnQXJyWzJdKSApLFxyXG4gICAgICAgIC4uLnRoaXMubWFza0NvbmZpZ3VyYXRpb25CeXRlKCB0aGlzLmRlY2ltYWxUb0JpbmFyeShjb25maWdBcnJbM10pICksXHJcbiAgICAgICAgLi4udGhpcy5tc3JDb25maWd1cmF0aW9uQnl0ZSggdGhpcy5kZWNpbWFsVG9CaW5hcnkoY29uZmlnQXJyWzRdKSApLFxyXG4gICAgICAgIG1hc2tDaGFyYWN0ZXI6IHRoaXMuZmluZE1hc2tDaGFyYWN0ZXIoY29uZmlnQXJyWzVdKSxcclxuICAgICAgICBsZWFkaW5nVW5tYXNrZWRMZW5ndGg6IHBhcnNlSW50KHRoaXMuZGVjaW1hbFRvQmluYXJ5KCBjb25maWdBcnJbNl0pLnNsaWNlKDQpLCAyKSxcclxuICAgICAgICB0cmFpbGluZ1VubWFza2VkTGVuZ3RoOiBwYXJzZUludCh0aGlzLmRlY2ltYWxUb0JpbmFyeSggY29uZmlnQXJyWzZdKS5zbGljZSgwLCA0KSwgMiksXHJcbiAgICAgICAgZW12TDJJY3NDb25maWc6ICh0aGlzLmVtdkwyQ29uZmlnT3B0aW9uc1sgdGhpcy5kZWNpbWFsVG9CaW5hcnkoY29uZmlnQXJyWzddKS5zbGljZSgwLCA0KSBdIHx8IGAke3Vua25vd259L1VuZG9jdW1lbnRlZCBFTVYgTDIgSUNTICR7Y29uZmlnU3RyfWApLFxyXG4gICAgICAgIC4uLnRoaXMuY29udGFjdGxlc3NDb25maWcoIGNvbmZpZ0Fycls4XSApXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb250YWN0bGVzc0NvbmZpZyA9IGNvbnRhY3RsZXNzQnl0ZSA9PiAoe1xyXG4gICAgICAgIGNvbnRhY3RsZXNzU3VwcG9ydDogdGhpcy5lbmFibGVkQnJhbmRzWyB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKFtjb250YWN0bGVzc0J5dGVdKVswXSBdLFxyXG4gICAgICAgIGNvbnRhY3RsZXNzR3VpQ29udHJvbHM6ICh0aGlzLmRlY2ltYWxUb0JpbmFyeShjb250YWN0bGVzc0J5dGUpWzVdID09PSBcIjFcIikgPyBcIkFsdGVybmF0ZVwiIDogXCJTdGFuZGFyZFwiXHJcbiAgICB9KVxyXG5cclxuICAgIGZpbmRNYXNrQ2hhcmFjdGVyID0gbnVtQ2hhciA9PiB7XHJcbiAgICAgICAgaWYgKG51bUNoYXIgPT09IDQ4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgJHthc2NpaX06ICcwJ2BcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG51bUNoYXJUb0hleCA9IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoW251bUNoYXJdKTtcclxuICAgICAgICAgICAgY29uc3QgbnVtQ2hhclRvQXNjaWkgPSB0aGlzLmhleFRvQXNjaWkoIG51bUNoYXJUb0hleCApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChudW1DaGFyVG9Bc2NpaSkgPyBgJHthc2NpaX06ICcke251bUNoYXJUb0FzY2lpfSdgIFxyXG4gICAgICAgICAgICAgICAgOiBgTm9uLSR7YXNjaWl9IGNoYXJhY3RlciBpbiBoZXg6ICcke251bUNoYXJUb0hleH0nYFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmaXJzdERldmljZUNvbnRyb2xCeXRlID0gZGV2aWNlQ29udHJvbEJ5dGUgPT4gKHtcclxuICAgICAgICByZXF1aXJlTXV0dWFsQXV0aDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woZGV2aWNlQ29udHJvbEJ5dGVbMF0pLFxyXG4gICAgICAgIG1zckVuY3J5cHRpb25WYXJpYW50OiAoZGV2aWNlQ29udHJvbEJ5dGVbMV0gPT09IFwiMVwiKSA/IFwiREFUQVwiIDogXCJQSU5cIixcclxuICAgICAgICBpc0NsZWFyVGV4dEVuYWJsZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKGRldmljZUNvbnRyb2xCeXRlWzNdKSxcclxuICAgICAgICBpc0JlZXBlck1vZGVFbmFibGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbChkZXZpY2VDb250cm9sQnl0ZVs0XSksXHJcbiAgICAgICAgaXNCaXRtYXBMb2NrZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKGRldmljZUNvbnRyb2xCeXRlWzZdKSxcclxuICAgICAgICBpc0NvbmZpZ3VyYXRpb25Mb2NrZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKGRldmljZUNvbnRyb2xCeXRlWzddKVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2Vjb25kRGV2aWNlQ29udHJvbEJ5dGUgPSBkZXZpY2VDdHJsQnl0ZSA9PiAoe1xyXG4gICAgICAgIGlzQXJwY01hY0VuYWJsZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKGRldmljZUN0cmxCeXRlWzFdKSxcclxuICAgICAgICBpc0ZpbmFuY2lhbEljY0NhcmRUeXBlUmVwb3J0aW5nRW5hYmxlZDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woZGV2aWNlQ3RybEJ5dGVbMl0pLFxyXG4gICAgICAgIGFycWNCYXRjaERhdGFPdXRwdXRGb3JtYXQ6IChkZXZpY2VDdHJsQnl0ZVszXSA9PT0gXCIxXCIpID8gXCJSZXNlcnZlZCBGb3JtYXRcIiA6IFwiRHluYVBybyBGb3JtYXRcIlxyXG4gICAgfSk7XHJcblxyXG4gICAgbWFza0NvbmZpZ3VyYXRpb25CeXRlID0gbWFza0NvbmZpZ0J5dGUgPT4gKHtcclxuICAgICAgICBpc0lzb01hc2tFbmFibGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbChtYXNrQ29uZmlnQnl0ZVs3XSksXHJcbiAgICAgICAgaXNDaGVja0RpZ2l0RW5hYmxlZDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2wobWFza0NvbmZpZ0J5dGVbNl0pLFxyXG4gICAgICAgIGlzTXMyUG9pbnQwRW5hYmxlZDogKCBtYXNrQ29uZmlnQnl0ZS5zbGljZSg0LCA2KSAhPT0gXCIwMFwiKVxyXG4gICAgfSk7XHJcblxyXG4gICAgbXNyQ29uZmlndXJhdGlvbkJ5dGUgPSBtc3JDb25maWdCeXRlID0+ICh7XHJcbiAgICAgICAgaXNBQU1WQWNhcmRFbmFibGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbChtc3JDb25maWdCeXRlWzddKSxcclxuICAgICAgICB0cmFjazNEYXRhOiAoIHRoaXMudHJhY2tEYXRhT3B0aW9uc1sgbXNyQ29uZmlnQnl0ZS5zbGljZSg0LCA2KSBdIHx8IHVua25vd24gKSxcclxuICAgICAgICB0cmFjazJEYXRhOiAoIHRoaXMudHJhY2tEYXRhT3B0aW9uc1sgbXNyQ29uZmlnQnl0ZS5zbGljZSgyLCA0KSBdIHx8IHVua25vd24gKSxcclxuICAgICAgICB0cmFjazFEYXRhOiAoIHRoaXMudHJhY2tEYXRhT3B0aW9uc1sgbXNyQ29uZmlnQnl0ZS5zbGljZSgwLCAyKSBdIHx8IHVua25vd24gKSxcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBhcnNlUGluQ29uZmlnO1xyXG4iLCJpbXBvcnQgUGFyc2VQaW5Db25maWcgZnJvbSAnLi9waW5Db25maWd1cmF0aW9uJztcclxuaW1wb3J0IHsgdW5rbm93biB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XHJcblxyXG5jbGFzcyBQaW5TdGF0dXNQYXJzZXIgZXh0ZW5kcyBQYXJzZVBpbkNvbmZpZyB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIGNhbGxCYWNrcykge1xyXG4gICAgICAgIHN1cGVyKGRldmljZSwgY2FsbEJhY2tzKTtcclxuXHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25TdGF0dXMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgMHgwMDogXCJPa1wiLFxyXG4gICAgICAgICAgICAweDAxOiBcIkNhcmRob2xkZXIgQ2FuY2VsXCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiVGltZW91dFwiLFxyXG4gICAgICAgICAgICAweDAzOiBcIkhvc3QgQ2FuY2VsXCIsXHJcbiAgICAgICAgICAgIDB4MDQ6IFwiVmVyaWZ5IGZhaWxcIixcclxuICAgICAgICAgICAgMHgwNTogXCJLZXlwYWQgU2VjdXJpdHlcIixcclxuICAgICAgICAgICAgMHgwNjogXCJDYWxpYnJhdGlvbiBEb25lXCIsXHJcbiAgICAgICAgICAgIDB4MDc6IFwiV3JpdGUgd2l0aCBkdXBsaWNhdGUgUklEIGFuZCBpbmRleFwiLFxyXG4gICAgICAgICAgICAweDA4OiBcIldyaXRlIHdpdGggY29ycnVwdGVkIEtleVwiLFxyXG4gICAgICAgICAgICAweDA5OiBcIkNBIFB1YmxpYyBLZXkgcmVhY2hlZCBtYXhpbXVtIGNhcGFjaXR5XCIsXHJcbiAgICAgICAgICAgIDB4MEE6IFwiQ0EgUHVibGljIEtleSByZWFkIHdpdGggaW52YWxpZCBSSUQgb3IgSW5kZXhcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLkFDS1NUUyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIk9rXCIsXHJcbiAgICAgICAgICAgIDB4MTU6IFwiUklEIGVycm9yL0luZGV4IG5vdCBmb3VuZFwiLFxyXG4gICAgICAgICAgICAweDgwOiBcIkRldmljZSBFcnJvcjogZXJyb3IsIHRhbXBlciwgbWlzc2luZyBjZXJ0aWZpY2F0ZSBvciBpbmNvcnJlY3Qgc2lnbmF0dXJlIGRldGVjdGVkXCIsXHJcbiAgICAgICAgICAgIDB4ODE6IFwiRGV2aWNlIG5vdCBpZGxlXCIsXHJcbiAgICAgICAgICAgIDB4ODI6IFwiRGF0YSBFcnJvciBvciBCYWQgUGFyYW1hdGVyKHMpXCIsXHJcbiAgICAgICAgICAgIDB4ODM6IFwiTGVuZ3RoIEVycm9yOiBkYXRhIHNpemUgaXMgZWl0aGVyIHRvbyBzbWFsbCwgdG9vIGxhcmdlLCBpbmNvbXBsZXRlLCBvciBPSUQgb2YgdGhlIGNlcnQgZG9lc24ndCBtYXRjaCBwcmVkZWZpbmVkIE9JRFwiLFxyXG4gICAgICAgICAgICAweDg0OiBcIlBBTiBFeGlzdHNcIixcclxuICAgICAgICAgICAgMHg4NTogXCJNaXNzaW5nIG9yIEluY29ycmVjdCBLZXlcIixcclxuICAgICAgICAgICAgMHg4NjogXCJEZXZpY2UgQnVzeVwiLFxyXG4gICAgICAgICAgICAweDg3OiBcIkRldmljZSBMb2NrZWRcIixcclxuICAgICAgICAgICAgMHg4ODogXCJBdXRoIHJlcXVpcmVkXCIsXHJcbiAgICAgICAgICAgIDB4ODk6IFwiQmFkIEF1dGhcIixcclxuICAgICAgICAgICAgMHg4QTogXCJEZXZpY2UgTm90IEF2YWlsYWJsZVwiLFxyXG4gICAgICAgICAgICAweDhCOiBcIkFtb3VudCBOZWVkZWQgLSBJZiBQSU4gYW1vdW50IGlzIHJlcXVpcmVkLCBubyBhbW91bnQgaGFzIGJlZW4gc2V0XCIsXHJcbiAgICAgICAgICAgIDB4OEM6IFwiQmF0dGVyeSBpcyBjcml0aWNhbGx5IGxvd1wiLFxyXG4gICAgICAgICAgICAweDhEOiBcIkRldmljZSBpcyByZXNldHRpbmdcIixcclxuICAgICAgICAgICAgMHg5MDogXCJDZXJ0aWZpY2F0ZSBkb2VzIG5vdCBleGlzdFwiLFxyXG4gICAgICAgICAgICAweDkxOiBcIkV4cGlyZWQgKENlcnQvQ1JMKVwiLFxyXG4gICAgICAgICAgICAweDkyOiBcIkludmFsaWQgKENlcnQvQ1JML01lc3NhZ2UpXCIsXHJcbiAgICAgICAgICAgIDB4OTM6IFwiUmV2b2tlZCAoQ2VydC9DUkwpXCIsXHJcbiAgICAgICAgICAgIDB4OTQ6IFwiQ1JMIGRvZXMgbm90IGV4aXN0XCIsXHJcbiAgICAgICAgICAgIDB4OTU6IFwiQ2VydGlmaWNhdGUgZXhpc3RzXCIsXHJcbiAgICAgICAgICAgIDB4OTY6IFwiRHVwbGljYXRlIEtTTi9LZXlcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnBpbkNvbW1hbmRJZHMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgMHgwMTogXCJyZXNwb25zZUFDS1wiLFxyXG4gICAgICAgICAgICAweDAyOiBcImNsZWFyU2Vzc2lvblwiLFxyXG4gICAgICAgICAgICAweDAzOiBcInN3aXBlXCIsXHJcbiAgICAgICAgICAgIDB4MDQ6IFwicmVxdWVzdFBpbkVudHJ5XCIsXHJcbiAgICAgICAgICAgIDB4MDU6IFwiY2FuY2VsQ29tbWFuZFwiLFxyXG4gICAgICAgICAgICAweDA2OiBcInJlcXVlc3RDYXJkaG9sZGVyU2VsZWN0aW9uXCIsXHJcbiAgICAgICAgICAgIDB4MDc6IFwiZGlzcGxheU1lc3NhZ2VcIixcclxuICAgICAgICAgICAgMHgwODogXCJyZXF1ZXN0RGV2aWNlU3RhdHVzXCIsXHJcbiAgICAgICAgICAgIDB4MDk6IFwicmVxdWVzdERldmljZUNvbmZpZ3VyYXRpb25cIixcclxuICAgICAgICAgICAgMHgwQTogXCJyZXF1ZXN0TXNyRGF0YVwiLFxyXG4gICAgICAgICAgICAweDBCOiBcImdldENoYWxsZW5nZVwiLFxyXG4gICAgICAgICAgICAweDA3OiBcImRpc3BsYXlNZXNzYWdlXCIsXHJcbiAgICAgICAgICAgIDB4QTI6IFwiZW12VHJhbnNhY3Rpb25TdGF0dXNcIixcclxuICAgICAgICAgICAgMHhBQjogXCJyZXF1ZXN0RW12RGF0YVwiLFxyXG4gICAgICAgICAgICAweDMwOiBcImdldEtzblwiLFxyXG4gICAgICAgICAgICAweDA1OiBcImNhbmNlbENvbW1hbmRcIixcclxuICAgICAgICAgICAgMHgxQTogXCJyZXF1ZXN0RGV2aWNlSW5mb1wiLFxyXG4gICAgICAgICAgICAweDEwOiBcInNlbmRCaWdCbG9ja0RhdGFcIixcclxuICAgICAgICAgICAgMHhBMDogXCJyZXF1ZXN0VGlwT3JDYXNoYmFja1wiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZFR5cGVzRW51bSA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIk90aGVyXCIsXHJcbiAgICAgICAgICAgIDB4MDE6IFwiRmluYW5jaWFsXCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiQUFNVkFcIixcclxuICAgICAgICAgICAgMHgwMzogXCJNYW51YWxcIixcclxuICAgICAgICAgICAgMHgwNDogXCJVbmtub3duXCIsXHJcbiAgICAgICAgICAgIDB4MDU6IFwiSUNDXCIsXHJcbiAgICAgICAgICAgIDB4MDY6IFwiQ29udGFjdGxlc3MgSUNDIC0gRU1WXCIsXHJcbiAgICAgICAgICAgIDB4MDc6IFwiRmluYW5jaWFsIE1TUiArIElDQ1wiLFxyXG4gICAgICAgICAgICAweDA4OiBcIkNvbnRhY3RsZXNzIElDQyAtIE1TRFwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZGV2aWNlU3RhdGUgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgMHgwMDogXCJJZGxlXCIsXHJcbiAgICAgICAgICAgIDB4MDE6IFwiU2Vzc2lvblwiLFxyXG4gICAgICAgICAgICAweDAyOiBcIldhaXQgRm9yIENhcmRcIixcclxuICAgICAgICAgICAgMHgwMzogXCJXYWl0IEZvciBQSU5cIixcclxuICAgICAgICAgICAgMHgwNDogXCJXYWl0IEZvciBTZWxlY3Rpb25cIixcclxuICAgICAgICAgICAgMHgwNTogXCJEaXNwbGF5aW5nIE1lc3NhZ2VcIixcclxuICAgICAgICAgICAgMHgwNjogXCJUZXN0IChSZXNlcnZlZCBmb3IgZnV0dXJlIHVzZSlcIixcclxuICAgICAgICAgICAgMHgwNzogXCJNYW51YWwgQ2FyZCBFbnRyeVwiLFxyXG4gICAgICAgICAgICAweDA5OiBcIldhaXQgQ2FyZGhvbGRlciBFbnRyeVwiLFxyXG4gICAgICAgICAgICAweDBBOiBcIkNoaXAgQ2FyZFwiLFxyXG4gICAgICAgICAgICAweDBCOiBcIklDQyBLZXJuZWwgVGVzdFwiLFxyXG4gICAgICAgICAgICAweDBDOiBcIkVNViBUcmFuc2FjdGlvblwiLFxyXG4gICAgICAgICAgICAweDBEOiBcIlNob3cgUEFOXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5waW5LZXlTdGF0dXNFbnVtID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIFwiMDBcIjogXCJQSU4gS2V5IE9LXCIsXHJcbiAgICAgICAgICAgIFwiMDFcIjogXCJQSU4gS2V5IEV4aGF1c3RlZFwiLFxyXG4gICAgICAgICAgICBcIjEwXCI6IFwiTm8gUElOIEtleVwiLFxyXG4gICAgICAgICAgICBcIjExXCI6IFwiUElOIEtleSBOb3QgQm91bmRcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm1zcktleVN0YXR1c0VudW0gPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgXCIwMFwiOiBcIk1TUiBLZXkgT0tcIixcclxuICAgICAgICAgICAgXCIwMVwiOiBcIk1TUiBLZXkgRXhoYXVzdGVkXCIsXHJcbiAgICAgICAgICAgIFwiMTBcIjogXCJObyBNU1IgS2V5XCIsXHJcbiAgICAgICAgICAgIFwiMTFcIjogXCJNU1IgS2V5IE5vdCBCb3VuZFwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZERhdGFJZHMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgMHgwMTogXCJ0cmFjazFcIixcclxuICAgICAgICAgICAgMHgwMjogXCJ0cmFjazJcIixcclxuICAgICAgICAgICAgMHgwMzogXCJ0cmFjazNcIixcclxuICAgICAgICAgICAgMHgwNDogXCJlbmNyeXB0ZWRUcmFjazFcIixcclxuICAgICAgICAgICAgMHgwNTogXCJlbmNyeXB0ZWRUcmFjazJcIixcclxuICAgICAgICAgICAgMHgwNjogXCJlbmNyeXB0ZWRUcmFjazNcIixcclxuICAgICAgICAgICAgMHgwNzogXCJtYWduZVByaW50XCIsXHJcbiAgICAgICAgICAgIDB4NDA6IFwiZW5jcnlwdGVkUGFuQW5kRXhwXCIsXHJcbiAgICAgICAgICAgIDB4NDE6IFwic2VyaWFsTnVtYmVyXCIsXHJcbiAgICAgICAgICAgIDB4NjM6IFwia3NuQW5kTWFnbmVQcmludFN0YXR1c1wiLFxyXG4gICAgICAgICAgICAweDY0OiBcIkNCQy1NQUNcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNhcmRob2xkZXJTdGF0dXNJZHMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgMHgwMTogXCJXYWl0aW5nIGZvciBhbW91bnQgY29uZmlybWF0aW9uIHNlbGVjdGlvblwiLFxyXG4gICAgICAgICAgICAweDAyOiBcIkFtb3VudCBjb25maXJtYXRpb24gc2VsZWN0ZWRcIixcclxuICAgICAgICAgICAgMHgwMzogXCJXYWl0aW5nIGZvciBtdWx0aS1wYXltZW50IElDQyBBcHBsaWNhdGlvbiBzZWxlY3Rpb25cIixcclxuICAgICAgICAgICAgMHgwNDogXCJJQ0MgQXBwbGljYXRpb24gc2VsZWN0ZWRcIixcclxuICAgICAgICAgICAgMHgwNzogXCJXYWl0aW5nIGZvciBsYW5ndWFnZSBzZWxlY3Rpb25cIixcclxuICAgICAgICAgICAgMHgwODogXCJMYW5ndWFnZSBzZWxlY3RlZFwiLFxyXG4gICAgICAgICAgICAweDA5OiBcIldhaXRpbmcgZm9yIGNyZWRpdC9kZWJpdCBzZWxlY3Rpb25cIixcclxuICAgICAgICAgICAgMHgwQTogXCJDcmVkaXQvRGViaXQgc2VsZWN0ZWRcIixcclxuICAgICAgICAgICAgMHgwQjogXCJXYWl0aW5nIGZvciBQaW4gRW50cnkgZm9yIElDQ1wiLFxyXG4gICAgICAgICAgICAweDBDOiBcIlBJTiBlbnRlcmVkIGZvciBJQ0NcIixcclxuICAgICAgICAgICAgMHgwRDogXCJXYWl0aW5nIGZvciBQaW4gRW50cnkgZm9yIE1TUlwiLFxyXG4gICAgICAgICAgICAweDBFOiBcIlBJTiBlbnRlcmVkIGZvciBNU1JcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmJ1ZmZlclR5cGVzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIDB4MDI6IFwiRGV2aWNlIENlcnRpZmljYXRlXCIsXHJcbiAgICAgICAgICAgIDB4MzI6IFwiU2V0IEJJTiAoTUFDKVwiLFxyXG4gICAgICAgICAgICAweDQyOiBcIkNTUlwiLFxyXG4gICAgICAgICAgICAweEExOiBcIkVNViBkYXRhIGluIFRMViBmb3JtYXQsIFRhZyBEYXRhIChNQUMpXCIsXHJcbiAgICAgICAgICAgIDB4QTI6IFwiUkVTRVJWRURcIixcclxuICAgICAgICAgICAgMHhBMzogXCJSRVNFUlZFRFwiLFxyXG4gICAgICAgICAgICAweEE0OiBcIkVNViBkYXRhIGluIFRMViBmb3JtYXQsIEF1dGhvcml6YXRpb24gUmVxdWVzdCAoQVJRQylcIixcclxuICAgICAgICAgICAgMHhBNTogXCJDQSBQdWJsaWMgS2V5IChNQUMpXCIsXHJcbiAgICAgICAgICAgIDB4QUI6IFwiRU1WIGRhdGEgaW4gVExWIGZvcm1hdCwgQmF0Y2ggRGF0YVwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZERhdGFPYmogPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5hcnFjQXJyaXZpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmJhdGNoRGF0YUFycml2aW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuYXJxY1RvdGFsTGVuID0gMDtcclxuICAgICAgICB0aGlzLmJhdGNoVG90YWxMZW4gPSAwO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnZlcnRTdGF0dXNUb1N0cmluZyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIk9rXCIsXHJcbiAgICAgICAgICAgIDB4MDE6IFwiRW1wdHlcIixcclxuICAgICAgICAgICAgMHgwMjogXCJFcnJvclwiLFxyXG4gICAgICAgICAgICAweDA0OiBcIkRpc2FibGVkXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kRW12Q2FyZGhvbGRlclN0YXR1cyA9IGNhcmRIb2xkZXJTdGF0dXNCeXRlID0+ICAoe1xyXG4gICAgICAgIGVtdkNhcmRob2xkZXJTdGF0dXM6ICh0aGlzLmNhcmRob2xkZXJTdGF0dXNJZHNbIGNhcmRIb2xkZXJTdGF0dXNCeXRlIF0gfHwgYCR7dW5rbm93bn0vVW5kb2N1bWVudGVkIENhcmRob2xkZXIgSW50ZXJhY3Rpb24gU3RhdHVzIElEOiAke2NhcmRIb2xkZXJTdGF0dXNCeXRlfWApXHJcbiAgICB9KTtcclxuXHJcbiAgICBmaW5kT3BlcmF0aW9uU3RhdHVzID0gc3RhdHVzSWQgPT4gKHtcclxuICAgICAgICBvcGVyYXRpb25TdGF0dXM6ICh0aGlzLm9wZXJhdGlvblN0YXR1c1sgc3RhdHVzSWQgXSB8fCBgJHt1bmtub3dufSBPcGVyYXRpb24gU3RhdHVzYClcclxuICAgIH0pO1xyXG5cclxuICAgIHBhcnNlRGlzcGxheU1lc3NhZ2VEb25lID0gZGlzcGxheVN0YXR1cyA9PiB0aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMoZGlzcGxheVN0YXR1c1syXSk7XHJcblxyXG4gICAgcGFyc2VFbXZDb21wbGV0aW9uID0gY29tbWFuZFJlc3AgPT4ge1xyXG4gICAgICAgIC8vVE9ETzpcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlshLSEtIS0hLSBlbXZDb21wbGV0aW9uIC0hLSEtIS0hXCIsIGNvbW1hbmRSZXNwKTtcclxuICAgICAgICByZXR1cm4gKHtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9ybWF0U2VyaWFsTnVtYmVyID0gY29tbWFuZFJlc3AgPT4ge1xyXG4gICAgICAgIHRoaXMucmVxdWVzdGVkU24gPSB7XHJcbiAgICAgICAgICAgIHNlcmlhbE51bWJlcjogdGhpcy5maW5kTnVsbFRlcm1pbmF0ZWRTdHJpbmcoY29tbWFuZFJlc3ApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZ2V0U2VyaWFsTnVtYmVyID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgZm9ybWF0S3NuQW5kU24gPSBjb21tYW5kUmVzcCA9PiB7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0ZWRLc24gPSB7XHJcbiAgICAgICAgICAgIGtzbjogdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggY29tbWFuZFJlc3Auc2xpY2UoMiwgMTIpICksXHJcbiAgICAgICAgICAgIHNlcmlhbE51bWJlcjogdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggY29tbWFuZFJlc3Auc2xpY2UoMTIsIDIwKSApXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRLc25BdmFpbGFibGUgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybjtcclxufVxyXG5cclxuICAgIGhhbmRsZUJpZ0Jsb2NrQmVnaW4gPSBiaWdCbG9ja0RhdGEgPT4ge1xyXG4gICAgICAgIHN3aXRjaChiaWdCbG9ja0RhdGFbMV0pIHtcclxuICAgICAgICAgICAgY2FzZSAweEE0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcnFjQXJyaXZpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcnFjVG90YWxMZW4gPSB0aGlzLnJlYWRUd29CeXRlTGVuZ3RoKFsgYmlnQmxvY2tEYXRhWzVdLCBiaWdCbG9ja0RhdGFbNF0gXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAweEFCOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5iYXRjaERhdGFBcnJpdmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJhdGNoVG90YWxMZW4gPSB0aGlzLnJlYWRUd29CeXRlTGVuZ3RoKFsgYmlnQmxvY2tEYXRhWzVdLCBiaWdCbG9ja0RhdGFbNF0gXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAweDE4OlxyXG4gICAgICAgICAgICBjYXNlIDB4MjA6XHJcbiAgICAgICAgICAgIGNhc2UgMHgyMTpcclxuICAgICAgICAgICAgICAgIC8vRGVidWcgZGF0YS4gSWdub3JlLlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlclR5cGU6ICh0aGlzLmJ1ZmZlclR5cGVzWyBiaWdCbG9ja0RhdGFbMV0gXSB8fCBcIkJ1ZmZlciB0eXBlIG5vdCBkb2N1bWVudGVkXCIpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUFycWNCaWdCbG9ja0ZpbmlzaCA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBhcnFjID0gdGhpcy5idWlsZEluaXRpYWxEYXRhQXJyYXkoZmFsc2UpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFGb3JBcnFjID0gdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggYXJxYyApO1xyXG5cclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbQVJRQ106ICR7ZGF0YUZvckFycWN9YCk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZERhdGFPYmogPSB7XHJcbiAgICAgICAgICAgIC4uLnRoaXMuY2FyZERhdGFPYmosXHJcbiAgICAgICAgICAgIGFycWNEYXRhOiBkYXRhRm9yQXJxYyxcclxuICAgICAgICAgICAgYXJxY0RhdGFQYXJzZWQ6IHRoaXMudGx2UGFyc2VyKFxyXG4gICAgICAgICAgICAgICAgYXJxYy5zbGljZSgyKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJhd0RhdGEgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5hcnFjQXJyaXZpbmcgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gKCF0aGlzLmlzUXVpY2tDaGlwVHJhbnNhY3Rpb24pID8gdGhpcy50cmFuc2FjdGlvbkNhbGxiYWNrKCB0aGlzLmNhcmREYXRhT2JqICkgOiB2b2lkKDApO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUJhdGNoQmlnQmxvY2tGaW5pc2ggPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYmF0Y2ggPSB0aGlzLmJ1aWxkSW5pdGlhbERhdGFBcnJheShmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgZGF0YUZvckJhdGNoID0gdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggYmF0Y2ggKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0JBVENIIERBVEFdOiAke2RhdGFGb3JCYXRjaH1gKTtcclxuXHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbkhhc1N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmhhc1RpcCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCBwYXJzZWRCYXRjaERhdGEgPSB0aGlzLnRsdlBhcnNlcihcclxuICAgICAgICAgICAgYmF0Y2guc2xpY2UoMilcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBpc1NpZ25hdHVyZVJlcXVpcmVkID0gcGFyc2VkQmF0Y2hEYXRhLmZpbmQoICh7IHRhZyB9KSA9PiB0YWcgPT09IFwiREZERjQwXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmNhcmREYXRhT2JqID0gKGlzU2lnbmF0dXJlUmVxdWlyZWQpID8gKHtcclxuICAgICAgICAgICAgLi4udGhpcy5jYXJkRGF0YU9iaixcclxuICAgICAgICAgICAgYmF0Y2hEYXRhOiBkYXRhRm9yQmF0Y2gsXHJcbiAgICAgICAgICAgIGJhdGNoRGF0YVBhcnNlZDogcGFyc2VkQmF0Y2hEYXRhLFxyXG4gICAgICAgICAgICBzaWduYXR1cmVSZXF1aXJlZDogKGlzU2lnbmF0dXJlUmVxdWlyZWQgPT09IDB4MDEpXHJcbiAgICAgICAgfSkgOiAoe1xyXG4gICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICBiYXRjaERhdGE6IGRhdGFGb3JCYXRjaCxcclxuICAgICAgICAgICAgYmF0Y2hEYXRhUGFyc2VkOiBwYXJzZWRCYXRjaERhdGFcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5yYXdEYXRhID0ge307XHJcblxyXG4gICAgICAgIHRoaXMuYmF0Y2hEYXRhQXJyaXZpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb25DYWxsYmFjayggdGhpcy5jYXJkRGF0YU9iaiApO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUJpZ0Jsb2NrRmluaXNoID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmFycWNBcnJpdmluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVBcnFjQmlnQmxvY2tGaW5pc2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5iYXRjaERhdGFBcnJpdmluZykge1xyXG4gICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUJhdGNoQmlnQmxvY2tGaW5pc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VFbXZDYXJkaG9sZGVySW50ZXJhY3Rpb25TdGF0dXMgPSBjYXJkaG9sZGVyUmVzcCA9PiB7XHJcbiAgICAgICAgc3dpdGNoKGNhcmRob2xkZXJSZXNwWzFdKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMHgwMjogXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHtcclxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmZpbmRFbXZDYXJkaG9sZGVyU3RhdHVzKGNhcmRob2xkZXJSZXNwWzFdKSxcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnRDb25maXJtZWQ6IChjYXJkaG9sZGVyUmVzcFs0XSA9PT0gMHgwMSkgPyB0cnVlIDogKGNhcmRob2xkZXJSZXNwWzRdID09PSAweDAyKSA/IGZhbHNlIDogXCJVbmtub3duL1VuZG9jdW1lbnRlZCBBbW91bnQgQ29uZmlybWVkIFN0YXR1c1wiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2FzZSAweDA0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5maW5kRW12Q2FyZGhvbGRlclN0YXR1cyhjYXJkaG9sZGVyUmVzcFsxXSksXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25PckxhYmVsTmFtZTogdGhpcy5idWZmZXJUb1V0ZjgoIGNhcmRob2xkZXJSZXNwLnNsaWNlKDQpIClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYXNlIDB4MEE6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHtcclxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmZpbmRFbXZDYXJkaG9sZGVyU3RhdHVzKGNhcmRob2xkZXJSZXNwWzFdKSxcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2RTZWxlY3RlZDogKGNhcmRob2xkZXJSZXNwWzRdID09PSAweDAxKSA/IFwiQ3JlZGl0XCIgOiBcclxuICAgICAgICAgICAgICAgICAgICAoY2FyZGhvbGRlclJlc3BbNF0gPT09IDB4MDIpID8gXCJEZWJpdFwiIDogYCR7dW5rbm93bn0vVW5kb2N1bWVudGVkIHBheW1lbnQgbWV0aG9kIHNlbGVjdGVkYFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNhc2UgMHgyMDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZmluZEVtdkNhcmRob2xkZXJTdGF0dXMoY2FyZGhvbGRlclJlc3BbMV0pLFxyXG4gICAgICAgICAgICAgICAgICAgIHRsdkRhdGE6IHRoaXMudGx2UGFyc2VyKCBjYXJkaG9sZGVyUmVzcC5zbGljZSg0KSApIFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHR5cGVvZiBjYXJkaG9sZGVyUmVzcFs0XSA9PT0gJ3VuZGVmaW5lZCcpID8gdGhpcy5maW5kRW12Q2FyZGhvbGRlclN0YXR1cyhjYXJkaG9sZGVyUmVzcFsxXSkgXHJcbiAgICAgICAgICAgICAgICAgICAgOiAoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmZpbmRFbXZDYXJkaG9sZGVyU3RhdHVzKGNhcmRob2xkZXJSZXNwWzFdKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5kb2N1bWVudGVkRGF0YTogdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggY2FyZGhvbGRlclJlc3Auc2xpY2UoNCkgKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwYXJzZUNhcmRTdGF0dXNSZXBvcnQgPSBjYXJkU3RhdHVzID0+IChjYXJkU3RhdHVzLmxlbmd0aCA8IDQpID8gIFxyXG4gICAgICAgIHRoaXMuZmluZE9wZXJhdGlvblN0YXR1cyhjYXJkU3RhdHVzWzJdKVxyXG4gICAgICAgIDogKHtcclxuICAgICAgICAgICAgLi4udGhpcy5maW5kT3BlcmF0aW9uU3RhdHVzKGNhcmRTdGF0dXNbMl0pLFxyXG4gICAgICAgICAgICBjYXJkU3RhdHVzOiAoY2FyZFN0YXR1c1syXSA9PT0gMHgwMCkgPyBcIk9rXCIgOiBcIkVycm9yXCIsXHJcbiAgICAgICAgICAgIGNhcmRUeXBlOiB0aGlzLmNhcmRUeXBlc0VudW1bIGNhcmRTdGF0dXNbM10gXVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIHBhcnNlQWNrUmVzcG9uc2UgPSBhY2tSZXNwID0+ICh7XHJcbiAgICAgICAgY29kZTogYWNrUmVzcFsxXSxcclxuICAgICAgICBtZXNzYWdlOiB0aGlzLkFDS1NUU1sgYWNrUmVzcFsxXSBdLFxyXG4gICAgICAgIGNvbW1hbmRUeXBlOiAoIHRoaXMucGluQ29tbWFuZElkc1sgYWNrUmVzcFsyXSBdIHx8IFwiRGV2aWNlIGVycm9yIG9yIGNvbW1hbmQgdHlwZSBub3QgZG9jdW1lbnRlZFwiIClcclxuICAgIH0pO1xyXG5cclxuICAgIHBhcnNlRGV2aWNlU3RhdGVSZXBvcnQgPSBkZXZpY2VSZXNwID0+ICh7XHJcbiAgICAgICAgZGV2aWNlU3RhdGU6IHRoaXMuZGV2aWNlU3RhdGVbIGRldmljZVJlc3BbMV0gXSwgXHJcbiAgICAgICAgc2Vzc2lvblN0YXRlOiB0aGlzLnBhcnNlU2Vzc2lvblN0YXRlKFxyXG4gICAgICAgICAgICB0aGlzLmRlY2ltYWxUb0JpbmFyeSggZGV2aWNlUmVzcFsyXSApXHJcbiAgICAgICAgKSxcclxuICAgICAgICBkZXZpY2VTdGF0dXM6IHRoaXMucGFyc2VEZXZpY2VTdGF0dXMoXHJcbiAgICAgICAgICAgIHRoaXMuZGVjaW1hbFRvQmluYXJ5KGRldmljZVJlc3BbM10pXHJcbiAgICAgICAgKSxcclxuICAgICAgICBkZXZpY2VDZXJ0U3RhdHVzOiB0aGlzLnBhcnNlQ2VydFN0YXR1cyggXHJcbiAgICAgICAgICAgIHRoaXMuZGVjaW1hbFRvQmluYXJ5KCBkZXZpY2VSZXNwWzRdIClcclxuICAgICAgICApLFxyXG4gICAgICAgIGhhcmR3YXJlU3RhdHVzOiB0aGlzLnBhcnNlSGFyZHdhcmVTdGF0dXMoXHJcbiAgICAgICAgICAgIHRoaXMuZGVjaW1hbFRvQmluYXJ5KGRldmljZVJlc3BbNV0pXHJcbiAgICAgICAgKSxcclxuICAgICAgICBhZGRpdGlvbmFsSW5mbzogdGhpcy5wYXJzZUFkZGl0aW9uYWxJbmZvKFxyXG4gICAgICAgICAgICB0aGlzLmRlY2ltYWxUb0JpbmFyeShkZXZpY2VSZXNwWzZdKVxyXG4gICAgICAgIClcclxuICAgIH0pO1xyXG5cclxuICAgIHBhcnNlU2Vzc2lvblN0YXRlID0gYmluYXJ5U3RyaW5nID0+ICh7XHJcbiAgICAgICAgcG93ZXJEaWRDaGFuZ2U6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbMF0gKSxcclxuICAgICAgICBjYXJkRGF0YUlzQXZhaWxhYmxlOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzRdICksXHJcbiAgICAgICAgcGFuUGFyc2VkRnJvbUNhcmQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbNV0gKSxcclxuICAgICAgICBleHRlcm5hbFBhblNlbnQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbNl0gKSxcclxuICAgICAgICBhbW91bnRXYXNTZW50OiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzddIClcclxuICAgIH0pO1xyXG5cclxuICAgIHBhcnNlQ2VydFN0YXR1cyA9IGJpbmFyeVN0cmluZyA9PiAoe1xyXG4gICAgICAgIG1zckNybENlcnRFeGlzdHM6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbMF0gKSxcclxuICAgICAgICBwaW5DcmxDZXJ0RXhpc3RzOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzFdICksXHJcbiAgICAgICAgbWZnVW5iaW5kQ2VydEV4aXN0czogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1szXSApLFxyXG4gICAgICAgIG1zckNhQ2VydEV4aXN0czogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s0XSApLFxyXG4gICAgICAgIHBpbkNhQ2VydEV4aXN0czogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s1XSApLFxyXG4gICAgICAgIGRldmljZUNhQ2VydEV4aXN0czogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s2XSApLFxyXG4gICAgICAgIGRldmljZUNlcnRFeGlzdHM6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbN10gKVxyXG4gICAgfSk7XHJcblxyXG4gICAgcGFyc2VEZXZpY2VTdGF0dXMgPSBiaW5hcnlTdHJpbmcgPT4gKGJpbmFyeVN0cmluZyAhPT0gXCIwMDAwMDAwMFwiKSA/ICh7XHJcbiAgICAgICAgcGluS2V5U3RhdHVzOiB0aGlzLnBpbktleVN0YXR1c0VudW1bIGJpbmFyeVN0cmluZy5zbGljZSg2KSBdLFxyXG4gICAgICAgIG1zcktleVN0YXR1czogdGhpcy5tc3JLZXlTdGF0dXNFbnVtWyBiaW5hcnlTdHJpbmcuc2xpY2UoNCwgNikgXSxcclxuICAgICAgICB0YW1wZXJEZXRlY3RlZDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1szXSApLFxyXG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1sxXSApLFxyXG4gICAgICAgIGRldmljZUVycm9yRGV0ZWN0ZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbMF0gKVxyXG4gICAgfSlcclxuICAgIDogXCJPa1wiO1xyXG5cclxuICAgIHBhcnNlSGFyZHdhcmVTdGF0dXMgPSBiaW5hcnlTdHJpbmcgPT4gKHtcclxuICAgICAgICBJRTNfb25seTogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1swXSApLFxyXG4gICAgICAgIFNSRUQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbMV0gKSxcclxuICAgICAgICBNYWdIZWFkSXNQcm9ncmFtbWVkOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzZdICksXHJcbiAgICAgICAgdGFtcGVyU2Vuc29yc0FyZUFjdGl2ZTogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s3XSApXHJcbiAgICB9KTtcclxuXHJcbiAgICBwYXJzZUFkZGl0aW9uYWxJbmZvID0gYmluYXJ5U3RyaW5nID0+ICh7XHJcbiAgICAgICAgSUNDX0FjcXVpcmVyTWFzdGVyS2V5SXNJbmplY3RlZDogIXRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbN10gKSxcclxuICAgICAgICBJQ0NfU2Vzc2lvbktleUlzQWN0aXZlOiAhdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s2XSApLFxyXG4gICAgICAgIENBUEtfRW12RGF0YWJhc2VJc0NvcnJ1cHRlZDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s1XSApLFxyXG4gICAgICAgIEVtdlRlcm1pbmFsRGF0YWJhc2VJc0NvcnJ1cHRlZDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s0XSApLFxyXG4gICAgICAgIGNhcmRJc1ByZXNlbnRJbkNoaXBDYXJkQ29ubmVjdG9yOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzNdIClcclxuICAgIH0pO1xyXG5cclxuICAgIHBhcnNlQ2FyZERhdGEgPSBwYXJ0aWFsTm90aWZpY2F0aW9uID0+IHtcclxuICAgICAgICBjb25zdCB0cmFja0tleSA9ICh0aGlzLmNhcmREYXRhSWRzWyBwYXJ0aWFsTm90aWZpY2F0aW9uWzFdIF0gfHwgYHRyYWNrTmFtZSR7dW5rbm93bn1gKTtcclxuICAgICAgICBcclxuICAgICAgICAvLzB4MDAgPT09IFwiT2tcIlxyXG4gICAgICAgIGlmIChwYXJ0aWFsTm90aWZpY2F0aW9uWzJdID09PSAweDAwKSB7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2godHJhY2tLZXkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFjazFcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmREYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHJhY2tLZXldOiB0aGlzLmJ1ZmZlclRvVXRmOChwYXJ0aWFsTm90aWZpY2F0aW9uLnNsaWNlKDQpKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFjazJcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmREYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHJhY2tLZXldOiB0aGlzLmJ1ZmZlclRvVXRmOChwYXJ0aWFsTm90aWZpY2F0aW9uLnNsaWNlKDQpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5mb3JtYXRFeHBQQU4oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsTm90aWZpY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImtzbkFuZE1hZ25lUHJpbnRTdGF0dXNcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmREYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrc246IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcocGFydGlhbE5vdGlmaWNhdGlvbi5zbGljZSg0LCAxNCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWduZVByaW50U3RhdHVzOiB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHBhcnRpYWxOb3RpZmljYXRpb24uc2xpY2UoLTQpKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZERhdGFPYmogPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuY2FyZERhdGFPYmosXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0cmFja0tleV06IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcocGFydGlhbE5vdGlmaWNhdGlvbi5zbGljZSg0KSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FyZERhdGFPYmogPSB7XHJcbiAgICAgICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICAgICAgW3RyYWNrS2V5XTogdGhpcy5jb252ZXJ0U3RhdHVzVG9TdHJpbmdbIHBhcnRpYWxOb3RpZmljYXRpb25bMl0gXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlUGluUmVzcG9uc2UgPSBwaW5SZXNwID0+IHtcclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbUElOIFJlc3BvbnNlXTogUmVzcG9uc2UgZnJvbSBQSU4gRW50cnk6ICR7dGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhwaW5SZXNwKX1gKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gKHBpblJlc3AubGVuZ3RoID4gMikgPyAoe1xyXG4gICAgICAgICAgICBwaW5EYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMocGluUmVzcFsxXSksXHJcbiAgICAgICAgICAgICAgICBwaW5Lc246IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIHBpblJlc3Auc2xpY2UoMiwgMTIpICksXHJcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRQaW5CbG9jazogdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggcGluUmVzcC5zbGljZSgxMiwgMjApIClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgOiB0aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMocGluUmVzcFsxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VDYXJkaG9sZGVyUmVzcG9uc2UgPSBzZWxlY3Rpb25SZXNwID0+IHtcclxuICAgICAgICBjb25zdCBkZXZpY2VLZXlzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIDB4NzE6IFwiTGVmdCBmdW5jdGlvbiBrZXlcIixcclxuICAgICAgICAgICAgMHg3MjogXCJNaWRkbGUgZnVuY3Rpb24ga2V5XCIsXHJcbiAgICAgICAgICAgIDB4NzQ6IFwiUmlnaHQgZnVuY3Rpb24ga2V5XCIsXHJcbiAgICAgICAgICAgIDB4Nzg6IFwiRW50ZXIga2V5XCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChzZWxlY3Rpb25SZXNwLmxlbmd0aCA+IDIpID8gKHtcclxuICAgICAgICAgICAgLi4udGhpcy5maW5kT3BlcmF0aW9uU3RhdHVzKHNlbGVjdGlvblJlc3BbMV0pLFxyXG4gICAgICAgICAgICBrZXlQcmVzc2VkOiAoZGV2aWNlS2V5c1sgc2VsZWN0aW9uUmVzcFsyXSBdIHx8IGAke3Vua25vd259L1VuZG9jdW1lbnRlZCBLZXlgKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgOiB0aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMoc2VsZWN0aW9uUmVzcFsxXSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgcGFyc2VUaXBDYXNoYmFja1JlcG9ydCA9IHJlcG9ydCA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3RpcCwgY2FzaGJhY2sgcmVwb3J0JywgcmVwb3J0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChyZXBvcnQubGVuZ3RoID4gMikgPyAoe1xyXG4gICAgICAgICAgICAuLi50aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMocmVwb3J0WzFdKSxcclxuICAgICAgICAgICAgcmVwb3J0TW9kZTogKHJlcG9ydFsyXSA9PT0gMHgwMCkgPyBcIlRpcFwiIDogXCJDYXNoYmFja1wiLFxyXG4gICAgICAgICAgICBhbW91bnQ6IHJlcG9ydC5zbGljZSgzLCA5KSxcclxuICAgICAgICAgICAgdGF4OiByZXBvcnQuc2xpY2UoOSwgMTUpLFxyXG4gICAgICAgICAgICB0YXhSYXRlOiByZXBvcnQuc2xpY2UoMTUsIDE4KSxcclxuICAgICAgICAgICAgdGlwT3JDYXNoYmFja0Ftb3VudDogcmVwb3J0LnNsaWNlKDE4LCAyNClcclxuICAgICAgICB9KVxyXG4gICAgICAgIDogdGhpcy5maW5kT3BlcmF0aW9uU3RhdHVzKHJlcG9ydFsxXSlcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGluU3RhdHVzUGFyc2VyOyIsImltcG9ydCBQaW5TdGF0dXNQYXJzZXIgZnJvbSAnLi4vcGFyc2Vycy9waW5TdGF0dXNQYXJzZXInO1xyXG5cclxuY2xhc3MgUGluQ21kQnVpbGRlciBleHRlbmRzIFBpblN0YXR1c1BhcnNlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIGNhbGxCYWNrcykge1xyXG4gICAgICAgIHN1cGVyKGRldmljZSwgY2FsbEJhY2tzKTtcclxuICAgIH1cclxuXHJcbiAgICBidWlsZFN3aXBlQ29tbWFuZCA9ICh7IHRpbWVvdXQsIGlzRmFsbGJhY2ssIHRvbmVDaG9pY2UsIGRpc3BsYXlUeXBlIH0pID0+IChbIFxyXG4gICAgICAgIDB4MDEsIDB4MDMsICh0aW1lb3V0IHx8IDB4M0MpLFxyXG4gICAgICAgIChpc0ZhbGxiYWNrID09PSB0cnVlKSA/IDB4MDQgOiAodHlwZW9mKGRpc3BsYXlUeXBlKSAhPT0gJ3VuZGVmaW5lZCcpID8gdGhpcy5kaXNwbGF5VHlwZXNbIGRpc3BsYXlUeXBlLnRvTG93ZXJDYXNlKCkgXSA6IDB4MDIsXHJcbiAgICAgICAgKHR5cGVvZih0b25lQ2hvaWNlKSAhPT0gJ3VuZGVmaW5lZCcpID8gdGhpcy50b25lQ2hvaWNlWyB0b25lQ2hvaWNlLnRvTG93ZXJDYXNlKCkgXSA6IDB4MDFcclxuICAgIF0pO1xyXG5cclxuICAgIGJ1aWxkRW12Q29tbWFuZCA9ICh7IFxyXG4gICAgICAgIHRpbWVvdXQsIFxyXG4gICAgICAgIHBpblRpbWVvdXQsIFxyXG4gICAgICAgIGNhcmRUeXBlLCBcclxuICAgICAgICB0cmFuc2FjdGlvblR5cGUsIFxyXG4gICAgICAgIGNhc2hCYWNrLCBcclxuICAgICAgICBjdXJyZW5jeUNvZGUsXHJcbiAgICAgICAgdG9uZUNob2ljZSwgXHJcbiAgICAgICAgaXNRdWlja0NoaXAsIFxyXG4gICAgICAgIGF1dGhvcml6ZWRBbW91bnQsIFxyXG4gICAgICAgIGVtdk9wdGlvbnMsXHJcbiAgICAgICAgdGF4QW1vdW50LFxyXG4gICAgICAgIHRheFBlcmNlbnQsXHJcbiAgICAgICAgdGlwQW1vdW50LFxyXG4gICAgICAgIGJhbGFuY2VCZWZvcmVHZW5BQyxcclxuICAgICAgICBiYWxhbmNlQWZ0ZXJHZW5BQyxcclxuICAgICAgICB0cnhDYXRlZ29yeUNvZGVcclxuICAgIH0pID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLmlzUXVpY2tDaGlwVHJhbnNhY3Rpb24gPSAoaXNRdWlja0NoaXAgPT09IGZhbHNlKSA/IGZhbHNlIDogdHJ1ZTtcclxuICAgICAgICAvL1RPRE86IFJlLWV4YW1pbmUgc2NvcGUuIE1heSBiZSBhYmxlIHRvIGxpbWl0IHRoaXMgZmxhZyB0byB0aGlzIGZ1bmN0aW9uLlxyXG4gICAgICAgIHRoaXMuaGFzVGlwID0gKHRoaXMuaGFzVGlwIHx8ICh0eXBlb2YodGlwQW1vdW50KSAhPT0gJ3VuZGVmaW5lZCcpKTtcclxuICAgICAgICBjb25zdCB2YWxpZGF0b3IgPSB0aGlzLnZhbGlkYXRlQW1vdW50KHJlamVjdCk7XHJcblxyXG4gICAgICAgIGxldCBjb21tYW5kID0gWyBcclxuICAgICAgICAgICAgMHgwMSwgMHhBMixcclxuICAgICAgICAgICAgKHRpbWVvdXQgfHwgMHgzQyksXHJcbiAgICAgICAgICAgIChwaW5UaW1lb3V0IHx8IDB4MTQpLFxyXG4gICAgICAgICAgICAweDAwLFxyXG4gICAgICAgICAgICAodHlwZW9mKHRvbmVDaG9pY2UpICE9PSAndW5kZWZpbmVkJykgPyB0aGlzLnRvbmVDaG9pY2VbIHRvbmVDaG9pY2UudG9Mb3dlckNhc2UoKSBdIDogMHgwMSxcclxuICAgICAgICAgICAgKGNhcmRUeXBlKSA/IHRoaXMuY2FyZFR5cGVzKCBjYXJkVHlwZS50b0xvd2VyQ2FzZSgpICkgOiB0aGlzLmNhcmRUeXBlcyhcImFsbFwiKSxcclxuICAgICAgICAgICAgKHR5cGVvZihlbXZPcHRpb25zKSAhPT0gJ3VuZGVmaW5lZCcpID8gdGhpcy5lbXZPcHRpb25zWyBlbXZPcHRpb25zLnRvTG93ZXJDYXNlKCkgXSA6IDB4MDBcclxuICAgICAgICBdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGF1dGhBbW91bnQgPSB2YWxpZGF0b3IoYXV0aG9yaXplZEFtb3VudCwgJ2F1dGhvcml6ZWRBbW91bnQnLCBbMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSwgMHgwMF0pO1xyXG4gICAgICAgIGlmICh0eXBlb2YoYXV0aEFtb3VudCkgPT09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KGF1dGhBbW91bnQpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgY29tbWFuZCA9IGNvbW1hbmQuY29uY2F0KCBhdXRoQW1vdW50ICk7XHJcblxyXG4gICAgICAgIGNvbW1hbmQgPSAodHlwZW9mKHRyYW5zYWN0aW9uVHlwZSkgIT09ICd1bmRlZmluZWQnKSA/IFxyXG4gICAgICAgICAgICBjb21tYW5kLmNvbmNhdCh0aGlzLnRyYW5zYWN0aW9uVHlwZXNbIHRyYW5zYWN0aW9uVHlwZS50b0xvd2VyQ2FzZSgpIF0pXHJcbiAgICAgICAgICAgIDogY29tbWFuZC5jb25jYXQoMHgwMClcclxuXHJcbiAgICAgICAgY29uc3QgY2FzaGJhY2tBbW50ID0gdmFsaWRhdG9yKGNhc2hCYWNrLCAnY2FzaEJhY2snLCB0aGlzLm5ld0FycmF5UGFydGlhbCgweDAwLCA2KSk7XHJcbiAgICAgICAgaWYgKHR5cGVvZihjYXNoYmFja0FtbnQpID09PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChjYXNoYmFja0FtbnQpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgY29tbWFuZCA9IGNvbW1hbmQuY29uY2F0KCBjYXNoYmFja0FtbnQgKTtcclxuXHJcbiAgICAgICAgY29uc3QgYmFsYW5jZUJlZm9yZUFtbnQgPSB2YWxpZGF0b3IoYmFsYW5jZUJlZm9yZUdlbkFDLCAnYmFsYW5jZUJlZm9yZUdlbkFDJywgdGhpcy5uZXdBcnJheVBhcnRpYWwoMHgwMCwgNikpO1xyXG4gICAgICAgIGlmICh0eXBlb2YoYmFsYW5jZUJlZm9yZUFtbnQpID09PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChiYWxhbmNlQmVmb3JlQW1udCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBjb21tYW5kID0gY29tbWFuZC5jb25jYXQoIGJhbGFuY2VCZWZvcmVBbW50ICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJhbGFuY2VBZnRlckFtbnQgPSB2YWxpZGF0b3IoYmFsYW5jZUFmdGVyR2VuQUMsICdiYWxhbmNlQWZ0ZXJHZW5BQycsIHRoaXMubmV3QXJyYXlQYXJ0aWFsKDB4MDAsIDYpKTtcclxuICAgICAgICBpZiAodHlwZW9mKGJhbGFuY2VBZnRlckFtbnQpID09PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChiYWxhbmNlQWZ0ZXJBbW50KTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGNvbW1hbmQgPSBjb21tYW5kLmNvbmNhdCggYmFsYW5jZUFmdGVyQW1udCApO1xyXG5cclxuICAgICAgICBjb21tYW5kID0gKGN1cnJlbmN5Q29kZSkgPyBjb21tYW5kLmNvbmNhdCgoIHRoaXMuY3VycmVuY3lDb2RlWyBjdXJyZW5jeUNvZGUudG9Mb3dlckNhc2UoKSBdIHx8ICB0aGlzLmN1cnJlbmN5Q29kZVsnZGVmYXVsdCddICkpXHJcbiAgICAgICAgICAgIDogY29tbWFuZC5jb25jYXQodGhpcy5jdXJyZW5jeUNvZGUuZG9sbGFyKTtcclxuXHJcbiAgICAgICAgY29tbWFuZC5wdXNoKCAodHlwZW9mKHRyeENhdGVnb3J5Q29kZSkgIT09ICd1bmRlZmluZWQnKSA/IHRyeENhdGVnb3J5Q29kZSA6IDB4MDAgKTtcclxuXHJcbiAgICAgICAgY29tbWFuZC5wdXNoKCAodGhpcy5pc1F1aWNrQ2hpcFRyYW5zYWN0aW9uKSA/IDB4MDEgOiAweDAwICk7XHJcblxyXG4gICAgICAgIGNvbW1hbmQucHVzaCggKCh0aGlzLmhhc1RpcCkgPyAweDAxIDogKHR5cGVvZihjYXNoQmFjaykgIT09ICd1bmRlZmluZWQnKSA/IDB4MDIgOiAweDAwKSApO1xyXG5cclxuXHJcbiAgICAgICAgY29uc3QgdGF4QW1udCA9IHZhbGlkYXRvcih0YXhBbW91bnQsICd0YXhBbW91bnQnLCB0aGlzLm5ld0FycmF5UGFydGlhbCgweDAwLCA2KSk7XHJcbiAgICAgICAgaWYgKHR5cGVvZih0YXhBbW50KSA9PT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgIHJldHVybiByZWplY3QodGF4QW1udCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBjb21tYW5kID0gY29tbWFuZC5jb25jYXQoIHRheEFtbnQgKTtcclxuXHJcbiAgICAgICAgY29tbWFuZCA9ICh0eXBlb2YodGF4UGVyY2VudCkgIT09ICd1bmRlZmluZWQnKSA/IFxyXG4gICAgICAgICAgICAodHlwZW9mKHRheFBlcmNlbnQpID09PSAnbnVtYmVyJykgPyBjb21tYW5kLmNvbmNhdCh0aGlzLmNvbnZlcnROdW1Ub0Ftb3VudCh0YXhQZXJjZW50LCA2KSkgOiBjb21tYW5kLmNvbmNhdCh0YXhQZXJjZW50KVxyXG4gICAgICAgIDogY29tbWFuZC5jb25jYXQoIHRoaXMubmV3QXJyYXlQYXJ0aWFsKDB4MDAsIDMpICk7XHJcblxyXG4gICAgICAgIGNvbW1hbmQgPSBjb21tYW5kLmNvbmNhdCggdGhpcy5uZXdBcnJheVBhcnRpYWwoMHgwMCwgMykgKTtcclxuXHJcbiAgICAgICAgY29uc3QgdGlwQW1udCA9IHZhbGlkYXRvcih0aXBBbW91bnQsICd0aXBBbW91bnQnLCB0aGlzLm5ld0FycmF5UGFydGlhbCgweDAwLCA2KSk7XHJcbiAgICAgICAgaWYgKHR5cGVvZih0aXBBbW50KSA9PT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgIHJldHVybiByZWplY3QodGlwQW1udCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBjb21tYW5kID0gY29tbWFuZC5jb25jYXQoIHRpcEFtbnQgKTtcclxuXHJcbiAgICAgICAgY29tbWFuZCA9IGNvbW1hbmQuY29uY2F0KCB0aGlzLm5ld0FycmF5UGFydGlhbCgweDAwLCA5KSApO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzb2x2ZShjb21tYW5kKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGJ1aWxkUGluQ29tbWFuZCA9ICh7XHJcbiAgICAgICAgbGFuZ3VhZ2VTZWxlY3Rpb24sXHJcbiAgICAgICAgZGlzcGxheVR5cGUsXHJcbiAgICAgICAgdGltZW91dCxcclxuICAgICAgICBtYXhQaW5MZW5ndGgsXHJcbiAgICAgICAgbWluUGluTGVuZ3RoLFxyXG4gICAgICAgIHRvbmVDaG9pY2UsXHJcbiAgICAgICAgd2FpdE1lc3NhZ2UsXHJcbiAgICAgICAgdmVyaWZ5UGluLFxyXG4gICAgICAgIHBpbkJsb2NrRm9ybWF0XHJcbiAgICB9KSA9PiB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBpbkRpc3BsYXlPcHRpb25zID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIFwiZW50ZXJwaW5cIjogMHgwMCxcclxuICAgICAgICAgICAgXCJlbnRlcnBpbmFtb3VudFwiOiAweDAxLFxyXG4gICAgICAgICAgICBcInJlZW50ZXJwaW5hbW91bnRcIjogMHgwMixcclxuICAgICAgICAgICAgXCJyZWVudGVycGluXCI6IDB4MDMsXHJcbiAgICAgICAgICAgIFwidmVyaWZ5cGluXCI6IDB4MDRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcGluQ21kID0gW1xyXG4gICAgICAgICAgICAweDAxLCAweDA0LFxyXG4gICAgICAgICAgICAodGltZW91dCB8fCAweDFFKSxcclxuICAgICAgICAgICAgKChkaXNwbGF5VHlwZSkgPyAocGluRGlzcGxheU9wdGlvbnNbIGRpc3BsYXlUeXBlLnRvTG93ZXJDYXNlKCkgXSB8fCAweDAwKTogMHgwMCksXHJcbiAgICAgICAgICAgICh0aGlzLmZpbmRQaW5MZW5ndGgobWF4UGluTGVuZ3RoLCBtaW5QaW5MZW5ndGgpKSxcclxuICAgICAgICAgICAgKHR5cGVvZih0b25lQ2hvaWNlKSAhPT0gJ3VuZGVmaW5lZCcpID8gdGhpcy50b25lQ2hvaWNlWyB0b25lQ2hvaWNlLnRvTG93ZXJDYXNlKCkgXSA6IDB4MDEsXHJcbiAgICAgICAgICAgICh0aGlzLmJ1aWxkUGluT3B0aW9uc0J5dGUobGFuZ3VhZ2VTZWxlY3Rpb24sIHdhaXRNZXNzYWdlLCB2ZXJpZnlQaW4sIHBpbkJsb2NrRm9ybWF0KSlcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnW1BJTiBDTURdIEJ1aWx0IFBJTiBDb21tYW5kOiAnLCBwaW5DbWQpO1xyXG5cclxuICAgICAgICByZXR1cm4gcGluQ21kO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkQXJwY0NvbW1hbmQgPSAobGVuLCBkYXRhKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZW5kQmlnQmxvY2tEYXRhKDB4QTQsIGxlbiwgZGF0YSkudGhlbihcclxuICAgICAgICAgICAgKCkgPT4gcmVzb2x2ZShbMHgwMSwgMHhBNCwgLi4udGhpcy5uZXdBcnJheVBhcnRpYWwoMHgwMCwgMTApXSlcclxuICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QoZXJyKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBidWlsZFRpcE9yQ2FzaGJhY2tDbWQgPSAoe1xyXG4gICAgICAgIHRpbWVvdXQsXHJcbiAgICAgICAgY29tbWFuZFR5cGUsXHJcbiAgICAgICAgdG9uZUNob2ljZSxcclxuICAgICAgICB0cmFuc2FjdGlvbkFtb3VudCxcclxuICAgICAgICBjYWxjdWxhdGVkVGF4QW1vdW50LFxyXG4gICAgICAgIHRheFJhdGUsXHJcbiAgICAgICAgdGlwU2VsZWN0aW9uTW9kZSxcclxuICAgICAgICBsZWZ0QnV0dG9uLFxyXG4gICAgICAgIG1pZGRsZUJ1dHRvbixcclxuICAgICAgICByaWdodEJ1dHRvblxyXG4gICAgfSkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IHRoaXMudmFsaWRhdGVBbW91bnQocmVqZWN0KTtcclxuXHJcbiAgICAgICAgY29uc3QgcHJvcHNUb1ZhbGlkYXRlID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwcm9wOiBjb21tYW5kVHlwZSxcclxuICAgICAgICAgICAgICAgIHByb3BOYW1lOiAnY29tbWFuZFR5cGUnLFxyXG4gICAgICAgICAgICAgICAgdmFsaWRUeXBlczogWydzdHJpbmcnXSxcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZhbGlkVmFsdWVzOiBbJ3RpcCcsICdjYXNoYmFjayddXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHByb3A6IHRpcFNlbGVjdGlvbk1vZGUsXHJcbiAgICAgICAgICAgICAgICBwcm9wTmFtZTogJ3RpcFNlbGVjdGlvbk1vZGUnLFxyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uOiAoY29tbWFuZFR5cGUudG9Mb3dlckNhc2UoKSAhPT0gJ2Nhc2hiYWNrJyksXHJcbiAgICAgICAgICAgICAgICB2YWxpZFR5cGVzOiBbJ3N0cmluZyddLFxyXG4gICAgICAgICAgICAgICAgdmFsaWRWYWx1ZXM6IFsncGVyY2VudCcsICdhbW91bnQnXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwcm9wOiB0YXhSYXRlLFxyXG4gICAgICAgICAgICAgICAgcHJvcE5hbWU6ICd0YXhSYXRlJyxcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZhbGlkVHlwZXM6IFsnbnVtYmVyJywgJ29iamVjdCddXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICB0aGlzLnZhbGlkYXRlUmVxdWlyZWRJbnB1dHMocHJvcHNUb1ZhbGlkYXRlKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgbGV0IHRpcENhc2hiYWNrQ21kID0gW1xyXG4gICAgICAgICAgICAgICAgMHgwMSwgMHhBMCxcclxuICAgICAgICAgICAgICAgICh0eXBlb2YodGltZW91dCkgIT09ICd1bmRlZmluZWQnKSA/IHRpbWVvdXQgOiAweDFFLFxyXG4gICAgICAgICAgICAgICAgKHR5cGVvZih0b25lQ2hvaWNlKSA9PT0gJ3N0cmluZycpID8gdGhpcy50b25lQ2hvaWNlWyB0b25lQ2hvaWNlLnRvTG93ZXJDYXNlKCkgXSA6IHRoaXMudG9uZUNob2ljZS5vbmViZWVwXHJcbiAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0cnhBbW50ID0gdmFsaWRhdG9yKHRyYW5zYWN0aW9uQW1vdW50LCAndHJhbnNhY3Rpb25BbW91bnQnKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZih0cnhBbW50KSA9PT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KHRyeEFtbnQpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aXBDYXNoYmFja0NtZCA9IHRpcENhc2hiYWNrQ21kLmNvbmNhdCggdHJ4QW1udCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbGNUYXhBbW50ID0gdmFsaWRhdG9yKGNhbGN1bGF0ZWRUYXhBbW91bnQsICdjYWxjdWxhdGVkVGF4QW1vdW50Jyk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YoY2FsY1RheEFtbnQpID09PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoY2FsY1RheEFtbnQpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aXBDYXNoYmFja0NtZCA9IHRpcENhc2hiYWNrQ21kLmNvbmNhdCggY2FsY1RheEFtbnQgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRpcENhc2hiYWNrQ21kID0gKHR5cGVvZih0YXhSYXRlKSA9PT0gJ251bWJlcicpID8gXHJcbiAgICAgICAgICAgICAgICB0aXBDYXNoYmFja0NtZC5jb25jYXQodGhpcy5jb252ZXJ0TnVtVG9BbW91bnQodGF4UmF0ZSwgNikpIDogdGlwQ2FzaGJhY2tDbWQuY29uY2F0KHRheFJhdGUpO1xyXG5cclxuICAgICAgICAgICAgdGlwQ2FzaGJhY2tDbWQucHVzaChcclxuICAgICAgICAgICAgICAgICh0eXBlb2YodGlwU2VsZWN0aW9uTW9kZSkgPT09ICd1bmRlZmluZWQnKSA/IDB4MDAgOiAodGlwU2VsZWN0aW9uTW9kZSA9PT0gJ3BlcmNlbnQnKSA/IDB4MDAgOiAweDAxXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIHRpcENhc2hiYWNrQ21kID0gKHR5cGVvZihsZWZ0QnV0dG9uKSAhPT0gJ3VuZGVmaW5lZCcpID8gXHJcbiAgICAgICAgICAgICAgICAodHlwZW9mKGxlZnRCdXR0b24pID09PSAnbnVtYmVyJykgPyB0aXBDYXNoYmFja0NtZC5jb25jYXQodGhpcy5jb252ZXJ0TnVtVG9BbW91bnQobGVmdEJ1dHRvbiwgNCkpIDogbGVmdEJ1dHRvblxyXG4gICAgICAgICAgICA6IHRpcENhc2hiYWNrQ21kLmNvbmNhdCh0aGlzLm5ld0FycmF5UGFydGlhbCgweDAwLCAyKSk7XHJcblxyXG4gICAgICAgICAgICB0aXBDYXNoYmFja0NtZCA9ICh0eXBlb2YobWlkZGxlQnV0dG9uKSAhPT0gJ3VuZGVmaW5lZCcpID9cclxuICAgICAgICAgICAgICAgICh0eXBlb2YobWlkZGxlQnV0dG9uKSA9PT0gJ251bWJlcicpID8gdGlwQ2FzaGJhY2tDbWQuY29uY2F0KHRoaXMuY29udmVydE51bVRvQW1vdW50KG1pZGRsZUJ1dHRvbiwgNCkpIDogbWlkZGxlQnV0dG9uXHJcbiAgICAgICAgICAgIDogdGlwQ2FzaGJhY2tDbWQuY29uY2F0KHRoaXMubmV3QXJyYXlQYXJ0aWFsKDB4MDAsIDIpKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aXBDYXNoYmFja0NtZCA9ICh0eXBlb2YocmlnaHRCdXR0b24pICE9PSAndW5kZWZpbmVkJykgPyBcclxuICAgICAgICAgICAgICAgICh0eXBlb2YocmlnaHRCdXR0b24pID09PSAnbnVtYmVyJykgPyB0aXBDYXNoYmFja0NtZC5jb25jYXQodGhpcy5jb252ZXJ0TnVtVG9BbW91bnQocmlnaHRCdXR0b24sIDQpKSA6IHJpZ2h0QnV0dG9uXHJcbiAgICAgICAgICAgIDogdGlwQ2FzaGJhY2tDbWQuY29uY2F0KHRoaXMubmV3QXJyYXlQYXJ0aWFsKDB4MDAsIDIpKTtcclxuXHJcbiAgICAgICAgICAgIHRpcENhc2hiYWNrQ21kID0gdGlwQ2FzaGJhY2tDbWQuY29uY2F0KHRoaXMubmV3QXJyYXlQYXJ0aWFsKDB4MDAsIDI2KSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0aXBDYXNoYmFja0NtZCk7XHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKVxyXG4gICAgfSk7XHJcblxyXG4gICAgYnVpbGREaXNwbGF5Q21kID0gKHsgZGlzcGxheVRpbWUsIG1lc3NhZ2VJZCwgfSkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IFxyXG4gICAgICAgICh0eXBlb2YobWVzc2FnZUlkKSA9PT0gJ3VuZGVmaW5lZCcpID8gXHJcbiAgICAgICAgICAgIHJlamVjdCggbWlzc2luZ1JlcXVpcmVkRmllbGRzKFwibWVzc2FnZUlkXCIpICkgXHJcbiAgICAgICAgICAgIDogcmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAweDAxLCAweDA3LFxyXG4gICAgICAgICAgICAgICAgKHR5cGVvZihkaXNwbGF5VGltZSkgIT09ICd1bmRlZmluZWQnKSA/IGRpc3BsYXlUaW1lIDogMHgwRixcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VJZFxyXG4gICAgICAgICAgICBdKVxyXG4gICAgICAgICk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBpbkNtZEJ1aWxkZXI7IiwiaW1wb3J0IFBpbkNtZEJ1aWxkZXIgZnJvbSAnLi4vY29tbWFuZEJ1aWxkZXJzL3BpbkNtZEJ1aWxkZXInO1xyXG5pbXBvcnQgeyBcclxuICAgIGRldmljZU5vdEZvdW5kLCBcclxuICAgIHJlYWRGYWlsZWQsIFxyXG4gICAgY29tbWFuZE5vdFNlbnRGcm9tSG9zdCwgXHJcbiAgICBjb21tYW5kTm90U2VudCxcclxuICAgIGRldmljZU5vdE9wZW4sXHJcbiAgICByZXNwb25zZU5vdFJlY2VpdmVkLFxyXG4gICAgbWlzc2luZ1JlcXVpcmVkRmllbGRzXHJcbn0gZnJvbSAnLi4vZXJyb3JIYW5kbGVyL2VyckNvbnN0YW50cyc7XHJcbmltcG9ydCB7IG9wZW5TdWNjZXNzLCBzdWNjZXNzQ29kZSwgbm9TZXNzaW9uVG9DbGVhciwgZ2F0dEJ1c3ksIHN1Y2Nlc3NmdWxDbG9zZSB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XHJcblxyXG5jbGFzcyBQaW5QYWQgZXh0ZW5kcyBQaW5DbWRCdWlsZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGRldmljZSwgY2FsbEJhY2tzKSB7XHJcbiAgICAgICAgc3VwZXIoZGV2aWNlLCBjYWxsQmFja3MpO1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25DYWxsYmFjayA9IGNhbGxCYWNrcy50cmFuc2FjdGlvbkNhbGxiYWNrIHx8IGNhbGxCYWNrcztcclxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2sgPSBjYWxsQmFja3MudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjaztcclxuXHJcbiAgICAgICAgdGhpcy5kZXZpY2VGcm9tSG9zdExlbiA9ICcwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAyMjAnO1xyXG4gICAgICAgIHRoaXMuZGV2aWNlRnJvbUhvc3REYXRhID0gJzA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDIyMSc7XHJcbiAgICAgICAgdGhpcy5kZXZpY2VUb0hvc3RMZW4gPSAnMDUwOGU2ZjgtYWQ4Mi04OThmLWY4NDMtZTM0MTBjYjYwMjIyJztcclxuICAgICAgICB0aGlzLmRldmljZVRvSG9zdERhdGEgPSAnMDUwOGU2ZjgtYWQ4Mi04OThmLWY4NDMtZTM0MTBjYjYwMjIzJztcclxuXHJcbiAgICAgICAgdGhpcy5jYXJkRGF0YUxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJlY2VpdmVEYXRhQ2hhciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jb21tYW5kQ2hhcmFjdGVyaXN0aWMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2VuZExlblRvRGV2aWNlID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5jb21tYW5kU2VudCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc3dpcGVIYXNCZWd1biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25IYXNTdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kYXRhR2F0aGVyZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzUXVpY2tDaGlwVHJhbnNhY3Rpb24gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaGFzVGlwID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuZW12T3B0aW9ucyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAnbm9ybWFsJzogMHgwMCxcclxuICAgICAgICAgICAgJ2J5cGFzc3Bpbic6IDB4MDEsXHJcbiAgICAgICAgICAgICdmb3JjZW9ubGluZSc6IDB4MDIsXHJcbiAgICAgICAgICAgICdhY3F1aXJlcm5vdGF2YWlsYWJsZSc6IDB4MDRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5kaXNwbGF5VHlwZXMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgJ3N3aXBlaWRsZWFsdGVybmF0ZSc6IDB4MDAsXHJcbiAgICAgICAgICAgICdzd2lwZWNhcmQnOiAweDAxLFxyXG4gICAgICAgICAgICAncGxlYXNlc3dpcGUnOiAweDAyLFxyXG4gICAgICAgICAgICAncGxlYXNlc3dpcGVhZ2Fpbic6IDB4MDMsXHJcbiAgICAgICAgICAgICdjaGlwZXJyb3J1c2Vzd2lwZSc6IDB4MDRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXBvcnRJZHMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgcmVzcG9uc2VBY2s6IDB4MDEsXHJcbiAgICAgICAgICAgIGVuZFNlc3Npb246IDB4MDIsXHJcbiAgICAgICAgICAgIHJlcXVlc3RDYXJkU3dpcGU6IDB4MDMsXHJcbiAgICAgICAgICAgIGNhcmRTdGF0dXNSZXBvcnQ6IDB4MjIsXHJcbiAgICAgICAgICAgIGRldmljZVN0YXRlUmVwb3J0OiAweDIwLFxyXG4gICAgICAgICAgICBjYXJkRGF0YVJlcG9ydDogMHgyMyxcclxuICAgICAgICAgICAgZW12Q2FyZGhvbGRlclN0YXR1czogMHgyQyxcclxuICAgICAgICAgICAgYmlnQmxvY2tEYXRhOiAweDI5LFxyXG4gICAgICAgICAgICBlbXZDb21wbGV0aW9uOiAweEEyLFxyXG4gICAgICAgICAgICBnZXRLc246IDB4MzAsXHJcbiAgICAgICAgICAgIHJlcXVlc3RTbjogMHgxQSxcclxuICAgICAgICAgICAgZGV2aWNlQ29uZmlnOiAweDA5LFxyXG4gICAgICAgICAgICBwaW5SZXNwb25zZTogMHgyNCxcclxuICAgICAgICAgICAgc2VsZWN0aW9uUmVzcG9uc2U6IDB4MjUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlSZXNwOiAweDI3LFxyXG4gICAgICAgICAgICB0aXBDYXNoYmFja1JlcG9ydDogMHgzMFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnRvbmVDaG9pY2UgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgJ25vc291bmQnOiAweDAwLFxyXG4gICAgICAgICAgICAnb25lYmVlcCc6IDB4MDEsXHJcbiAgICAgICAgICAgICd0d29iZWVwcyc6IDB4MDJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0aWFsTm90aWZpY2F0aW9uID0gWzB4MDBdO1xyXG5cclxuICAgICAgICB0aGlzLmNsZWFyU2Vzc2lvbkNtZCA9IFsweDAxLCAweDAyLCAweDAwXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDYXJkU2VydmljZSA9ICgpID0+IG5ldyBQcm9taXNlKCAocGFyZW50UmVzb2x2ZSwgcGFyZW50UmVqZWN0KSA9PiAoIXRoaXMuZGV2aWNlKSA/XHJcbiAgICAgICAgcGFyZW50UmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGRldmljZU5vdEZvdW5kKSApXHJcbiAgICAgICAgOlxyXG4gICAgICAgIHRoaXMuY29ubmVjdEFuZENhY2hlKDIpXHJcbiAgICAgICAgICAgIC50aGVuKCBzZXJ2aWNlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtHQVRUXTogQ2FjaGUgQXBwRGF0YVRvSG9zdExlbmd0aCBDaGFyYWN0ZXJpc3RpYyB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0Q2hhcmFjdGVyaXN0aWModGhpcy5kZXZpY2VUb0hvc3RMZW4pIFxyXG4gICAgICAgICAgICB9KS50aGVuKCBjaGFyYWN0ZXJpc3RpYyA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbR0FUVF06IEJlZ2luIG5vdGlmaWNhdGlvbnMgb24gQXBwRGF0YVRvSG9zdExlbmd0aCBDaGFyYWN0ZXJpc3RpYyB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoYXJhY3RlcmlzdGljLnN0YXJ0Tm90aWZpY2F0aW9ucygpXHJcbiAgICAgICAgICAgIH0pLnRoZW4oIGNoYXJhY3RlcmlzdGljID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtHQVRUXTogQWRkIGxpc3RlbmVyIHRvIG5vdGlmaWNhdGlvbnMgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYXJhY3RlcmlzdGljdmFsdWVjaGFuZ2VkJywgdGhpcy5kYXRhV2F0Y2hlcik7XHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5hZGRFdmVudExpc3RlbmVyKCdjaGFyYWN0ZXJpc3RpY3ZhbHVlY2hhbmdlZCcsIHRoaXMuZGF0YVdhdGNoZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuY2FyZERhdGFMaXN0ZW5lciA9IGNoYXJhY3RlcmlzdGljO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0dBVFRdOiBDYWNoZSBBcHBEYXRhVG9Ib3N0IENoYXJhY3RlcmlzdGljIHx8ICR7bmV3IERhdGUoKX1gKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJkU2VydmljZS5nZXRDaGFyYWN0ZXJpc3RpYyh0aGlzLmRldmljZVRvSG9zdERhdGEpO1xyXG4gICAgICAgICAgICB9KS50aGVuKCBjaGFyYWN0ZXJpc3RpYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNlaXZlRGF0YUNoYXIgPSBjaGFyYWN0ZXJpc3RpYztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbR0FUVF06IENhY2hlIEFwcERhdGFGcm9tSG9zdExlbmd0aCBDaGFyYWN0ZXJpc3RpYyB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcmRTZXJ2aWNlLmdldENoYXJhY3RlcmlzdGljKHRoaXMuZGV2aWNlRnJvbUhvc3RMZW4pXHJcbiAgICAgICAgICAgIH0pLnRoZW4oIGNoYXJhY3RlcmlzdGljID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRMZW5Ub0RldmljZSA9IGNoYXJhY3RlcmlzdGljO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtHQVRUXTogQ2FjaGUgQXBwRGF0YUZyb21Ib3N0IENoYXJhY3RlcmlzdGljIHx8ICR7bmV3IERhdGUoKX1gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FyZFNlcnZpY2UuZ2V0Q2hhcmFjdGVyaXN0aWModGhpcy5kZXZpY2VGcm9tSG9zdERhdGEpXHJcbiAgICAgICAgICAgIH0pLnRoZW4oIGNoYXJhY3RlcmlzdGljID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYyA9IGNoYXJhY3RlcmlzdGljO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBJZiB0aGlzIGxpYnJhcnkgaXMgYmVpbmcgdXNlZCBpbiBhIHdlYiBhcHBsaWNhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYWtlIHN1cmUgdGhlIGRldmljZSBjYW5jZWxzIGFueSBhY3RpdmUgY29tbWFuZCwgYW5kIGRpc2Nvbm5lY3RzIHByb3Blcmx5XHJcbiAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5vbkRlc3Ryb3lIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMub25EZXN0cm95SGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbR0FUVF06IFN1Y2Nlc3NmdWxseSBjYWNoZWQgYWxsIEdBVFQgc2VydmljZXMgYW5kIGNoYXJhY3RlcmlzdGljcy4gUmV0dXJuaW5nIHN1Y2Nlc3NmdWwgcGFpciB0byB1c2VyIHx8ICR7bmV3IERhdGUoKX1gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVsYXlQcm9taXNlKDQwMClcclxuICAgICAgICAgICAgfSkudGhlbigoKSA9PiBwYXJlbnRSZXNvbHZlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogc3VjY2Vzc0NvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogb3BlblN1Y2Nlc3NcclxuICAgICAgICAgICAgfSkpLmNhdGNoKGVyciA9PiBwYXJlbnRSZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSApKVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgZGF0YVdhdGNoZXIgPSBldmVudCA9PiB7XHJcbiAgICAgICAgbGV0IGRhdGFFdmVudCA9IGV2ZW50LnRhcmdldC52YWx1ZS5nZXRVaW50OCgwKTtcclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbTk9USUZZOiBBcHBEYXRhVG9Ib3N0TGVuZ3RoXTogJHt0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKFtkYXRhRXZlbnRdKX0gfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jb21tYW5kU2VudCAmJiBkYXRhRXZlbnQgPT09IDMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZFJlc3BBdmFpbGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kU2VudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhZENvbW1hbmRSZXNwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZENvbW1hbmRSZXNwID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+ICghdGhpcy5yZWNlaXZlRGF0YUNoYXIpID9cclxuICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIocmVhZEZhaWxlZCkpXHJcbiAgICAgICAgOiBcclxuICAgICAgICB0aGlzLnJlY2VpdmVEYXRhQ2hhci5yZWFkVmFsdWUoKVxyXG4gICAgICAgICAgICAudGhlbih2YWx1ZSA9PiB0aGlzLnJlYWRWYWx1ZUhhbmRsZXIodmFsdWUpIClcclxuICAgICAgICAgICAgLnRoZW4odmFsdWUgPT4gcmVzb2x2ZSh2YWx1ZSkpXHJcbiAgICAgICAgICAgIC5jYXRjaCggZXJyID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIuY29kZSA9PT0gZ2F0dEJ1c3kuY29kZSAmJiBlcnIubWVzc2FnZSA9PT0gZ2F0dEJ1c3kubWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtJTkZPXTogUmVhZCBmYWlsZWQgZHVlIHRvIGRldmljZSBiZWluZyBidXN5LiBBdHRlbXB0aW5nIHJlYWQgYWdhaW4gfHwgJHtuZXcgRGF0ZSgpfWApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVsYXlQcm9taXNlKDEwMCkudGhlbigoKSA9PiByZXNvbHZlKCB0aGlzLnJlYWRDb21tYW5kUmVzcCgpICkpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHJldHVybiByZWplY3QodGhpcy5idWlsZERldmljZUVycihlcnIpKVxyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgcmVhZFZhbHVlSGFuZGxlciA9IHJlYWRWYWx1ZSA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgY29uc3QgY29tbWFuZFJlc3AgPSB0aGlzLnJlYWRCeXRlQXJyYXkocmVhZFZhbHVlKTtcclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbUkVBRDogQXBwRGF0YVRvSG9zdF06ICR7dGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhjb21tYW5kUmVzcCl9IHx8ICR7bmV3IERhdGUoKX1gKTtcclxuXHJcbiAgICAgICAgaWYgKGNvbW1hbmRSZXNwLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzd2l0Y2goY29tbWFuZFJlc3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMucmVzcG9uc2VBY2s6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMucGFyc2VBY2tSZXNwb25zZShjb21tYW5kUmVzcCkgKVxyXG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLnJlcG9ydElkcy5kZXZpY2VTdGF0ZVJlcG9ydDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggdGhpcy5oYW5kbGVEZXZpY2VTdGF0ZVJlcG9ydChjb21tYW5kUmVzcCkgKVxyXG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLnJlcG9ydElkcy5jYXJkU3RhdHVzUmVwb3J0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCB0aGlzLmhhbmRsZUNhcmRTdGF0dXNSZXBvcnQoY29tbWFuZFJlc3ApIClcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMuY2FyZERhdGFSZXBvcnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuaGFuZGxlQ2FyZERhdGFSZXBvcnQoY29tbWFuZFJlc3ApIClcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMuZW12Q2FyZGhvbGRlclN0YXR1czpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggdGhpcy5oYW5kbGVDYXJkaG9sZGVyU3RhdHVzUmVwb3J0KGNvbW1hbmRSZXNwKSApXHJcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMucmVwb3J0SWRzLmVtdkNvbXBsZXRpb246XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuaGFuZGxlRW12Q29tcGxldGlvbihjb21tYW5kUmVzcCkgKVxyXG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLnJlcG9ydElkcy5iaWdCbG9ja0RhdGE6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuaGFuZGxlQmlnQmxvY2tEYXRhKGNvbW1hbmRSZXNwKSApXHJcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMucmVwb3J0SWRzLmdldEtzbjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggdGhpcy5mb3JtYXRLc25BbmRTbihjb21tYW5kUmVzcCkgKVxyXG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLnJlcG9ydElkcy5yZXF1ZXN0U246XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuZm9ybWF0U2VyaWFsTnVtYmVyKGNvbW1hbmRSZXNwKSApXHJcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMucmVwb3J0SWRzLmRldmljZUNvbmZpZzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggdGhpcy5wYXJzZURldmljZUNvbmZpZ3VyYXRpb24oY29tbWFuZFJlc3ApIClcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMucGluUmVzcG9uc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uQ2FsbGJhY2soIHRoaXMucGFyc2VQaW5SZXNwb25zZShwaW5SZXNwKSApXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMuc2VsZWN0aW9uUmVzcG9uc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMucGFyc2VDYXJkaG9sZGVyUmVzcG9uc2UoY29tbWFuZFJlc3ApIClcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMuZGlzcGxheVJlc3A6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2soIHRoaXMuZmluZE9wZXJhdGlvblN0YXR1cyhjb21tYW5kUmVzcFsxXSkgKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMucmVwb3J0SWRzLnRpcENhc2hiYWNrUmVwb3J0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCB0aGlzLnBhcnNlVGlwQ2FzaGJhY2tSZXBvcnQoY29tbWFuZFJlc3ApICk7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBbRGF0YSBSZXNwXTogVGhlcmUgaXMgbm8gcGFyc2VyIGZvciB0aGlzIGRhdGEsIHJldHVybmluZyB0byBjYWxsZXI6ICR7dGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhjb21tYW5kUmVzcCl9IHx8ICR7bmV3IERhdGUoKX1gXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggdGhpcy50cmFuc2FjdGlvbkNhbGxiYWNrKCBjb21tYW5kUmVzcCApICk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmVzb2x2ZSggY29tbWFuZFJlc3AgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGhhbmRsZUVtdkNvbXBsZXRpb24gPSBjb21tYW5kUmVzcCA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJbIV0gRU1WIENvbXBsZXRpb246IFwiLCBjb21tYW5kUmVzcCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhcclxuICAgICAgICAgICAgdGhpcy5wYXJzZUVtdkNvbXBsZXRpb24oY29tbWFuZFJlc3ApXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUJpZ0Jsb2NrRGF0YSA9IGJpZ0Jsb2NrRGF0YSA9PiB7XHJcbiAgICAgICAgc3dpdGNoKGJpZ0Jsb2NrRGF0YVsyXSkge1xyXG4gICAgICAgICAgICBjYXNlIDB4MDA6XHJcbiAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQmlnQmxvY2tCZWdpbiggYmlnQmxvY2tEYXRhICk7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDB4NjM6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1heEJsb2NrSWQgPSBNYXRoLm1heCguLi5PYmplY3Qua2V5cyh0aGlzLnJhd0RhdGEpKSArIDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUJpZ0Jsb2NrRmluaXNoKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRoaXMucmF3RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLnJhd0RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgWyBiaWdCbG9ja0RhdGFbMl0gXTogYmlnQmxvY2tEYXRhLnNsaWNlKDQpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ2FyZGhvbGRlclN0YXR1c1JlcG9ydCA9IGNvbW1hbmRSZXNwID0+IHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhcclxuICAgICAgICAgICAgdGhpcy5wYXJzZUVtdkNhcmRob2xkZXJJbnRlcmFjdGlvblN0YXR1cyhjb21tYW5kUmVzcClcclxuICAgICAgICApO1xyXG5cclxuICAgIGhhbmRsZUNhcmRTdGF0dXNSZXBvcnQgPSBjb21tYW5kUmVzcCA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrKFxyXG4gICAgICAgICAgICB0aGlzLnBhcnNlQ2FyZFN0YXR1c1JlcG9ydChjb21tYW5kUmVzcClcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiAodGhpcy5zd2lwZUhhc0JlZ3VuIHx8IHRoaXMudHJhbnNhY3Rpb25IYXNTdGFydGVkKSA/IFxyXG4gICAgICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AoIFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuc3dpcGVIYXNCZWd1biA/IFsweDAxLCAweDBBLCAweDAwXSA6IFsweDAxLCAweEFCLCAweDAwXSlcclxuICAgICAgICAgICAgKS50aGVuKCBhY2tSZXNwID0+IHJlc29sdmUoIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhhY2tSZXNwKSApXHJcbiAgICAgICAgICAgICkuY2F0Y2goZXJyID0+IHRoaXMuc2VuZEVyclRvQ2FsbGJhY2soIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSApKVxyXG4gICAgICAgIDogcmVzb2x2ZSgpXHJcbiAgICB9KTtcclxuXHJcbiAgICBoYW5kbGVEZXZpY2VTdGF0ZVJlcG9ydCA9IGNvbW1hbmRSZXNwID0+IHtcclxuICAgICAgICBpZiAodGhpcy5kYXRhR2F0aGVyZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhR2F0aGVyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vU2VuZCBhc3NlbWJsZWQgdHJhbnNhY3Rpb24gZGF0YSB0byBjYWxsYmFja1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgc3dpcGVEYXRhOiB0aGlzLmNhcmREYXRhT2JqXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrKFxyXG4gICAgICAgICAgICB0aGlzLnBhcnNlRGV2aWNlU3RhdGVSZXBvcnQoY29tbWFuZFJlc3ApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVDYXJkRGF0YVJlcG9ydCA9IGNvbW1hbmRSZXNwID0+IHtcclxuICAgICAgICBpZiAodGhpcy5zd2lwZUhhc0JlZ3VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3dpcGVIYXNCZWd1biA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFHYXRoZXJlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29tbWFuZFJlc3AubGVuZ3RoICE9PSAzKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VDYXJkRGF0YShjb21tYW5kUmVzcClcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKFwiW0VSUk9SXSBVbmRvY3VtZW50ZWQgQ2FyZCBEYXRhIGJlbG93XCIpO1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGNvbW1hbmRSZXNwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVxdWVzdENhcmRTd2lwZSA9IHN3aXBlT3B0aW9ucyA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc3dpcGVIYXNCZWd1biA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5jYXJkRGF0YU9iaiA9IHt9O1xyXG5cclxuICAgICAgICByZXR1cm4gKCF0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCkgPyByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90T3BlbikpXHJcbiAgICAgICAgICAgIDogXHJcbiAgICAgICAgICAgIHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcCggdGhpcy5jbGVhclNlc3Npb25DbWQgKVxyXG4gICAgICAgICAgICAudGhlbiggYWNrUmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2soYWNrUmVzcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcChcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1aWxkU3dpcGVDb21tYW5kKCAoc3dpcGVPcHRpb25zIHx8IHt9KSApXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH0pLnRoZW4oIHJlc3AgPT4gcmVzb2x2ZShyZXNwKVxyXG4gICAgICAgICAgICApLmNhdGNoKCBlcnIgPT4gcmVqZWN0KGVycikpXHJcbiAgICB9KTtcclxuICAgICAgICBcclxuICAgIHN0YXJ0VHJhbnNhY3Rpb24gPSBlbXZPcHRpb25zID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbkhhc1N0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY2FyZERhdGFPYmogPSB7fTtcclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbSU5GT106IEVNViB0cmFuc2FjdGlvbiBiZWd1biB8fCAke25ldyBEYXRlKCl9YClcclxuXHJcbiAgICAgICAgLy8gcmV0dXJuICghdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpID8gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGRldmljZU5vdE9wZW4pKVxyXG4gICAgICAgIC8vICAgICA6XHJcbiAgICAgICAgLy8gICAgIHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcCh0aGlzLmNsZWFyU2Vzc2lvbkNtZClcclxuICAgICAgICAvLyAgICAgICAgIC50aGVuKCBhY2tSZXNwID0+IHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrKGFja1Jlc3ApO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5idWlsZEVtdkNvbW1hbmQoIGVtdk9wdGlvbnMgfHwge30gKVxyXG4gICAgICAgIC8vICAgICAgICAgfSkudGhlbiggZW12Q29tbW1hbmQgPT5cclxuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AoIGVtdkNvbW1tYW5kIClcclxuICAgICAgICAvLyAgICAgICAgICkudGhlbiggcmVzcCA9PiByZXNvbHZlKHJlc3ApXHJcbiAgICAgICAgLy8gICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSApKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRFbXZDb21tYW5kKCBlbXZPcHRpb25zIHx8IHt9IClcclxuICAgICAgICAgICAgICAgIC50aGVuKCBlbXZDb21tbWFuZCA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcCggZW12Q29tbW1hbmQgKVxyXG4gICAgICAgICAgICAgICAgKS50aGVuKCByZXNwID0+IHJlc29sdmUocmVzcClcclxuICAgICAgICAgICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihlcnIpICkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgXHJcblxyXG4gICAgcmVxdWVzdFBpbkVudHJ5ID0gcGluT3B0aW9ucyA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtQSU5dOiBSZXF1ZXN0IGZvciBQSU4gZW50cnkgc3RhcnQgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwicGlub3B0aW9uczogXCIsIHBpbk9wdGlvbnMpO1xyXG5cclxuICAgICAgICByZXR1cm4gKCF0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCkgPyByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90T3BlbikpXHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKCB0aGlzLmJ1aWxkUGluQ29tbWFuZCggcGluT3B0aW9ucyB8fCB7fSApIClcclxuICAgICAgICAgICAgICAgIC50aGVuKCByZXNwID0+IHJlc29sdmUocmVzcClcclxuICAgICAgICAgICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcclxuICAgIH0pOyBcclxuXHJcbiAgICBzZW5kQmlnQmxvY2tEYXRhID0gKGRhdGFUeXBlLCBkYXRhTGVuLCBkYXRhKSA9PiBuZXcgUHJvbWlzZSgocGFyZW50UmVzb2x2ZSwgcGFyZW50UmVqZWN0KSA9PiB7XHJcbiAgICAgICAgbGV0IGJsb2NrWmVybyA9IFsweDAxLCAweDEwLCBkYXRhVHlwZSwgMHgwMCwgKGRhdGFMZW4gJiAweEZGKV07XHJcblxyXG4gICAgICAgIGlmIChkYXRhTGVuIDwgNjApIHtcclxuICAgICAgICAgICAgYmxvY2taZXJvID0gYmxvY2taZXJvLmNvbmNhdCguLi50aGlzLm5ld0FycmF5UGFydGlhbCgweDAwLCA2MCkpO1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbU2VuZCBCaWcgQmxvY2sgRGF0YSBMZWdhY3ldOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoYmxvY2taZXJvKX1gKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBsZWdhY3lEYXRhID0gWzB4MDEsIDB4MTAsIGRhdGFUeXBlLCAweDAxLCBkYXRhTGVuLCAuLi5kYXRhXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsZWdhY3lEYXRhLmxlbmd0aCA8IDY1KVxyXG4gICAgICAgICAgICAgICAgbGVnYWN5RGF0YSA9IGxlZ2FjeURhdGEuY29uY2F0KC4uLnRoaXMubmV3QXJyYXlQYXJ0aWFsKDB4MDAsICg2NSAtIGxlZ2FjeURhdGEubGVuZ3RoKSkpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kUGluQ29tbWFuZChibG9ja1plcm8pLnRoZW4oKCkgPT4gdGhpcy5zZW5kUGluQ29tbWFuZChsZWdhY3lEYXRhKVxyXG4gICAgICAgICAgICAgICAgKS50aGVuKCgpID0+IHBhcmVudFJlc29sdmUoKVxyXG4gICAgICAgICAgICAgICAgKS5jYXRjaChlcnIgPT4gcGFyZW50UmVqZWN0KHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYmxvY2taZXJvID0gYmxvY2taZXJvLmNvbmNhdChbXHJcbiAgICAgICAgICAgICAgICAoKGRhdGFMZW4gPj4gOCkgJiAweEZGKSwgXHJcbiAgICAgICAgICAgICAgICAoKGRhdGFMZW4gPj4gMTYpICYgMHhGRiksIFxyXG4gICAgICAgICAgICAgICAgKChkYXRhTGVuID4+IDI0KSAmIDB4RkYpLCBcclxuICAgICAgICAgICAgICAgIDB4MDEsIFxyXG4gICAgICAgICAgICAgICAgLi4udGhpcy5uZXdBcnJheVBhcnRpYWwoMHgwMCwgNTYpXHJcbiAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZEV4dGVuZGVkQmlnQmxvY2tEYXRhKGRhdGFUeXBlLCBkYXRhTGVuLCBkYXRhLCBibG9ja1plcm8pLnRoZW4oKCkgPT4gcGFyZW50UmVzb2x2ZSgpKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBzZW5kRXh0ZW5kZWRCaWdCbG9ja0RhdGEgPSAoZGF0YVR5cGUsIGRhdGFMZW4sIGRhdGEsIGJsb2NrWmVybykgPT4gbmV3IFByb21pc2UoIChwYXJlbnRSZXNvbHZlLCBwYXJlbnRSZWplY3QpID0+IHtcclxuICAgICAgICBjb25zdCBudW1iZXJPZkJsb2NrcyA9IE1hdGguY2VpbChkYXRhTGVuIC8gNjApO1xyXG4gICAgICAgIGxldCB3b3JraW5nT25Qcm9taXNlID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGNvbW1hbmRCbG9ja3MgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW1NlbmQgQmlnIEJsb2NrIERhdGEgRXh0ZW5kZWRdOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoYmxvY2taZXJvKX0gfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICBjb25zdCBiZWdpblF1ZXVlID0gKCkgPT4gbmV3IFByb21pc2UoKGJlZ2luUXVldWVSZXNvbHZlLCBiZWdpblF1ZXVlUmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh3b3JraW5nT25Qcm9taXNlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVsYXlQcm9taXNlKDUwMCkudGhlbigoKSA9PiBiZWdpblF1ZXVlUmVzb2x2ZSggYmVnaW5RdWV1ZSgpICkpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YUJsb2NrID0gY29tbWFuZEJsb2Nrcy5zaGlmdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFkYXRhQmxvY2spXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYmVnaW5RdWV1ZVJlc29sdmUodHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICB3b3JraW5nT25Qcm9taXNlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhQmxvY2sucXVldWVkUHJvbWlzZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiBkYXRhQmxvY2sucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgICAgICApLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtpbmdPblByb21pc2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmVnaW5RdWV1ZVJlc29sdmUoIGJlZ2luUXVldWUoKSApXHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtpbmdPblByb21pc2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmVnaW5RdWV1ZVJlamVjdCggZGF0YUJsb2NrLnJlamVjdChlcnIpICk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBlbnF1ZXVlID0gcXVldWVkUHJvbWlzZSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbW1hbmRCbG9ja3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBxdWV1ZWRQcm9taXNlLFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSxcclxuICAgICAgICAgICAgICAgIHJlamVjdCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGVucXVldWUoIFxyXG4gICAgICAgICAgICAoKSA9PiBuZXcgUHJvbWlzZShpbm5lclJlc29sdmUgPT4gXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRQaW5Db21tYW5kKGJsb2NrWmVybykudGhlbigoKSA9PiBpbm5lclJlc29sdmUoKSkgKSBcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMCwgYmxvY2sgPSAxOyBibG9jayA8PSBudW1iZXJPZkJsb2NrczsgaSArIDYwLCBibG9jaysrKSB7XHJcbiAgICAgICAgICAgIGxldCBkYXRhRm9yQmxvY2sgPSBkYXRhLnNsaWNlKGksIChpICsgNjApKTtcclxuICAgICAgICAgICAgbGV0IGJsb2NrQ21kID0gWzB4MDEsIDB4MTAsIGRhdGFUeXBlLCBibG9jaywgZGF0YUZvckJsb2NrLmxlbmd0aCwgLi4uZGF0YUZvckJsb2NrXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChibG9ja0NtZC5sZW5ndGggIT09IDY1KVxyXG4gICAgICAgICAgICAgICAgYmxvY2tDbWQgPSBibG9ja0NtZC5jb25jYXQoIC4uLnRoaXMubmV3QXJyYXlQYXJ0aWFsKDB4MDAsICg2NSAtIGJsb2NrQ21kLmxlbmd0aCkpIClcclxuXHJcbiAgICAgICAgICAgIGVucXVldWUoIFxyXG4gICAgICAgICAgICAgICAgKCkgPT4gbmV3IFByb21pc2UoIGlubmVyUmVzb2x2ZSA9PiBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRQaW5Db21tYW5kKGJsb2NrQ21kKS50aGVuKCAoKSA9PiBpbm5lclJlc29sdmUoKSkgKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW1NlbmQgQmlnIEJsb2NrIERhdGEgRXh0ZW5kZWRdOiBFeGVjdXRpbmcgcXVldWUgb2YgJHtjb21tYW5kQmxvY2tzLmxlbmd0aH0gY29tbWFuZHMgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICByZXR1cm4gYmVnaW5RdWV1ZSgpLnRoZW4oYmVnaW5RdWVSZXNwID0+IHBhcmVudFJlc29sdmUoYmVnaW5RdWVSZXNwKSkuY2F0Y2goZXJyID0+IHBhcmVudFJlamVjdChlcnIpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNlbmRBcnBjID0gYXJwY1Jlc3AgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gdGhpcy5zZW5kQXJwY0Jhc2UoYXJwY1Jlc3ApXHJcbiAgICAgICAgLnRoZW4oYXJwY0NtZCA9PiB0aGlzLmRlbGF5UHJvbWlzZSgyMDAsIGFycGNDbWQpXHJcbiAgICAgICAgKS50aGVuKGNtZCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwYXNzZWQgdGhyb3VnaCBjb21tYW5kOiAnLCBjbWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKGNtZClcclxuICAgICAgICB9KS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbU2VuZCBBUlBDIFJlc3VsdF06ICR7dGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhyZXNwKX1gKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHJlc3ApO1xyXG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiByZWplY3QodGhpcy5idWlsZERldmljZUVycihlcnIpKSlcclxuICAgICk7XHJcblxyXG4gICAgLyogVE9ETzogKi9cclxuICAgIHJlcXVlc3RUaXBPckNhc2hiYWNrID0gdGlwQ2FzaGJhY2tPcHRpb25zID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAvL0lmIFRpcFxyXG4gICAgICAgIHRoaXMuaGFzVGlwID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRUaXBPckNhc2hiYWNrQ21kKHRpcENhc2hiYWNrT3B0aW9ucylcclxuICAgICAgICAgICAgLnRoZW4odGlwQ2FzaGJhY2tDbWQgPT4gIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXR1cm5lZCB3aXRoIHRoaXMgY29tbWFuZDonLCB0aXBDYXNoYmFja0NtZCwgdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyh0aXBDYXNoYmFja0NtZCkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKHRpcENhc2hiYWNrQ21kKVxyXG4gICAgICAgICAgICB9KS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RpcC1jYXNoYmFjayByZXNwOiAnLCByZXNwKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHJlc3ApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHJlamVjdCh0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikpKVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2V0RGlzcGxheU1lc3NhZ2UgPSBkaXNwbGF5T3B0aW9ucyA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiBcclxuICAgICAgICAodGhpcy5kZXZpY2UgJiYgdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpID8gXHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGREaXNwbGF5Q21kKCAoZGlzcGxheU9wdGlvbnMgfHwge30pICkudGhlbiggY21kID0+IHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcChjbWQpIFxyXG4gICAgICAgICAgICAgICAgKS50aGVuKHJlc3AgPT4gcmVzb2x2ZShyZXNwKVxyXG4gICAgICAgICAgICAgICAgKS5jYXRjaChlcnIgPT4gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikgKSlcclxuICAgICAgICAgICAgOiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90T3BlbikpICk7XHJcblxyXG4gICAgc2VuZFBpbkNvbW1hbmQgPSB3cml0ZUNvbW1hbmQgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbQXBwRnJvbUhvc3RMZW5ndGhdOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoW3dyaXRlQ29tbWFuZC5sZW5ndGhdKX0gfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICByZXR1cm4gKCF0aGlzLnNlbmRMZW5Ub0RldmljZSkgPyByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoY29tbWFuZE5vdFNlbnRGcm9tSG9zdCkgKVxyXG4gICAgICAgIDogdGhpcy5zZW5kTGVuVG9EZXZpY2Uud3JpdGVWYWx1ZShVaW50OEFycmF5Lm9mKCB3cml0ZUNvbW1hbmQubGVuZ3RoICkpXHJcbiAgICAgICAgICAgIC50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbQXBwRnJvbUhvc3REYXRhXTogJHt0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHdyaXRlQ29tbWFuZCl9IHx8ICR7bmV3IERhdGUoKX1gKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZFNlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuY29tbWFuZENoYXJhY3RlcmlzdGljLndyaXRlVmFsdWUoIFVpbnQ4QXJyYXkuZnJvbSh3cml0ZUNvbW1hbmQpICkgKVxyXG4gICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kU2VudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2VuZENvbW1hbmRXaXRoUmVzcCA9IHdyaXRlQ29tbWFuZCA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gdGhpcy5zZW5kUGluQ29tbWFuZCh3cml0ZUNvbW1hbmQpXHJcbiAgICAgICAgLnRoZW4oICgpID0+ICh0aGlzLmNvbW1hbmRSZXNwQXZhaWxhYmxlKSA/IFByb21pc2UucmVzb2x2ZSh0cnVlKSA6IHRoaXMud2FpdEZvckRldmljZVJlc3BvbnNlKDE2KSApXHJcbiAgICAgICAgLnRoZW4oIHdhaXRSZXNwID0+ICh3YWl0UmVzcCkgPyB0aGlzLnJlYWRDb21tYW5kUmVzcCgpIDogdGhpcy50cnlDb21tYW5kQWdhaW4od3JpdGVDb21tYW5kKSApXHJcbiAgICAgICAgLnRoZW4oIHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb21tYW5kUmVzcEF2YWlsYWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHJlc3BvbnNlICk7XHJcbiAgICAgICAgfSkuY2F0Y2goIGVyciA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZFJlc3BBdmFpbGFibGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSApXHJcbiAgICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgdHJ5Q29tbWFuZEFnYWluID0gd3JpdGVDb21tYW5kID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB0aGlzLnNlbmRQaW5Db21tYW5kKHdyaXRlQ29tbWFuZClcclxuICAgICAgICAudGhlbiggKCkgPT4gdGhpcy53YWl0Rm9yRGV2aWNlUmVzcG9uc2UoNSkgKVxyXG4gICAgICAgIC50aGVuKCB3YWl0UmVzcCA9PiAod2FpdFJlc3ApID8gcmVzb2x2ZSggdGhpcy5yZWFkQ29tbWFuZFJlc3AoKSApXHJcbiAgICAgICAgICAgIDogcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKHJlc3BvbnNlTm90UmVjZWl2ZWQpIClcclxuICAgICAgICApXHJcbiAgICApO1xyXG5cclxuICAgIGNhbmNlbFRyYW5zYWN0aW9uID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+ICghdGhpcy5jb21tYW5kQ2hhcmFjdGVyaXN0aWMpID8gXHJcbiAgICAgICAgcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGNvbW1hbmROb3RTZW50KSlcclxuICAgICAgICA6XHJcbiAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKFsweDAxLCAweDA1LCAweDAwXSlcclxuICAgICAgICAudGhlbiggYWNrUmVzcCA9PiByZXNvbHZlKGFja1Jlc3ApIClcclxuICAgICAgICAuY2F0Y2goIGVyciA9PiByZWplY3QoZXJyKSApXHJcbiAgICApO1xyXG5cclxuICAgIGNsZWFyU2Vzc2lvbiA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0NsZWFyU2Vzc2lvbl06IFJlcXVlc3QgdG8gY2xlYXIgc2Vzc2lvbiB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgIHJldHVybiAoIXRoaXMuc2VuZExlblRvRGV2aWNlKSA/IHJlc29sdmUobm9TZXNzaW9uVG9DbGVhcikgXHJcbiAgICAgICAgICAgIDogdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKHRoaXMuY2xlYXJTZXNzaW9uQ21kKVxyXG4gICAgICAgICAgICAudGhlbiggYWNrUmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2soYWNrUmVzcCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbQ2xlYXJTZXNzaW9uXTogUmVjZWl2ZWQgY2xlYXIgc2Vzc2lvbiByZXNwb25zZSB8fCAke25ldyBEYXRlKCl9YCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFySW50ZXJuYWxTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoYWNrUmVzcClcclxuICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihlcnIpICkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY2xvc2VQaW5EZXZpY2UgPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gKCF0aGlzLmNhcmREYXRhTGlzdGVuZXIpID9cclxuICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKS50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtDbG9zZSBEZXZpY2VdOiBEZXZpY2UgQ2xvc2VkLiBDbGVhcmluZyBKUyBjYWNoZSB8fCAke25ldyBEYXRlKCl9YCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJHYXR0Q2FjaGUoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHJlamVjdCggZXJyICkgKVxyXG4gICAgICAgIDpcclxuICAgICAgICB0aGlzLmNhcmREYXRhTGlzdGVuZXIuc3RvcE5vdGlmaWNhdGlvbnMoKVxyXG4gICAgICAgIC50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtDbG9zZSBEZXZpY2VdOiBHQVRUIG5vdGlmaWNhdGlvbnMgc3RvcHBlZC4gQ2xlYXJpbmcgSlMgY2FjaGUgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYXJkRGF0YUxpc3RlbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYXJhY3RlcmlzdGljdmFsdWVjaGFuZ2VkJywgdGhpcy5kYXRhV2F0Y2hlcik7XHJcbiAgICAgICAgICAgIHRoaXMuY2FyZERhdGFMaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJHYXR0Q2FjaGUoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCB0aGlzLmRpc2Nvbm5lY3QoKSApXHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHJlamVjdCggZXJyICkgKVxyXG4gICAgKTtcclxuXHJcbiAgICBjbG9zZURldmljZSA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiAoIXRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSA/IFxyXG4gICAgICAgIHJlc29sdmUoc3VjY2Vzc2Z1bENsb3NlKSBcclxuICAgICAgICA6IHRoaXMuY2xlYXJTZXNzaW9uKClcclxuICAgICAgICAgICAgLnRoZW4oICgpID0+IFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVBpbkRldmljZSgpXHJcbiAgICAgICAgICAgICkudGhlbigoKT0+IHJlc29sdmUoc3VjY2Vzc2Z1bENsb3NlKVxyXG4gICAgICAgICAgICApLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QodGhpcy5idWlsZERldmljZUVycihlcnIpIClcclxuICAgICAgICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgY2xlYXJJbnRlcm5hbFN0YXRlID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY29tbWFuZFNlbnQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbW1hbmRSZXNwQXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kYXRhR2F0aGVyZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzUXVpY2tDaGlwVHJhbnNhY3Rpb24gPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyR2F0dENhY2hlID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25IYXNTdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlRGF0YUNoYXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY29tbWFuZENoYXJhY3RlcmlzdGljID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlbmRMZW5Ub0RldmljZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jbGVhckludGVybmFsU3RhdGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5oYXNUaXAgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnN3aXBlSGFzQmVndW4gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uSGFzU3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQaW5QYWQ7IiwiaW1wb3J0IFBpblBhZCBmcm9tICcuL3BpblBhZCc7XHJcbmltcG9ydCB7IGRldmljZU5vdElkbGUsIGRwTWluaSB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IHJlc3BvbnNlTm90UmVjZWl2ZWQsIGRldmljZU5vdEZvdW5kIH0gZnJvbSAnLi4vZXJyb3JIYW5kbGVyL2VyckNvbnN0YW50cyc7XHJcblxyXG5jbGFzcyBEcE1pbmkgZXh0ZW5kcyBQaW5QYWQge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsQmFja3MpIHtcclxuICAgICAgICBzdXBlcihkZXZpY2UsIGNhbGxCYWNrcyk7XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0S3NuQXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0ZWRLc24gPSBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZ2V0U2VyaWFsTnVtYmVyID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0ZWRTbiA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuZGV2aWNlVHlwZSA9IGRwTWluaTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gR2V0RGV2aWNlSW5mb1xyXG4gICAgZ2V0RGV2aWNlSW5mbyA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiAoIXRoaXMuZGV2aWNlKSA/XHJcbiAgICAgICAgcmVqZWN0KHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90Rm91bmQpKSBcclxuICAgICAgICA6IHRoaXMuZ2F0aGVyRGV2aWNlSW5mbygpXHJcbiAgICAgICAgICAgIC50aGVuKCBkZXZpY2VJbmZvID0+IHJlc29sdmUoZGV2aWNlSW5mbylcclxuICAgICAgICAgICAgKS5jYXRjaChlcnIgPT4gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikpIClcclxuICAgICk7XHJcblxyXG4gICAgZ2F0aGVyRGV2aWNlSW5mbyA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRGV2aWNlSWRsZSgpXHJcbiAgICAgICAgLnRoZW4oICgpID0+IHRoaXMuZ2V0RGV2aWNlSW5mb1Byb2NlZWQoKVxyXG4gICAgICAgICkudGhlbiggZGV2aWNlSW5mbyA9PiBcclxuICAgICAgICAgICAgIHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgIC4uLmRldmljZUluZm8sXHJcbiAgICAgICAgICAgICAgICAgZGV2aWNlTmFtZTogdGhpcy5kZXZpY2UubmFtZSxcclxuICAgICAgICAgICAgICAgICBpc0Nvbm5lY3RlZDogdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQsXHJcbiAgICAgICAgICAgICB9KVxyXG4gICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKVxyXG4gICAgIH0pO1xyXG5cclxuICAgIGdldERldmljZUluZm9CYXNlID0gKCkgPT4gbmV3IFByb21pc2UoIHJlc29sdmUgPT4ge1xyXG4gICAgICAgIHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcChbMHgwMSwgMHgxQSwgMHgwNV0pXHJcbiAgICAgICAgLnRoZW4oIGFja1Jlc3AgPT4gcmVzb2x2ZShhY2tSZXNwKSlcclxuICAgIH0pO1xyXG5cclxuICAgIGdldERldmljZUluZm9Qcm9jZWVkID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLnNlbmRQaW5Db21tYW5kKFsweDAwLCAweDFBLCAweDA1XSlcclxuICAgICAgICAudGhlbiggKCkgPT4gKHRoaXMuZ2V0U2VyaWFsTnVtYmVyIHx8IHRoaXMud2FpdEZvclNuKDUpKSBcclxuICAgICAgICApLnRoZW4oIHdhaXRSZXNwID0+ICh3YWl0UmVzcCkgPyBQcm9taXNlLnJlc29sdmUoKSA6IFxyXG4gICAgICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIocmVzcG9uc2VOb3RSZWNlaXZlZCkpXHJcbiAgICAgICAgKS50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCByZXR1cm5TbiA9IHsgXHJcbiAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXI6IHRoaXMuaGV4VG9Bc2NpaSh0aGlzLnJlcXVlc3RlZFNuLnNlcmlhbE51bWJlcikgXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmdldFNlcmlhbE51bWJlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RlZFNuID0gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoICByZXR1cm5TbiApO1xyXG4gICAgICAgIH0pLmNhdGNoKCBlcnIgPT4gcmVqZWN0KGVycikpXHJcbiAgICB9KVxyXG5cclxuICAgIGNoZWNrSWZEZXZpY2VJZGxlID0gKCkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgdGhpcy5nZXREZXZpY2VJbmZvQmFzZSgpXHJcbiAgICAgICAgLnRoZW4oIGFja1Jlc3AgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYWNrUmVzcC5tZXNzYWdlID09PSBkZXZpY2VOb3RJZGxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbGVhclNlc3Npb24oKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oICgpID0+IHRoaXMuZ2V0RGV2aWNlSW5mb0Jhc2UoKSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrKGFja1Jlc3ApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oYWNrUmVzcCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhhY2tSZXNwKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG4gICAgd2FpdEZvclNuID0gbWF4VHJpZXMgPT4gbmV3IFByb21pc2UoIHJlc29sdmUgPT4ge1xyXG5cclxuICAgICAgICBsZXQgd2FpdEZvclJlc3BvbnNlID0gdHJ5TnVtYmVyID0+IFxyXG4gICAgICAgICAgICAodHJ5TnVtYmVyIDwgbWF4VHJpZXMpID8gXHJcbiAgICAgICAgICAgICAgICAodGhpcy5nZXRTZXJpYWxOdW1iZXIpID8gcmVzb2x2ZSggdHJ1ZSApIDogc2V0VGltZW91dCgoKSA9PiB3YWl0Rm9yUmVzcG9uc2UodHJ5TnVtYmVyICsgMSksIDIwMClcclxuICAgICAgICAgICAgOiByZXNvbHZlKCBmYWxzZSApO1xyXG5cclxuICAgICAgICB3YWl0Rm9yUmVzcG9uc2UoMCk7XHJcbiAgICB9KTtcclxuICAgIC8vI2VuZHJlZ2lvblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEcE1pbmk7IiwiaW1wb3J0IFBpblBhZCBmcm9tICcuL3BpblBhZCc7XHJcbmltcG9ydCB7IGRldmljZU5vdElkbGUsIGR5bmFQcm9HbyB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IHJlc3BvbnNlTm90UmVjZWl2ZWQsIGRldmljZU5vdEZvdW5kLCBkZXZpY2VOb3RPcGVuLCBtaXNzaW5nUmVxdWlyZWRGaWVsZHMgfSBmcm9tICcuLi9lcnJvckhhbmRsZXIvZXJyQ29uc3RhbnRzJztcclxuXHJcbmNsYXNzIER5bmFQcm9HbyBleHRlbmRzIFBpblBhZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIGNhbGxCYWNrcykge1xyXG4gICAgICAgIHN1cGVyKGRldmljZSwgY2FsbEJhY2tzKTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRLc25BdmFpbGFibGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJlcXVlc3RlZEtzbiA9IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5nZXRTZXJpYWxOdW1iZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJlcXVlc3RlZFNuID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5kZXZpY2VUeXBlID0gZHluYVByb0dvO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBHZXREZXZpY2VJbmZvXHJcbiAgICBnZXREZXZpY2VJbmZvID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+ICghdGhpcy5kZXZpY2UpID9cclxuICAgICAgICByZWplY3QodGhpcy5idWlsZERldmljZUVycihkZXZpY2VOb3RGb3VuZCkpIFxyXG4gICAgICAgIDogdGhpcy5nYXRoZXJEZXZpY2VJbmZvKClcclxuICAgICAgICAgICAgLnRoZW4oIGRldmljZUluZm8gPT4gcmVzb2x2ZShkZXZpY2VJbmZvKVxyXG4gICAgICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSkgKVxyXG4gICAgKTtcclxuXHJcbiAgICBnYXRoZXJEZXZpY2VJbmZvID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLmNoZWNrSWZEZXZpY2VJZGxlKClcclxuICAgICAgICAudGhlbiggKCkgPT4gdGhpcy5nZXREZXZpY2VJbmZvUHJvY2VlZCgpXHJcbiAgICAgICAgKS50aGVuKCBkZXZpY2VJbmZvID0+IFxyXG4gICAgICAgICAgICAgcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICAgLi4uZGV2aWNlSW5mbyxcclxuICAgICAgICAgICAgICAgICBkZXZpY2VOYW1lOiB0aGlzLmRldmljZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgIGlzQ29ubmVjdGVkOiB0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCxcclxuICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpXHJcbiAgICAgfSk7XHJcblxyXG4gICAgZ2V0RGV2aWNlSW5mb0Jhc2UgPSAoKSA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKFsweDAxLCAweDFBLCAweDA1XSlcclxuICAgICAgICAudGhlbiggYWNrUmVzcCA9PiByZXNvbHZlKGFja1Jlc3ApKVxyXG4gICAgfSk7XHJcblxyXG4gICAgZ2V0RGV2aWNlSW5mb1Byb2NlZWQgPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2VuZFBpbkNvbW1hbmQoWzB4MDAsIDB4MUEsIDB4MDVdKVxyXG4gICAgICAgIC50aGVuKCAoKSA9PiAodGhpcy5nZXRTZXJpYWxOdW1iZXIpID8gUHJvbWlzZS5yZXNvbHZlKHRydWUpIDogdGhpcy53YWl0Rm9yU24oNSkgXHJcbiAgICAgICAgKS50aGVuKCB3YWl0UmVzcCA9PiAod2FpdFJlc3ApID8gUHJvbWlzZS5yZXNvbHZlKCkgOiBcclxuICAgICAgICAgICAgcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKHJlc3BvbnNlTm90UmVjZWl2ZWQpKVxyXG4gICAgICAgICkudGhlbiggKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcmV0dXJuU24gPSB7IFxyXG4gICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyOiB0aGlzLmhleFRvQXNjaWkodGhpcy5yZXF1ZXN0ZWRTbi5zZXJpYWxOdW1iZXIpIFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5nZXRTZXJpYWxOdW1iZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0ZWRTbiA9IG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCAgcmV0dXJuU24gKTtcclxuICAgICAgICB9KS5jYXRjaCggZXJyID0+IHJlamVjdChlcnIpKVxyXG4gICAgfSlcclxuXHJcbiAgICBjaGVja0lmRGV2aWNlSWRsZSA9ICgpID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgIHRoaXMuZ2V0RGV2aWNlSW5mb0Jhc2UoKVxyXG4gICAgICAgIC50aGVuKCBhY2tSZXNwID0+IHtcclxuICAgICAgICAgICAgaWYgKGFja1Jlc3AubWVzc2FnZSA9PT0gZGV2aWNlTm90SWRsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xlYXJTZXNzaW9uKClcclxuICAgICAgICAgICAgICAgIC50aGVuKCAoKSA9PiB0aGlzLmdldERldmljZUluZm9CYXNlKCkgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhhY2tSZXNwKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKGFja1Jlc3AgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2soYWNrUmVzcCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG5cclxuICAgIHdhaXRGb3JTbiA9IG1heFRyaWVzID0+IG5ldyBQcm9taXNlKCByZXNvbHZlID0+IHtcclxuXHJcbiAgICAgICAgbGV0IHdhaXRGb3JSZXNwb25zZSA9IHRyeU51bWJlciA9PiBcclxuICAgICAgICAgICAgKHRyeU51bWJlciA8IG1heFRyaWVzKSA/IFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuZ2V0U2VyaWFsTnVtYmVyKSA/IHJlc29sdmUoIHRydWUgKSA6IHNldFRpbWVvdXQoKCkgPT4gd2FpdEZvclJlc3BvbnNlKHRyeU51bWJlciArIDEpLCAyMDApXHJcbiAgICAgICAgICAgIDogcmVzb2x2ZSggZmFsc2UgKTtcclxuXHJcbiAgICAgICAgd2FpdEZvclJlc3BvbnNlKDApO1xyXG4gICAgfSk7XHJcbiAgICAvLyNlbmRyZWdpb25cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRHluYVByb0dvOyIsImltcG9ydCBEZXZpY2VCYXNlIGZyb20gJy4uL2RldmljZXMvYmFzZUNsYXNzJztcclxuXHJcbmNsYXNzIFNjcmFTd2lwZVBhcnNlciBleHRlbmRzIERldmljZUJhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsQmFja3MpIHtcclxuICAgICAgICBzdXBlcihkZXZpY2UsIGNhbGxCYWNrcyk7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YU5hbWVzID0gW1xyXG4gICAgICAgICAgICAndHJhY2sxJyxcclxuICAgICAgICAgICAgJ3RyYWNrMicsXHJcbiAgICAgICAgICAgICd0cmFjazMnLFxyXG4gICAgICAgICAgICAna3NuJyxcclxuICAgICAgICAgICAgJ21hZ25lUHJpbnQnLFxyXG4gICAgICAgICAgICAnbWFnbmVQcmludFN0YXR1cycsXHJcbiAgICAgICAgICAgICdzZXJpYWxOdW1iZXInLFxyXG4gICAgICAgICAgICAnZW5jU2Vzc2lvbklkJyxcclxuICAgICAgICAgICAgJ3RyYWNrMU1hc2tlZCcsXHJcbiAgICAgICAgICAgICd0cmFjazJNYXNrZWQnLFxyXG4gICAgICAgICAgICAndHJhY2szTWFza2VkJ1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gMztcclxuXHJcbiAgICAgICAgLy9Nb3ZlZCBTdGF0dXMgRW51bXMgdG8gRGV2aWNlQmFzZSBmb3IgaW5oZXJpdGFuY2UuXHJcbiAgICB9XHJcblxyXG4gICAgdHJhY2tJbmRpY2VzID0gb2Zmc2V0ID0+IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgIHRyYWNrMURlY29kZVN0YXR1czogb2Zmc2V0LFxyXG4gICAgICAgIHRyYWNrMkRlY29kZVN0YXR1czogb2Zmc2V0ICsgMSxcclxuICAgICAgICB0cmFjazNEZWNvZGVTdGF0dXM6IG9mZnNldCArIDIsXHJcbiAgICAgICAgdHJhY2sxTGVuOiBvZmZzZXQgKyAzLFxyXG4gICAgICAgIHRyYWNrMkxlbjogb2Zmc2V0ICsgNCxcclxuICAgICAgICB0cmFjazNMZW46IG9mZnNldCArIDUsXHJcbiAgICAgICAgY2FyZEVuY29kZVR5cGU6IG9mZnNldCArIDYsXHJcbiAgICAgICAgdHJhY2sxU3RhcnQ6IG9mZnNldCArIDcsXHJcbiAgICAgICAgdHJhY2sxRW5kOiBvZmZzZXQgKyAxMTgsXHJcbiAgICAgICAgdHJhY2syU3RhcnQ6IG9mZnNldCArIDExOSxcclxuICAgICAgICB0cmFjazJFbmQ6IG9mZnNldCArIDIzMCxcclxuICAgICAgICB0cmFjazNTdGFydDogb2Zmc2V0ICsgMjMxLFxyXG4gICAgICAgIHRyYWNrM0VuZDogb2Zmc2V0ICsgMzQyLFxyXG4gICAgICAgIGNhcmRTdGF0dXM6IG9mZnNldCArIDM0MyxcclxuICAgICAgICBtYWduZVByaW50U3RhdHVzU3RhcnQ6IG9mZnNldCArIDM0NCxcclxuICAgICAgICBtYWduZVByaW50U3RhdHVzRW5kOiBvZmZzZXQgKyAgMzQ3LFxyXG4gICAgICAgIG1hZ25lUHJpbnRMZW46IG9mZnNldCArIDM0OCxcclxuICAgICAgICBtYWduZVByaW50U3RhcnQ6IG9mZnNldCArIDM0OSxcclxuICAgICAgICBtYWduZVByaW50RW5kOiBvZmZzZXQgKyA0NzYsXHJcbiAgICAgICAgc2VyaWFsTnVtYmVyU3RhcnQ6IG9mZnNldCArIDQ3NyxcclxuICAgICAgICBzZXJpYWxOdW1iZXJFbmQ6IG9mZnNldCArIDQ5MixcclxuICAgICAgICBkZXZpY2VFbmNTdGF0dXNTdGFydDogb2Zmc2V0ICsgNDkzLFxyXG4gICAgICAgIGRldmljZUVuY1N0YXR1c0VuZDogb2Zmc2V0ICsgNDk0LFxyXG4gICAgICAgIGtzblN0YXJ0OiBvZmZzZXQgKyA0OTUsXHJcbiAgICAgICAga3NuRW5kOiBvZmZzZXQgKyA1MDQsXHJcbiAgICAgICAgdHJhY2sxTWFza2VkTGVuOiBvZmZzZXQgKyA1MDUsXHJcbiAgICAgICAgdHJhY2syTWFza2VkTGVuOiBvZmZzZXQgKyA1MDYsXHJcbiAgICAgICAgdHJhY2szTWFza2VkTGVuOiBvZmZzZXQgKyA1MDcsXHJcbiAgICAgICAgdHJhY2sxTWFza2VkU3RhcnQ6IG9mZnNldCArIDUwOCxcclxuICAgICAgICB0cmFjazFNYXNrZWRFbmQ6IG9mZnNldCArIDYxOSxcclxuICAgICAgICB0cmFjazJNYXNrZWRTdGFydDogb2Zmc2V0ICsgNjIwLFxyXG4gICAgICAgIHRyYWNrMk1hc2tlZEVuZDogb2Zmc2V0ICsgNzMxLFxyXG4gICAgICAgIHRyYWNrM01hc2tlZFN0YXJ0OiBvZmZzZXQgKyA3MzIsXHJcbiAgICAgICAgdHJhY2szTWFza2VkRW5kOiBvZmZzZXQgKyA4NDMsXHJcbiAgICAgICAgZW5jU2Vzc2lvbklkU3RhcnQ6IG9mZnNldCArIDg0NCxcclxuICAgICAgICBlbmNTZXNzaW9uSWRFbmQ6IG9mZnNldCArIDg1MSxcclxuICAgICAgICB0cmFjazFBYnNMZW46IG9mZnNldCArIDg1MixcclxuICAgICAgICB0cmFjazJBYnNMZW46IG9mZnNldCArIDg1MyxcclxuICAgICAgICB0cmFjazNBYnNMZW46IG9mZnNldCArIDg1NCxcclxuICAgICAgICBtYWduZVByaW50QWJzTGVuOiBvZmZzZXQgKyA4NTVcclxuICAgIH0pO1xyXG5cclxuICAgIHBhcnNlSGlkRGF0YSA9IGRhdGEgPT4ge1xyXG4gICAgICAgIGxldCB0cmFja1Bvc2l0aW9ucyA9IHRoaXMudHJhY2tJbmRpY2VzKHRoaXMub2Zmc2V0KTtcclxuICAgICAgICBsZXQgdHJhY2tJbmZvID0ge307XHJcbiAgICBcclxuICAgICAgICAvL0l0ZXJhdGUgdGhyb3VnaCB0cmFjayBuYW1lcyBhbmQgZm9ybWF0IGluIGtleSB2YWx1ZSBwYWlyIGZvcm1hdC5cclxuICAgICAgICB0aGlzLmRhdGFOYW1lcy5mb3JFYWNoKCBkYXRhUHJvcCA9PiB7XHJcblxyXG4gICAgICAgICAgICBsZXQgdHJhY2tEYXRhID0gZGF0YS5zbGljZShcclxuICAgICAgICAgICAgICAgIHRyYWNrUG9zaXRpb25zW2Ake2RhdGFQcm9wfVN0YXJ0YF0sIHRyYWNrUG9zaXRpb25zW2Ake2RhdGFQcm9wfUVuZGBdICsgMVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRyYWNrUG9zaXRpb25zLmhhc093blByb3BlcnR5KGAke2RhdGFQcm9wfUxlbmApKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFja0RhdGEgPSB0cmFja0RhdGEuc2xpY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgMCwgZGF0YVt0cmFja1Bvc2l0aW9uc1tgJHtkYXRhUHJvcH1MZW5gXV1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9TcGVjaWFsIGZvcm1hdHRpbmcgaXMgbmVlZGVkIGZvciB0cmFjazJNYXNrZWQsIHRyYWNrcyB3aXRoIGEgXCJEZWNvZGVTdGF0dXNcIiBmaWVsZCwgRGV2aWNlIFNlcmlhbCBOdW1iZXIsIGFuZCB0cmFja3MgdGhhdCBoYXZlIGEgXCJtYXNrZWRcIiBzdWZmaXguXHJcbiAgICAgICAgICAgIC8vVGhlIGJlbG93IHRlcm5hcnkgcmV0dXJucyB0aGUgcHJvcGVyIGZvcm1hdCwgZGVwZW5kaW5nIG9uIHRyYWNrIG5hbWUsIGFuZCBwZXJmb3JtcyBtdWNoIGJldHRlciB0aGFuIGlmL2Vsc2VpZi9lbHNlIHN0YXRlbWVudC5cclxuICAgICAgICAgICAgdHJhY2tJbmZvID0gKGRhdGFQcm9wID09PSAndHJhY2syTWFza2VkJykgPyB0aGlzLmZvcm1hdFRyYWNrMk1hc2tlZCggdHJhY2tJbmZvLCBkYXRhUHJvcCwgdGhpcy5idWZmZXJUb1V0ZjgodHJhY2tEYXRhKSApIDogXHJcbiAgICAgICAgICAgICAgICAodHJhY2tQb3NpdGlvbnMuaGFzT3duUHJvcGVydHkoYCR7ZGF0YVByb3B9RGVjb2RlU3RhdHVzYCkpID8gdGhpcy5mb3JtYXRUcmFja1dpdGhEZWNvZGUoIHRyYWNrSW5mbywgZGF0YVByb3AsIGRhdGFbdHJhY2tQb3NpdGlvbnNbYCR7ZGF0YVByb3B9RGVjb2RlU3RhdHVzYF1dLCB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHRyYWNrRGF0YSkgKSA6IFxyXG4gICAgICAgICAgICAgICAgICAgIChkYXRhUHJvcCA9PT0gJ3NlcmlhbE51bWJlcicpID8gdGhpcy5mb3JtYXRTZXJpYWxOdW1iZXIodHJhY2tJbmZvLCB0cmFja0RhdGEpIDogXHJcbiAgICAgICAgICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4udHJhY2tJbmZvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbZGF0YVByb3BdIDogKGRhdGFQcm9wLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ21hc2tlZCcpKSA/IHRoaXMuYnVmZmVyVG9VdGY4KHRyYWNrRGF0YSkgOiB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHRyYWNrRGF0YSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4geyBzd2lwZURhdGE6IHsgLi4udHJhY2tJbmZvIH0gfTtcclxuICAgIH1cclxuXHJcbiAgICBmb3JtYXRTZXJpYWxOdW1iZXIgPSAodHJhY2tJbmZvLCB0cmFja0RhdGEpID0+ICh7XHJcbiAgICAgICAgLi4udHJhY2tJbmZvLFxyXG4gICAgICAgIHNlcmlhbE51bWJlcjogdGhpcy5idWZmZXJUb1V0ZjgoICh0cmFja0RhdGEubGVuZ3RoID4gNyA/IHRyYWNrRGF0YS5zbGljZSgwLCA3KSA6IHRyYWNrRGF0YSApIClcclxuICAgIH0pO1xyXG5cclxuICAgIC8vTW92ZWQgRXhwIGFuZCBQQU4gZm9ybWF0aW5nIHRvIFV0aWxzIGNsYXNzIC0gZm9yIGluaGVyaXRhbmNlLlxyXG5cclxuICAgIGZvcm1hdFRyYWNrMk1hc2tlZCA9ICh0cmFja0luZm8sIGRhdGFQcm9wLCB0cmFjazJNYXNrZWQpID0+ICh7XHJcbiAgICAgICAgLi4udHJhY2tJbmZvLFxyXG4gICAgICAgIFtkYXRhUHJvcF0gOiB0cmFjazJNYXNrZWQsXHJcbiAgICAgICAgLi4udGhpcy5mb3JtYXRFeHBQQU4odHJhY2syTWFza2VkKVxyXG4gICAgfSk7XHJcblxyXG4gICAgZm9ybWF0VHJhY2tXaXRoRGVjb2RlID0gKHRyYWNrSW5mbywgZGF0YVByb3AsIGRlY29kZVN0YXR1c1ZhbHVlLCB0cmFja1ZhbHVlKSA9PiAoe1xyXG4gICAgICAgIC4uLnRyYWNrSW5mbyxcclxuICAgICAgICBbZGF0YVByb3BdIDogdHJhY2tWYWx1ZSxcclxuICAgICAgICBbYCR7ZGF0YVByb3B9RGVjb2RlU3RhdHVzYF0gOiBkZWNvZGVTdGF0dXNWYWx1ZSA9PT0gMHgwMCA/IFwiT2tcIiA6IFwiRXJyb3JcIixcclxuICAgICAgICBbYCR7ZGF0YVByb3B9RGVjb2RlU3RhdHVzQ29kZWBdIDogZGVjb2RlU3RhdHVzVmFsdWVcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTY3JhU3dpcGVQYXJzZXI7IiwiaW1wb3J0IFNjcmFTd2lwZVBhcnNlciBmcm9tICcuLi9wYXJzZXJzL3NjcmFTd2lwZVBhcnNlcic7XHJcblxyXG5jbGFzcyBUcnhTdGF0dXNQYXJzZXIgZXh0ZW5kcyBTY3JhU3dpcGVQYXJzZXIge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsQmFja3MpIHtcclxuICAgICAgICBzdXBlcihkZXZpY2UsIGNhbGxCYWNrcyk7XHJcblxyXG4gICAgICAgIHRoaXMuVHJ4U3RhdHVzRW51bSA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIlRyYW5zYWN0aW9uIFN0YXJ0ZWQgYW5kIElkbGVcIixcclxuICAgICAgICAgICAgMHgwMTogXCJDYXJkIGlzIEluc2VydGVkXCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiRXJyb3JcIixcclxuICAgICAgICAgICAgMHgwMzogXCJUcmFuc2FjdGlvbiBQcm9ncmVzcyBDaGFuZ2VcIixcclxuICAgICAgICAgICAgMHgwNDogXCJXYWl0aW5nIGZvciBVc2VyIFJlc3BvbnNlXCIsXHJcbiAgICAgICAgICAgIDB4MDU6IFwiVGltZWQgT3V0XCIsXHJcbiAgICAgICAgICAgIDB4MDY6IFwiVHJhbnNhY3Rpb24gQ29tcGxldGVcIixcclxuICAgICAgICAgICAgMHgwNzogXCJDYW5jZWxsZWQgYnkgSG9zdFwiLFxyXG4gICAgICAgICAgICAweDA4OiBcIkNhcmQgUmVtb3ZlZFwiLFxyXG4gICAgICAgICAgICAweDA5OiBcIkNvbnRhY3RsZXNzIFRva2VuIERldGVjdGVkLCBQb3dlcmluZyBVcCBDYXJkXCIsXHJcbiAgICAgICAgICAgIDB4MEE6IFwiTVNSIFN3aXBlIERldGVjdGVkXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5UcnhQcm9ncmVzc0luZGljYXRvciA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIk5vIHRyYW5zYWN0aW9uIGluIHByb2dyZXNzXCIsXHJcbiAgICAgICAgICAgIDB4MDE6IFwiV2FpdGluZyBmb3IgY2FyZGhvbGRlciB0byBwcmVzZW50IHBheW1lbnRcIixcclxuICAgICAgICAgICAgMHgwMjogXCJQb3dlcmluZyB1cCB0aGUgY2FyZFwiLFxyXG4gICAgICAgICAgICAweDAzOiBcIlNlbGVjdGluZyB0aGUgYXBwbGljYXRpb25cIixcclxuICAgICAgICAgICAgMHgwNDogXCJXYWl0aW5nIGZvciB1c2VyIGxhbmd1YWdlIHNlbGVjdGlvblwiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgwNTogXCJXYWl0aW5nIGZvciB1c2VyIGFwcGxpY2F0aW9uIHNlbGVjdGlvblwiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgwNjogXCJJbml0aWF0aW5nIGFwcGxpY2F0aW9uXCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDA3OiBcIlJlYWRpbmcgYXBwbGljYXRpb24gZGF0YVwiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgwODogXCJPZmZsaW5lIGRhdGEgYXV0aGVudGljYXRpb25cIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MDk6IFwiUHJvY2VzcyByZXN0cmljdGlvbnNcIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MEE6IFwiQ2FyZGhvbGRlciB2ZXJpZmljYXRpb25cIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MEI6IFwiVGVybWluYWwgcmlzayBtYW5hZ2VtZW50XCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDBDOiBcIlRlcm1pbmFsIGFjdGlvbiBhbmFseXNpc1wiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgwRDogXCJHZW5lcmF0aW5nIGZpcnN0IGFwcGxpY2F0aW9uIGNyeXB0b2dyYW1cIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MEU6IFwiQ2FyZCBhY3Rpb24gYW5hbHlzaXNcIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MEY6IFwiT25saW5lIHByb2Nlc3NpbmdcIixcclxuICAgICAgICAgICAgMHgxMDogXCJXYWl0aW5nIG9ubGluZSBwcm9jZXNzaW5nIHJlc3BvbnNlXCIsXHJcbiAgICAgICAgICAgIDB4MTE6IFwiVHJhbnNhY3Rpb24gQ29tcGxldGVcIixcclxuICAgICAgICAgICAgMHgxMjogXCJUcmFuc2FjdGlvbiBFcnJvclwiLFxyXG4gICAgICAgICAgICAweDEzOiBcIlRyYW5zYWN0aW9uIEFwcHJvdmVkXCIsXHJcbiAgICAgICAgICAgIDB4MTQ6IFwiVHJhbnNhY3Rpb24gRGVjbGluZWRcIixcclxuICAgICAgICAgICAgMHgxNTogXCJUcmFuc2FjdGlvbiBDYW5jZWxsZWQgYnkgTVNSIFN3aXBlXCIsICAvL01TUiBPbmx5XHJcbiAgICAgICAgICAgIDB4MTY6IFwiRU1WIGVycm9yIC0gQ29uZGl0aW9ucyBOb3QgU2F0aXNmaWVkXCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDE3OiBcIkVNViBlcnJvciAtIENhcmQgQmxvY2tlZFwiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgxODogXCJBcHBsaWNhdGlvbiBzZWxlY3Rpb24gZmFpbGVkXCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDE5OiBcIkVNViBlcnJvciAtIENhcmQgTm90IEFjY2VwdGVkXCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDFBOiBcIkVtcHR5IENhbmRpZGF0ZSBMaXN0XCIsXHJcbiAgICAgICAgICAgIDB4MUI6IFwiQXBwbGljYXRpb24gQmxvY2tlZFwiLFxyXG4gICAgICAgICAgICAweDI5OiBcIkNvbnRhY3RsZXNzIFJlbW92ZSBDYXJkXCIsXHJcbiAgICAgICAgICAgIDB4MkE6IFwiQ29sbGlzaW9uIERldGVjdGVkXCIsXHJcbiAgICAgICAgICAgIDB4MkI6IFwiUmVmZXIgdG8gTW9iaWxlIERldmljZSBQcm9tcHRcIixcclxuICAgICAgICAgICAgMHgyQzogXCJDb250YWN0bGVzcyBUcmFuc2FjdGlvbiBDb21wbGV0ZVwiLFxyXG4gICAgICAgICAgICAweDJEOiBcIlJlcXVlc3QgU3dpdGNoIHRvIElDQy9NU1IgLSBLZXJuZWwgaGFzIHJlZnVzZWQgY29udGFjdGxlc3MgcGF5bWVudFwiLFxyXG4gICAgICAgICAgICAweDJFOiBcIldyb25nIENhcmQgVHlwZSAoTVNEIG9yIEVNVilcIixcclxuICAgICAgICAgICAgMHgyRjogXCJObyBBcHBsaWNhdGlvbiBJbnRlcmNoYW5nZSBQcm9maWxlIChUYWcgODIpIFJlY2VpdmVkXCIsXHJcbiAgICAgICAgICAgIDB4MzE6IFwiTWFnbmV0aWMgc3RyaXBlIGRlY29kaW5nIGVycm9yLlwiLFxyXG4gICAgICAgICAgICAweDNDOiBcIk1hZ25ldGljIHN0cmlwZSBkZWNvZGluZyBkdXJpbmcgVGVjaG5pY2FsIEZhbGxiYWNrLiBSZXZlcnQgdG8gTVNSLCBwb3dlcmluZyB1cCBidXQgbm90IHJlY2VpdmluZyBhbiBBbnN3ZXIgdG8gUmVzZXQgZnJvbSBjYXJkLlwiLFxyXG4gICAgICAgICAgICAweDNEOiBcIk1hZ25ldGljIHN0cmlwZSBjYXJkIGRlY29kZWQgZHVyaW5nIE1TUiBGYWxsYmFjay4gRGV2aWNlIHJldmVydGVkIHRvIE1TUiwgYnV0IGVuY291bnRlcmVkIGZhdGFsIGVycm9ycy5cIixcclxuICAgICAgICAgICAgMHgzRTogXCJNYWduZXRpYyBzdHJpcGUgY2FyZCBkZWNvZGVkIGR1cmluZyBhIE5vIEZhbGxiYWNrIE1TUiByZWFkLlwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VUcmFuc2FjdGlvblN0YXR1cyA9IG5vdGlmaWNhdGlvbiA9PiB7XHJcbiAgICAgICAgbGV0IGRhdGFMZW4gPSB0aGlzLnJlYWRUd29CeXRlTGVuZ3RoKFtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uWzFdLFxyXG4gICAgICAgICAgICBub3RpZmljYXRpb25bMl1cclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgbGV0IG5ld05vdGlmaWNhdGlvbiA9IG5vdGlmaWNhdGlvbi5zbGljZSgzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChuZXdOb3RpZmljYXRpb24ubGVuZ3RoID09PSBkYXRhTGVuKSA/IHRoaXMucGFyc2VOb3RpZmljYXRpb25zKG5ld05vdGlmaWNhdGlvbikgOiB0aGlzLnRocm93TGVuRXJyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBwYXJzZU5vdGlmaWNhdGlvbnMgPSBub3RpZmljYXRpb25TbGljZSA9PiB7XHJcbiAgICAgICAgbGV0IG5ld05vdGlmaWNhdGlvblNsaWNlID0gbm90aWZpY2F0aW9uU2xpY2Uuc2xpY2UoNik7XHJcblxyXG4gICAgICAgIGxldCBub3RpZmljYXRpb25MZW5ndGggPSB0aGlzLnJlYWRUd29CeXRlTGVuZ3RoKFtcclxuICAgICAgICAgICAgbmV3Tm90aWZpY2F0aW9uU2xpY2VbMF0sXHJcbiAgICAgICAgICAgIG5ld05vdGlmaWNhdGlvblNsaWNlWzFdXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIGxldCBub3RpZmljYXRpb25Db250ZW50ID0gbmV3Tm90aWZpY2F0aW9uU2xpY2Uuc2xpY2UoMik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cclxuICAgICAgICAgICAgLy9ub3RpZmljYXRpb25Db250ZW50IEZvcm1hdCBieSBJbmRleDpcclxuICAgICAgICAgICAgLy8wOiBFdmVudCA9PiBTZWUgdGhpcy5UcnhTdGF0dXNFbnVtIGZvciBjb2Rlcy5cclxuICAgICAgICAgICAgLy8xOiBDdXJyZW50IE9wZXJhdGlvbiBUaW1lIHJlbWFpbmluZyBpbiBzZWNvbmRzLlxyXG4gICAgICAgICAgICAvLzI6IEN1cnJlbnQgVHJhbnNhY3Rpb24gUHJvZ3Jlc3MgSW5kaWNhdG9yID0+IFNlZSB0aGlzLlRyeFByb2dyZXNzSW5kaWNhdG9yIGZvciBjb2Rlcy5cclxuICAgICAgICAgICAgLy8zIC0gNDogRmluYWwgU3RhdHVzID0+IE5vIGRvY3VtZW50YXRpb24gcHJvdmlkZWQgZm9yIHRoaXMgKHVzdWFsbHkgaXMgMDAwMCkuXHJcbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cclxuXHJcbiAgICAgICAgbGV0IHRyeFN0YXR1c0NvZGUgPSBub3RpZmljYXRpb25Db250ZW50WzBdO1xyXG4gICAgICAgIGxldCB0cnhQcm9ncmVzc0NvZGUgPSBub3RpZmljYXRpb25Db250ZW50WzJdO1xyXG5cclxuICAgICAgICByZXR1cm4gKG5vdGlmaWNhdGlvbkNvbnRlbnQubGVuZ3RoID09PSBub3RpZmljYXRpb25MZW5ndGgpID8gIHtcclxuICAgICAgICAgICAgdHJhbnNhY3Rpb25TdGF0dXM6IHtcclxuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IHRyeFN0YXR1c0NvZGUsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXNNc2c6ICggdGhpcy5UcnhTdGF0dXNFbnVtWyB0cnhTdGF0dXNDb2RlIF0gfHwgXCJTdGF0dXMgY29kZSBtZXNzYWdlIG5vdCBkb2N1bWVudGVkXCIgKSxcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ29kZTogdHJ4UHJvZ3Jlc3NDb2RlLFxyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NNc2c6ICggdGhpcy5UcnhQcm9ncmVzc0luZGljYXRvclsgdHJ4UHJvZ3Jlc3NDb2RlIF0gfHwgXCJQcm9ncmVzcyBjb2RlIG1lc3NhZ2Ugbm90IGRvY3VtZW50ZWRcIiApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgOlxyXG4gICAgICAgIHRoaXMudGhyb3dMZW5FcnIoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVHJ4U3RhdHVzUGFyc2VyOyIsImltcG9ydCBUcnhTdGF0dXNQYXJzZXIgZnJvbSAnLi90cnhTdGF0dXNQYXJzZXInO1xyXG5cclxuY29uc3QgZHVrcHRGYWlsdXJlQmFzZSA9IFwiRmFpbHVyZSwgRFVLUFQgc2NoZW1lIGlzIFwiO1xyXG5jb25zdCBpbnZhbGlkQmFzZSA9IFwiSW52YWxpZCBcIjtcclxuXHJcblxyXG5jbGFzcyBTY3JhRW12UGFyc2VyIGV4dGVuZHMgVHJ4U3RhdHVzUGFyc2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGRldmljZSwgY2FsbEJhY2tzKSB7XHJcbiAgICAgICAgc3VwZXIoZGV2aWNlLCBjYWxsQmFja3MpO1xyXG5cclxuICAgICAgICB0aGlzLmVtdlJlc3VsdENvZGVzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIDB4ODE6IGR1a3B0RmFpbHVyZUJhc2UgKyBcIm5vdCBsb2FkZWRcIixcclxuICAgICAgICAgICAgMHg4MjogZHVrcHRGYWlsdXJlQmFzZSArIFwibG9hZGVkIGJ1dCBhbGwgb2YgaXRzIGtleXMgaGF2ZSBiZWVuIHVzZWRcIixcclxuICAgICAgICAgICAgMHg4MzogZHVrcHRGYWlsdXJlQmFzZSArIFwibm90IGxvYWRlZCAoU2VjdXJpdHkgTGV2ZWwgbm90IDMgb3IgNClcIixcclxuICAgICAgICAgICAgMHg4NDogaW52YWxpZEJhc2UgKyBcIlRvdGFsIFRyYW5zYWN0aW9uIFRpbWUgRmllbGRcIixcclxuICAgICAgICAgICAgMHg4NTogaW52YWxpZEJhc2UgKyBcIkNhcmQgVHlwZSBGaWVsZFwiLFxyXG4gICAgICAgICAgICAweDg2OiBpbnZhbGlkQmFzZSArIFwiT3B0aW9ucyBGaWVsZFwiLFxyXG4gICAgICAgICAgICAweDg3OiBpbnZhbGlkQmFzZSArIFwiQW1vdW50IEF1dGhvcml6ZWQgRmllbGRcIixcclxuICAgICAgICAgICAgMHg4ODogaW52YWxpZEJhc2UgKyBcIlRyYW5zYWN0aW9uIFR5cGUgRmllbGRcIixcclxuICAgICAgICAgICAgMHg4OTogaW52YWxpZEJhc2UgKyAgXCJDYXNoIEJhY2sgRmllbGRcIixcclxuICAgICAgICAgICAgMHg4QTogaW52YWxpZEJhc2UgKyBcIlRyYW5zYWN0aW9uIEN1cnJlbmN5IENvZGUgRmllbGRcIixcclxuICAgICAgICAgICAgMHg4RTogaW52YWxpZEJhc2UgKyBcIlJlcG9ydGluZyBPcHRpb25cIixcclxuICAgICAgICAgICAgMHg4RjogXCJUcmFuc2FjdGlvbiBBbHJlYWR5IEluIFByb2dyZXNzXCIsXHJcbiAgICAgICAgICAgIDB4OTE6IGludmFsaWRCYXNlICsgXCJEZXZpY2UgU2VyaWFsIE51bWJlclwiLFxyXG4gICAgICAgICAgICAweDk2OiBpbnZhbGlkQmFzZSArIFwiU3lzdGVtIERhdGUgYW5kIFRpbWVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlRW12RGF0YSA9IChlbXZEYXRhLCBpc0FycWMpID0+IChpc0FycWMpID8gKHtcclxuICAgICAgICBhcnFjRGF0YTogdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggZW12RGF0YS5zbGljZSgxMSkgKSxcclxuICAgICAgICBhcnFjRGF0YVBhcnNlZDpcclxuICAgICAgICAgICAgdGhpcy50bHZQYXJzZXIoXHJcbiAgICAgICAgICAgICAgICBlbXZEYXRhLnNsaWNlKDEzKSxcclxuICAgICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgOlxyXG4gICAgICAgICh7XHJcbiAgICAgICAgICAgIHNpZ25hdHVyZVJlcXVpcmVkOiAoZW12RGF0YVsxMV0gPT09IDB4ODApID8gXCJDQkMtTUFDIGNoZWNrZWQgaW4gQVJRQyBvbmxpbmUgcmVzcG9uc2VcIiA6IChlbXZEYXRhWzExXSA9PT0gMHgwMSksXHJcbiAgICAgICAgICAgIGJhdGNoRGF0YTogdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggZW12RGF0YS5zbGljZSgxMSkgKSxcclxuICAgICAgICAgICAgYmF0Y2hEYXRhUGFyc2VkOiB0aGlzLnRsdlBhcnNlciggZW12RGF0YS5zbGljZSgxNCksIHRydWUgKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgLy9SZWFkIFJlc3VsdCBDb2RlIGZyb20gc3RhcnRUcmFuc2FjdGlvbiBjb21tYW5kIGFuZCByZXR1cm4gdG8gdXNlci4gSWYgbm90IDAgLSByZXR1cm4gZXJyb3IgbWVzc2FnZS5cclxuICAgIHBhcnNlRW12Q29tbWFuZFJlc3BvbnNlID0gcmVzcCA9PiAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdENvZGUgPSByZXNwLnNsaWNlKDQsIDYpO1xyXG5cclxuICAgICAgICAvL3Jlc3VsdCBjb2RlIG9mIFsweDAwLCAweDAwXSBpcyBzdWNjZXNzLlxyXG4gICAgICAgIHJldHVybiAocGFyc2VJbnQoIHJlc3VsdENvZGUuam9pbihcIlwiKSApKSA/XHJcbiAgICAgICAgICAgICh7XHJcbiAgICAgICAgICAgICAgICBjb2RlOiBwYXJzZUludCh0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKCByZXN1bHRDb2RlICksIDE2KSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiU3RhcnRUcmFuc2FjdGlvbkVycm9yXCIsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVtdlJlc3VsdENvZGVzWyByZXN1bHRDb2RlWzFdIF0gfHwgXCJUcmFuc2FjdGlvbiBFcnJvciBNZXNzYWdlIG5vdCB5ZXQgZG9jdW1lbnRlZFwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgKHtcclxuICAgICAgICAgICAgICAgIGNvZGU6IDAsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlN1Y2Nlc3MsIHRyYW5zYWN0aW9uIGhhcyBzdGFydGVkXCJcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVVzZXJTZWxlY3Rpb25SZXF1ZXN0ID0gc2VsZWN0aW9uUmVxdWVzdCA9PiAoe1xyXG4gICAgICAgIHVzZXJTZWxlY3Rpb25SZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgIHNlbGVjdGlvblR5cGU6IChzZWxlY3Rpb25SZXF1ZXN0WzBdID09PSAweDAwKSA/IFwiQXBwbGljYXRpb24gU2VsZWN0aW9uXCIgOiBcIkxhbmd1YWdlIFNlbGVjdGlvblwiLFxyXG4gICAgICAgICAgICB0aW1lUmVtYWluaW5nOiAgc2VsZWN0aW9uUmVxdWVzdFsxXSxcclxuICAgICAgICAgICAgbWVudUl0ZW1zOiB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHNlbGVjdGlvblJlcXVlc3Quc2xpY2UoMikpXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2NyYUVtdlBhcnNlcjsiLCJpbXBvcnQgU2NyYUVtdlBhcnNlciBmcm9tICcuLi9wYXJzZXJzL3NjcmFFbXZQYXJzZXInO1xyXG5pbXBvcnQgeyBcclxuICAgIGNvbW1hbmROb3RTZW50LFxyXG4gICAgcmVzcG9uc2VOb3RSZWNlaXZlZCxcclxuICAgIGRldmljZU5vdEZvdW5kLFxyXG4gICAgZGV2aWNlTm90T3BlbixcclxuICAgIGdhdHRTZXJ2ZXJOb3RDb25uZWN0ZWRcclxufSBmcm9tICcuLi9lcnJvckhhbmRsZXIvZXJyQ29uc3RhbnRzJztcclxuaW1wb3J0IHsgXHJcbiAgICBjbG9zZVN1Y2Nlc3MsIFxyXG4gICAgc3VjY2Vzc0NvZGUsIFxyXG4gICAgb3BlblN1Y2Nlc3MgXHJcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuXHJcbmNsYXNzIFNjcmEgZXh0ZW5kcyBTY3JhRW12UGFyc2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGRldmljZSwgY2FsbEJhY2tzKSB7XHJcbiAgICAgICAgc3VwZXIoZGV2aWNlLCBjYWxsQmFja3MpO1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25DYWxsYmFjayA9IGNhbGxCYWNrcy50cmFuc2FjdGlvbkNhbGxiYWNrIHx8IGNhbGxCYWNrcztcclxuICAgICAgICB0aGlzLmRpc3BsYXlDYWxsYmFjayA9IGNhbGxCYWNrcy5kaXNwbGF5Q2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrID0gY2FsbEJhY2tzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy51c2VyU2VsZWN0aW9uQ2FsbGJhY2sgPSBjYWxsQmFja3MudXNlclNlbGVjdGlvbkNhbGxiYWNrO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubWF4QmxvY2tJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsTm90aWZpY2F0aW9uID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJhd0RhdGEgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhUmVhZFN0YXR1c0NoYXJhY3RlcmlzdGljID0gbnVsbDtcclxuICAgICAgICB0aGlzLmRhdGFSZWFkeUNoYXJhY3RlcmlzdGljID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jYXJkRGF0YUxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNhcmREYXRhTm90aWZpY2F0aW9uID1cIjA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDIwMVwiO1xyXG4gICAgICAgIHRoaXMuY29tbWFuZENoYXJJZCA9ICcwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAyMDAnO1xyXG4gICAgICAgIHRoaXMuZGF0YVJlYWR5SWQgPSBcIjA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDIwMlwiO1xyXG4gICAgICAgIHRoaXMuZGF0YVJlYWRTdGF0dXNJZCA9IFwiMDUwOGU2ZjgtYWQ4Mi04OThmLWY4NDMtZTM0MTBjYjYwMjAzXCI7XHJcblxyXG4gICAgICAgIHRoaXMuZW12T3B0aW9ucyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAnbm9ybWFsJzogMHgwMCxcclxuICAgICAgICAgICAgJ2J5cGFzc3Bpbic6IDB4MDEsXHJcbiAgICAgICAgICAgICdmb3JjZW9ubGluZSc6IDB4MDIsXHJcbiAgICAgICAgICAgICdxdWlja2NoaXAnOiAweDgwLFxyXG4gICAgICAgICAgICAncGluYnlwYXNzcXVpY2tjaGlwJzogMHg4MSxcclxuICAgICAgICAgICAgJ2ZvcmNlb25saW5lcXVpY2tjaGlwJzogMHg4MlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnJlc3VsdENvZGVzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgICcwMDAwJzogXCJTdWNjZXNzXCIsXHJcbiAgICAgICAgICAgICcwMzhCJzogXCJJbnZhbGlkIFNlbGVjdGlvbiBTdGF0dXNcIixcclxuICAgICAgICAgICAgJzAzOEMnOiAnSW52YWxpZCBTZWxlY3Rpb24gUmVzdWx0JyxcclxuICAgICAgICAgICAgJzAzOEQnOiBcIkZhaWx1cmUsIG5vIHRyYW5zYWN0aW9uIGN1cnJlbnRseSBpbiBwcm9ncmVzc1wiLFxyXG4gICAgICAgICAgICAnMDM4Ric6IFwiRmFpbHVyZSwgdHJhbnNhY3Rpb24gYWxyZWFkeSBpbiBwcm9ncmVzc1wiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZW12Q29tbWFuZEJhc2UgPSBbMHg0OSwgMHgxOSwgMHgwMCwgMHgwMCwgMHgwMywgMHgwMCwgMHgwMCwgMHgxM107XHJcblxyXG4gICAgICAgIHRoaXMuY2FuY2VsRW12Q29tbWFuZCA9IFVpbnQ4QXJyYXkub2YoXHJcbiAgICAgICAgICAgIDB4NDksIDB4MDYsIDB4MDAsIDB4MDAsIDB4MDMsIDB4MDQsIDB4MDAsIDB4MDBcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENhcmRTZXJ2aWNlQmFzZSA9IG9wdGlvbmFsSW5kZXggPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+ICghdGhpcy5kZXZpY2UpID9cclxuICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90Rm91bmQpKVxyXG4gICAgICAgIDpcclxuICAgICAgICB0aGlzLmNvbm5lY3RBbmRDYWNoZShvcHRpb25hbEluZGV4KVxyXG4gICAgICAgICAgICAudGhlbiggc2VydmljZSA9PlxyXG4gICAgICAgICAgICAgICAgc2VydmljZS5nZXRDaGFyYWN0ZXJpc3RpYyh0aGlzLmNhcmREYXRhTm90aWZpY2F0aW9uKVxyXG4gICAgICAgICAgICApLnRoZW4oY2hhcmFjdGVyaXN0aWMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0dBVFQgTk9USUZJQ0FUSU9OU106IFJlcXVlc3QgdG8gY2FjaGUgY2hhcmFjdGVyaXN0aWNzLCBzdGFydCBub3RpZmljYXRpb25zLCBhbmQgYXR0YWNoIGxpc3RlbmVycy4gfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcmFjdGVyaXN0aWMuc3RhcnROb3RpZmljYXRpb25zKClcclxuICAgICAgICAgICAgfSkudGhlbihjaGFyYWN0ZXJpc3RpYyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFyYWN0ZXJpc3RpY3ZhbHVlY2hhbmdlZCcsIHRoaXMuY2FyZERhdGFIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYXJhY3RlcmlzdGljdmFsdWVjaGFuZ2VkJywgdGhpcy5jYXJkRGF0YUhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhcmREYXRhTGlzdGVuZXIgPSBjaGFyYWN0ZXJpc3RpYztcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSkudGhlbiggXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLmNhcmRTZXJ2aWNlLmdldENoYXJhY3RlcmlzdGljKHRoaXMuY29tbWFuZENoYXJJZClcclxuICAgICAgICAgICAgKS50aGVuKGNoYXJhY3RlcmlzdGljID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZENoYXJhY3RlcmlzdGljID0gY2hhcmFjdGVyaXN0aWM7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9JZiB0aGlzIGxpYnJhcnkgaXMgYmVpbmcgdXNlZCBpbiBhIHdlYiBhcHBsaWNhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9NYWtlIHN1cmUgdGhlIGRldmljZSBkaXNjb25uZWN0cyBwcm9wZXJseSB1cG9uIHdpbmRvdyB1bmxvYWQuXHJcbiAgICAgICAgICAgICAgICBpZiAod2luZG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMub25EZXN0cm95SGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMub25EZXN0cm95SGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KS50aGVuKFxyXG4gICAgICAgICAgICAgICAgKCkgPT4gdGhpcy5jYXJkU2VydmljZS5nZXRDaGFyYWN0ZXJpc3RpYyh0aGlzLmRhdGFSZWFkeUlkKVxyXG4gICAgICAgICAgICApLnRoZW4oIGNoYXJhY3RlcmlzdGljID0+IGNoYXJhY3RlcmlzdGljLnN0YXJ0Tm90aWZpY2F0aW9ucygpXHJcbiAgICAgICAgICAgICkudGhlbiggY2hhcmFjdGVyaXN0aWMgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhcmFjdGVyaXN0aWN2YWx1ZWNoYW5nZWQnLCB0aGlzLmRhdGFSZWFkeUhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuYWRkRXZlbnRMaXN0ZW5lcignY2hhcmFjdGVyaXN0aWN2YWx1ZWNoYW5nZWQnLCB0aGlzLmRhdGFSZWFkeUhhbmRsZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVJlYWR5Q2hhcmFjdGVyaXN0aWMgPSBjaGFyYWN0ZXJpc3RpYztcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSkudGhlbihcclxuICAgICAgICAgICAgICAgICgpID0+IHRoaXMuY2FyZFNlcnZpY2UuZ2V0Q2hhcmFjdGVyaXN0aWModGhpcy5kYXRhUmVhZFN0YXR1c0lkKVxyXG4gICAgICAgICAgICApLnRoZW4oIGNoYXJhY3RlcmlzdGljID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVJlYWRTdGF0dXNDaGFyYWN0ZXJpc3RpYyA9IGNoYXJhY3RlcmlzdGljO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0dBVFQgTk9USUZJQ0FUSU9OU106IFN1Y2Nlc3MhIENhY2hlZCBjaGFyYWN0ZXJpc3RpY3MsIHN0YXJ0ZWQgbm90aWZpY2F0aW9ucywgYW5kIGF0dGFjaGVkIGxpc3RlbmVycy4gfHwgJHtuZXcgRGF0ZSgpfWApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogc3VjY2Vzc0NvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogb3BlblN1Y2Nlc3NcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gcmVqZWN0KCBlcnIgKSlcclxuICAgICk7XHJcblxyXG4gICAgZGF0YVJlYWR5SGFuZGxlciA9IGV2ZW50ID0+IHtcclxuICAgICAgICBsZXQgZXZlbnRWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICBsZXQgZm9ybWF0dGVkRXZlbnRWYWx1ZSA9IHRoaXMucmVhZEJ5dGVBcnJheShldmVudFZhbHVlKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgZGF0YVJlYWR5IGxpc3RlbmVyOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoZm9ybWF0dGVkRXZlbnRWYWx1ZSl9YCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbW1hbmRTZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZFJlc3BBdmFpbGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRTZW50ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNhcmREYXRhSGFuZGxlciA9IGV2ZW50ID0+IHtcclxuICAgICAgICBsZXQgZXZlbnRWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuXHJcbiAgICAgICAgLy9JZiB0aGUgZmlyc3QgcG9zaXRpb24gaW4gdGhlIGFycmF5ID09PSAyNTUsIGNhcmQgZGF0YSBub3RpZmljYXRpb25zIGhhdmUgZmluaXNoZWQuXHJcbiAgICAgICAgaWYgKGV2ZW50VmFsdWUuZ2V0VWludDgoMCkgIT09IDI1NSkge1xyXG4gICAgICAgICAgICBsZXQgbm90aWZpY2F0aW9uQXJyYXkgPSB0aGlzLnJlYWRCeXRlQXJyYXkoZXZlbnRWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJhd0RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAuLi50aGlzLnJhd0RhdGEsXHJcbiAgICAgICAgICAgICAgICBbbm90aWZpY2F0aW9uQXJyYXlbMF1dOiBub3RpZmljYXRpb25BcnJheS5zbGljZSgxKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvL0tlZXAgdHJhY2sgb2YgdGhlIGFtb3VudCBvZiBub3RpZmljYXRpb25zIHNlbnQgZnJvbSBkZXZpY2UuXHJcbiAgICAgICAgICAgIHRoaXMubWF4QmxvY2tJZCA9IGV2ZW50VmFsdWUuZ2V0VWludDgoMSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja05vdGlmaWNhdGlvbkxlbmd0aCgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxOb3RpZmljYXRpb24gPSAodGhpcy5ybGVGb3JtYXRzWyB0aGlzLnJhd0RhdGFbMF1bMF0gXSkgPyB0aGlzLmRlY29kZVJMRSh0aGlzLnJhd0RhdGFbMF0pIDogdGhpcy5yYXdEYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZSh0aGlzLnJhd0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvL0NoZWNrIGlmIHN3aXBlIGRhdGFcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmluaXRpYWxOb3RpZmljYXRpb25bMF0gPT09IDAgfHwgdGhpcy5pbml0aWFsTm90aWZpY2F0aW9uWzBdID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0dXJuVG9Vc2VyKHRoaXMudHJhbnNhY3Rpb25DYWxsYmFjaykoIHRoaXMucGFyc2VIaWREYXRhKCB0aGlzLmJ1aWxkSW5pdGlhbERhdGFBcnJheSh0cnVlKSApICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbm90aWZpY2F0aW9uSWQgPSB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsTm90aWZpY2F0aW9uWzddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxOb3RpZmljYXRpb25bOF1cclxuICAgICAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kTm90aWZpY2F0aW9uVHlwZShub3RpZmljYXRpb25JZClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgZWxzZSB0aGlzLnNlbmRFcnJUb0NhbGxiYWNrKCB0aGlzLnRocm93TGVuRXJyKCkgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZmluZE5vdGlmaWNhdGlvblR5cGUgPSBub3RpZmljYXRpb25JZCA9PiB7XHJcbiAgICAgICAgbGV0IGJ1aWx0Tm90aWZpY2F0aW9uID0gdGhpcy5idWlsZEluaXRpYWxEYXRhQXJyYXkodHJ1ZSk7XHJcblxyXG4gICAgICAgIHN3aXRjaChub3RpZmljYXRpb25JZCkge1xyXG4gICAgICAgICAgICBjYXNlIFwiMDMwMFwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZSgnPT1UcmFuc2FjdGlvbiBTdGF0dXM9PScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0dXJuVG9Vc2VyKHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjaykodGhpcy5wYXJzZVRyYW5zYWN0aW9uU3RhdHVzKCBidWlsdE5vdGlmaWNhdGlvbiApKTtcclxuICAgICAgICAgICAgY2FzZSBcIjAzMDFcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoXCI9PURpc3BsYXkgTWVzc2FnZSBSZXF1ZXN0PT1cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXR1cm5Ub1VzZXIodGhpcy5kaXNwbGF5Q2FsbGJhY2spKHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TWVzc2FnZTogdGhpcy5idWZmZXJUb1V0ZjgoIGJ1aWx0Tm90aWZpY2F0aW9uLnNsaWNlKDExKSApXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2FzZSBcIjAzMDJcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoXCI9PVVzZXIgU2VsZWN0aW9uIFJlcXVlc3Q9PVwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUodGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhidWlsdE5vdGlmaWNhdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgLy9UT0RPOiBGdXJ0aGVyIGludmVzdGlnYXRpb24gd2FycmFudGVkIGZvciB0aGlzIGNpcmN1bXN0YW5jZS5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJldHVyblRvVXNlcih0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2spKCB0aGlzLnBhcnNlVXNlclNlbGVjdGlvblJlcXVlc3QoYnVpbGROb3RpZmljYXRpb24pICk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIjAzMDNcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoXCI9PUFSUUMgTWVzc2FnZT09XCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0dXJuVG9Vc2VyKHRoaXMudHJhbnNhY3Rpb25DYWxsYmFjaykodGhpcy5wYXJzZUVtdkRhdGEoIGJ1aWx0Tm90aWZpY2F0aW9uLCB0cnVlICkpIDtcclxuICAgICAgICAgICAgY2FzZSBcIjAzMDRcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoJz09QmF0Y2ggRGF0YSBNZXNzYWdlPT0nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJldHVyblRvVXNlcih0aGlzLnRyYW5zYWN0aW9uQ2FsbGJhY2spKHRoaXMucGFyc2VFbXZEYXRhKCBidWlsdE5vdGlmaWNhdGlvbiwgZmFsc2UgKSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBVbmRvY3VtZW50ZWQgTm90aWZpY2F0aW9uIElEOiAke25vdGlmaWNhdGlvbklkfWAsIGJ1aWx0Tm90aWZpY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoIHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIGJ1aWx0Tm90aWZpY2F0aW9uICkgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnRUcmFuc2FjdGlvbiA9IGVtdk9wdGlvbnMgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+ICghdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpID8gXHJcbiAgICAgICAgcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGRldmljZU5vdE9wZW4pIClcclxuICAgICAgICA6XHJcbiAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKFxyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkRW12Q29tbWFuZCggZW12T3B0aW9ucyB8fCB7fSApXHJcbiAgICAgICAgKS50aGVuKCB2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjb21tYW5kUmVzcCA9IHRoaXMucGFyc2VFbXZDb21tYW5kUmVzcG9uc2UodmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGNvbW1hbmRSZXNwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChjb21tYW5kUmVzcC5jb2RlID09PSAwKSA/IHJlc29sdmUoY29tbWFuZFJlc3ApIDpcclxuICAgICAgICAgICAgICAgIChjb21tYW5kUmVzcC5jb2RlICE9PSA5MTgpID8gcmVqZWN0KHRoaXMuYnVpbGREZXZpY2VFcnIoY29tbWFuZFJlc3ApKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREZXZpY2VEYXRlVGltZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oICgpID0+IHRoaXMuZGVsYXlQcm9taXNlKDUwMCkgKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCAoKSA9PiByZXNvbHZlKCB0aGlzLnN0YXJ0VHJhbnNhY3Rpb24oZW12T3B0aW9ucykgKSApXHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihlcnIpKSApXHJcbiAgICApOyBcclxuXHJcbiAgICBidWlsZEVtdkNvbW1hbmQgPSAoeyBcclxuICAgICAgICB0aW1lb3V0LCBcclxuICAgICAgICBjYXJkVHlwZSwgXHJcbiAgICAgICAgdHJhbnNhY3Rpb25UeXBlLCBcclxuICAgICAgICBjYXNoQmFjaywgXHJcbiAgICAgICAgY3VycmVuY3lDb2RlLCBcclxuICAgICAgICByZXBvcnRWZXJib3NpdHksXHJcbiAgICAgICAgZW12T3B0aW9ucyxcclxuICAgICAgICBhdXRob3JpemVkQW1vdW50XHJcbiAgICB9KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYHRpbWVvdXQ6ICR7dGltZW91dH0gfHwgY2FyZFR5cGU6ICR7Y2FyZFR5cGV9IHx8IHRyYW5zYWN0aW9uVHlwZTogJHt0cmFuc2FjdGlvblR5cGV9IHx8IGVtdk9wdGlvbnM6ICR7ZW12T3B0aW9uc30gfHwgYXV0aG9yaXplZEFtb3VudDogJHthdXRob3JpemVkQW1vdW50fSB8fCBjYXNoQmFjazogJHtjYXNoQmFja30gfHwgY3VycmVuY3lDb2RlOiAke2N1cnJlbmN5Q29kZX0gfHwgcmVwb3J0VmVyYm9zaXR5OiAke3JlcG9ydFZlcmJvc2l0eX1gKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBjb21tYW5kID0gWyBcclxuICAgICAgICAgICAgLi4udGhpcy5lbXZDb21tYW5kQmFzZSwgXHJcbiAgICAgICAgICAgIHRpbWVvdXQgfHwgMHgzQywgXHJcbiAgICAgICAgICAgIChjYXJkVHlwZSkgPyB0aGlzLmNhcmRUeXBlcyggY2FyZFR5cGUudG9Mb3dlckNhc2UoKSApIDogMHgwMyxcclxuICAgICAgICAgICAgKHR5cGVvZihlbXZPcHRpb25zKSAhPT0gJ3VuZGVmaW5lZCcpID8gKHRoaXMuZW12T3B0aW9uc1sgZW12T3B0aW9ucy50b0xvd2VyQ2FzZSgpIF0pIDogMHg4MFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdiYXNlIGNvbW1hbmQ6ICcsIGNvbW1hbmQpO1xyXG5cclxuICAgICAgICBjb21tYW5kID0gKGF1dGhvcml6ZWRBbW91bnQpID8gXHJcbiAgICAgICAgICAgIGNvbW1hbmQuY29uY2F0KCB0aGlzLmNvbnZlcnROdW1Ub0Ftb3VudChhdXRob3JpemVkQW1vdW50KSApXHJcbiAgICAgICAgICAgIDogY29tbWFuZC5jb25jYXQoIFsweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAxLCAweDAwXSApO1xyXG5cclxuICAgICAgICBjb21tYW5kID0gKHRyYW5zYWN0aW9uVHlwZSkgPyBcclxuICAgICAgICAgICAgY29tbWFuZC5jb25jYXQodGhpcy50cmFuc2FjdGlvblR5cGVzWyB0cmFuc2FjdGlvblR5cGUudG9Mb3dlckNhc2UoKSBdIHx8IDB4MDApIFxyXG4gICAgICAgICAgICA6IGNvbW1hbmQuY29uY2F0KDB4MDApXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29tbWFuZCA9IChjYXNoQmFjaykgPyBjb21tYW5kLmNvbmNhdCggdGhpcy5jb252ZXJ0TnVtVG9BbW91bnQoY2FzaEJhY2spIClcclxuICAgICAgICAgICAgOiBjb21tYW5kLmNvbmNhdCggdGhpcy5uZXdBcnJheVBhcnRpYWwoMHgwMCwgNikgKTtcclxuXHJcbiAgICAgICAgY29tbWFuZCA9IChjdXJyZW5jeUNvZGUpID8gY29tbWFuZC5jb25jYXQoIHRoaXMuY3VycmVuY3lDb2RlWyBjdXJyZW5jeUNvZGUudG9Mb3dlckNhc2UoKSBdIHx8ICB0aGlzLmN1cnJlbmN5Q29kZVsnZGVmYXVsdCddIClcclxuICAgICAgICAgICAgOiBjb21tYW5kLmNvbmNhdCggWzB4MDgsIDB4NDBdICk7XHJcblxyXG4gICAgICAgIGNvbW1hbmQucHVzaChcclxuICAgICAgICAgICAgKHJlcG9ydFZlcmJvc2l0eSkgPyAoIHRoaXMuc3RhdHVzVmVyYm9zaXR5WyByZXBvcnRWZXJib3NpdHkudG9Mb3dlckNhc2UoKSBdIHx8IDB4MDAgKSA6IDB4MDFcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBjb21tYW5kO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRDb21tYW5kVmFsdWUgPSAoKSA9PiBuZXcgUHJvbWlzZSAocmVzb2x2ZSA9PiB0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYy5yZWFkVmFsdWUoKVxyXG4gICAgICAgIC50aGVuKCB2YWx1ZSA9PiByZXNvbHZlKCB0aGlzLnJlYWRCeXRlQXJyYXkodmFsdWUpICkpKTtcclxuXHJcbiAgICByZWFkQmF0dGVyeUxldmVsID0gKCkgPT4gbmV3IFByb21pc2UoIHJlc29sdmUgPT4gXHJcbiAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKFsweDQ1LCAweDAwXSkudGhlbih2YWx1ZSA9PiByZXNvbHZlKCB2YWx1ZVsyXSApKVxyXG4gICAgKTtcclxuXHJcbiAgICBjaGVja05vdGlmaWNhdGlvbkxlbmd0aCA9ICgpID0+IE1hdGgubWF4KC4uLk9iamVjdC5rZXlzKHRoaXMucmF3RGF0YSkpID09PSB0aGlzLm1heEJsb2NrSWQgLSAxO1xyXG4gICBcclxuICAgIHNlbmRDb21tYW5kV2l0aFJlc3AgPSB3cml0ZUNvbW1hbmQgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuY29tbWFuZENoYXJhY3RlcmlzdGljKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoY29tbWFuZE5vdFNlbnQpKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgU2VuZGluZyBjb21tYW5kOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcod3JpdGVDb21tYW5kKX1gKTtcclxuICAgICAgICAgICAgdGhpcy5jb21tYW5kU2VudCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21tYW5kQ2hhcmFjdGVyaXN0aWMud3JpdGVWYWx1ZShVaW50OEFycmF5LmZyb20od3JpdGVDb21tYW5kKSlcclxuICAgICAgICAgICAgLnRoZW4oICgpID0+ICh0aGlzLmNvbW1hbmRSZXNwQXZhaWxhYmxlKSA/IFByb21pc2UucmVzb2x2ZSggdHJ1ZSApIDogdGhpcy53YWl0Rm9yRGV2aWNlUmVzcG9uc2UoMTUpKVxyXG4gICAgICAgICAgICAudGhlbiggd2FpdFJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kUmVzcEF2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKCF3YWl0UmVzcCkgPyBcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIocmVzcG9uc2VOb3RSZWNlaXZlZCkpIDogdGhpcy5yZWFkQ29tbWFuZFZhbHVlKClcclxuICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiByZXNvbHZlKHJlc3BvbnNlKVxyXG4gICAgICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSApKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm5Ub1VzZXIgPSBzcGVjaWZpZWRDYWxsYmFjayA9PiByZXR1cm5PYmogPT4ge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbE5vdGlmaWNhdGlvbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5tYXhCbG9ja0lkID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJhd0RhdGEgPSB7fTtcclxuICAgICAgICByZXR1cm4gc3BlY2lmaWVkQ2FsbGJhY2socmV0dXJuT2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBidWlsZERhdGVUaW1lQ29tbWFuZCA9IHNwZWNpZmljVGltZSA9PiB7XHJcbiAgICAgICAgbGV0IGRhdGVUaW1lQ29tbWFuZCA9IFsweDQ5LCAweDIyLCAweDAwLCAweDAwLCAweDAzLCAweDBDLCAweDAwLCAweDFDXTtcclxuICAgICAgICBkYXRlVGltZUNvbW1hbmQgPSBkYXRlVGltZUNvbW1hbmQuY29uY2F0KCB0aGlzLm5ld0FycmF5UGFydGlhbCgweDAwLCAxNykgKTtcclxuICAgICAgICAvL0Zvcm1hdCBEYXRlIHNlZ21lbnQgYmVsb3dcclxuICAgICAgICBjb25zdCBjdXJyZW50ID0gKHNwZWNpZmljVGltZSBpbnN0YW5jZW9mIERhdGUpID8gc3BlY2lmaWNUaW1lIDogbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgLy9Nb250aCAoemVybyBiYXNlZCBpbmRleCwgc28gYWRkIDEpLlxyXG4gICAgICAgIGRhdGVUaW1lQ29tbWFuZC5wdXNoKCBcclxuICAgICAgICAgICAgdGhpcy5jYXN0RGVjVG9IZXgoIGN1cnJlbnQuZ2V0TW9udGgoKSArIDEpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgZGF0ZVRpbWVDb21tYW5kLnB1c2goXHJcbiAgICAgICAgICAgIHRoaXMuY2FzdERlY1RvSGV4KCBjdXJyZW50LmdldERhdGUoKSApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgZGF0ZVRpbWVDb21tYW5kLnB1c2goXHJcbiAgICAgICAgICAgIHRoaXMuY2FzdERlY1RvSGV4KCBjdXJyZW50LmdldEhvdXJzKCkgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGRhdGVUaW1lQ29tbWFuZC5wdXNoKFxyXG4gICAgICAgICAgICB0aGlzLmNhc3REZWNUb0hleCggY3VycmVudC5nZXRNaW51dGVzKCkgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGRhdGVUaW1lQ29tbWFuZC5wdXNoKFxyXG4gICAgICAgICAgICB0aGlzLmNhc3REZWNUb0hleCggY3VycmVudC5nZXRTZWNvbmRzKCkgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vQ3VycmVudGx5IHVudXNlZCBvZmZzZXQuICAweDAwIC0gMHgwNiBpcyB2YWxpZCAtIGJ1dCBpcyBub3QgZXhhbWluZWQuXHJcbiAgICAgICAgZGF0ZVRpbWVDb21tYW5kLnB1c2goMHgwMCk7XHJcblxyXG4gICAgICAgIC8vWWVhciBpcyBiYXNlZCB1cG9uIDIwMDggPT09IDB4MDAuXHJcbiAgICAgICAgZGF0ZVRpbWVDb21tYW5kLnB1c2goXHJcbiAgICAgICAgICAgIHRoaXMuY2FzdERlY1RvSGV4KCBjdXJyZW50LmdldEZ1bGxZZWFyKCkgLSAyMDA4IClcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIC8vTUFDIC0gZm9yIGFsbCBkZXZpY2VzIGV4Y2VwdCB0d28gZXhjZXB0aW9ucyAoc2VlIGRvY3VtZW50YXRpb24pIHRoaXMgY2FuIGJlIHBhZGRlZCB3aXRoIHplcm9zLlxyXG4gICAgICAgIGRhdGVUaW1lQ29tbWFuZCA9IGRhdGVUaW1lQ29tbWFuZC5jb25jYXQoIHRoaXMubmV3QXJyYXlQYXJ0aWFsKDB4MDAsIDQpICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGRhdGVUaW1lQ29tbWFuZDtcclxuICAgIH1cclxuXHJcbiAgICBzZXREZXZpY2VEYXRlVGltZSA9IHNwZWNpZmljVGltZSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiBcclxuICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AoXHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGREYXRlVGltZUNvbW1hbmQoc3BlY2lmaWNUaW1lKVxyXG4gICAgICAgICkudGhlbihyZXNwID0+IHJlc29sdmUocmVzcClcclxuICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QodGhpcy5idWlsZERldmljZUVycihlcnIpKSlcclxuICAgICk7XHJcblxyXG4gICAgZ2V0S3NuID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IFxyXG4gICAgICAgICghdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpID8gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGdhdHRTZXJ2ZXJOb3RDb25uZWN0ZWQpKSBcclxuICAgICAgICA6IHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcChbMHgwOSwgMHgwMF0pXHJcbiAgICAgICAgLnRoZW4oIHJlc3AgPT4gdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhyZXNwLnNsaWNlKDIpKSApXHJcbiAgICAgICAgLnRoZW4oZm9ybWF0dGVkVmFsdWUgPT4gcmVzb2x2ZShmb3JtYXR0ZWRWYWx1ZSkpXHJcbiAgICApO1xyXG5cclxuICAgIGdldERldmljZVNuID0gKCkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBcclxuICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AoWzB4MDAsIDB4MDEsIDB4MDNdKVxyXG4gICAgICAgIC50aGVuKCByZXNwID0+IHRoaXMuYnVmZmVyVG9VdGY4KHJlc3Auc2xpY2UoMikpIFxyXG4gICAgICAgICkudGhlbihmb3JtYXR0ZWRWYWx1ZSA9PiByZXNvbHZlKGZvcm1hdHRlZFZhbHVlKSlcclxuICAgICk7XHJcblxyXG4gICAgZ2F0aGVyRGV2aWNlSW5mbyA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgbGV0IGJhdHRlcnk7XHJcbiAgICAgICAgbGV0IHNlcmlhbE51bTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWFkQmF0dGVyeUxldmVsKClcclxuICAgICAgICAudGhlbiggcmVzcEJhdHRlcnkgPT4ge1xyXG4gICAgICAgICAgICBiYXR0ZXJ5ID0gcmVzcEJhdHRlcnk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERldmljZVNuKClcclxuICAgICAgICB9KS50aGVuKCByZXNwU24gPT4ge1xyXG4gICAgICAgICAgICBzZXJpYWxOdW0gPSByZXNwU247XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKFsgYmF0dGVyeSwgc2VyaWFsTnVtIF0pXHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpIClcclxuICAgIH0pO1xyXG5cclxuICAgIGdldERldmljZUluZm8gPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gKCF0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCkgP1xyXG4gICAgICAgIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihkZXZpY2VOb3RPcGVuKSApIFxyXG4gICAgICAgIDogdGhpcy5nYXRoZXJEZXZpY2VJbmZvKClcclxuICAgICAgICAgICAgLnRoZW4oXHJcbiAgICAgICAgICAgICAgICBkZXZpY2VJbmZvID0+IHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRldmljZU5hbWU6IHRoaXMuZGV2aWNlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlVHlwZTogdGhpcy5kZXZpY2VUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhdHRlcnlMZXZlbDogZGV2aWNlSW5mb1swXSxcclxuICAgICAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXI6IGRldmljZUluZm9bMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgaXNDb25uZWN0ZWQ6IHRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSApKVxyXG4gICAgKTtcclxuXHJcbiAgICBzZW5kVXNlclNlbGVjdGlvbiA9IHNlbGVjdGlvblJlc3VsdCA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiAoIXRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSA/IFxyXG4gICAgICAgIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihkZXZpY2VOb3RPcGVuKSApIFxyXG4gICAgICAgIDogdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKFsweDQ5LCAweDA4LCAweDAwLCAweDAwLCAweDAzLCAweDAyLCAweDAwLCAweDAyLCAweDAwLCBzZWxlY3Rpb25SZXN1bHRdKVxyXG4gICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtVc2VyIFNlbGVjdGlvbiBSZXNwXTogJHt0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHJlc3ApfWApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclNlbGVjdGlvblJlc3BvbnNlOiAodGhpcy5yZXN1bHRDb2Rlc1sgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIHJlc3Auc2xpY2UoNCwgNikgKSBcclxuICAgICAgICAgICAgICAgICAgICBdIHx8IFwiVW5rbm93biBvciB1bmRvY3VtZW50ZWQgcmVzdWx0IGNvZGVcIilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikgKSlcclxuICAgIClcclxuXHJcbiAgICBidWlsZEFycGNDb21tYW5kID0gKGxlbiwgZGF0YSkgPT4gKFsweDQ5LCAobGVuICsgNiksIDB4MDAsIDB4MDAsIDB4MDMsIDB4MDMsIDB4MDAsIGxlbiwgLi4uZGF0YSBdKTtcclxuXHJcbiAgICBzZW5kQXJwYyA9IGFycGNSZXNwID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHRoaXMuc2VuZEFycGNCYXNlKGFycGNSZXNwKVxyXG4gICAgICAgIC50aGVuKGFycGNDbWQgPT4gdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKGFycGNDbWQpKVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbU2VuZCBBUlBDIFJlc3BdOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcocmVzcCl9YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdENvZGUgPSAocmVzcC5sZW5ndGggPiA1KSA/IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIHJlc3Auc2xpY2UoNCwgNikgKSA6IFwiXCI7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICBzZW5kQXJwY1Jlc3BvbnNlOiAodGhpcy5yZXN1bHRDb2Rlc1sgcmVzdWx0Q29kZSBdIHx8IFwiVW5rbm93biBvciB1bmRvY3VtZW50ZWQgcmVzdWx0IGNvZGVcIilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KS5jYXRjaChlcnIgPT4gcmVqZWN0KHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSkpXHJcbiAgICApO1xyXG5cclxuICAgIGNsZWFyR2F0dENhY2hlID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh3aW5kb3cpXHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCB0aGlzLm9uRGVzdHJveUhhbmRsZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubWF4QmxvY2tJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsTm90aWZpY2F0aW9uID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJhd0RhdGEgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhUmVhZFN0YXR1c0NoYXJhY3RlcmlzdGljID0gbnVsbDtcclxuICAgICAgICB0aGlzLmRhdGFSZWFkeUNoYXJhY3RlcmlzdGljID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jYXJkRGF0YUxpc3RlbmVyID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBjZWFzZU5vdGlmaWNhdGlvbnMgPSAoKSA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiAoIXRoaXMuY2FyZERhdGFMaXN0ZW5lcikgPyByZXNvbHZlKCkgOiB0aGlzLmNhcmREYXRhTGlzdGVuZXIuc3RvcE5vdGlmaWNhdGlvbnMoKVxyXG4gICAgICAgIC50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FyZERhdGFMaXN0ZW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFyYWN0ZXJpc3RpY3ZhbHVlY2hhbmdlZCcsIHRoaXMuY2FyZERhdGFIYW5kbGVyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVJlYWRTdGF0dXNDaGFyYWN0ZXJpc3RpYy5zdG9wTm90aWZpY2F0aW9ucygpXHJcbiAgICAgICAgfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVJlYWR5Q2hhcmFjdGVyaXN0aWMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhcmFjdGVyaXN0aWN2YWx1ZWNoYW5nZWQnLCB0aGlzLmRhdGFSZWFkeUhhbmRsZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpXHJcbiAgICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgY2FuY2VsVHJhbnNhY3Rpb24gPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gKCF0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYykgPyBcclxuICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoY29tbWFuZE5vdFNlbnQpKVxyXG4gICAgICAgIDpcclxuICAgICAgICB0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYy53cml0ZVZhbHVlKHRoaXMuY2FuY2VsRW12Q29tbWFuZClcclxuICAgICAgICAudGhlbigoKSA9PiByZXNvbHZlKCkpXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiByZWplY3QodGhpcy5idWlsZERldmljZUVycihlcnIpKSlcclxuICAgICk7XHJcblxyXG4gICAgY2xvc2VEZXZpY2UgPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gXHJcbiAgICAgICAgKCF0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCkgPyByZXNvbHZlKHtcclxuICAgICAgICAgICAgY29kZTogc3VjY2Vzc0NvZGUsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGNsb3NlU3VjY2Vzc1xyXG4gICAgICAgIH0pIFxyXG4gICAgICAgIDpcclxuICAgICAgICB0aGlzLmNlYXNlTm90aWZpY2F0aW9ucygpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyR2F0dENhY2hlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICB9KS50aGVuKCgpID0+IHJlc29sdmUoe1xyXG4gICAgICAgICAgICBjb2RlOiBzdWNjZXNzQ29kZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogY2xvc2VTdWNjZXNzXHJcbiAgICAgICAgfSkpLmNhdGNoKGVyciA9PiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSApKVxyXG4gICAgKSBcclxuXHJcbiAgICBjbGVhclNlc3Npb24gPSAoKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiBcclxuICAgICAgICAodGhpcy5kZXZpY2UgJiYgdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpID8gXHJcbiAgICAgICAgICAgIHJlc29sdmUoXCJTQ1JBIGRldmljZXMgZG8gbm90IGNhcnJ5IGEgc2Vzc2lvblwiKSBcclxuICAgICAgICAgICAgOiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90T3BlbikpIClcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2NyYTsiLCJpbXBvcnQgU2NyYSBmcm9tICcuL3NjcmEnO1xyXG5pbXBvcnQgeyBcclxuICAgIHN3aXBlTGlzdGVuaW5nLFxyXG4gICAgc3VjY2Vzc0NvZGUsXHJcbiAgICBlRHluYW1vXHJcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuXHJcbmNsYXNzIEVEeW5hbW8gZXh0ZW5kcyBTY3JhIHtcclxuICAgIGNvbnN0cnVjdG9yKGRldmljZSwgY2FsbEJhY2tzKSB7XHJcbiAgICAgICAgc3VwZXIoZGV2aWNlLCBjYWxsQmFja3MpO1xyXG5cclxuICAgICAgICB0aGlzLmRldmljZVR5cGUgPSBlRHluYW1vO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENhcmRTZXJ2aWNlID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IFxyXG4gICAgICAgIHRoaXMuZ2V0Q2FyZFNlcnZpY2VCYXNlKDEpXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiByZXNvbHZlKHJlc3ApXHJcbiAgICAgICAgKS5jYXRjaCggZXJyID0+IHJlamVjdCh0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikpIClcclxuICAgICk7XHJcblxyXG4gICAgcmVxdWVzdENhcmRTd2lwZSA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiBcclxuICAgICAgICAoIXRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSA/IFxyXG4gICAgICAgICAgICB0aGlzLmdldENhcmRTZXJ2aWNlQmFzZSgxKVxyXG4gICAgICAgICAgICAudGhlbiggKCkgPT4gXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogc3VjY2Vzc0NvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogc3dpcGVMaXN0ZW5pbmdcclxuICAgICAgICAgICAgICAgIH0pIFxyXG4gICAgICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QodGhpcy5idWlsZERldmljZUVycihlcnIpICkpXHJcbiAgICAgICAgOiByZXNvbHZlKHtcclxuICAgICAgICAgICAgY29kZTogc3VjY2Vzc0NvZGUsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHN3aXBlTGlzdGVuaW5nXHJcbiAgICAgICAgfSkgXHJcbiAgICApO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBFRHluYW1vOyIsImltcG9ydCBTY3JhIGZyb20gJy4vc2NyYSc7XHJcbmltcG9ydCB7IFxyXG4gICAgc3dpcGVMaXN0ZW5pbmcsXHJcbiAgICBzdWNjZXNzQ29kZSxcclxuICAgIHREeW5hbW9cclxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBjb21tYW5kTm90QWNjZXB0ZWQgfSBmcm9tICcuLi9lcnJvckhhbmRsZXIvZXJyQ29uc3RhbnRzJztcclxuXHJcbmNsYXNzIFREeW5hbW8gZXh0ZW5kcyBTY3JhIHtcclxuICAgIGNvbnN0cnVjdG9yKGRldmljZSwgY2FsbEJhY2tzKSB7XHJcbiAgICAgICAgc3VwZXIoZGV2aWNlLCBjYWxsQmFja3MpO1xyXG5cclxuICAgICAgICB0aGlzLnNldEhlYWRBbHdheXNPbiA9IFsweDU4LCAweDAxLCAweDAxXTtcclxuICAgICAgICAvL3RoaXMuc2V0SGVhZE9mZldoZW5JZGxlID0gVWludDhBcnJheS5vZigweDU4LCAweDAxLCAweDAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5kZXZpY2VUeXBlID0gdER5bmFtb1xyXG4gICAgfVxyXG5cclxuICAgIGdldENhcmRTZXJ2aWNlID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IFxyXG4gICAgICAgIHRoaXMuZ2V0Q2FyZFNlcnZpY2VCYXNlKClcclxuICAgICAgICAudGhlbihyZXNwID0+IHJlc29sdmUocmVzcClcclxuICAgICAgICApLmNhdGNoKCBlcnIgPT4gcmVqZWN0KHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSkgKVxyXG4gICAgKTtcclxuXHJcbiAgICByZXF1ZXN0Q2FyZFN3aXBlID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+ICghdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpID9cclxuICAgICAgICB0aGlzLmdldENhcmRTZXJ2aWNlQmFzZSgpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4gXHJcbiAgICAgICAgICAgIHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcCh0aGlzLnNldEhlYWRBbHdheXNPbilcclxuICAgICAgICApLnRoZW4oc2V0SGVhZE9wZW5SZXNwID0+IChwYXJzZUludChzZXRIZWFkT3BlblJlc3ApID09PSAwKSA/IFxyXG4gICAgICAgICAgICByZXNvbHZlKHsgXHJcbiAgICAgICAgICAgICAgICBjb2RlOiBzdWNjZXNzQ29kZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHN3aXBlTGlzdGVuaW5nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGNvbW1hbmROb3RBY2NlcHRlZCkgKVxyXG4gICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKVxyXG4gICAgICAgIDpcclxuICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AodGhpcy5zZXRIZWFkQWx3YXlzT24pXHJcbiAgICAgICAgLnRoZW4oc2V0SGVhZE9wZW5SZXNwID0+IChwYXJzZUludChzZXRIZWFkT3BlblJlc3ApID09PSAwKSA/IFxyXG4gICAgICAgICAgICByZXNvbHZlKHsgXHJcbiAgICAgICAgICAgICAgICBjb2RlOiBzdWNjZXNzQ29kZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHN3aXBlTGlzdGVuaW5nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGNvbW1hbmROb3RBY2NlcHRlZClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKVxyXG4gICAgKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVER5bmFtbzsiLCJpbXBvcnQgRHBNaW5pIGZyb20gJy4uL2RldmljZXMvZHluYVByb01pbmknO1xyXG5pbXBvcnQgRHluUHJvR28gZnJvbSAnLi4vZGV2aWNlcy9keW5hUHJvR28nO1xyXG5pbXBvcnQgRUR5bmFtbyBmcm9tICcuLi9kZXZpY2VzL2VEeW5hbW8nO1xyXG5pbXBvcnQgVER5bmFtbyBmcm9tICcuLi9kZXZpY2VzL3REeW5hbW8nO1xyXG5pbXBvcnQgeyBcclxuICAgIHREeW5hbW8sXHJcbiAgICBlRHluYW1vLFxyXG4gICAgZHluYVByb0dvLFxyXG4gICAgZHBNaW5pIFxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7IFxyXG5cclxuY29uc3QgY29tbWFuZE5vdFVzZWQgPSBpc1NjcmEgPT4gXHJcbiAgICAoKSA9PiBQcm9taXNlLnJlc29sdmUoYCR7KGlzU2NyYSA/ICdTQ1JBJyA6ICdQaW5QYWQnKX0gZGV2aWNlcyBkbyBub3QgdXNlIHRoaXMgY29tbWFuZGApO1xyXG5cclxuICAgIFxyXG5jbGFzcyBEZXZpY2VJbnRlcmZhY2Uge1xyXG4gICAgY29uc3RydWN0b3IoeyBcclxuICAgICAgICBnZXRDYXJkU2VydmljZSxcclxuICAgICAgICBzdGFydFRyYW5zYWN0aW9uLFxyXG4gICAgICAgIGNhbmNlbFRyYW5zYWN0aW9uLFxyXG4gICAgICAgIHNlbmRDb21tYW5kV2l0aFJlc3AsXHJcbiAgICAgICAgY2xlYXJTZXNzaW9uLFxyXG4gICAgICAgIGNsb3NlRGV2aWNlLFxyXG4gICAgICAgIGdldERldmljZUluZm8sXHJcbiAgICAgICAgcmVxdWVzdENhcmRTd2lwZSxcclxuICAgICAgICBpc0RldmljZUNvbm5lY3RlZCxcclxuICAgICAgICBkaXNjb25uZWN0LFxyXG4gICAgICAgIHJlcXVlc3RQaW5FbnRyeSxcclxuICAgICAgICBzZXREaXNwbGF5TWVzc2FnZSxcclxuICAgICAgICBzZW5kVXNlclNlbGVjdGlvbixcclxuICAgICAgICBzZW5kQXJwYyxcclxuICAgICAgICBzZXREZXZpY2VEYXRlVGltZSxcclxuICAgICAgICByZXF1ZXN0VGlwT3JDYXNoYmFja1xyXG4gICAgfSkge1xyXG4gICAgICAgIHRoaXMub3BlbkRldmljZSA9IGdldENhcmRTZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc3RhcnRUcmFuc2FjdGlvbiA9IHN0YXJ0VHJhbnNhY3Rpb247XHJcbiAgICAgICAgdGhpcy5jYW5jZWxUcmFuc2FjdGlvbiA9IGNhbmNlbFRyYW5zYWN0aW9uO1xyXG4gICAgICAgIHRoaXMuc2VuZENvbW1hbmQgPSBzZW5kQ29tbWFuZFdpdGhSZXNwO1xyXG4gICAgICAgIHRoaXMuY2xlYXJTZXNzaW9uID0gY2xlYXJTZXNzaW9uO1xyXG4gICAgICAgIHRoaXMuY2xvc2VEZXZpY2UgPSBjbG9zZURldmljZTtcclxuICAgICAgICB0aGlzLmRldmljZUluZm8gPSBnZXREZXZpY2VJbmZvO1xyXG4gICAgICAgIHRoaXMucmVxdWVzdENhcmRTd2lwZSA9IHJlcXVlc3RDYXJkU3dpcGU7XHJcbiAgICAgICAgdGhpcy5pc0RldmljZU9wZW4gPSBpc0RldmljZUNvbm5lY3RlZDtcclxuICAgICAgICB0aGlzLmZvcmNlRGlzY29ubmVjdCA9IGRpc2Nvbm5lY3Q7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0UGluRW50cnkgPSAocmVxdWVzdFBpbkVudHJ5KSA/IHJlcXVlc3RQaW5FbnRyeSA6IGNvbW1hbmROb3RVc2VkKHRydWUpO1xyXG4gICAgICAgIHRoaXMuc2V0RGlzcGxheU1lc3NhZ2UgPSAoc2V0RGlzcGxheU1lc3NhZ2UpID8gc2V0RGlzcGxheU1lc3NhZ2UgOiBjb21tYW5kTm90VXNlZCh0cnVlKTtcclxuICAgICAgICB0aGlzLnNlbmRVc2VyU2VsZWN0aW9uID0gKHNlbmRVc2VyU2VsZWN0aW9uKSA/IHNlbmRVc2VyU2VsZWN0aW9uIDogY29tbWFuZE5vdFVzZWQoKTtcclxuICAgICAgICB0aGlzLnNlbmRBcnBjUmVzcG9uc2UgPSAoc2VuZEFycGMpID8gc2VuZEFycGMgOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoXCJGZWF0dXJlIFBlbmRpbmcgQ29tcGxldGlvblwiKTtcclxuICAgICAgICB0aGlzLnNldERldmljZURhdGVUaW1lID0gKHNldERldmljZURhdGVUaW1lKSA/IHNldERldmljZURhdGVUaW1lIDogY29tbWFuZE5vdFVzZWQoKTtcclxuICAgICAgICB0aGlzLnJlcXVlc3RUaXBPckNhc2hiYWNrID0gKHJlcXVlc3RUaXBPckNhc2hiYWNrKSA/IHJlcXVlc3RUaXBPckNhc2hiYWNrIDogY29tbWFuZE5vdFVzZWQodHJ1ZSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5jb25zdCBuZXdEZXZpY2VJbnN0YW5jZSA9IHtcclxuICAgIFtlRHluYW1vXTogKGRldmljZSwgY2FsbGJhY2tzKSA9PiBuZXcgRUR5bmFtbyhkZXZpY2UsIGNhbGxiYWNrcyksXHJcbiAgICBbdER5bmFtb106ICAoZGV2aWNlLCBjYWxsYmFja3MpID0+IG5ldyBURHluYW1vKGRldmljZSwgY2FsbGJhY2tzKSxcclxuICAgIFtkeW5hUHJvR29dOiAoZGV2aWNlLCBjYWxsYmFja3MpID0+IG5ldyBEeW5Qcm9HbyhkZXZpY2UsIGNhbGxiYWNrcyksXHJcbiAgICBbZHBNaW5pXTogKGRldmljZSwgY2FsbGJhY2tzKSA9PiBuZXcgRHBNaW5pKGRldmljZSwgY2FsbGJhY2tzKSxcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGJ1aWxkRGV2aWNlT2JqZWN0ID0gKGRldmljZSwgY2FsbGJhY2tzLCBkZXZpY2VUeXBlU3RyaW5nKSA9PiAoe1xyXG4gICAgaWQ6IGRldmljZS5pZCxcclxuICAgIG5hbWU6IGRldmljZS5uYW1lLFxyXG4gICAgZGV2aWNlVHlwZTogZGV2aWNlVHlwZVN0cmluZyxcclxuICAgIGRldmljZUludGVyZmFjZTogbmV3IERldmljZUludGVyZmFjZShcclxuICAgICAgICBuZXdEZXZpY2VJbnN0YW5jZVsgZGV2aWNlVHlwZVN0cmluZyBdKGRldmljZSwgY2FsbGJhY2tzKVxyXG4gICAgKVxyXG59KTtcclxuXHJcbiIsImltcG9ydCB7XHJcbiAgICB0RHluYW1vLFxyXG4gICAgZUR5bmFtbyxcclxuICAgIGR5bmFQcm9HbyxcclxuICAgIGRwTWluaVxyXG59IGZyb20gJy4vY29uc3RhbnRzJztcclxuaW1wb3J0IHsgbm90Rm91bmRPYmogfSBmcm9tICcuLi9lcnJvckhhbmRsZXIvZXJyQ29uc3RhbnRzJztcclxuXHJcbmNvbnN0IGVEeW5hbW9QYXR0ZXJuID0gbmV3IFJlZ0V4cCgvXmVEeW5hbW8tLyk7XHJcbmNvbnN0IHREeW5hbW9QYXR0ZXJuID0gbmV3IFJlZ0V4cCgvXnREeW5hbW8tLyk7XHJcbmNvbnN0IGRwTWluaVBhdHRlcm4gPSBuZXcgUmVnRXhwKC9eRFBNaW5pLyk7XHJcbmNvbnN0IGRwR29QYXR0ZXJuID0gbmV3IFJlZ0V4cCgvXkRQRy8pO1xyXG5cclxuXHJcbmNvbnN0IGluc3BlY3REZXZpY2VOYW1lID0gZGV2aWNlTmFtZSA9PiAodER5bmFtb1BhdHRlcm4udGVzdChkZXZpY2VOYW1lKSkgPyB0RHluYW1vIDogXHJcbiAgICAoZUR5bmFtb1BhdHRlcm4udGVzdChkZXZpY2VOYW1lKSkgPyBlRHluYW1vIDogXHJcbiAgICAgICAgKGRwR29QYXR0ZXJuLnRlc3QoZGV2aWNlTmFtZSkpID8gZHluYVByb0dvIDogXHJcbiAgICAgICAgICAgIChkcE1pbmlQYXR0ZXJuLnRlc3QoZGV2aWNlTmFtZSkpID8gZHBNaW5pIDogXCJcIjtcclxuXHJcbmNvbnN0IGZvcm1hdFR5cGVTdHJpbmcgPSBkZXZpY2VUeXBlU3RyID0+IHtcclxuICAgIGNvbnN0IGRldmljZVR5cGVBcnIgPSBbZHluYVByb0dvLCBkcE1pbmksIGVEeW5hbW8sIHREeW5hbW9dO1xyXG4gICAgbGV0IHJldHVyblN0ciA9IFwiXCI7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXZpY2VUeXBlQXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGRldmljZVR5cGVTdHIudG9Mb3dlckNhc2UoKSA9PT0gZGV2aWNlVHlwZUFycltpXS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVyblN0ciA9IGRldmljZVR5cGVBcnJbaV07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmV0dXJuU3RyO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZmluZERldmljZVR5cGVTdHJpbmcgPSAobmFtZVN0ciwgdHlwZVN0cikgPT4ge1xyXG4gICAgaWYgKHR5cGVTdHIpIHtcclxuICAgICAgICBjb25zdCBmb3JtYXR0ZWRTdHIgPSBmb3JtYXRUeXBlU3RyaW5nKHR5cGVTdHIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiWyEhXTogXCIsIGZvcm1hdHRlZFN0cik7XHJcblxyXG4gICAgICAgIGlmIChmb3JtYXR0ZWRTdHIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFN0cjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGluc3BlY3REZXZpY2VOYW1lKG5hbWVTdHIpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmaW5kRGV2aWNlQnlQcm9kdWN0TmFtZSA9IHNlbGVjdGVkRGV2aWNlID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBsZXQgbW9kZWxOYW1lU3RyaW5nO1xyXG5cclxuICAgIHJldHVybiBzZWxlY3RlZERldmljZS5nYXR0LmNvbm5lY3QoKVxyXG4gICAgLnRoZW4oc2VydmVyID0+IHNlcnZlci5nZXRQcmltYXJ5U2VydmljZSgnZGV2aWNlX2luZm9ybWF0aW9uJylcclxuICAgICkudGhlbihzZXJ2aWNlID0+IHNlcnZpY2UuZ2V0Q2hhcmFjdGVyaXN0aWMoJ21vZGVsX251bWJlcl9zdHJpbmcnKVxyXG4gICAgKS50aGVuKGNoYXJhY3RlcmlzdGljID0+IGNoYXJhY3RlcmlzdGljLnJlYWRWYWx1ZSgpXHJcbiAgICApLnRoZW4odmFsdWUgPT4ge1xyXG4gICAgICAgIG1vZGVsTmFtZVN0cmluZyA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKS5kZWNvZGUodmFsdWUpLnRyaW0oKTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCBzZWxlY3RlZERldmljZS5nYXR0LmRpc2Nvbm5lY3QoKSApO1xyXG4gICAgfSkudGhlbiggKCkgPT4gcmVzb2x2ZSggbW9kZWxOYW1lU3RyaW5nIClcclxuICAgICkuY2F0Y2goZXJyID0+IChcclxuICAgICAgICAgICAgZXJyLmNvZGUgPT09IG5vdEZvdW5kT2JqLmVycm9yQ29kZSAmJiBcclxuICAgICAgICAgICAgZXJyLm5hbWUgPT09IG5vdEZvdW5kT2JqLmVycm9yTmFtZSAmJiBcclxuICAgICAgICAgICAgZXJyLm1lc3NhZ2UuaW5jbHVkZXMoXCIwMDAwMTgwYS0wMDAwLTEwMDAtODAwMC0wMDgwNWY5YjM0ZmJcIilcclxuICAgICAgICApID8gKCFzZWxlY3RlZERldmljZS5nYXR0LmNvbm5lY3RlZCkgPyByZXNvbHZlKCBkeW5hUHJvR28gKSBcclxuICAgICAgICAgICAgOiBQcm9taXNlLnJlc29sdmUoIHNlbGVjdGVkRGV2aWNlLmdhdHQuZGlzY29ubmVjdCgpICkudGhlbigoKSA9PiByZXNvbHZlKCBkeW5hUHJvR28gKSlcclxuICAgICAgICA6IHJlamVjdChlcnIpXHJcbiAgICApO1xyXG59KTtcclxuIiwiaW1wb3J0IEFwaUVycm9yIGZyb20gJy4vZXJyb3JIYW5kbGVyL2FwaUVycm9yJztcclxuaW1wb3J0IHsgYWxsRGV2aWNlQ29uZmlnLCBmaW5kRGV2aWNlQnlEZXZpY2VOYW1lIH0gZnJvbSAnLi9jb25maWd1cmF0aW9ucyc7XHJcbmltcG9ydCB7IGJ1aWxkRGV2aWNlT2JqZWN0IH0gZnJvbSAnLi91dGlscy9pbnN0YW5jaWF0ZURldmljZSc7XHJcbmltcG9ydCB7IGZpbmREZXZpY2VUeXBlU3RyaW5nLCBmaW5kRGV2aWNlQnlQcm9kdWN0TmFtZSB9IGZyb20gJy4vdXRpbHMvaWRlbnRpZnlEZXZpY2UnO1xyXG5cclxuXHJcbmNvbnN0IGFycmFuZ2VDYWxsYmFja3MgPSBjYWxsQmFja3MgPT4ge1xyXG5cclxuICAgIGNvbnN0IGRlZmF1bHRDYWxsYmFjayA9IGRhdGFPYmogPT4ge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcIkNhbGxiYWNrIG5vdCBwcm92aWRlZCB0byAnc2NhbkZvckRldmljZXMnIGZ1bmN0aW9uLiBQbGVhc2UgcHJvdmlkZSBhdCBsZWFzdCBvbmUgY2FsbGJhY2sgZnVuY3Rpb24gdG8gdGhpcyBtZXRob2RcIik7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ0cmFuc2FjdGlvbkNhbGxiYWNrIGRhdGE6IFwiLCBkYXRhT2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBjYWxsQmFja3MgPSBjYWxsQmFja3MgfHwgZGVmYXVsdENhbGxiYWNrO1xyXG4gICAgXHJcbiAgICBjb25zdCBpc0Z1bmNUeXBlID0gKHR5cGVvZiBjYWxsQmFja3MgPT09ICdmdW5jdGlvbicpO1xyXG5cclxuICAgIGNvbnN0IHByb3BBc3NpZ25tZW50ID0gcHJvcE5hbWUgPT4gKGNhbGxCYWNrc1twcm9wTmFtZV0pID8gY2FsbEJhY2tzW3Byb3BOYW1lXSA6IFxyXG4gICAgICAgIChpc0Z1bmNUeXBlKSA/IGNhbGxCYWNrcyA6IGNhbGxCYWNrcy50cmFuc2FjdGlvbkNhbGxiYWNrO1xyXG5cclxuICAgIGNvbnN0IGRlZmF1bHRFcnJDYWxsYmFjayA9IGVyck9iaiA9PiBcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiW01hZ2Vuc2FCbHVldG9vdGggSW50ZXJuYWwgRXJyb3JdOiBcIiwgZXJyT2JqKTtcclxuXHJcbiAgICBjYWxsQmFja3MuZXJyb3JDYWxsYmFjayA9IChjYWxsQmFja3MuZXJyb3JDYWxsYmFjayB8fCBkZWZhdWx0RXJyQ2FsbGJhY2spO1xyXG4gICAgY2FsbEJhY2tzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2sgPSAoIGNhbGxCYWNrcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrIHx8IHByb3BBc3NpZ25tZW50KCd0cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrJykgKTtcclxuICAgIGNhbGxCYWNrcy51c2VyU2VsZWN0aW9uQ2FsbGJhY2sgPSAoIGNhbGxCYWNrcy51c2VyU2VsZWN0aW9uQ2FsbGJhY2sgfHwgcHJvcEFzc2lnbm1lbnQoJ3VzZXJTZWxlY3Rpb25DYWxsYmFjaycpICk7XHJcbiAgICBjYWxsQmFja3MuZGlzcGxheUNhbGxiYWNrID0gKCBjYWxsQmFja3MuZGlzcGxheUNhbGxiYWNrIHx8IHByb3BBc3NpZ25tZW50KCdkaXNwbGF5Q2FsbGJhY2snKSApO1xyXG4gICAgY2FsbEJhY2tzLmRpc2Nvbm5lY3RIYW5kbGVyID0gKGNhbGxCYWNrcy5kaXNjb25uZWN0SGFuZGxlciB8fCBwcm9wQXNzaWdubWVudCgndHJhbnNhY3Rpb25DYWxsYmFjaycpICk7XHJcblxyXG4gICAgcmV0dXJuIGNhbGxCYWNrcztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNjYW5Gb3JEZXZpY2VzID0gKGNhbGxCYWNrcywgZGV2aWNlTmFtZSwgZGV2aWNlVHlwZSkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGlmICh0eXBlb2YgY2FsbEJhY2tzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgY2FsbEJhY2tzLnRyYW5zYWN0aW9uQ2FsbGJhY2sgPT09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgIHJldHVybiByZWplY3QoXCJXaGVuIHByb3ZpZGluZyBtdWx0aXBsZSBjYWxsYmFja3MgaW4gYW4gb2JqZWN0LCAndHJhbnNhY3Rpb25DYWxsYmFjaycgbXVzdCBiZSBwcm92aWRlZFwiKTtcclxuXHJcbiAgICBjYWxsQmFja3MgPSBhcnJhbmdlQ2FsbGJhY2tzKGNhbGxCYWNrcyk7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IChkZXZpY2VOYW1lKSA/IGZpbmREZXZpY2VCeURldmljZU5hbWUoZGV2aWNlTmFtZSkgOiBhbGxEZXZpY2VDb25maWc7XHJcbiAgICBcclxuICAgIHJldHVybiBuYXZpZ2F0b3IuYmx1ZXRvb3RoLnJlcXVlc3REZXZpY2UoIG9wdGlvbnMgKVxyXG4gICAgICAgIC50aGVuKGRldmljZSA9PiB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkZXZpY2VUeXBlTmFtZSA9IGZpbmREZXZpY2VUeXBlU3RyaW5nKGRldmljZS5uYW1lLCBkZXZpY2VUeXBlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoZGV2aWNlVHlwZU5hbWUpID8gcmVzb2x2ZSggYnVpbGREZXZpY2VPYmplY3QoZGV2aWNlLCBjYWxsQmFja3MsIGRldmljZVR5cGVOYW1lKSApIDpcclxuICAgICAgICAgICAgICAgIGZpbmREZXZpY2VCeVByb2R1Y3ROYW1lKGRldmljZSkudGhlbiggXHJcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlVHlwZVN0cmluZyA9PiAoIWRldmljZVR5cGVTdHJpbmcpID8gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChcIlNlbGVjdGVkIGRldmljZSBpcyBub3Qgc3VwcG9ydGVkXCIpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlc29sdmUoIGJ1aWxkRGV2aWNlT2JqZWN0KGRldmljZSwgY2FsbEJhY2tzLCBkZXZpY2VUeXBlU3RyaW5nKSApXHJcbiAgICAgICAgICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QoZXJyKSk7XHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+ICh0eXBlb2YgZXJyID09PSBcIm9iamVjdFwiKSA/IFxyXG4gICAgICAgICAgICByZWplY3QoIG5ldyBBcGlFcnJvcihlcnIpICkgOiBcclxuICAgICAgICAgICAgcmVqZWN0KFwiU2VsZWN0ZWQgZGV2aWNlIGlzIG5vdCBzdXBwb3J0ZWRcIilcclxuICAgICAgICApXHJcbn0pO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9