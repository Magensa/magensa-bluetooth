!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["magensa-bluetooth"]=t():e["magensa-bluetooth"]=t()}(window,(function(){return function(e){var t={};function i(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t),i.d(t,"scanForDevices",(function(){return Ce}));class a extends Error{constructor(e){let{message:t,code:i,name:a}=e;super(t||"Web Bluetooth API threw an unknown, or undocumented error"),this.code=i||1e3,this.name=a||"WebBluetoothError"}}var s=a;const r={filters:[{services:["0508e6f8-ad82-898f-f843-e3410cb60104"]},{services:["0508e6f8-ad82-898f-f843-e3410cb60101"]},{services:["0508e6f8-ad82-898f-f843-e3410cb60103"]}],optionalServices:["0508e6f8-ad82-898f-f843-e3410cb60104","0508e6f8-ad82-898f-f843-e3410cb60103","0508e6f8-ad82-898f-f843-e3410cb60101","0508e6f8-ad82-898f-f843-e3410cb60202","device_information"],keepRepeatedDevices:!1,acceptAllAdvertisements:!1};function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o=class{constructor(){n(this,"logDeviceState",e=>{let t=new CustomEvent("deviceLog",{bubbles:!0,detail:e});window.dispatchEvent(t)}),n(this,"convertArrayToHexString",e=>Array.from(e,e=>("0"+(255&e).toString(16)).slice(-2)).join("").toUpperCase()),n(this,"readTwoByteLength",e=>e[0]<<8|e[1]),n(this,"bufferToUtf8",e=>new TextDecoder("utf-8").decode(Uint8Array.from(e))),n(this,"castDecToHex",e=>parseInt(e.toString(16),16)),n(this,"newArrayPartial",(e,t)=>new Array(t).fill(e)),n(this,"readByteArray",e=>{let t=[];for(let i=0;i<e.byteLength;i++)t.push(e.getUint8(i));return t}),n(this,"hexToAscii",e=>{let t="";for(let i=0;i<e.length&&"00"!==e.substr(i,2);i+=2)t+=String.fromCharCode(parseInt(e.substr(i,2),16));return t.trim()}),n(this,"hexToBytes",e=>{let t=[];for(let i=0;i<e.length;i+=2)t.push(parseInt(e.substr(i,2),16));return t}),n(this,"decodeRLE",e=>{let t=[e[0]],i=0,a=e.length;for(let s=1;s<a;s++)i=s+1,i+1<a&&e[s]===e[i]?(t.push(...this.newArrayPartial(e[s],e[i+1])),s=i+1):t.push(e[s]);return t}),n(this,"buildInitialDataArray",e=>{let t=[];for(let e=Math.min(...Object.keys(this.rawData));e<this.maxBlockId;e++)t=t.concat(...this.rawData[e]);return e?this.checkRle(t):t}),n(this,"checkRle",e=>this.rleFormats[this.initialNotification[0]]?this.decodeRLE(e):e),n(this,"convertCurrencyCode",e=>{let t=e.toLowerCase();return"us"===t?[8,64]:"euro"===t?[9,120]:[0,0]}),n(this,"convertNumToAmount",e=>{let t=e.toString(),i=[];for(;t.length<12;)t="0"+t;for(let e=0;e<t.length;e+=2)i.push(parseInt(t.substr(e,2),16));return i}),n(this,"delayPromise",(e,t)=>new Promise(i=>{setTimeout(()=>i(t),e)})),this.rleFormats=Object.freeze({0:!1,1:!0,2:!1,3:!0})}};function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var h=class extends o{constructor(){super(),c(this,"formatExpPAN",e=>{let t="object"==typeof e?this.bufferToUtf8(e.slice(4)):e;if(-1!==t.indexOf(";")){let e=this.splitExpPAN(t);return{maskedPAN:e[0],Last4:e[1],expirationDate:e[2],serviceCode:e[3]}}return{maskedPAN:"",Last4:"",expirationDate:"",serviceCode:""}}),c(this,"splitExpPAN",e=>{if(e.length>3){let t=e.replace(";","").replace("?","").split("="),i=t[1].slice(0,4),a=t[1].slice(4,7),s=i.slice(-2)+"/"+i.slice(0,2);return[t[0],t[0].slice(-4),s,a]}return["Not Found","Not Found","Not Found","Not Found"]})}};const d="Success, listening for swipe",l="DynaPro Mini",u="Configuration",m=Object.freeze({code:0,message:"Success, there was no session to clear"}),v=Object.freeze({code:19,message:"GATT operation already in progress."}),p=Object.freeze({code:0,message:"Device Closed"}),g=Object.freeze({eDynamo:3,tDynamo:7,[l]:3,dynaProGo:7}),f=Object.freeze({msr:1,chip:2,chipmsr:3,contactless:4,contactlessmsr:5,contactlesschip:6,all:7});function C(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var b=class extends h{constructor(){super(),C(this,"tlvParser",(e,t)=>{let i,a,s,r=e.length,n=[],o=0,c=!0,h=null,d=[];for(;o<r;)if(a=e[o],c){i=0;let t=!0;if(0===a)break;for(;t&&o<r;)a=e[o],o++,d[i]=a,t=0===i?(a&this.moreTagBytesFlag1)==this.moreTagBytesFlag1:(a&this.moreTagBytesFlag2)==this.moreTagBytesFlag2,i++;h=this.convertArrayToHexString(d.slice(0,i)),c=!1}else{if(s=0,(a&this.moreLengthFlag)==this.moreLengthFlag){let t=a&this.oneByteLengthMask;o++;let i=0;for(;i<t&&o<r;)a=e[o],o++,s=((255&s)<<8)+a,i++}else s=a&this.oneByteLengthMask,o++;if(h){let i=d[0],a=(o+s>r?r:o+s)-o,c=a>0?this.convertArrayToHexString(e.slice(o,o+a)):"";n.push({tag:h,tagLength:s||c.length+.5,tagValue:this.hexOrAsciiFormatter(h,c,t)}),(i&this.constructedFlag)!=this.constructedFlag&&(o+=s)}c=!0}return n}),C(this,"hexOrAsciiFormatter",(e,t,i)=>{switch(e){case"DFDF1A":return`${t} ${this.trxStatusToString[parseInt(t,16)]}`;case"DFDF4D":case"5F20":return this.hexToAscii(t);case"DFDF25":return i?this.hexToAscii(t?t.substring(0,14):t):t;case"DFDF40":return 128===t?`${t}  CBC-MAC checked in ARQC online response`:1===t;default:return t}}),this.moreTagBytesFlag1=31,this.moreTagBytesFlag2=128,this.constructedFlag=32,this.moreLengthFlag=128,this.oneByteLengthMask=127,this.trxStatusToString=Object.freeze({0:"Approved",1:"Declined",2:"Error",16:"Cancelled By Host",17:"Confirm Amount No",18:"Confirm Amount Timeout",19:"Confirm Amount Cancel",20:"MSR Select Debit",21:"MSR Select Debit",22:"MSR Select Credit/Debit timout",23:"MSR Select Credit/Debit cancel",24:"Signature Capture Cancelled by Host (SC-S Only | SC-F only)",25:"Signature Capture Timeout (SC-S Only | SC-F Only)",26:"Signature Capture Cancelled by Cardholder (SC-S Only | SC-F Only)",27:"PIN Entry Cancelled by Host",28:"PIN entry timeout",29:"PIN entry Cancelled by Cardholder",30:"Manual Selected Cancelled by Host",31:"Manual Selection Timeout",32:"Manual Selction Cancelled by Cardholder",33:"Waiting for Card Cancelled by Host",34:"Waiting for Card Timeout",35:"Cancelled by Card Swipe (MSR) [SCRA] || Waiting for Card Cancelled by Cardholder [PIN]",36:"Waiting for Card ICC Seated",37:"Waiting for Card MSR Swiped",255:"Unknown Transaction Status"})}};class D extends Error{constructor(){super("Device communication error. Length does not match data"),this.name="BleTransmissionError",this.code=1012}}var S=D;class y extends Error{constructor(e){let{code:t,name:i,message:a}=e;super(a),this.name=i||"DeviceError",this.code=t||1e3}}var T=y;function w(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var k=class extends b{constructor(e){super(),w(this,"buildDeviceErr",e=>e instanceof DOMException?new s(e):e instanceof Error?e:new T(e)),w(this,"throwLenErr",()=>new S),w(this,"sendErrToCallback",e=>(this.errorCallback(e),e)),this.errorCallback=e.errorCallback}};const A=Object.freeze({errorCode:8,errorName:"NotFoundError"}),P=Object.freeze({code:19,name:"NetworkError"}),E=Object.freeze({code:1002,name:"DeviceNotFound",message:"Please select device to connect"}),R=Object.freeze({code:1003,name:"GattServerNotConnected",message:"Please connect desired device"}),I=Object.freeze({code:1004,name:"CommandNotSent",message:"Command characteristic not found, device not opened"}),B=Object.freeze({code:1005,name:"CommandNotSent",message:"Device not opened"}),N=Object.freeze({code:1006,name:"CommandNotSent",message:"Application From Host not found.  Device not connected"}),O=Object.freeze({code:1007,name:"ReadFailed",message:"Unable to read data from device. Communication error"}),x=Object.freeze({code:1008,name:"ResponseNotReceived",message:"Command was sent, but response was not received from device"}),L=Object.freeze({code:1009,name:"GetServiceFail",message:"Failed to retrieve primary GATT service. Please connect device"}),M=Object.freeze({code:1013,name:"CommandNotAccepted",message:"Device did not accept command"});function H(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var j=class extends k{constructor(e,t){super(t),H(this,"cardTypes",e=>"all"!==e?f[e]||3:g[this.deviceType]||3),H(this,"connect",()=>new Promise((e,t)=>(this.logDeviceState(`[GATT]: Device Connection Request || ${new Date}`),this.device?this.device.gatt.connect().then(t=>(this.logDeviceState(`[GATT]: Device connected - GATT Server retrieved successfully || ${new Date}`),this.gattServer=t,e())):t(this.buildDeviceErr(E))))),H(this,"disconnect",()=>new Promise(e=>this.device.gatt.connected?(this.device.gatt.disconnect(),e(p)):e(p))),H(this,"cacheCardServiceBase",e=>new Promise((t,i)=>(e=e||0,this.logDeviceState(`[GATT]: Cache Card Service Request || ${new Date}`),this.gattServer?this.findPrimaryService(e).then(e=>t(e)).catch(e=>i(e)):i(this.buildDeviceErr(R))))),H(this,"findPrimaryService",e=>new Promise((t,i)=>this.gattServer.getPrimaryService(this.deviceUUIDs[e]).then(e=>(this.cardService=e,this.logDeviceState(`[GATT]: Success! GATT Card Service retrieved and cached || ${new Date}`),this.device.addEventListener("gattserverdisconnected",this.disconnectHandler),t(e))).catch(a=>a.code===A.errorCode&&a.name===A.errorName?(this.deviceUUIDs[e+1],this.logDeviceState(`[ERROR]: Failed to connect. UUID: ${this.deviceUUIDs[e]} is not valid for this device. Trying again with UUID: ${this.deviceUUIDs[e+1]} || ${new Date}`),t(this.findPrimaryService(e+1))):(this.logDeviceState(`[ERROR]: Failed to retrieve Card Service - UUID: ${this.deviceUUIDs[e]} is not valid for this device. || ${new Date}`),i(a))))),H(this,"connectAndCache",e=>new Promise((t,i)=>{let a=t=>new Promise((i,s)=>t<4?this.connect().then(()=>this.cacheCardServiceBase(e)).then(e=>i(e)).catch(e=>e.code===P.code&&e.name===P.name?setTimeout(()=>(this.logDeviceState(`[ERROR]: Error caching GATT Service - Clearing cache and trying again. || ${new Date}`),this.clearGattCache(),i(a(t+1))),500):(this.logDeviceState(`[ERROR]: Failed to cache GATT Service || ${new Date}`),s(e))):s(this.buildDeviceErr(L)));return a(0).then(e=>t(e)).catch(e=>i(e))})),H(this,"onDestroyHandler",()=>{if(this.device&&this.device.gatt.connected)return this.device.gatt.disconnect()}),H(this,"waitForDeviceResponse",e=>new Promise(t=>{let i=a=>a<e?this.commandRespAvailable?t(!0):setTimeout(()=>i(a+1),200):t(!1);i(0)})),H(this,"disconnectHandler",e=>{this.gattServer=null,this.cardService=null,this.logDeviceState(`[Disconnected]: Disconnect event. Returning event to user, removing device listener || ${new Date}`),this.disconnectCallback(e),this.device.removeEventListener("gattserverdisconnected",this.disconnectHandler)}),H(this,"isDeviceConnected",()=>!!this.device.gatt&&this.device.gatt.connected),this.device=e,this.disconnectCallback=t.disconnectHandler,this.gattServer=null,this.cardService=null,this.deviceUUIDs=["0508e6f8-ad82-898f-f843-e3410cb60104","0508e6f8-ad82-898f-f843-e3410cb60103","0508e6f8-ad82-898f-f843-e3410cb60101"],this.statusVerbosity=Object.freeze({minimum:0,medium:1,verbose:2}),this.currencyCode=Object.freeze({dollar:[8,64],euro:[9,120],pound:[8,38],default:[0,0]}),this.transactionTypes=Object.freeze({purchase:0,cashadvance:1,cashback:2,purchasegoods:4,purchaseservices:8,contactlesscashback:9,cashmanual:18,refund:32,chiponlypayment:80}),this.commandRespAvailable=!1}};function F(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var $=class extends j{constructor(e,t){super(e,t),F(this,"decimalToBinary",e=>{let t=(e>>>0).toString(2);return"00000000".substr(t.length)+t}),F(this,"stringNumToBool",e=>!!+e),F(this,"findNullTerminatedString",e=>{let t;for(let i=0;i<e.length;i++)if(0===e[i]&&0===e[i+1]&&0===e[i+2]){t=i;break}return t?this.convertArrayToHexString(e.slice(2,t)):this.convertArrayToHexString(e.slice(2))}),F(this,"findPinLength",(e,t)=>{let i=12,a=4;return e&&"number"==typeof e&&e<=12&&(i=e>=4?e:12),t&&"number"==typeof t&&t>=4&&(a=t<=i?t:4),parseInt(`${i.toString(16)}${a.toString(16)}`,16)}),F(this,"buildPinOptionsByte",(e,t,i,a)=>{const s=Object.freeze({disabled:"00",englishfrench:"01",allspecified:"10"}),r=`000${e=e&&s[e.toLowerCase()]||s.disabled}${(t="boolean"!=typeof t||t)?"1":"0"}${"boolean"!=typeof t||t?"1":"0"}${a=a&&a.toLowerCase()in["iso0","iso3"]?"iso0"===a.toLowerCase()?"0":"1":"0"}`;return this.logDeviceState(`[PinOptionsByte]: binary string: ${r} || byte result: ${parseInt(r,2)}`),parseInt(r,2)})}};function U(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var q=class extends ${constructor(e,t){super(e,t),U(this,"parseDeviceConfiguration",e=>({...this.firstDeviceControlByte(this.decimalToBinary(e[1])),...this.secondDeviceControlByte(this.decimalToBinary(e[2])),...this.maskConfigurationByte(this.decimalToBinary(e[3])),...this.msrConfigurationByte(this.decimalToBinary(e[4])),maskCharacter:this.findMaskCharacter(e[5]),leadingUnmaskedLength:parseInt(this.decimalToBinary(e[6]).slice(4),2),trailingUnmaskedLength:parseInt(this.decimalToBinary(e[6]).slice(0,4),2),emvL2IcsConfig:this.emvL2ConfigOptions[this.decimalToBinary(e[7]).slice(0,4)]||`Unknown/Undocumented EMV L2 ICS ${u}`,...this.contactlessConfig(e[8])})),U(this,"contactlessConfig",e=>({contactlessSupport:this.enabledBrands[this.convertArrayToHexString([e])[0]],contactlessGuiControls:"1"===this.decimalToBinary(e)[5]?"Alternate":"Standard"})),U(this,"findMaskCharacter",e=>{if(48===e)return"ASCII: '0'";{const t=this.convertArrayToHexString([e]),i=this.hexToAscii(t);return i?`ASCII: '${i}'`:`Non-ASCII character in hex: '${t}'`}}),U(this,"firstDeviceControlByte",e=>({requireMutualAuth:this.stringNumToBool(e[0]),msrEncryptionVariant:"1"===e[1]?"DATA":"PIN",isClearTextEnabled:this.stringNumToBool(e[3]),isBeeperModeEnabled:this.stringNumToBool(e[4]),isBitmapLocked:this.stringNumToBool(e[6]),isConfigurationLocked:this.stringNumToBool(e[7])})),U(this,"secondDeviceControlByte",e=>({isArpcMacEnabled:this.stringNumToBool(e[1]),isFinancialIccCardTypeReportingEnabled:this.stringNumToBool(e[2]),arqcBatchDataOutputFormat:"1"===e[3]?"Reserved Format":"DynaPro Format"})),U(this,"maskConfigurationByte",e=>({isIsoMaskEnabled:this.stringNumToBool(e[7]),isCheckDigitEnabled:this.stringNumToBool(e[6]),isMs2Point0Enabled:"00"!==e.slice(4,6)})),U(this,"msrConfigurationByte",e=>({isAAMVAcardEnabled:this.stringNumToBool(e[7]),track3Data:this.trackDataOptions[e.slice(4,6)]||"Unknown",track2Data:this.trackDataOptions[e.slice(2,4)]||"Unknown",track1Data:this.trackDataOptions[e.slice(0,2)]||"Unknown"})),this.trackDataOptions=Object.freeze({"00":"Disabled","01":"Enabled",11:"Required"}),this.emvL2ConfigOptions=Object.freeze({"0000":"No L2 Capability","0001":`${u} C1 (EMVCo certified)`,"0010":`${u} C2`,"0011":`${u} C3`,"0100":`${u} C4 (EMVCo certified)`,"0101":`${u} C5 (EMVCo certified)`,"0110":`${u} C6`,"0111":`${u} C7`}),this.enabledBrands=Object.freeze({0:"All contacless kernals enabled",1:"PayPass/MCL support disabled",2:"payWave support disabled",4:"Expresspay support disabled",8:"D-PAS support disabled"})}};function W(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var z=class extends q{constructor(e,t){super(e,t),W(this,"findEmvCardholderStatus",e=>({emvCardholderStatus:this.cardholderStatusIds[e]||`Unknown/Undocumented Cardholder Interaction Status ID: ${e}`})),W(this,"findOperationStatus",e=>({operationStatus:this.operationStatus[e]||"Unknown Operation Status"})),W(this,"parseDisplayMessageDone",e=>this.findOperationStatus(e[2])),W(this,"parseEmvCompletion",e=>(console.log("[!-!-!-!- emvCompletion -!-!-!-!",e),{})),W(this,"formatSerialNumber",e=>{this.requestedSn={serialNumber:this.findNullTerminatedString(e)},this.getSerialNumber=!0}),W(this,"formatKsnAndSn",e=>{this.requestedKsn={ksn:this.convertArrayToHexString(e.slice(2,12)),serialNumber:this.convertArrayToHexString(e.slice(12,20))},this.getKsnAvailable=!0}),W(this,"handleBigBlockBegin",e=>{switch(e[1]){case 164:this.arqcArriving=!0,this.arqcTotalLen=this.readTwoByteLength([e[5],e[4]]);break;case 171:this.batchDataArriving=!0,this.batchTotalLen=this.readTwoByteLength([e[5],e[4]]);break;case 24:case 32:case 33:break;default:this.transactionStatusCallback({bufferType:this.bufferTypes[e[1]]||"Buffer type not documented"})}}),W(this,"handleArqcBigBlockFinish",()=>{const e=this.buildInitialDataArray(!1),t=this.convertArrayToHexString(e);this.logDeviceState(`[ARQC]: ${t}`),this.cardDataObj={...this.cardDataObj,arqcData:t,arqcDataParsed:this.tlvParser(e.slice(2))},this.rawData={},this.arqcArriving=!1}),W(this,"handleBatchBigBlockFinish",()=>{const e=this.buildInitialDataArray(!1),t=this.convertArrayToHexString(e);this.logDeviceState(`[BATCH DATA]: ${t}`),this.transactionHasStarted=!1;const i=this.tlvParser(e.slice(2)),a=i.find(e=>{let{tag:t}=e;return"DFDF40"===t});return this.cardDataObj=a?{...this.cardDataObj,batchData:t,batchDataParsed:i,signatureRequired:1===a}:{...this.cardDataObj,batchData:t,batchDataParsed:i},this.rawData={},this.batchDataArriving=!1,this.transactionCallback(this.cardDataObj)}),W(this,"handleBigBlockFinish",()=>this.arqcArriving?this.handleArqcBigBlockFinish():this.batchDataArriving?this.handleBatchBigBlockFinish():void 0),W(this,"parseEmvCardholderInteractionStatus",e=>{switch(e[1]){case 2:return{...this.findEmvCardholderStatus(e[1]),amountConfirmed:1===e[4]||2!==e[4]&&"Unknown/Undocumented Amount Confirmed Status"};case 4:return{...this.findEmvCardholderStatus(e[1]),applicationOrLabelName:this.bufferToUtf8(e.slice(4))};case 10:return{...this.findEmvCardholderStatus(e[1]),methodSelected:1===e[4]?"Credit":2===e[4]?"Debit":"Unknown/Undocumented payment method selected"};case 32:return{...this.findEmvCardholderStatus(e[1]),tlvData:this.tlvParser(e.slice(4))};default:return void 0===e[4]?this.findEmvCardholderStatus(e[1]):{...this.findEmvCardholderStatus(e[1]),undocumentedData:this.convertArrayToHexString(e.slice(4))}}}),W(this,"parseCardStatusReport",e=>e.length<4?this.findOperationStatus(e[2]):{...this.findOperationStatus(e[2]),cardStatus:0===e[2]?"Ok":"Error",cardType:this.cardTypesEnum[e[3]]}),W(this,"parseAckResponse",e=>({code:e[1],message:this.ACKSTS[e[1]],commandType:this.pinCommandIds[e[2]]||"Device error or command type not documented"})),W(this,"parseDeviceStateReport",e=>({deviceState:this.deviceState[e[1]],sessionState:this.parseSessionState(this.decimalToBinary(e[2])),deviceStatus:this.parseDeviceStatus(this.decimalToBinary(e[3])),deviceCertStatus:this.parseCertStatus(this.decimalToBinary(e[4])),hardwareStatus:this.parseHardwareStatus(this.decimalToBinary(e[5])),additionalInfo:this.parseAdditionalInfo(this.decimalToBinary(e[6]))})),W(this,"parseSessionState",e=>({powerDidChange:this.stringNumToBool(e[0]),cardDataIsAvailable:this.stringNumToBool(e[4]),panParsedFromCard:this.stringNumToBool(e[5]),externalPanSent:this.stringNumToBool(e[6]),amountWasSent:this.stringNumToBool(e[7])})),W(this,"parseCertStatus",e=>({msrCrlCertExists:this.stringNumToBool(e[0]),pinCrlCertExists:this.stringNumToBool(e[1]),mfgUnbindCertExists:this.stringNumToBool(e[3]),msrCaCertExists:this.stringNumToBool(e[4]),pinCaCertExists:this.stringNumToBool(e[5]),deviceCaCertExists:this.stringNumToBool(e[6]),deviceCertExists:this.stringNumToBool(e[7])})),W(this,"parseDeviceStatus",e=>"00000000"!==e?{pinKeyStatus:this.pinKeyStatusEnum[e.slice(6)],msrKeyStatus:this.msrKeyStatusEnum[e.slice(4,6)],tamperDetected:this.stringNumToBool(e[3]),isAuthenticated:this.stringNumToBool(e[1]),deviceErrorDetected:this.stringNumToBool(e[0])}:"Ok"),W(this,"parseHardwareStatus",e=>({IE3_only:this.stringNumToBool(e[0]),SRED:this.stringNumToBool(e[1]),MagHeadIsProgrammed:this.stringNumToBool(e[6]),tamperSensorsAreActive:this.stringNumToBool(e[7])})),W(this,"parseAdditionalInfo",e=>({ICC_AcquirerMasterKeyIsInjected:!this.stringNumToBool(e[7]),ICC_SessionKeyIsActive:!this.stringNumToBool(e[6]),CAPK_EmvDatabaseIsCorrupted:this.stringNumToBool(e[5]),EmvTerminalDatabaseIsCorrupted:this.stringNumToBool(e[4]),cardIsPresentInChipCardConnector:this.stringNumToBool(e[3])})),W(this,"parseCardData",e=>{const t=this.cardDataIds[e[1]]||"trackNameUnknown";if(e[2]===this.statusEnum.ok)switch(t){case"track1":this.cardDataObj={...this.cardDataObj,[t]:this.bufferToUtf8(e.slice(4))};break;case"track2":this.cardDataObj={...this.cardDataObj,[t]:this.bufferToUtf8(e.slice(4)),...this.formatExpPAN(e)};break;case"ksnAndMagnePrintStatus":this.cardDataObj={...this.cardDataObj,ksn:this.convertArrayToHexString(e.slice(4,14)),magnePrintStatus:this.convertArrayToHexString(e.slice(-4))};break;default:this.cardDataObj={...this.cardDataObj,[t]:this.convertArrayToHexString(e.slice(4))}}else this.cardDataObj={...this.cardDataObj,[t]:this.convertStatusToString[e[2]]}}),W(this,"parsePinResponse",e=>(this.logDeviceState(`[PIN Response]: Response from PIN Entry: ${this.convertArrayToHexString(e)}`),e.length>2?{pinData:{...this.findOperationStatus(e[1]),pinKsn:this.convertArrayToHexString(e.slice(2,12)),encryptedPinBlock:this.convertArrayToHexString(e.slice(12,20))}}:this.findOperationStatus(e[1]))),W(this,"parseCardholderResponse",e=>{const t=Object.freeze({113:"Left function key",114:"Middle function key",116:"Right function key",120:"Enter key"});return e.length>2?{...this.findOperationStatus(e[1]),keyPressed:t[e[2]]||"Unknown/Undocumented Key"}:this.findOperationStatus(e[1])}),this.operationStatus=Object.freeze({0:"Ok",1:"Cardholder Cancel",2:"Timeout",3:"Host Cancel",4:"Verify fail",5:"Keypad Security",6:"Calibration Done",7:"Write with duplicate RID and index",8:"Write with corrupted Key",9:"CA Public Key reached maximum capacity",10:"CA Public Key read with invalid RID or Index"}),this.ACKSTS=Object.freeze({0:"Ok",21:"RID error/Index not found",128:"Device Error: error, tamper, missing certificate or incorrect signature detected",129:"Device not idle",130:"Data Error or Bad Paramater(s)",131:"Length Error: data size is either too small, too large, incomplete, or OID of the cert doesn't match predefined OID",132:"PAN Exists",133:"Missing or Incorrect Key",134:"Device Busy",135:"Device Locked",136:"Auth required",137:"Bad Auth",138:"Device Not Available",139:"Amount Needed - If PIN amount is required, no amount has been set",140:"Battery is critically low",141:"Device is resetting",144:"Certificate does not exist",145:"Expired (Cert/CRL)",146:"Invalid (Cert/CRL/Message)",147:"Revoked (Cert/CRL)",148:"CRL does not exist",149:"Certificate exists",150:"Duplicate KSN/Key"}),this.pinDisplayMessages=Object.freeze({0:"Hands Off",1:"Approved",2:"Declined",3:"Cancelled",4:"Thank You",5:"PIN Invalid",6:"Processing",7:"Please Wait"}),this.pinCommandIds=Object.freeze({1:"responseACK",2:"clearSession",3:"swipe",4:"requestPinEntry",5:"cancelCommand",6:"requestCardholderSelection",7:"displayMessage",8:"requestDeviceStatus",9:"requestDeviceConfiguration",10:"requestMsrData",11:"getChallenge",7:"displayMessage",162:"emvTransactionStatus",171:"requestEmvData",48:"getKsn",5:"cancelCommand",26:"requestDeviceInfo"}),this.cardTypesEnum=Object.freeze({0:"Other",1:"Financial",2:"AAMVA",3:"Manual",4:"Unknown",5:"ICC",6:"Contactless ICC - EMV",7:"Financial MSR + ICC",8:"Contactless ICC - MSD"}),this.deviceState=Object.freeze({0:"Idle",1:"Session",2:"Wait For Card",3:"Wait For PIN",4:"Wait For Selection",5:"Displaying Message",6:"Test (Reserved for future use)",7:"Manual Card Entry",9:"Wait Cardholder Entry",10:"Chip Card",11:"ICC Kernel Test",12:"EMV Transaction",13:"Show PAN"}),this.pinKeyStatusEnum=Object.freeze({"00":"PIN Key OK","01":"PIN Key Exhausted",10:"No PIN Key",11:"PIN Key Not Bound"}),this.msrKeyStatusEnum=Object.freeze({"00":"MSR Key OK","01":"MSR Key Exhausted",10:"No MSR Key",11:"MSR Key Not Bound"}),this.cardDataIds=Object.freeze({1:"track1",2:"track2",3:"track3",4:"encryptedTrack1",5:"encryptedTrack2",6:"encryptedTrack3",7:"magnePrint",64:"encryptedPanAndExp",65:"serialNumber",99:"ksnAndMagnePrintStatus",100:"CBC-MAC"}),this.cardholderStatusIds=Object.freeze({1:"Waiting for amount confirmation selection",2:"Amount confirmation selected",3:"Waiting for multi-payment ICC Application selection",4:"ICC Application selected",7:"Waiting for language selection",8:"Language selected",9:"Waiting for credit/debit selection",10:"Credit/Debit selected",11:"Waiting for Pin Entry for ICC",12:"PIN entered for ICC",13:"Waiting for Pin Entry for MSR",14:"PIN entered for MSR"}),this.bufferTypes=Object.freeze({2:"Device Certificate",50:"Set BIN (MAC)",66:"CSR",161:"EMV data in TLV format, Tag Data (MAC)",162:"RESERVED",163:"RESERVED",164:"EMV data in TLV format, Authorization Request (ARQC)",165:"CA Public Key (MAC)",171:"EMV data in TLV format, Batch Data"}),this.cardDataObj={},this.arqcArriving=!1,this.batchDataArriving=!1,this.arqcTotalLen=0,this.batchTotalLen=0,this.statusEnum=Object.freeze({ok:0,empty:1,error:2,disabled:3}),this.convertStatusToString=Object.freeze({0:"Ok",1:"Empty",2:"Error",4:"Disabled"})}};function K(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var G=class extends z{constructor(e,t){super(e,t),K(this,"getCardService",()=>new Promise((e,t)=>this.device?this.connectAndCache(2).then(e=>(this.logDeviceState(`[GATT]: Cache AppDataToHostLength Characteristic || ${new Date}`),e.getCharacteristic(this.deviceToHostLen))).then(e=>(this.logDeviceState(`[GATT]: Begin notifications on AppDataToHostLength Characteristic || ${new Date}`),e.startNotifications())).then(e=>(this.logDeviceState(`[GATT]: Add listener to notifications || ${new Date}`),e.removeEventListener("characteristicvaluechanged",this.dataWatcher),e.addEventListener("characteristicvaluechanged",this.dataWatcher),this.cardDataListener=e,this.logDeviceState(`[GATT]: Cache AppDataToHost Characteristic || ${new Date}`),this.cardService.getCharacteristic(this.deviceToHostData))).then(e=>(this.receiveDataChar=e,this.logDeviceState(`[GATT]: Cache AppDataFromHostLength Characteristic || ${new Date}`),this.cardService.getCharacteristic(this.deviceFromHostLen))).then(e=>(this.sendLenToDevice=e,this.logDeviceState(`[GATT]: Cache AppDataFromHost Characteristic || ${new Date}`),this.cardService.getCharacteristic(this.deviceFromHostData))).then(e=>(this.commandCharacteristic=e,window&&(window.removeEventListener("beforeunload",this.onDestroyHandler),window.addEventListener("beforeunload",this.onDestroyHandler)),this.logDeviceState(`[GATT]: Successfully cached all GATT services and characteristics. Returning successful pair to user || ${new Date}`),this.delayPromise(400))).then(()=>e({code:0,message:"Device Open"})).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(E)))),K(this,"dataWatcher",e=>{let t=e.target.value.getUint8(0);return this.logDeviceState(`[NOTIFY: AppDataToHostLength]: ${this.convertArrayToHexString([t])} || ${new Date}`),this.commandSent&&3===t?(this.commandRespAvailable=!0,void(this.commandSent=!1)):this.readCommandResp()}),K(this,"readCommandResp",()=>new Promise((e,t)=>this.receiveDataChar?this.receiveDataChar.readValue().then(e=>this.readValueHandler(e)).then(t=>e(t)).catch(i=>i.code===v.code&&i.message===v.message?(this.logDeviceState(`[INFO]: Read failed due to device being busy. Attempting read again || ${new Date}`),e(this.readCommandResp())):t(this.buildDeviceErr(i))):t(this.buildDeviceErr(O)))),K(this,"readValueHandler",e=>new Promise(t=>{const i=this.readByteArray(e);if(this.logDeviceState(`[READ: AppDataToHost]: ${this.convertArrayToHexString(i)} || ${new Date}`),i.length)switch(i[0]){case this.reportIds.responseAck:return t(this.parseAckResponse(i));case this.reportIds.deviceStateReport:return t(this.handleDeviceStateReport(i));case this.reportIds.cardStatusReport:return t(this.handleCardStatusReport(i));case this.reportIds.cardDataReport:return t(this.handleCardDataReport(i));case this.reportIds.emvCardholderStatus:return t(this.handleCardholderStatusReport(i));case this.reportIds.emvCompletion:return t(this.handleEmvCompletion(i));case this.reportIds.bigBlockData:return t(this.handleBigBlockData(i));case this.reportIds.getKsn:return t(this.formatKsnAndSn(i));case this.reportIds.requestSn:return t(this.formatSerialNumber(i));case this.reportIds.deviceConfig:return t(this.parseDeviceConfiguration(i));case this.reportIds.pinResponse:return t(this.transactionCallback(this.parsePinResponse(pinResp)));case this.reportIds.selectionResponse:return t(this.parseCardholderResponse(i));case this.reportIds.displayResp:return t(this.transactionStatusCallback(this.findOperationStatus(i[1])));default:return this.logDeviceState(`[Data Resp]: There is no parser for this data, returning to caller: ${this.convertArrayToHexString(i)} || ${new Date}`),t(this.transactionCallback(i))}else t(i)})),K(this,"handleEmvCompletion",e=>(console.log("[!] EMV Completion: ",e),this.transactionStatusCallback(this.parseEmvCompletion(e)))),K(this,"handleBigBlockData",e=>{switch(e[2]){case 0:this.handleBigBlockBegin(e);break;case 99:this.maxBlockId=Math.max(...Object.keys(this.rawData))+1,this.handleBigBlockFinish();break;default:this.rawData={...this.rawData,[e[2]]:e.slice(4)}}}),K(this,"handleCardholderStatusReport",e=>this.transactionStatusCallback(this.parseEmvCardholderInteractionStatus(e))),K(this,"handleCardStatusReport",e=>new Promise(t=>(this.transactionStatusCallback(this.parseCardStatusReport(e)),this.swipeHasBegun||this.transactionHasStarted?this.sendCommandWithResp(this.swipeHasBegun?[1,10,0]:[1,171,0]).then(e=>t(this.transactionStatusCallback(e))).catch(e=>this.sendErrToCallback(this.buildDeviceErr(e))):t()))),K(this,"handleDeviceStateReport",e=>{this.dataGathered&&(this.dataGathered=!1,this.transactionCallback({swipeData:this.cardDataObj})),this.transactionStatusCallback(this.parseDeviceStateReport(e))}),K(this,"handleCardDataReport",e=>{this.swipeHasBegun&&(this.swipeHasBegun=!1,this.dataGathered=!0),3!==e.length?this.parseCardData(e):(this.logDeviceState("[ERROR] Undocumented Card Data below"),this.logDeviceState(e))}),K(this,"requestCardSwipe",e=>new Promise((t,i)=>(this.swipeHasBegun=!0,this.cardDataObj={},this.device.gatt.connected?this.sendCommandWithResp(this.clearSessionCmd).then(t=>(this.transactionStatusCallback(t),this.sendCommandWithResp(this.buildSwipeCommand(e||{})))).then(e=>t(e)).catch(e=>i(e)):i(this.buildDeviceErr(B))))),K(this,"startTransaction",e=>new Promise((t,i)=>(this.transactionHasStarted=!0,this.cardDataObj={},this.logDeviceState(`[INFO]: EMV transaction begun || ${new Date}`),this.device.gatt.connected?this.sendCommandWithResp(this.clearSessionCmd).then(e=>(this.transactionStatusCallback(e),Promise.resolve())).then(()=>this.sendCommandWithResp(this.buildEmvCommand(e||{}))).then(e=>t(e)).catch(e=>i(e)):i(this.buildDeviceErr(B))))),K(this,"requestPinEntry",e=>new Promise((t,i)=>(this.logDeviceState(`[PIN]: Request for PIN entry start || ${new Date}`),console.log("pinoptions: ",e),this.device.gatt.connected?this.sendCommandWithResp(this.buildPinCommand(e||{})).then(e=>t(e)).catch(e=>i(e)):i(this.buildDeviceErr(B))))),K(this,"buildPinCommand",e=>{let{languageSelection:t,displayType:i,timeout:a,maxPinLength:s,minPinLength:r,toneChoice:n,waitMessage:o,verifyPin:c,pinBlockFormat:h}=e;const d=Object.freeze({enterpin:0,enterpinamount:1,reenterpinamount:2,reenterpin:3,verifypin:4});let l=[1,4,a||30,i&&d[i.toLowerCase()]||0,this.findPinLength(s,r),n&&this.toneChoice[n.toLowerCase()]||1,this.buildPinOptionsByte(t,o,c,h)];return console.log("[PIN CMD] Built PIN Command: ",l),l}),K(this,"buildSwipeCommand",e=>{let{timeout:t,isFallback:i,toneChoice:a,displayType:s}=e;return[1,3,t||60,!0===i?4:s&&this.displayTypes[s.toLowerCase()]||2,a&&this.toneChoice[a.toLowerCase()]||1]}),K(this,"buildEmvCommand",e=>{let{timeout:t,pinTimeout:i,cardType:a,transactionType:s,cashBack:r,currencyCode:n,toneChoice:o,isQuickChip:c,authorizedAmount:h,emvOptions:d}=e,l=[1,162,t||60,i||20,0,o&&this.toneChoice[o.toLowerCase()]||1,a?this.cardTypes(a.toLowerCase()):this.cardTypes("all"),d&&this.emvOptions[d.toLowerCase()]||0];return l=h?l.concat(this.convertNumToAmount(h)):l.concat([0,0,0,0,1,0]),l=s?l.concat(this.transactionTypes[s.toLowerCase()]||0):l.concat(0),l=r?l.concat(this.convertNumToAmount(r)):l.concat(this.newArrayPartial(0,6)),l=l.concat(this.newArrayPartial(0,12)),l=n?l.concat(this.currencyCode[n.toLowerCase()]||this.currencyCode.default):l.concat([8,64]),l.push(0),l.push(!1===c?0:1),l=l.concat(this.newArrayPartial(0,28)),l}),K(this,"sendPinCommand",e=>new Promise((t,i)=>(this.logDeviceState(`[AppFromHostLength]: ${this.convertArrayToHexString([e.length])} || ${new Date}`),this.sendLenToDevice?this.sendLenToDevice.writeValue(Uint8Array.of(e.length)).then(()=>(this.logDeviceState(`[AppFromHostData]: ${this.convertArrayToHexString(e)} || ${new Date}`),this.commandSent=!0,t(this.commandCharacteristic.writeValue(Uint8Array.from(e))))).catch(e=>(this.commandSent=!1,i(e))):i(this.buildDeviceErr(N))))),K(this,"sendCommandWithResp",e=>new Promise((t,i)=>this.sendPinCommand(e).then(()=>this.commandRespAvailable?Promise.resolve(!0):this.waitForDeviceResponse(16)).then(t=>t?this.readCommandResp():this.tryCommandAgain(e)).then(e=>(this.commandRespAvailable=!1,t(e))).catch(e=>(this.commandRespAvailable=!1,i(this.buildDeviceErr(e)))))),K(this,"tryCommandAgain",e=>new Promise((t,i)=>this.sendPinCommand(e).then(()=>this.waitForDeviceResponse(5)).then(e=>e?t(this.readCommandResp()):i(this.buildDeviceErr(x))))),K(this,"cancelTransaction",()=>new Promise((e,t)=>this.commandCharacteristic?this.sendCommandWithResp([1,5,0]).then(t=>e(t)).catch(e=>t(e)):t(this.buildDeviceErr(I)))),K(this,"clearSession",()=>new Promise((e,t)=>(this.logDeviceState(`[ClearSession]: Request to clear session || ${new Date}`),this.sendLenToDevice?this.sendCommandWithResp(this.clearSessionCmd).then(t=>(this.transactionStatusCallback(t),this.logDeviceState(`[ClearSession]: Received clear session response || ${new Date}`),e(t))).catch(e=>t(this.buildDeviceErr(e))):e(m)))),K(this,"closePinDevice",()=>new Promise((e,t)=>this.cardDataListener?this.cardDataListener.stopNotifications().then(()=>(this.logDeviceState(`[Close Device]: GATT notifications stopped. Clearing JS cache || ${new Date}`),this.cardDataListener.removeEventListener("characteristicvaluechanged",this.dataWatcher),this.cardDataListener=null,this.clearGattCache(),e(this.disconnect()))).catch(e=>t(e)):this.disconnect().then(()=>(this.logDeviceState(`[Close Device]: Device Closed. Clearing JS cache || ${new Date}`),this.clearGattCache(),e())).catch(e=>t(e)))),K(this,"closeDevice",()=>new Promise((e,t)=>this.device.gatt.connected?this.clearSession().then(()=>this.closePinDevice()).then(()=>e(p)).catch(e=>(this.disconnect(),t(this.buildDeviceErr(e)))):e(p))),K(this,"clearGattCache",()=>{this.transactionHasStarted=!1,this.receiveDataChar=null,this.commandCharacteristic=null,this.sendLenToDevice=null,this.commandSent=!1,this.commandRespAvailable=!1,this.swipeHasBegun=!1,this.dataGathered=!1}),this.transactionCallback=t.transactionCallback||t,this.transactionStatusCallback=t.transactionStatusCallback,this.deviceFromHostLen="0508e6f8-ad82-898f-f843-e3410cb60220",this.deviceFromHostData="0508e6f8-ad82-898f-f843-e3410cb60221",this.deviceToHostLen="0508e6f8-ad82-898f-f843-e3410cb60222",this.deviceToHostData="0508e6f8-ad82-898f-f843-e3410cb60223",this.cardDataListener=null,this.receiveDataChar=null,this.commandCharacteristic=null,this.sendLenToDevice=null,this.commandSent=!1,this.swipeHasBegun=!1,this.transactionHasStarted=!1,this.dataGathered=!1,this.emvOptions=Object.freeze({normal:0,bypasspin:1,forceonline:2,acquirernotavailable:4}),this.displayTypes=Object.freeze({swipeidlealternate:0,swipecard:1,pleaseswipe:2,pleaseswipeagain:3,chiperroruseswipe:4}),this.reportIds=Object.freeze({responseAck:1,endSession:2,requestCardSwipe:3,cardStatusReport:34,deviceStateReport:32,cardDataReport:35,emvCardholderStatus:44,bigBlockData:41,emvCompletion:162,getKsn:48,requestSn:26,deviceConfig:9,pinResponse:36,selectionResponse:37,displayResp:39}),this.toneChoice=Object.freeze({nosound:0,onebeep:1,twobeeps:2}),this.initialNotification=[0],this.clearSessionCmd=[1,2,0]}};function V(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var _=class extends G{constructor(e,t){super(e,t),V(this,"getDeviceInfo",()=>new Promise((e,t)=>this.device?this.gatherDeviceInfo().then(t=>e(t)).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(E)))),V(this,"gatherDeviceInfo",()=>new Promise((e,t)=>{this.checkIfDeviceIdle().then(()=>this.getDeviceInfoProceed()).then(t=>e({...t,deviceName:this.device.name,isConnected:this.device.gatt.connected})).catch(e=>t(e))})),V(this,"getDeviceInfoBase",()=>new Promise(e=>{this.sendCommandWithResp([1,26,5]).then(t=>e(t))})),V(this,"getDeviceInfoProceed",()=>new Promise((e,t)=>{this.sendPinCommand([0,26,5]).then(()=>this.getSerialNumber||this.waitForSn(5)).then(e=>e?Promise.resolve():t(this.buildDeviceErr(x))).then(()=>{let t={serialNumber:this.hexToAscii(this.requestedSn.serialNumber)};return this.getSerialNumber=!1,this.requestedSn=null,e(t)}).catch(e=>t(e))})),V(this,"checkIfDeviceIdle",()=>new Promise(e=>{this.getDeviceInfoBase().then(t=>"Device not idle"===t.message?this.clearSession().then(()=>this.getDeviceInfoBase()):(this.transactionStatusCallback(t),e())).then(t=>(this.transactionStatusCallback(t),e()))})),V(this,"waitForSn",e=>new Promise(t=>{let i=a=>a<e?this.getSerialNumber?t(!0):setTimeout(()=>i(a+1),200):t(!1);i(0)})),this.getKsnAvailable=!1,this.requestedKsn=null,this.getSerialNumber=!1,this.requestedSn=null,this.deviceType=l}};function Q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Y=class extends G{constructor(e,t){super(e,t),Q(this,"setDisplayMessage",e=>new Promise((t,i)=>this.device&&this.device.gatt.connected?this.buildDisplayCmd(e||{}).then(e=>this.sendCommandWithResp(e)).then(e=>t(e)).catch(e=>i(this.buildDeviceErr(e))):i(this.buildDeviceErr(B)))),Q(this,"buildDisplayCmd",e=>{let{displayTime:t,messageId:i}=e;return new Promise((e,a)=>{return void 0===i?a((s="messageId",Object.freeze({code:1014,name:"MissingRequiredParameter",message:`'${s}' is required to call this function.`}))):e([1,7,void 0!==t?t:15,i]);var s})}),Q(this,"getDeviceInfo",()=>new Promise((e,t)=>this.device?this.gatherDeviceInfo().then(t=>e(t)).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(E)))),Q(this,"gatherDeviceInfo",()=>new Promise((e,t)=>{this.checkIfDeviceIdle().then(()=>this.getDeviceInfoProceed()).then(t=>e({...t,deviceName:this.device.name,isConnected:this.device.gatt.connected})).catch(e=>t(e))})),Q(this,"getDeviceInfoBase",()=>new Promise(e=>{this.sendCommandWithResp([1,26,5]).then(t=>e(t))})),Q(this,"getDeviceInfoProceed",()=>new Promise((e,t)=>{this.sendPinCommand([0,26,5]).then(()=>this.getSerialNumber?Promise.resolve(!0):this.waitForSn(5)).then(e=>e?Promise.resolve():t(this.buildDeviceErr(x))).then(()=>{let t={serialNumber:this.hexToAscii(this.requestedSn.serialNumber)};return this.getSerialNumber=!1,this.requestedSn=null,e(t)}).catch(e=>t(e))})),Q(this,"checkIfDeviceIdle",()=>new Promise(e=>{this.getDeviceInfoBase().then(t=>"Device not idle"===t.message?this.clearSession().then(()=>this.getDeviceInfoBase()):(this.transactionStatusCallback(t),e())).then(t=>(this.transactionStatusCallback(t),e()))})),Q(this,"waitForSn",e=>new Promise(t=>{let i=a=>a<e?this.getSerialNumber?t(!0):setTimeout(()=>i(a+1),200):t(!1);i(0)})),this.getKsnAvailable=!1,this.requestedKsn=null,this.getSerialNumber=!1,this.requestedSn=null,this.deviceType="dynaProGo"}};function J(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var X=class extends j{constructor(e,t){super(e,t),J(this,"trackIndices",e=>Object.freeze({track1DecodeStatus:e,track2DecodeStatus:e+1,track3DecodeStatus:e+2,track1Len:e+3,track2Len:e+4,track3Len:e+5,cardEncodeType:e+6,track1Start:e+7,track1End:e+118,track2Start:e+119,track2End:e+230,track3Start:e+231,track3End:e+342,cardStatus:e+343,magnePrintStatusStart:e+344,magnePrintStatusEnd:e+347,magnePrintLen:e+348,magnePrintStart:e+349,magnePrintEnd:e+476,serialNumberStart:e+477,serialNumberEnd:e+492,deviceEncStatusStart:e+493,deviceEncStatusEnd:e+494,ksnStart:e+495,ksnEnd:e+504,track1MaskedLen:e+505,track2MaskedLen:e+506,track3MaskedLen:e+507,track1MaskedStart:e+508,track1MaskedEnd:e+619,track2MaskedStart:e+620,track2MaskedEnd:e+731,track3MaskedStart:e+732,track3MaskedEnd:e+843,encSessionIdStart:e+844,encSessionIdEnd:e+851,track1AbsLen:e+852,track2AbsLen:e+853,track3AbsLen:e+854,magnePrintAbsLen:e+855})),J(this,"parseHidData",e=>{let t=this.trackIndices(this.offset),i={};return this.dataNames.forEach(a=>{let s=e.slice(t[`${a}Start`],t[`${a}End`]+1);t.hasOwnProperty(`${a}Len`)&&(s=s.slice(0,e[t[`${a}Len`]])),i="track2Masked"===a?this.formatTrack2Masked(i,a,this.bufferToUtf8(s)):t.hasOwnProperty(`${a}DecodeStatus`)?this.formatTrackWithDecode(i,a,e[t[`${a}DecodeStatus`]],this.convertArrayToHexString(s)):"serialNumber"===a?this.formatSerialNumber(i,s):{...i,[a]:a.toLowerCase().includes("masked")?this.bufferToUtf8(s):this.convertArrayToHexString(s)}}),{swipeData:{...i}}}),J(this,"formatSerialNumber",(e,t)=>({...e,serialNumber:this.bufferToUtf8(t.length>7?t.slice(0,7):t)})),J(this,"formatTrack2Masked",(e,t,i)=>({...e,[t]:i,...this.formatExpPAN(i)})),J(this,"formatTrackWithDecode",(e,t,i,a)=>({...e,[t]:a,[`${t}DecodeStatus`]:0===i?"Ok":"Error",[`${t}DecodeStatusCode`]:i})),this.dataNames=["track1","track2","track3","ksn","magnePrint","magnePrintStatus","serialNumber","encSessionId","track1Masked","track2Masked","track3Masked"],this.offset=3}};function Z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ee=class extends X{constructor(e,t){super(e,t),Z(this,"parseTransactionStatus",e=>{let t=this.readTwoByteLength([e[1],e[2]]),i=e.slice(3);return i.length===t?this.parseNotifications(i):this.throwLenErr()}),Z(this,"parseNotifications",e=>{let t=e.slice(6),i=this.readTwoByteLength([t[0],t[1]]),a=t.slice(2),s=a[0],r=a[2];return a.length===i?{transactionStatus:{statusCode:s,statusMsg:this.TrxStatusEnum[s]||"Status code message not documented",progressCode:r,progressMsg:this.TrxProgressIndicator[r]||"Progress code message not documented"}}:this.throwLenErr()}),this.TrxStatusEnum=Object.freeze({0:"Transaction Started and Idle",1:"Card is Inserted",2:"Error",3:"Transaction Progress Change",4:"Waiting for User Response",5:"Timed Out",6:"Transaction Complete",7:"Cancelled by Host",8:"Card Removed",9:"Contactless Token Detected, Powering Up Card",10:"MSR Swipe Detected"}),this.TrxProgressIndicator=Object.freeze({0:"No transaction in progress",1:"Waiting for cardholder to present payment",2:"Powering up the card",3:"Selecting the application",4:"Waiting for user language selection",5:"Waiting for user application selection",6:"Initiating application",7:"Reading application data",8:"Offline data authentication",9:"Process restrictions",10:"Cardholder verification",11:"Terminal risk management",12:"Terminal action analysis",13:"Generating first application cryptogram",14:"Card action analysis",15:"Online processing",16:"Waiting online processing response",17:"Transaction Complete",18:"Transaction Error",19:"Transaction Approved",20:"Transaction Declined",21:"Transaction Cancelled by MSR Swipe",22:"EMV error - Conditions Not Satisfied",23:"EMV error - Card Blocked",24:"Application selection failed",25:"EMV error - Card Not Accepted",26:"Empty Candidate List",27:"Application Blocked",41:"Contactless Remove Card",42:"Collision Detected",43:"Refer to Mobile Device Prompt",44:"Contactless Transaction Complete",45:"Request Switch to ICC/MSR - Kernel has refused contactless payment",46:"Wrong Card Type (MSD or EMV)",47:"No Application Interchange Profile (Tag 82) Received",49:"Magnetic stripe decoding error.",60:"Magnetic stripe decoding during Technical Fallback. Revert to MSR, powering up but not receiving an Answer to Reset from card.",61:"Magnetic stripe card decoded during MSR Fallback. Device reverted to MSR, but encountered fatal errors.",62:"Magnetic stripe card decoded during a No Fallback MSR read."})}};function te(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ie=class extends ee{constructor(e,t){super(e,t),te(this,"parseEmvData",(e,t)=>t?{arqcData:this.convertArrayToHexString(e.slice(11)),arqcDataParsed:this.tlvParser(e.slice(13),!0)}:{signatureRequired:128===e[11]?"CBC-MAC checked in ARQC online response":1===e[11],batchData:this.convertArrayToHexString(e.slice(11)),batchDataParsed:this.tlvParser(e.slice(14),!0)}),te(this,"parseEmvCommandResponse",e=>{const t=e.slice(4,6);return parseInt(t.join(""))?{code:parseInt(this.convertArrayToHexString(t),16),name:"StartTransactionError",message:this.emvResultCodes[t[1]]||"Transaction Error Message not yet documented"}:{code:0,message:"Success, transaction has started"}}),te(this,"parseUserSelectionRequest",e=>({userSelectionRequest:{selectionType:0===e[0]?"Application Selection":"Language Selection",timeRemaining:e[1],menuItems:this.convertArrayToHexString(e.slice(2))}})),this.emvResultCodes=Object.freeze({129:"Failure, DUKPT scheme is not loaded",130:"Failure, DUKPT scheme is loaded but all of its keys have been used",131:"Failure, DUKPT scheme is not loaded (Security Level not 3 or 4)",132:"Invalid Total Transaction Time Field",133:"Invalid Card Type Field",134:"Invalid Options Field",135:"Invalid Amount Authorized Field",136:"Invalid Transaction Type Field",137:"Invalid Cash Back Field",138:"Invalid Transaction Currency Code Field",142:"Invalid Reporting Option",143:"Transaction Already In Progress",145:"Invalid Device Serial Number",150:"Invalid System Date and Time"})}};function ae(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var se=class extends ie{constructor(e,t){super(e,t),ae(this,"getCardServiceBase",e=>new Promise((t,i)=>this.device?this.connectAndCache(e).then(e=>e.getCharacteristic(this.cardDataNotification)).then(e=>(this.logDeviceState(`[GATT NOTIFICATIONS]: Request to cache characteristics, start notifications, and attach listeners. || ${new Date}`),e.startNotifications())).then(e=>(e.removeEventListener("characteristicvaluechanged",this.cardDataHandler),e.addEventListener("characteristicvaluechanged",this.cardDataHandler),this.cardDataListener=e,Promise.resolve())).then(()=>this.cardService.getCharacteristic(this.commandCharId)).then(e=>(this.commandCharacteristic=e,window&&(window.removeEventListener("beforeunload",this.onDestroyHandler),window.addEventListener("beforeunload",this.onDestroyHandler)),Promise.resolve())).then(()=>this.cardService.getCharacteristic(this.dataReadyId)).then(e=>e.startNotifications()).then(e=>(e.removeEventListener("characteristicvaluechanged",this.dataReadyHandler),e.addEventListener("characteristicvaluechanged",this.dataReadyHandler),this.dataReadyCharacteristic=e,Promise.resolve())).then(()=>this.cardService.getCharacteristic(this.dataReadStatusId)).then(e=>(this.dataReadStatusCharacteristic=e,this.logDeviceState(`[GATT NOTIFICATIONS]: Success! Cached characteristics, started notifications, and attached listeners. || ${new Date}`),t({code:0,message:"Device Open"}))).catch(e=>i(e)):i(this.buildDeviceErr(E)))),ae(this,"dataReadyHandler",e=>{let t=e.target.value,i=this.readByteArray(t);this.logDeviceState(`dataReady listener: ${this.convertArrayToHexString(i)}`),this.commandSent&&(this.commandRespAvailable=!0,this.commandSent=!1)}),ae(this,"cardDataHandler",e=>{let t=e.target.value;if(255!==t.getUint8(0)){let e=this.readByteArray(t);this.rawData={...this.rawData,[e[0]]:e.slice(1)}}else{if(this.maxBlockId=t.getUint8(1),this.checkNotificationLength()){if(this.initialNotification=this.rleFormats[this.rawData[0][0]]?this.decodeRLE(this.rawData[0]):this.rawData[0],this.logDeviceState(this.rawData),0===this.initialNotification[0]||1===this.initialNotification[0])return this.returnToUser(this.transactionCallback)(this.parseHidData(this.buildInitialDataArray(!0)));{let e=this.convertArrayToHexString([this.initialNotification[7],this.initialNotification[8]]);return this.findNotificationType(e)}}this.sendErrToCallback(this.throwLenErr())}}),ae(this,"findNotificationType",e=>{let t=this.buildInitialDataArray(!0);switch(e){case"0300":return this.logDeviceState("==Transaction Status=="),this.returnToUser(this.transactionStatusCallback)(this.parseTransactionStatus(t));case"0301":return this.logDeviceState("==Display Message Request=="),this.returnToUser(this.displayCallback)({displayMessage:this.bufferToUtf8(t.slice(11))});case"0302":return this.logDeviceState("==User Selection Request=="),this.logDeviceState(this.convertArrayToHexString(t)),this.returnToUser(this.transactionStatusCallback)(this.parseUserSelectionRequest(buildNotification));case"0303":return this.logDeviceState("==ARQC Message=="),this.returnToUser(this.transactionCallback)(this.parseEmvData(t,!0));case"0304":return this.logDeviceState("==Batch Data Message=="),this.returnToUser(this.transactionCallback)(this.parseEmvData(t,!1));default:this.logDeviceState(`Undocumented Notification ID: ${e}`,t),this.logDeviceState(this.convertArrayToHexString(t))}}),ae(this,"startTransaction",e=>new Promise((t,i)=>this.device.gatt.connected?this.sendCommandWithResp(this.buildEmvCommand(e||{})).then(a=>{let s=this.parseEmvCommandResponse(a);return this.logDeviceState(s),0===s.code?t(s):918!==s.code?i(this.buildDeviceErr(s)):this.setDeviceDateTime().then(()=>this.delayPromise(500)).then(()=>t(this.startTransaction(e)))}).catch(e=>i(this.buildDeviceErr(e))):i(this.buildDeviceErr(B)))),ae(this,"buildEmvCommand",e=>{let{timeout:t,cardType:i,transactionType:a,cashBack:s,currencyCode:r,reportVerbosity:n,emvOptions:o,authorizedAmount:c}=e;console.log(`timeout: ${t} || cardType: ${i} || transactionType: ${a} || emvOptions: ${o} || authorizedAmount: ${c} || cashBack: ${s} || currencyCode: ${r} || reportVerbosity: ${n}`);let h=[...this.emvCommandBase,t||60,i?this.cardTypes(i.toLowerCase()):3,void 0!==o?this.emvOptions[o.toLowerCase()]:128];return console.log("base command: ",h),h=c?h.concat(this.convertNumToAmount(c)):h.concat([0,0,0,0,1,0]),h=a?h.concat(this.transactionTypes[a.toLowerCase()]||0):h.concat(0),h=s?h.concat(this.convertNumToAmount(s)):h.concat(this.newArrayPartial(0,6)),h=r?h.concat(this.currencyCode[r.toLowerCase()]||this.currencyCode.default):h.concat([8,64]),h.push(n?this.statusVerbosity[n.toLowerCase()]||0:1),h}),ae(this,"readCommandValue",()=>new Promise(e=>this.commandCharacteristic.readValue().then(t=>e(this.readByteArray(t))))),ae(this,"readBatteryLevel",()=>new Promise(e=>this.sendCommandWithResp([69,0]).then(t=>e(t[2])))),ae(this,"checkNotificationLength",()=>Math.max(...Object.keys(this.rawData))===this.maxBlockId-1),ae(this,"sendCommandWithResp",e=>new Promise((t,i)=>this.commandCharacteristic?(this.logDeviceState(`Sending command: ${this.convertArrayToHexString(e)}`),this.commandSent=!0,this.commandCharacteristic.writeValue(Uint8Array.from(e)).then(()=>this.commandRespAvailable?Promise.resolve(!0):this.waitForDeviceResponse(15)).then(e=>(this.commandRespAvailable=!1,e?this.readCommandValue():i(this.buildDeviceErr(x)))).then(e=>t(e)).catch(e=>i(this.buildDeviceErr(e)))):i(this.buildDeviceErr(I)))),ae(this,"returnToUser",e=>t=>(this.initialNotification=null,this.maxBlockId=null,this.rawData={},e(t))),ae(this,"buildDateTimeCommand",()=>{let e=[73,34,0,0,3,12,0,28];e=e.concat(this.newArrayPartial(0,17));let t=new Date;return e.push(this.castDecToHex(t.getMonth()+1)),e.push(this.castDecToHex(t.getDate())),e.push(this.castDecToHex(t.getHours())),e.push(this.castDecToHex(t.getMinutes())),e.push(this.castDecToHex(t.getSeconds())),e.push(0),e.push(this.castDecToHex(t.getFullYear()-2008)),e=e.concat(this.newArrayPartial(0,4)),e}),ae(this,"setDeviceDateTime",()=>this.sendCommandWithResp(this.buildDateTimeCommand())),ae(this,"getKsn",()=>new Promise((e,t)=>this.device.gatt.connected?this.sendCommandWithResp([9,0]).then(e=>this.convertArrayToHexString(e.slice(2))).then(t=>e(t)):t(this.buildDeviceErr(R)))),ae(this,"getDeviceSn",()=>new Promise(e=>this.sendCommandWithResp([0,1,3]).then(e=>this.bufferToUtf8(e.slice(2))).then(t=>e(t)))),ae(this,"gatherDeviceInfo",()=>new Promise((e,t)=>{let i,a;this.readBatteryLevel().then(e=>(i=e,this.getDeviceSn())).then(t=>(a=t,e([i,a]))).catch(e=>t(e))})),ae(this,"getDeviceInfo",()=>new Promise((e,t)=>this.device.gatt.connected?this.gatherDeviceInfo().then(t=>e({deviceName:this.device.name,batteryLevel:t[0],serialNumber:t[1],isConnected:this.device.gatt.connected})).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(B)))),ae(this,"sendUserSelection",e=>new Promise((t,i)=>this.device.gatt.connected?this.sendCommandWithResp([73,8,0,0,3,2,0,2,0,e]).then(e=>(this.logDeviceState(`[User Selection Resp]: ${this.convertArrayToHexString(e)}`),t({userSelectionResponse:this.resultCodes[this.convertArrayToHexString(e.slice(4,6))]||"Unknown or undocumented result code"}))).catch(e=>i(this.buildDeviceErr(e))):i(this.buildDeviceErr(B)))),ae(this,"sendArpc",e=>new Promise((t,i)=>{if(!this.device.gatt.connected)return i(this.buildDeviceErr(B));if("string"!=typeof e&&"object"!=typeof e)return i(this.buildDeviceErr(wrongInputTypes(["string","array of numbers"])));const a="string"==typeof e?e.length/2:e.length,s=[73,a+6,0,0,3,3,0,a,..."object"==typeof e?e:this.hexToBytes(e)];return this.sendCommandWithResp(s).then(e=>{this.logDeviceState(`[Send ARPC Resp]: ${this.convertArrayToHexString(e)}`);const i=e.length>5?this.convertArrayToHexString(e.slice(4,6)):"";return t({sendArpcResponse:this.resultCodes[i]||"Unknown or undocumented result code"})})})),ae(this,"clearGattCache",()=>{window&&window.removeEventListener("beforeunload",this.onDestroyHandler),this.maxBlockId=null,this.initialNotification=null,this.rawData={},this.dataReadStatusCharacteristic=null,this.dataReadyCharacteristic=null,this.commandCharacteristic=null,this.cardDataListener=null}),ae(this,"ceaseNotifications",()=>new Promise(e=>this.cardDataListener?this.cardDataListener.stopNotifications().then(()=>(this.cardDataListener.removeEventListener("characteristicvaluechanged",this.cardDataHandler),this.dataReadStatusCharacteristic.stopNotifications())).then(()=>(this.dataReadyCharacteristic.removeEventListener("characteristicvaluechanged",this.dataReadyHandler),e())):e())),ae(this,"cancelTransaction",()=>new Promise((e,t)=>this.commandCharacteristic?this.commandCharacteristic.writeValue(this.cancelEmvCommand).then(()=>e()).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(I)))),ae(this,"closeDevice",()=>new Promise((e,t)=>this.device.gatt.connected?this.ceaseNotifications().then(()=>(this.clearGattCache(),this.disconnect())).then(()=>e({code:0,message:"Device Closed"})).catch(e=>t(this.buildDeviceErr(e))):e({code:0,message:"Device Closed"}))),ae(this,"clearSession",()=>new Promise((e,t)=>this.device&&this.device.gatt.connected?e("SCRA devices do not carry a session"):t(this.buildDeviceErr(B)))),this.transactionCallback=t.transactionCallback||t,this.displayCallback=t.displayCallback,this.transactionStatusCallback=t.transactionStatusCallback,this.userSelectionCallback=t.userSelectionCallback,this.maxBlockId=null,this.initialNotification=null,this.rawData={},this.dataReadStatusCharacteristic=null,this.dataReadyCharacteristic=null,this.commandCharacteristic=null,this.cardDataListener=null,this.cardDataNotification="0508e6f8-ad82-898f-f843-e3410cb60201",this.commandCharId="0508e6f8-ad82-898f-f843-e3410cb60200",this.dataReadyId="0508e6f8-ad82-898f-f843-e3410cb60202",this.dataReadStatusId="0508e6f8-ad82-898f-f843-e3410cb60203",this.emvOptions=Object.freeze({normal:0,bypasspin:1,forceonline:2,quickchip:128,pinbypassquickchip:129,forceonlinequickchip:130}),this.resultCodes=Object.freeze({"0000":"Success","038B":"Invalid Selection Status","038C":"Invalid Selection Result","038D":"Failure, no transaction currently in progress","038F":"Failure, transaction already in progress"}),this.emvCommandBase=[73,25,0,0,3,0,0,19],this.cancelEmvCommand=Uint8Array.of(73,6,0,0,3,4,0,0)}};function re(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ne=class extends se{constructor(e,t){super(e,t),re(this,"getCardService",()=>new Promise((e,t)=>this.getCardServiceBase(1).then(t=>e(t)).catch(e=>t(this.buildDeviceErr(e))))),re(this,"requestCardSwipe",()=>new Promise((e,t)=>this.device.gatt.connected?e({code:0,message:d}):this.getCardServiceBase(1).then(()=>e({code:0,message:d})).catch(e=>t(this.buildDeviceErr(e))))),this.deviceType="eDynamo"}};function oe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ce=class extends se{constructor(e,t){super(e,t),oe(this,"getCardService",()=>new Promise((e,t)=>this.getCardServiceBase().then(t=>e(t)).catch(e=>t(this.buildDeviceErr(e))))),oe(this,"requestCardSwipe",()=>new Promise((e,t)=>this.device.gatt.connected?this.sendCommandWithResp(this.setHeadAlwaysOn).then(i=>0===parseInt(i)?e({code:0,message:d}):t(this.buildDeviceErr(M))).catch(e=>t(e)):this.getCardServiceBase().then(()=>this.sendCommandWithResp(this.setHeadAlwaysOn)).then(i=>0===parseInt(i)?e({code:0,message:d}):t(this.buildDeviceErr(M))).catch(e=>t(e)))),this.setHeadAlwaysOn=[88,1,1],this.deviceType="tDynamo"}};const he=e=>()=>Promise.resolve(`${e?"SCRA":"PinPad"} devices do not use this command`);class de{constructor(e){let{getCardService:t,startTransaction:i,cancelTransaction:a,sendCommandWithResp:s,clearSession:r,closeDevice:n,getDeviceInfo:o,requestCardSwipe:c,isDeviceConnected:h,disconnect:d,requestPinEntry:l,setDisplayMessage:u,sendUserSelection:m,sendArpc:v}=e;this.openDevice=t,this.startTransaction=i,this.cancelTransaction=a,this.sendCommand=s,this.clearSession=r,this.closeDevice=n,this.deviceInfo=o,this.requestCardSwipe=c,this.isDeviceOpen=h,this.forceDisconnect=d,this.requestPinEntry=l||he(!0),this.setDisplayMessage=u||he(!0),this.sendUserSelection=m||he(),this.sendArpcResponse=v||(()=>Promise.resolve("Feature Pending Completion"))}}const le={eDynamo:(e,t)=>new ne(e,t),tDynamo:(e,t)=>new ce(e,t),dynaProGo:(e,t)=>new Y(e,t),[l]:(e,t)=>new _(e,t)},ue=(e,t,i)=>({id:e.id,name:e.name,deviceType:i,deviceInterface:new de(le[i](e,t))}),me=new RegExp(/^eDynamo-/),ve=new RegExp(/^tDynamo-/),pe=new RegExp(/^DPMini/),ge=new RegExp(/^DPG/),fe=(e,t)=>{if(t){const e=(e=>{const t=["dynaProGo",l,"eDynamo","tDynamo"];let i="";for(let a=0;a<t.length;a++)if(e.toLowerCase()===t[a].toLowerCase()){i=t[a];break}return i})(t);if(console.log("[!!]: ",e),e)return e}return i=e,ve.test(i)?"tDynamo":me.test(i)?"eDynamo":ge.test(i)?"dynaProGo":pe.test(i)?l:"";var i},Ce=(e,t,i)=>new Promise((a,n)=>{if("object"==typeof e&&void 0===e.transactionCallback)return n("When providing multiple callbacks in an object, 'transactionCallback' must be provided");e=(e=>{const t="function"==typeof(e=e||(e=>{console.warn("Callback not provided to 'scanForDevices' function. Please provide at least one callback function to this method"),console.log("transactionCallback data: ",e)})),i=i=>e[i]?e[i]:t?e:e.transactionCallback;return e.errorCallback=e.errorCallback||(e=>console.error("[MagensaBluetooth Internal Error]: ",e)),e.transactionStatusCallback=e.transactionStatusCallback||i("transactionStatusCallback"),e.userSelectionCallback=e.userSelectionCallback||i("userSelectionCallback"),e.displayCallback=e.displayCallback||i("displayCallback"),e.disconnectHandler=e.disconnectHandler||i("transactionCallback"),e})(e);const o=t?(e=>({filters:[{namePrefix:e}],optionalServices:["0508e6f8-ad82-898f-f843-e3410cb60104","0508e6f8-ad82-898f-f843-e3410cb60103","0508e6f8-ad82-898f-f843-e3410cb60101","0508e6f8-ad82-898f-f843-e3410cb60202","device_information"],keepRepeatedDevices:!1,acceptAllAdvertisements:!1}))(t):r;return navigator.bluetooth.requestDevice(o).then(t=>{const s=fe(t.name,i);return s?a(ue(t,e,s)):(r=t,new Promise((e,t)=>{let i;return r.gatt.connect().then(e=>e.getPrimaryService("device_information")).then(e=>e.getCharacteristic("model_number_string")).then(e=>e.readValue()).then(e=>(i=new TextDecoder("utf-8").decode(e).trim(),Promise.resolve(r.gatt.disconnect()))).then(()=>e(i)).catch(i=>i.code===A.errorCode&&i.name===A.errorName&&i.message.includes("0000180a-0000-1000-8000-00805f9b34fb")?r.gatt.connected?Promise.resolve(r.gatt.disconnect()).then(()=>e("dynaProGo")):e("dynaProGo"):t(i))})).then(i=>i?a(ue(t,e,i)):n("Selected device is not supported")).catch(e=>n(e));var r}).catch(e=>n("object"==typeof e?new s(e):"Selected device is not supported"))})}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZXJyb3JIYW5kbGVyL2FwaUVycm9yLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2NvbmZpZ3VyYXRpb25zL2luZGV4LmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3V0aWxzL2luZGV4LmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3BhcnNlcnMvc3dpcGVQYXJzZXIuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3BhcnNlcnMvZW12UGFyc2VyLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2Vycm9ySGFuZGxlci9sZW5ndGhFcnJvci5qcyIsIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC8uL3NyYy9lcnJvckhhbmRsZXIvZGV2aWNlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZXJyb3JIYW5kbGVyL2luZGV4LmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2Vycm9ySGFuZGxlci9lcnJDb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZGV2aWNlcy9iYXNlQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvdXRpbHMvcGluVXRpbHMuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvcGFyc2Vycy9waW5Db25maWd1cmF0aW9uLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3BhcnNlcnMvcGluU3RhdHVzUGFyc2VyLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2RldmljZXMvcGluUGFkLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2RldmljZXMvZHluYVByb01pbmkuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZGV2aWNlcy9keW5hUHJvR28uanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvcGFyc2Vycy9zY3JhU3dpcGVQYXJzZXIuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvcGFyc2Vycy90cnhTdGF0dXNQYXJzZXIuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvcGFyc2Vycy9zY3JhRW12UGFyc2VyLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2RldmljZXMvc2NyYS5qcyIsIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC8uL3NyYy9kZXZpY2VzL2VEeW5hbW8uanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZGV2aWNlcy90RHluYW1vLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3V0aWxzL2luc3RhbmNpYXRlRGV2aWNlLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3V0aWxzL2lkZW50aWZ5RGV2aWNlLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2RldmljZUVudHJ5LmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJBcGlFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiY29kZSIsInN1cGVyIiwidGhpcyIsImFsbERldmljZUNvbmZpZyIsImZpbHRlcnMiLCJzZXJ2aWNlcyIsIm9wdGlvbmFsU2VydmljZXMiLCJrZWVwUmVwZWF0ZWREZXZpY2VzIiwiYWNjZXB0QWxsQWR2ZXJ0aXNlbWVudHMiLCJVdGlsaXRpZXMiLCJsb2dJbmZvIiwibG9nRXZlbnQiLCJDdXN0b21FdmVudCIsImJ1YmJsZXMiLCJkZXRhaWwiLCJkaXNwYXRjaEV2ZW50IiwiYXJyYXkiLCJBcnJheSIsImZyb20iLCJieXRlIiwidG9TdHJpbmciLCJzbGljZSIsImpvaW4iLCJ0b1VwcGVyQ2FzZSIsInR3b0J5dGVzIiwiYXJyYXlCdWZmZXIiLCJUZXh0RGVjb2RlciIsImRlY29kZSIsIlVpbnQ4QXJyYXkiLCJudW0iLCJwYXJzZUludCIsInJlcGV0aXRpb25zIiwiZmlsbCIsImRhdGFWaWV3IiwidmFsdWVBcnJheSIsImJ5dGVMZW5ndGgiLCJwdXNoIiwiZ2V0VWludDgiLCJoZXhTdHJpbmciLCJhc2NpaVJlc3AiLCJsZW5ndGgiLCJzdWJzdHIiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJ0cmltIiwiaGV4U3RyIiwiYnl0ZXMiLCJjdXJyZW50IiwiYXJyYXlTZWdtZW50IiwicmV0dXJuU2VnbWVudCIsIm5leHRJbmRleCIsImluaXRpYWxMZW5ndGgiLCJuZXdBcnJheVBhcnRpYWwiLCJjaGVja0ZvclJsZSIsInJldHVybkFycmF5IiwiTWF0aCIsIm1pbiIsImtleXMiLCJyYXdEYXRhIiwibWF4QmxvY2tJZCIsImNvbmNhdCIsImNoZWNrUmxlIiwicmxlRm9ybWF0cyIsImluaXRpYWxOb3RpZmljYXRpb24iLCJkZWNvZGVSTEUiLCJjdXJyZW5jeVN0cmluZyIsImN1cnJlbmN5IiwidG9Mb3dlckNhc2UiLCJzdHJpbmdOdW0iLCJyZXR1cm5BcnIiLCJkZWxheSIsInBhc3NlZFZhbHVlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZnJlZXplIiwiMCIsIlN3aXBlUGFyc2VyIiwic3RyaW5nRGF0YSIsImJ1ZmZlclRvVXRmOCIsImluZGV4T2YiLCJmb3JtYXR0ZWRTdHJpbmciLCJzcGxpdEV4cFBBTiIsIm1hc2tlZFBBTiIsIkxhc3Q0IiwiZXhwaXJhdGlvbkRhdGUiLCJzZXJ2aWNlQ29kZSIsImV4cFBBTiIsInJlcGxhY2UiLCJzcGxpdCIsImV4cCIsImZvcm1hdHRlZEV4cCIsInN3aXBlTGlzdGVuaW5nIiwiZHBNaW5pIiwiY29uZmlnU3RyIiwibm9TZXNzaW9uVG9DbGVhciIsImdhdHRCdXN5Iiwic3VjY2Vzc2Z1bENsb3NlIiwiY2FyZFR5cGVBbGwiLCJjYXJkVHlwZXNPYmoiLCJFbXZQYXJzZXIiLCJkYXRhIiwiaXNNc3IiLCJpVGFnIiwiYnl0ZVZhbHVlIiwibGVuZ3RoVmFsdWUiLCJkYXRhTGVuZ3RoIiwicmVzdWx0IiwiaVRMViIsImJUYWciLCJ0YWdCeXRlcyIsIlRhZ0J1ZmZlciIsImJNb3JlVGFnQnl0ZXMiLCJtb3JlVGFnQnl0ZXNGbGFnMSIsIm1vcmVUYWdCeXRlc0ZsYWcyIiwiY29udmVydEFycmF5VG9IZXhTdHJpbmciLCJtb3JlTGVuZ3RoRmxhZyIsIm5MZW5ndGhCeXRlcyIsIm9uZUJ5dGVMZW5ndGhNYXNrIiwiaUxlbiIsInRhZ0J5dGUiLCJsZW4iLCJ2YWx1ZUJ5dGVzIiwiaGV4T3JBc2NpaUZvcm1hdHRlciIsImNvbnN0cnVjdGVkRmxhZyIsInRyeFN0YXR1c1RvU3RyaW5nIiwiaGV4VG9Bc2NpaSIsInN1YnN0cmluZyIsIkxlbmd0aEVycm9yIiwiRGV2aWNlRXJyb3IiLCJFcnJvckhhbmRsZXIiLCJjYWxsYmFja3MiLCJlcnIiLCJET01FeGNlcHRpb24iLCJlcnJvckNhbGxiYWNrIiwibm90Rm91bmRPYmoiLCJlcnJvckNvZGUiLCJlcnJvck5hbWUiLCJhcGlOZXR3b3JrRXJyIiwiZGV2aWNlTm90Rm91bmQiLCJnYXR0U2VydmVyTm90Q29ubmVjdGVkIiwiY29tbWFuZE5vdFNlbnQiLCJkZXZpY2VOb3RPcGVuIiwiY29tbWFuZE5vdFNlbnRGcm9tSG9zdCIsInJlYWRGYWlsZWQiLCJyZXNwb25zZU5vdFJlY2VpdmVkIiwiZ2V0U2VydmljZUZhaWwiLCJjb21tYW5kTm90QWNjZXB0ZWQiLCJEZXZpY2VCYXNlIiwiZGV2aWNlIiwiY2FyZFR5cGVTdHIiLCJkZXZpY2VUeXBlIiwicmVqZWN0IiwibG9nRGV2aWNlU3RhdGUiLCJEYXRlIiwiZ2F0dCIsImNvbm5lY3QiLCJ0aGVuIiwic2VydmVyIiwiZ2F0dFNlcnZlciIsImJ1aWxkRGV2aWNlRXJyIiwiY29ubmVjdGVkIiwiZGlzY29ubmVjdCIsInNlcnZpY2VJbmRleCIsImZpbmRQcmltYXJ5U2VydmljZSIsInNlcnZpY2UiLCJjYXRjaCIsImdldFByaW1hcnlTZXJ2aWNlIiwiZGV2aWNlVVVJRHMiLCJjYXJkU2VydmljZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJkaXNjb25uZWN0SGFuZGxlciIsIm9wdGlvbmFsSW5kZXgiLCJ0cnlUb0Nvbm5lY3QiLCJ0cnlDb3VudCIsImlubmVyUmVzb2x2ZSIsImlubmVyUmVqZWN0IiwiY2FjaGVDYXJkU2VydmljZUJhc2UiLCJjYWNoZVNlcnZpY2VSZXNwIiwiY2xlYXJHYXR0Q2FjaGUiLCJtYXhUcmllcyIsIndhaXRGb3JSZXNwb25zZSIsInRyeU51bWJlciIsImNvbW1hbmRSZXNwQXZhaWxhYmxlIiwiZXZlbnQiLCJkaXNjb25uZWN0Q2FsbGJhY2siLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic3RhdHVzVmVyYm9zaXR5IiwiY3VycmVuY3lDb2RlIiwidHJhbnNhY3Rpb25UeXBlcyIsIlBpblV0aWxzIiwiY2FsbEJhY2tzIiwiYmluYXJ5TnVtIiwibnVsbFRlcm1pbmF0ZWRBcnJheSIsInRhcmdldEluZGV4IiwibWF4TGVuIiwibWluTGVuIiwibWF4TGVuZ3RoIiwibWluTGVuZ3RoIiwibGFuZ3VhZ2VTZWxlY3Rpb24iLCJ3YWl0TWVzc2FnZSIsInZlcmlmeVBpbiIsInBpbkJsb2NrRm9ybWF0IiwibGFuZ3VhZ2VQcm9tcHRzIiwiYmluYXJ5UmVzdWx0IiwiZGlzYWJsZWQiLCJQYXJzZVBpbkNvbmZpZyIsImNvbmZpZ0FyciIsImZpcnN0RGV2aWNlQ29udHJvbEJ5dGUiLCJkZWNpbWFsVG9CaW5hcnkiLCJzZWNvbmREZXZpY2VDb250cm9sQnl0ZSIsIm1hc2tDb25maWd1cmF0aW9uQnl0ZSIsIm1zckNvbmZpZ3VyYXRpb25CeXRlIiwibWFza0NoYXJhY3RlciIsImZpbmRNYXNrQ2hhcmFjdGVyIiwibGVhZGluZ1VubWFza2VkTGVuZ3RoIiwidHJhaWxpbmdVbm1hc2tlZExlbmd0aCIsImVtdkwySWNzQ29uZmlnIiwiZW12TDJDb25maWdPcHRpb25zIiwiY29udGFjdGxlc3NDb25maWciLCJjb250YWN0bGVzc0J5dGUiLCJjb250YWN0bGVzc1N1cHBvcnQiLCJlbmFibGVkQnJhbmRzIiwiY29udGFjdGxlc3NHdWlDb250cm9scyIsIm51bUNoYXIiLCJudW1DaGFyVG9IZXgiLCJudW1DaGFyVG9Bc2NpaSIsImRldmljZUNvbnRyb2xCeXRlIiwicmVxdWlyZU11dHVhbEF1dGgiLCJzdHJpbmdOdW1Ub0Jvb2wiLCJtc3JFbmNyeXB0aW9uVmFyaWFudCIsImlzQ2xlYXJUZXh0RW5hYmxlZCIsImlzQmVlcGVyTW9kZUVuYWJsZWQiLCJpc0JpdG1hcExvY2tlZCIsImlzQ29uZmlndXJhdGlvbkxvY2tlZCIsImRldmljZUN0cmxCeXRlIiwiaXNBcnBjTWFjRW5hYmxlZCIsImlzRmluYW5jaWFsSWNjQ2FyZFR5cGVSZXBvcnRpbmdFbmFibGVkIiwiYXJxY0JhdGNoRGF0YU91dHB1dEZvcm1hdCIsIm1hc2tDb25maWdCeXRlIiwiaXNJc29NYXNrRW5hYmxlZCIsImlzQ2hlY2tEaWdpdEVuYWJsZWQiLCJpc01zMlBvaW50MEVuYWJsZWQiLCJtc3JDb25maWdCeXRlIiwiaXNBQU1WQWNhcmRFbmFibGVkIiwidHJhY2szRGF0YSIsInRyYWNrRGF0YU9wdGlvbnMiLCJ0cmFjazJEYXRhIiwidHJhY2sxRGF0YSIsIlBpblN0YXR1c1BhcnNlciIsImNhcmRIb2xkZXJTdGF0dXNCeXRlIiwiZW12Q2FyZGhvbGRlclN0YXR1cyIsImNhcmRob2xkZXJTdGF0dXNJZHMiLCJzdGF0dXNJZCIsIm9wZXJhdGlvblN0YXR1cyIsImRpc3BsYXlTdGF0dXMiLCJmaW5kT3BlcmF0aW9uU3RhdHVzIiwiY29tbWFuZFJlc3AiLCJjb25zb2xlIiwibG9nIiwicmVxdWVzdGVkU24iLCJzZXJpYWxOdW1iZXIiLCJmaW5kTnVsbFRlcm1pbmF0ZWRTdHJpbmciLCJnZXRTZXJpYWxOdW1iZXIiLCJyZXF1ZXN0ZWRLc24iLCJrc24iLCJnZXRLc25BdmFpbGFibGUiLCJiaWdCbG9ja0RhdGEiLCJhcnFjQXJyaXZpbmciLCJhcnFjVG90YWxMZW4iLCJyZWFkVHdvQnl0ZUxlbmd0aCIsImJhdGNoRGF0YUFycml2aW5nIiwiYmF0Y2hUb3RhbExlbiIsInRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2siLCJidWZmZXJUeXBlIiwiYnVmZmVyVHlwZXMiLCJhcnFjIiwiYnVpbGRJbml0aWFsRGF0YUFycmF5IiwiZGF0YUZvckFycWMiLCJjYXJkRGF0YU9iaiIsImFycWNEYXRhIiwiYXJxY0RhdGFQYXJzZWQiLCJ0bHZQYXJzZXIiLCJiYXRjaCIsImRhdGFGb3JCYXRjaCIsInRyYW5zYWN0aW9uSGFzU3RhcnRlZCIsInBhcnNlZEJhdGNoRGF0YSIsImlzU2lnbmF0dXJlUmVxdWlyZWQiLCJmaW5kIiwidGFnIiwiYmF0Y2hEYXRhIiwiYmF0Y2hEYXRhUGFyc2VkIiwic2lnbmF0dXJlUmVxdWlyZWQiLCJ0cmFuc2FjdGlvbkNhbGxiYWNrIiwiaGFuZGxlQXJxY0JpZ0Jsb2NrRmluaXNoIiwiaGFuZGxlQmF0Y2hCaWdCbG9ja0ZpbmlzaCIsImNhcmRob2xkZXJSZXNwIiwiZmluZEVtdkNhcmRob2xkZXJTdGF0dXMiLCJhbW91bnRDb25maXJtZWQiLCJhcHBsaWNhdGlvbk9yTGFiZWxOYW1lIiwibWV0aG9kU2VsZWN0ZWQiLCJ0bHZEYXRhIiwidW5kb2N1bWVudGVkRGF0YSIsImNhcmRTdGF0dXMiLCJjYXJkVHlwZSIsImNhcmRUeXBlc0VudW0iLCJhY2tSZXNwIiwiQUNLU1RTIiwiY29tbWFuZFR5cGUiLCJwaW5Db21tYW5kSWRzIiwiZGV2aWNlUmVzcCIsImRldmljZVN0YXRlIiwic2Vzc2lvblN0YXRlIiwicGFyc2VTZXNzaW9uU3RhdGUiLCJkZXZpY2VTdGF0dXMiLCJwYXJzZURldmljZVN0YXR1cyIsImRldmljZUNlcnRTdGF0dXMiLCJwYXJzZUNlcnRTdGF0dXMiLCJoYXJkd2FyZVN0YXR1cyIsInBhcnNlSGFyZHdhcmVTdGF0dXMiLCJhZGRpdGlvbmFsSW5mbyIsInBhcnNlQWRkaXRpb25hbEluZm8iLCJiaW5hcnlTdHJpbmciLCJwb3dlckRpZENoYW5nZSIsImNhcmREYXRhSXNBdmFpbGFibGUiLCJwYW5QYXJzZWRGcm9tQ2FyZCIsImV4dGVybmFsUGFuU2VudCIsImFtb3VudFdhc1NlbnQiLCJtc3JDcmxDZXJ0RXhpc3RzIiwicGluQ3JsQ2VydEV4aXN0cyIsIm1mZ1VuYmluZENlcnRFeGlzdHMiLCJtc3JDYUNlcnRFeGlzdHMiLCJwaW5DYUNlcnRFeGlzdHMiLCJkZXZpY2VDYUNlcnRFeGlzdHMiLCJkZXZpY2VDZXJ0RXhpc3RzIiwicGluS2V5U3RhdHVzIiwicGluS2V5U3RhdHVzRW51bSIsIm1zcktleVN0YXR1cyIsIm1zcktleVN0YXR1c0VudW0iLCJ0YW1wZXJEZXRlY3RlZCIsImlzQXV0aGVudGljYXRlZCIsImRldmljZUVycm9yRGV0ZWN0ZWQiLCJJRTNfb25seSIsIlNSRUQiLCJNYWdIZWFkSXNQcm9ncmFtbWVkIiwidGFtcGVyU2Vuc29yc0FyZUFjdGl2ZSIsIklDQ19BY3F1aXJlck1hc3RlcktleUlzSW5qZWN0ZWQiLCJJQ0NfU2Vzc2lvbktleUlzQWN0aXZlIiwiQ0FQS19FbXZEYXRhYmFzZUlzQ29ycnVwdGVkIiwiRW12VGVybWluYWxEYXRhYmFzZUlzQ29ycnVwdGVkIiwiY2FyZElzUHJlc2VudEluQ2hpcENhcmRDb25uZWN0b3IiLCJwYXJ0aWFsTm90aWZpY2F0aW9uIiwidHJhY2tLZXkiLCJjYXJkRGF0YUlkcyIsInN0YXR1c0VudW0iLCJvayIsImZvcm1hdEV4cFBBTiIsIm1hZ25lUHJpbnRTdGF0dXMiLCJjb252ZXJ0U3RhdHVzVG9TdHJpbmciLCJwaW5SZXNwIiwicGluRGF0YSIsInBpbktzbiIsImVuY3J5cHRlZFBpbkJsb2NrIiwic2VsZWN0aW9uUmVzcCIsImRldmljZUtleXMiLCJrZXlQcmVzc2VkIiwicGluRGlzcGxheU1lc3NhZ2VzIiwiZW1wdHkiLCJlcnJvciIsIlBpblBhZCIsInBhcmVudFJlc29sdmUiLCJwYXJlbnRSZWplY3QiLCJjb25uZWN0QW5kQ2FjaGUiLCJnZXRDaGFyYWN0ZXJpc3RpYyIsImRldmljZVRvSG9zdExlbiIsImNoYXJhY3RlcmlzdGljIiwic3RhcnROb3RpZmljYXRpb25zIiwiZGF0YVdhdGNoZXIiLCJjYXJkRGF0YUxpc3RlbmVyIiwiZGV2aWNlVG9Ib3N0RGF0YSIsInJlY2VpdmVEYXRhQ2hhciIsImRldmljZUZyb21Ib3N0TGVuIiwic2VuZExlblRvRGV2aWNlIiwiZGV2aWNlRnJvbUhvc3REYXRhIiwiY29tbWFuZENoYXJhY3RlcmlzdGljIiwib25EZXN0cm95SGFuZGxlciIsImRlbGF5UHJvbWlzZSIsImRhdGFFdmVudCIsInRhcmdldCIsImNvbW1hbmRTZW50IiwicmVhZENvbW1hbmRSZXNwIiwicmVhZFZhbHVlIiwicmVhZFZhbHVlSGFuZGxlciIsInJlYWRCeXRlQXJyYXkiLCJyZXBvcnRJZHMiLCJyZXNwb25zZUFjayIsInBhcnNlQWNrUmVzcG9uc2UiLCJkZXZpY2VTdGF0ZVJlcG9ydCIsImhhbmRsZURldmljZVN0YXRlUmVwb3J0IiwiY2FyZFN0YXR1c1JlcG9ydCIsImhhbmRsZUNhcmRTdGF0dXNSZXBvcnQiLCJjYXJkRGF0YVJlcG9ydCIsImhhbmRsZUNhcmREYXRhUmVwb3J0IiwiaGFuZGxlQ2FyZGhvbGRlclN0YXR1c1JlcG9ydCIsImVtdkNvbXBsZXRpb24iLCJoYW5kbGVFbXZDb21wbGV0aW9uIiwiaGFuZGxlQmlnQmxvY2tEYXRhIiwiZ2V0S3NuIiwiZm9ybWF0S3NuQW5kU24iLCJyZXF1ZXN0U24iLCJmb3JtYXRTZXJpYWxOdW1iZXIiLCJkZXZpY2VDb25maWciLCJwYXJzZURldmljZUNvbmZpZ3VyYXRpb24iLCJwaW5SZXNwb25zZSIsInBhcnNlUGluUmVzcG9uc2UiLCJzZWxlY3Rpb25SZXNwb25zZSIsInBhcnNlQ2FyZGhvbGRlclJlc3BvbnNlIiwiZGlzcGxheVJlc3AiLCJwYXJzZUVtdkNvbXBsZXRpb24iLCJoYW5kbGVCaWdCbG9ja0JlZ2luIiwibWF4IiwiaGFuZGxlQmlnQmxvY2tGaW5pc2giLCJwYXJzZUVtdkNhcmRob2xkZXJJbnRlcmFjdGlvblN0YXR1cyIsInBhcnNlQ2FyZFN0YXR1c1JlcG9ydCIsInN3aXBlSGFzQmVndW4iLCJzZW5kQ29tbWFuZFdpdGhSZXNwIiwic2VuZEVyclRvQ2FsbGJhY2siLCJkYXRhR2F0aGVyZWQiLCJzd2lwZURhdGEiLCJwYXJzZURldmljZVN0YXRlUmVwb3J0IiwicGFyc2VDYXJkRGF0YSIsInN3aXBlT3B0aW9ucyIsImNsZWFyU2Vzc2lvbkNtZCIsImJ1aWxkU3dpcGVDb21tYW5kIiwicmVzcCIsImVtdk9wdGlvbnMiLCJidWlsZEVtdkNvbW1hbmQiLCJwaW5PcHRpb25zIiwiYnVpbGRQaW5Db21tYW5kIiwiZGlzcGxheVR5cGUiLCJ0aW1lb3V0IiwibWF4UGluTGVuZ3RoIiwibWluUGluTGVuZ3RoIiwidG9uZUNob2ljZSIsInBpbkRpc3BsYXlPcHRpb25zIiwicGluQ21kIiwiZmluZFBpbkxlbmd0aCIsImJ1aWxkUGluT3B0aW9uc0J5dGUiLCJpc0ZhbGxiYWNrIiwiZGlzcGxheVR5cGVzIiwicGluVGltZW91dCIsInRyYW5zYWN0aW9uVHlwZSIsImNhc2hCYWNrIiwiaXNRdWlja0NoaXAiLCJhdXRob3JpemVkQW1vdW50IiwiY29tbWFuZCIsImNhcmRUeXBlcyIsImNvbnZlcnROdW1Ub0Ftb3VudCIsIndyaXRlQ29tbWFuZCIsIndyaXRlVmFsdWUiLCJvZiIsInNlbmRQaW5Db21tYW5kIiwid2FpdEZvckRldmljZVJlc3BvbnNlIiwid2FpdFJlc3AiLCJ0cnlDb21tYW5kQWdhaW4iLCJyZXNwb25zZSIsInN0b3BOb3RpZmljYXRpb25zIiwiY2xlYXJTZXNzaW9uIiwiY2xvc2VQaW5EZXZpY2UiLCJlbmRTZXNzaW9uIiwicmVxdWVzdENhcmRTd2lwZSIsIkRwTWluaSIsImdhdGhlckRldmljZUluZm8iLCJkZXZpY2VJbmZvIiwiY2hlY2tJZkRldmljZUlkbGUiLCJnZXREZXZpY2VJbmZvUHJvY2VlZCIsImRldmljZU5hbWUiLCJpc0Nvbm5lY3RlZCIsIndhaXRGb3JTbiIsInJldHVyblNuIiwiZ2V0RGV2aWNlSW5mb0Jhc2UiLCJEeW5hUHJvR28iLCJkaXNwbGF5T3B0aW9ucyIsImJ1aWxkRGlzcGxheUNtZCIsImNtZCIsImRpc3BsYXlUaW1lIiwibWVzc2FnZUlkIiwiZmllbGROYW1lIiwiU2NyYVN3aXBlUGFyc2VyIiwib2Zmc2V0IiwidHJhY2sxRGVjb2RlU3RhdHVzIiwidHJhY2syRGVjb2RlU3RhdHVzIiwidHJhY2szRGVjb2RlU3RhdHVzIiwidHJhY2sxTGVuIiwidHJhY2syTGVuIiwidHJhY2szTGVuIiwiY2FyZEVuY29kZVR5cGUiLCJ0cmFjazFTdGFydCIsInRyYWNrMUVuZCIsInRyYWNrMlN0YXJ0IiwidHJhY2syRW5kIiwidHJhY2szU3RhcnQiLCJ0cmFjazNFbmQiLCJtYWduZVByaW50U3RhdHVzU3RhcnQiLCJtYWduZVByaW50U3RhdHVzRW5kIiwibWFnbmVQcmludExlbiIsIm1hZ25lUHJpbnRTdGFydCIsIm1hZ25lUHJpbnRFbmQiLCJzZXJpYWxOdW1iZXJTdGFydCIsInNlcmlhbE51bWJlckVuZCIsImRldmljZUVuY1N0YXR1c1N0YXJ0IiwiZGV2aWNlRW5jU3RhdHVzRW5kIiwia3NuU3RhcnQiLCJrc25FbmQiLCJ0cmFjazFNYXNrZWRMZW4iLCJ0cmFjazJNYXNrZWRMZW4iLCJ0cmFjazNNYXNrZWRMZW4iLCJ0cmFjazFNYXNrZWRTdGFydCIsInRyYWNrMU1hc2tlZEVuZCIsInRyYWNrMk1hc2tlZFN0YXJ0IiwidHJhY2syTWFza2VkRW5kIiwidHJhY2szTWFza2VkU3RhcnQiLCJ0cmFjazNNYXNrZWRFbmQiLCJlbmNTZXNzaW9uSWRTdGFydCIsImVuY1Nlc3Npb25JZEVuZCIsInRyYWNrMUFic0xlbiIsInRyYWNrMkFic0xlbiIsInRyYWNrM0Fic0xlbiIsIm1hZ25lUHJpbnRBYnNMZW4iLCJ0cmFja1Bvc2l0aW9ucyIsInRyYWNrSW5kaWNlcyIsInRyYWNrSW5mbyIsImRhdGFOYW1lcyIsImZvckVhY2giLCJkYXRhUHJvcCIsInRyYWNrRGF0YSIsImZvcm1hdFRyYWNrMk1hc2tlZCIsImZvcm1hdFRyYWNrV2l0aERlY29kZSIsImluY2x1ZGVzIiwidHJhY2syTWFza2VkIiwiZGVjb2RlU3RhdHVzVmFsdWUiLCJ0cmFja1ZhbHVlIiwiVHJ4U3RhdHVzUGFyc2VyIiwibm90aWZpY2F0aW9uIiwiZGF0YUxlbiIsIm5ld05vdGlmaWNhdGlvbiIsInBhcnNlTm90aWZpY2F0aW9ucyIsInRocm93TGVuRXJyIiwibm90aWZpY2F0aW9uU2xpY2UiLCJuZXdOb3RpZmljYXRpb25TbGljZSIsIm5vdGlmaWNhdGlvbkxlbmd0aCIsIm5vdGlmaWNhdGlvbkNvbnRlbnQiLCJ0cnhTdGF0dXNDb2RlIiwidHJ4UHJvZ3Jlc3NDb2RlIiwidHJhbnNhY3Rpb25TdGF0dXMiLCJzdGF0dXNDb2RlIiwic3RhdHVzTXNnIiwiVHJ4U3RhdHVzRW51bSIsInByb2dyZXNzQ29kZSIsInByb2dyZXNzTXNnIiwiVHJ4UHJvZ3Jlc3NJbmRpY2F0b3IiLCJTY3JhRW12UGFyc2VyIiwiZW12RGF0YSIsImlzQXJxYyIsInJlc3VsdENvZGUiLCJlbXZSZXN1bHRDb2RlcyIsInNlbGVjdGlvblJlcXVlc3QiLCJ1c2VyU2VsZWN0aW9uUmVxdWVzdCIsInNlbGVjdGlvblR5cGUiLCJ0aW1lUmVtYWluaW5nIiwibWVudUl0ZW1zIiwiZHVrcHRGYWlsdXJlQmFzZSIsImludmFsaWRCYXNlIiwiU2NyYSIsImNhcmREYXRhTm90aWZpY2F0aW9uIiwiY2FyZERhdGFIYW5kbGVyIiwiY29tbWFuZENoYXJJZCIsImRhdGFSZWFkeUlkIiwiZGF0YVJlYWR5SGFuZGxlciIsImRhdGFSZWFkeUNoYXJhY3RlcmlzdGljIiwiZGF0YVJlYWRTdGF0dXNJZCIsImRhdGFSZWFkU3RhdHVzQ2hhcmFjdGVyaXN0aWMiLCJldmVudFZhbHVlIiwiZm9ybWF0dGVkRXZlbnRWYWx1ZSIsIm5vdGlmaWNhdGlvbkFycmF5IiwiY2hlY2tOb3RpZmljYXRpb25MZW5ndGgiLCJyZXR1cm5Ub1VzZXIiLCJwYXJzZUhpZERhdGEiLCJub3RpZmljYXRpb25JZCIsImZpbmROb3RpZmljYXRpb25UeXBlIiwiYnVpbHROb3RpZmljYXRpb24iLCJwYXJzZVRyYW5zYWN0aW9uU3RhdHVzIiwiZGlzcGxheUNhbGxiYWNrIiwiZGlzcGxheU1lc3NhZ2UiLCJwYXJzZVVzZXJTZWxlY3Rpb25SZXF1ZXN0IiwiYnVpbGROb3RpZmljYXRpb24iLCJwYXJzZUVtdkRhdGEiLCJwYXJzZUVtdkNvbW1hbmRSZXNwb25zZSIsInNldERldmljZURhdGVUaW1lIiwic3RhcnRUcmFuc2FjdGlvbiIsInJlcG9ydFZlcmJvc2l0eSIsImVtdkNvbW1hbmRCYXNlIiwicmVhZENvbW1hbmRWYWx1ZSIsInNwZWNpZmllZENhbGxiYWNrIiwicmV0dXJuT2JqIiwiZGF0ZVRpbWVDb21tYW5kIiwiY2FzdERlY1RvSGV4IiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsImdldEZ1bGxZZWFyIiwiYnVpbGREYXRlVGltZUNvbW1hbmQiLCJmb3JtYXR0ZWRWYWx1ZSIsImJhdHRlcnkiLCJzZXJpYWxOdW0iLCJyZWFkQmF0dGVyeUxldmVsIiwicmVzcEJhdHRlcnkiLCJnZXREZXZpY2VTbiIsInJlc3BTbiIsImJhdHRlcnlMZXZlbCIsInNlbGVjdGlvblJlc3VsdCIsInVzZXJTZWxlY3Rpb25SZXNwb25zZSIsInJlc3VsdENvZGVzIiwiYXJwY1Jlc3AiLCJ3cm9uZ0lucHV0VHlwZXMiLCJhcnBjQ21kIiwiaGV4VG9CeXRlcyIsInNlbmRBcnBjUmVzcG9uc2UiLCJjYW5jZWxFbXZDb21tYW5kIiwiY2Vhc2VOb3RpZmljYXRpb25zIiwidXNlclNlbGVjdGlvbkNhbGxiYWNrIiwiRUR5bmFtbyIsImdldENhcmRTZXJ2aWNlQmFzZSIsIlREeW5hbW8iLCJzZXRIZWFkQWx3YXlzT24iLCJzZXRIZWFkT3BlblJlc3AiLCJjb21tYW5kTm90VXNlZCIsImlzU2NyYSIsIkRldmljZUludGVyZmFjZSIsImdldENhcmRTZXJ2aWNlIiwiY2FuY2VsVHJhbnNhY3Rpb24iLCJjbG9zZURldmljZSIsImdldERldmljZUluZm8iLCJpc0RldmljZUNvbm5lY3RlZCIsInJlcXVlc3RQaW5FbnRyeSIsInNldERpc3BsYXlNZXNzYWdlIiwic2VuZFVzZXJTZWxlY3Rpb24iLCJzZW5kQXJwYyIsIm9wZW5EZXZpY2UiLCJzZW5kQ29tbWFuZCIsImlzRGV2aWNlT3BlbiIsImZvcmNlRGlzY29ubmVjdCIsIm5ld0RldmljZUluc3RhbmNlIiwiRHluUHJvR28iLCJidWlsZERldmljZU9iamVjdCIsImRldmljZVR5cGVTdHJpbmciLCJpZCIsImRldmljZUludGVyZmFjZSIsImVEeW5hbW9QYXR0ZXJuIiwiUmVnRXhwIiwidER5bmFtb1BhdHRlcm4iLCJkcE1pbmlQYXR0ZXJuIiwiZHBHb1BhdHRlcm4iLCJmaW5kRGV2aWNlVHlwZVN0cmluZyIsIm5hbWVTdHIiLCJ0eXBlU3RyIiwiZm9ybWF0dGVkU3RyIiwiZGV2aWNlVHlwZVN0ciIsImRldmljZVR5cGVBcnIiLCJyZXR1cm5TdHIiLCJmb3JtYXRUeXBlU3RyaW5nIiwidGVzdCIsInNjYW5Gb3JEZXZpY2VzIiwiaXNGdW5jVHlwZSIsImRhdGFPYmoiLCJ3YXJuIiwicHJvcEFzc2lnbm1lbnQiLCJwcm9wTmFtZSIsImVyck9iaiIsImFycmFuZ2VDYWxsYmFja3MiLCJvcHRpb25zIiwibmFtZVByZWZpeCIsImZpbmREZXZpY2VCeURldmljZU5hbWUiLCJuYXZpZ2F0b3IiLCJibHVldG9vdGgiLCJyZXF1ZXN0RGV2aWNlIiwiZGV2aWNlVHlwZU5hbWUiLCJzZWxlY3RlZERldmljZSIsIm1vZGVsTmFtZVN0cmluZyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBMkNBLEVBQU1DLEdBQzFCLGlCQUFaQyxTQUEwQyxpQkFBWEMsT0FDeENBLE9BQU9ELFFBQVVELElBQ1EsbUJBQVhHLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxHQUFJSCxHQUNlLGlCQUFaQyxRQUNkQSxRQUFRLHFCQUF1QkQsSUFFL0JELEVBQUsscUJBQXVCQyxJQVI5QixDQVNHSyxRQUFRLFdBQ1gsTyxZQ1RFLElBQUlDLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVQLFFBR25DLElBQUlDLEVBQVNJLEVBQWlCRSxHQUFZLENBQ3pDQyxFQUFHRCxFQUNIRSxHQUFHLEVBQ0hULFFBQVMsSUFVVixPQU5BVSxFQUFRSCxHQUFVSSxLQUFLVixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTTSxHQUcvREwsRUFBT1EsR0FBSSxFQUdKUixFQUFPRCxRQTBEZixPQXJEQU0sRUFBb0JNLEVBQUlGLEVBR3hCSixFQUFvQk8sRUFBSVIsRUFHeEJDLEVBQW9CUSxFQUFJLFNBQVNkLEVBQVNlLEVBQU1DLEdBQzND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QUFPK0QsT0FDbEQ0QixRQUFRQyxRQUFTd21CLEVBQWV0aEIsS0FBS08sZ0JBQzdDTCxLQUFNLElBQU1wRixFQUFTeW1CLElBQ3RCNWdCLE1BQU1sQyxHQUNBQSxFQUFJcEksT0FBU3VJLEVBQVlDLFdBQ3pCSixFQUFJakssT0FBU29LLEVBQVlFLFdBQ3pCTCxFQUFJckksUUFBUTJoQixTQUFTLHdDQUNuQnVKLEVBQWV0aEIsS0FBS00sVUFDcEJ6RixRQUFRQyxRQUFTd21CLEVBQWV0aEIsS0FBS08sY0FBZUwsS0FBSyxJQUFNcEYsRXBCdkQzRCxjb0JzRDZCQSxFcEJ0RDdCLGFvQndEUitFLEVBQU9wQixPQ2pCK0J5QixLQUM1Qm9mLEdBQXNCQSxFQUVoQnhrQixFQUFTdWtCLEdBQWtCM2YsRUFBUTBDLEVBQVdrZCxJQURoRHpmLEVBQU8scUNBRWJjLE1BQU1sQyxHQUFPb0IsRUFBT3BCLElESkM2aUIsUUNLNUIzZ0IsTUFBTWxDLEdBQ0xvQixFQUQ0QixpQkFBUnBCLEVBQ1osSUFBSXhJLEVBQVN3SSxHQUNkIiwiZmlsZSI6Im1hZ2Vuc2EtYmx1ZXRvb3RoLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibWFnZW5zYS1ibHVldG9vdGhcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wibWFnZW5zYS1ibHVldG9vdGhcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImNsYXNzIEFwaUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoeyBtZXNzYWdlLCBjb2RlLCBuYW1lIH0pIHtcclxuICAgICAgICBzdXBlciggKG1lc3NhZ2UgfHwgXCJXZWIgQmx1ZXRvb3RoIEFQSSB0aHJldyBhbiB1bmtub3duLCBvciB1bmRvY3VtZW50ZWQgZXJyb3JcIiApKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSAoY29kZSB8fCAxMDAwKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSAobmFtZSB8fCBcIldlYkJsdWV0b290aEVycm9yXCIpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwaUVycm9yOyIsImNvbnN0IGFsbERldmljZUNvbmZpZyA9IHtcclxuICAgIGZpbHRlcnM6IFtcclxuICAgICAgICB7IHNlcnZpY2VzOiBbXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDRcIl0gfSxcclxuICAgICAgICB7IHNlcnZpY2VzOiBbXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDFcIl0gfSwgXHJcbiAgICAgICAgeyBzZXJ2aWNlczogW1wiMDUwOGU2ZjgtYWQ4Mi04OThmLWY4NDMtZTM0MTBjYjYwMTAzXCJdIH1cclxuICAgIF0sXHJcbiAgICBvcHRpb25hbFNlcnZpY2VzOiBbXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDRcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDNcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDFcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAyMDJcIixcclxuICAgICAgICAnZGV2aWNlX2luZm9ybWF0aW9uJ1xyXG4gICAgXSxcclxuICAgIGtlZXBSZXBlYXRlZERldmljZXM6IGZhbHNlLFxyXG4gICAgYWNjZXB0QWxsQWR2ZXJ0aXNlbWVudHM6IGZhbHNlXHJcbn1cclxuXHJcbmNvbnN0IGZpbmREZXZpY2VCeURldmljZU5hbWUgPSBkZXZpY2VOYW1lID0+ICh7XHJcbiAgICBmaWx0ZXJzOiBbXHJcbiAgICAgICAgeyBuYW1lUHJlZml4OiBkZXZpY2VOYW1lIH1cclxuICAgIF0sXHJcbiAgICBvcHRpb25hbFNlcnZpY2VzOiBbXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDRcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDNcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDFcIixcclxuICAgICAgICBcIjA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDIwMlwiLFxyXG4gICAgICAgICdkZXZpY2VfaW5mb3JtYXRpb24nXHJcbiAgICBdLFxyXG4gICAga2VlcFJlcGVhdGVkRGV2aWNlczogZmFsc2UsXHJcbiAgICBhY2NlcHRBbGxBZHZlcnRpc2VtZW50czogZmFsc2VcclxufSk7XHJcblxyXG5cclxuZXhwb3J0IHtcclxuICAgIGFsbERldmljZUNvbmZpZyxcclxuICAgIGZpbmREZXZpY2VCeURldmljZU5hbWVcclxufSIsImNsYXNzIFV0aWxpdGllcyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAgICAgdGhpcy5ybGVGb3JtYXRzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIDB4MDA6IGZhbHNlLCAgICAvL05vcm1hbFxyXG4gICAgICAgICAgICAweDAxOiB0cnVlLCAgICAgLy9STEUgZm9ybWF0XHJcbiAgICAgICAgICAgIDB4MDI6IGZhbHNlLCAgICAvL05vdGlmeSBVbmNvbXByZXNzZWRcclxuICAgICAgICAgICAgMHgwMzogdHJ1ZSAgICAgIC8vTm90aWZ5IFJMRSBmb3JtYXRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgfTtcclxuXHJcbiAgICAgbG9nRGV2aWNlU3RhdGUgPSBsb2dJbmZvID0+IHtcclxuICAgICAgICBsZXQgbG9nRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJkZXZpY2VMb2dcIiwgeyBcclxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcclxuICAgICAgICAgICAgZGV0YWlsOiBsb2dJbmZvIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChsb2dFdmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29udmVydEFycmF5VG9IZXhTdHJpbmcgPSBhcnJheSA9PlxyXG4gICAgICAgIEFycmF5LmZyb20oYXJyYXksIGJ5dGUgPT5cclxuICAgICAgICAgICAgKCcwJyArIChieXRlICYgMHhGRikudG9TdHJpbmcoMTYpKS5zbGljZSgtMilcclxuICAgICAgICApLmpvaW4oJycpLnRvVXBwZXJDYXNlKClcclxuICAgIFxyXG4gICAgcmVhZFR3b0J5dGVMZW5ndGggPSB0d29CeXRlcyA9PiAodHdvQnl0ZXNbMF0gPDwgOCkgfCB0d29CeXRlc1sxXTtcclxuXHJcbiAgICBidWZmZXJUb1V0ZjggPSBhcnJheUJ1ZmZlciA9PlxyXG4gICAgICAgIG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKS5kZWNvZGUoVWludDhBcnJheS5mcm9tKGFycmF5QnVmZmVyKSk7XHJcblxyXG4gICAgY2FzdERlY1RvSGV4ID0gbnVtID0+IHBhcnNlSW50KCBudW0udG9TdHJpbmcoMTYpLCAxNik7XHJcblxyXG4gICAgbmV3QXJyYXlQYXJ0aWFsID0gKG51bSwgcmVwZXRpdGlvbnMpID0+IG5ldyBBcnJheShyZXBldGl0aW9ucykuZmlsbChudW0pO1xyXG5cclxuICAgIHJlYWRCeXRlQXJyYXkgPSBkYXRhVmlldyA9PiB7XHJcbiAgICAgICAgbGV0IHZhbHVlQXJyYXkgPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFWaWV3LmJ5dGVMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YWx1ZUFycmF5LnB1c2goZGF0YVZpZXcuZ2V0VWludDgoaSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlQXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgaGV4VG9Bc2NpaSA9IGhleFN0cmluZyA9PiB7XHJcbiAgICAgICAgbGV0IGFzY2lpUmVzcCA9ICcnO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyAoaSA8IGhleFN0cmluZy5sZW5ndGggJiYgaGV4U3RyaW5nLnN1YnN0cihpLCAyKSAhPT0gJzAwJyk7IGkgKz0gMikge1xyXG4gICAgICAgICAgICBhc2NpaVJlc3AgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShcclxuICAgICAgICAgICAgICAgIHBhcnNlSW50KGhleFN0cmluZy5zdWJzdHIoaSwgMiksIDE2KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYXNjaWlSZXNwLnRyaW0oKTtcclxuICAgIH1cclxuXHJcbiAgICBoZXhUb0J5dGVzID0gaGV4U3RyID0+IHtcclxuICAgICAgICBsZXQgYnl0ZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBjdXJyZW50ID0gMDsgY3VycmVudCA8IGhleFN0ci5sZW5ndGg7IGN1cnJlbnQgKz0gMilcclxuICAgICAgICAgICAgYnl0ZXMucHVzaCggcGFyc2VJbnQoaGV4U3RyLnN1YnN0cihjdXJyZW50LCAyKSwgMTYpICk7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gYnl0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZGVjb2RlUkxFID0gYXJyYXlTZWdtZW50ID0+IHtcclxuICAgICAgICBsZXQgcmV0dXJuU2VnbWVudCA9IFsgYXJyYXlTZWdtZW50WzBdIF07XHJcbiAgICBcclxuICAgICAgICBsZXQgbmV4dEluZGV4ID0gMDtcclxuICAgICAgICBsZXQgaW5pdGlhbExlbmd0aCA9IGFycmF5U2VnbWVudC5sZW5ndGg7XHJcbiAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGluaXRpYWxMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBuZXh0SW5kZXggPSBpICsgMTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAobmV4dEluZGV4ICsgMSA8IGluaXRpYWxMZW5ndGgpIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGFycmF5U2VnbWVudFtpXSA9PT0gYXJyYXlTZWdtZW50W25leHRJbmRleF0pIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblNlZ21lbnQucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5uZXdBcnJheVBhcnRpYWwoYXJyYXlTZWdtZW50W2ldLCBhcnJheVNlZ21lbnRbbmV4dEluZGV4ICsgMV0pXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vYWRqdXN0IGluZGV4IGFjY29yZGluZ2x5LCBwcmlvciB0byBiZWluZyBpbmNyZW1lbnRlZCBieSB0aGUgaXRlcmF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgIGkgPSBuZXh0SW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSByZXR1cm5TZWdtZW50LnB1c2goYXJyYXlTZWdtZW50W2ldKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuU2VnbWVudC5wdXNoKGFycmF5U2VnbWVudFtpXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmV0dXJuU2VnbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBidWlsZEluaXRpYWxEYXRhQXJyYXkgPSBjaGVja0ZvclJsZSA9PiB7XHJcbiAgICAgICAgbGV0IHJldHVybkFycmF5ID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSBNYXRoLm1pbiguLi5PYmplY3Qua2V5cyh0aGlzLnJhd0RhdGEpKTsgaSA8IHRoaXMubWF4QmxvY2tJZDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJldHVybkFycmF5ID0gcmV0dXJuQXJyYXkuY29uY2F0KC4uLnRoaXMucmF3RGF0YVtpXSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoIWNoZWNrRm9yUmxlKSA/IHJldHVybkFycmF5IDogdGhpcy5jaGVja1JsZShyZXR1cm5BcnJheSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tSbGUgPSByZXR1cm5BcnJheSA9PiAodGhpcy5ybGVGb3JtYXRzWyB0aGlzLmluaXRpYWxOb3RpZmljYXRpb25bMF0gXSkgPyB0aGlzLmRlY29kZVJMRShyZXR1cm5BcnJheSkgOiByZXR1cm5BcnJheTtcclxuXHJcbiAgICBjb252ZXJ0Q3VycmVuY3lDb2RlID0gY3VycmVuY3lTdHJpbmcgPT4ge1xyXG4gICAgICAgIGxldCBjdXJyZW5jeSA9IGN1cnJlbmN5U3RyaW5nLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgIHJldHVybiAoY3VycmVuY3kgPT09ICd1cycpID8gWzB4MDgsIDB4NDBdIDogXHJcbiAgICAgICAgICAgIChjdXJyZW5jeSA9PT0gJ2V1cm8nKSA/IFsweDA5LCAweDc4XSA6IFsweDAwLCAweDAwXTtcclxuICAgIH1cclxuXHJcbiAgICAvL0NvbnZlcnQgbnVtYmVyIHRvIDYgYnl0ZSBhcnJheS5cclxuICAgIGNvbnZlcnROdW1Ub0Ftb3VudCA9IG51bSA9PiB7XHJcbiAgICAgICAgbGV0IHN0cmluZ051bSA9IG51bS50b1N0cmluZygpO1xyXG4gICAgICAgIGxldCByZXR1cm5BcnIgPSBbXTtcclxuICAgICAgICB3aGlsZSAoc3RyaW5nTnVtLmxlbmd0aCA8IDEyKVxyXG4gICAgICAgICAgICBzdHJpbmdOdW0gPSBcIjBcIiArIHN0cmluZ051bTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmdOdW0ubGVuZ3RoOyBpICs9MilcclxuICAgICAgICAgICAgcmV0dXJuQXJyLnB1c2goXHJcbiAgICAgICAgICAgICAgICBwYXJzZUludChzdHJpbmdOdW0uc3Vic3RyKGksIDIpLCAxNilcclxuICAgICAgICAgICAgKVxyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIHJldHVybkFycjtcclxuICAgIH1cclxuXHJcbiAgICBkZWxheVByb21pc2UgPSAoZGVsYXksIHBhc3NlZFZhbHVlKSA9PlxyXG4gICAgICAgIG5ldyBQcm9taXNlKCByZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCggKCkgPT4gcmVzb2x2ZShwYXNzZWRWYWx1ZSksIGRlbGF5KTtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXRpbGl0aWVzOyIsImltcG9ydCBVdGlsaXRpZXMgZnJvbSBcIi4uL3V0aWxzXCI7XHJcblxyXG5jbGFzcyBTd2lwZVBhcnNlciBleHRlbmRzIFV0aWxpdGllcyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvcm1hdEV4cFBBTiA9IHJhd0RhdGEgPT4ge1xyXG4gICAgICAgIGxldCBzdHJpbmdEYXRhID0gKHR5cGVvZiByYXdEYXRhID09PSAnb2JqZWN0JykgPyB0aGlzLmJ1ZmZlclRvVXRmOChyYXdEYXRhLnNsaWNlKDQpKSA6IHJhd0RhdGE7XHJcbiAgICBcclxuICAgICAgICBpZiAoc3RyaW5nRGF0YS5pbmRleE9mKCc7JykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIGxldCBmb3JtYXR0ZWRTdHJpbmcgPSB0aGlzLnNwbGl0RXhwUEFOKHN0cmluZ0RhdGEpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBtYXNrZWRQQU46IGZvcm1hdHRlZFN0cmluZ1swXSxcclxuICAgICAgICAgICAgICAgIExhc3Q0OiBmb3JtYXR0ZWRTdHJpbmdbMV0sXHJcbiAgICAgICAgICAgICAgICBleHBpcmF0aW9uRGF0ZTogZm9ybWF0dGVkU3RyaW5nWzJdLFxyXG4gICAgICAgICAgICAgICAgc2VydmljZUNvZGU6IGZvcm1hdHRlZFN0cmluZ1szXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgcmV0dXJuIHtcclxuICAgICAgICAgICAgbWFza2VkUEFOOiBcIlwiLFxyXG4gICAgICAgICAgICBMYXN0NDogXCJcIixcclxuICAgICAgICAgICAgZXhwaXJhdGlvbkRhdGU6IFwiXCIsXHJcbiAgICAgICAgICAgIHNlcnZpY2VDb2RlOiBcIlwiXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNwbGl0RXhwUEFOID0gc3RyaW5nRGF0YSA9PiB7XHJcbiAgICAgICAgaWYgKHN0cmluZ0RhdGEubGVuZ3RoID4gMykge1xyXG4gICAgICAgICAgICBsZXQgZXhwUEFOID0gc3RyaW5nRGF0YS5yZXBsYWNlKCc7JywnJykucmVwbGFjZSgnPycsJycpLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgICAgIGxldCBleHAgPSBleHBQQU5bMV0uc2xpY2UoMCwgNCk7XHJcbiAgICAgICAgICAgIGxldCBzZXJ2aWNlQ29kZSA9IGV4cFBBTlsxXS5zbGljZSg0LCA3KTtcclxuICAgICAgICAgICAgbGV0IGZvcm1hdHRlZEV4cCA9IGV4cC5zbGljZSgtMikgKyAnLycgKyBleHAuc2xpY2UoMCwgMik7XHJcbiAgICAgICAgICAgIGxldCBtYXNrZWRQQU4gPSBleHBQQU5bMF07XHJcbiAgICAgICAgICAgIGxldCBsYXN0Rm91ciA9IGV4cFBBTlswXS5zbGljZSgtNCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gW21hc2tlZFBBTiwgbGFzdEZvdXIsIGZvcm1hdHRlZEV4cCwgc2VydmljZUNvZGVdXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgcmV0dXJuIFtcIk5vdCBGb3VuZFwiLCBcIk5vdCBGb3VuZFwiLCBcIk5vdCBGb3VuZFwiLCBcIk5vdCBGb3VuZFwiXVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU3dpcGVQYXJzZXI7IiwiY29uc3Qgb3BlblN1Y2Nlc3MgPSBcIkRldmljZSBPcGVuXCI7XHJcbmNvbnN0IGNsb3NlU3VjY2VzcyA9IFwiRGV2aWNlIENsb3NlZFwiXHJcbmNvbnN0IHN1Y2Nlc3NDb2RlID0gMDtcclxuY29uc3Qgc3dpcGVMaXN0ZW5pbmcgPSBcIlN1Y2Nlc3MsIGxpc3RlbmluZyBmb3Igc3dpcGVcIlxyXG5jb25zdCBkZXZpY2VOb3RJZGxlID0gXCJEZXZpY2Ugbm90IGlkbGVcIjtcclxuY29uc3QgdER5bmFtbyA9IFwidER5bmFtb1wiO1xyXG5jb25zdCBlRHluYW1vID0gXCJlRHluYW1vXCI7XHJcbmNvbnN0IGR5bmFQcm9HbyA9IFwiZHluYVByb0dvXCI7XHJcbmNvbnN0IGRwTWluaSA9IFwiRHluYVBybyBNaW5pXCI7XHJcblxyXG5jb25zdCBjb25maWdTdHIgPSBcIkNvbmZpZ3VyYXRpb25cIjtcclxuY29uc3QgdW5rbm93biA9IFwiVW5rbm93blwiO1xyXG5jb25zdCBhc2NpaSA9IFwiQVNDSUlcIjtcclxuXHJcbmNvbnN0IG5vU2Vzc2lvblRvQ2xlYXIgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvZGU6IDAsXHJcbiAgICBtZXNzYWdlOiBcIlN1Y2Nlc3MsIHRoZXJlIHdhcyBubyBzZXNzaW9uIHRvIGNsZWFyXCJcclxufSk7XHJcblxyXG5jb25zdCBnYXR0QnVzeSA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMTksIFxyXG4gICAgbWVzc2FnZTogXCJHQVRUIG9wZXJhdGlvbiBhbHJlYWR5IGluIHByb2dyZXNzLlwiXHJcbn0pO1xyXG5cclxuY29uc3Qgc3VjY2Vzc2Z1bENsb3NlID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiBzdWNjZXNzQ29kZSxcclxuICAgIG1lc3NhZ2U6IGNsb3NlU3VjY2Vzc1xyXG59KTtcclxuXHJcbmNvbnN0IGNhcmRUeXBlQWxsID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBbZUR5bmFtb106IDB4MDMsXHJcbiAgICBbdER5bmFtb106IDB4MDcsXHJcbiAgICBbZHBNaW5pXTogMHgwMyxcclxuICAgIFtkeW5hUHJvR29dOiAweDA3XHJcbn0pO1xyXG5cclxuY29uc3QgY2FyZFR5cGVzT2JqID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAnbXNyJzogMHgwMSxcclxuICAgICdjaGlwJzogMHgwMixcclxuICAgICdjaGlwbXNyJzogMHgwMyxcclxuICAgICdjb250YWN0bGVzcyc6IDB4MDQsXHJcbiAgICAnY29udGFjdGxlc3Ntc3InOiAweDA1LFxyXG4gICAgJ2NvbnRhY3RsZXNzY2hpcCc6MHgwNixcclxuICAgICdhbGwnOiAweDA3XHJcbn0pO1xyXG5cclxuZXhwb3J0IHtcclxuICAgIG9wZW5TdWNjZXNzLFxyXG4gICAgc3VjY2Vzc0NvZGUsXHJcbiAgICBzd2lwZUxpc3RlbmluZyxcclxuICAgIGRldmljZU5vdElkbGUsXHJcbiAgICBjbG9zZVN1Y2Nlc3MsXHJcbiAgICBub1Nlc3Npb25Ub0NsZWFyLFxyXG4gICAgdER5bmFtbyxcclxuICAgIGVEeW5hbW8sXHJcbiAgICBkeW5hUHJvR28sXHJcbiAgICBkcE1pbmksXHJcbiAgICBjYXJkVHlwZUFsbCxcclxuICAgIGNhcmRUeXBlc09iaixcclxuICAgIGdhdHRCdXN5LFxyXG4gICAgc3VjY2Vzc2Z1bENsb3NlLFxyXG4gICAgY29uZmlnU3RyLFxyXG4gICAgdW5rbm93bixcclxuICAgIGFzY2lpXHJcbn1cclxuIiwiaW1wb3J0IFN3aXBlUGFyc2VyIGZyb20gJy4vc3dpcGVQYXJzZXInO1xyXG5pbXBvcnQgeyBkeW5hUHJvR28gfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnO1xyXG5cclxuY2xhc3MgRW12UGFyc2VyIGV4dGVuZHMgU3dpcGVQYXJzZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5tb3JlVGFnQnl0ZXNGbGFnMSA9IDB4MUY7XHJcbiAgICAgICAgdGhpcy5tb3JlVGFnQnl0ZXNGbGFnMiA9IDB4ODA7XHJcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RlZEZsYWcgPSAweDIwO1xyXG4gICAgICAgIHRoaXMubW9yZUxlbmd0aEZsYWcgPSAweDgwO1xyXG4gICAgICAgIHRoaXMub25lQnl0ZUxlbmd0aE1hc2sgPSAweDdGO1xyXG5cclxuICAgICAgICB0aGlzLnRyeFN0YXR1c1RvU3RyaW5nID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIDB4MDA6IFwiQXBwcm92ZWRcIixcclxuICAgICAgICAgICAgMHgwMTogXCJEZWNsaW5lZFwiLFxyXG4gICAgICAgICAgICAweDAyOiBcIkVycm9yXCIsXHJcbiAgICAgICAgICAgIDB4MTA6IFwiQ2FuY2VsbGVkIEJ5IEhvc3RcIixcclxuICAgICAgICAgICAgMHgxMTogXCJDb25maXJtIEFtb3VudCBOb1wiLFxyXG4gICAgICAgICAgICAweDEyOiBcIkNvbmZpcm0gQW1vdW50IFRpbWVvdXRcIixcclxuICAgICAgICAgICAgMHgxMzogXCJDb25maXJtIEFtb3VudCBDYW5jZWxcIixcclxuICAgICAgICAgICAgMHgxNDogXCJNU1IgU2VsZWN0IERlYml0XCIsXHJcbiAgICAgICAgICAgIDB4MTU6IFwiTVNSIFNlbGVjdCBEZWJpdFwiLFxyXG4gICAgICAgICAgICAweDE2OiBcIk1TUiBTZWxlY3QgQ3JlZGl0L0RlYml0IHRpbW91dFwiLFxyXG4gICAgICAgICAgICAweDE3OiBcIk1TUiBTZWxlY3QgQ3JlZGl0L0RlYml0IGNhbmNlbFwiLFxyXG4gICAgICAgICAgICAweDE4OiBcIlNpZ25hdHVyZSBDYXB0dXJlIENhbmNlbGxlZCBieSBIb3N0IChTQy1TIE9ubHkgfCBTQy1GIG9ubHkpXCIsXHJcbiAgICAgICAgICAgIDB4MTk6IFwiU2lnbmF0dXJlIENhcHR1cmUgVGltZW91dCAoU0MtUyBPbmx5IHwgU0MtRiBPbmx5KVwiLFxyXG4gICAgICAgICAgICAweDFBOiBcIlNpZ25hdHVyZSBDYXB0dXJlIENhbmNlbGxlZCBieSBDYXJkaG9sZGVyIChTQy1TIE9ubHkgfCBTQy1GIE9ubHkpXCIsXHJcbiAgICAgICAgICAgIDB4MUI6IFwiUElOIEVudHJ5IENhbmNlbGxlZCBieSBIb3N0XCIsXHJcbiAgICAgICAgICAgIDB4MUM6IFwiUElOIGVudHJ5IHRpbWVvdXRcIixcclxuICAgICAgICAgICAgMHgxRDogXCJQSU4gZW50cnkgQ2FuY2VsbGVkIGJ5IENhcmRob2xkZXJcIixcclxuICAgICAgICAgICAgMHgxRTogXCJNYW51YWwgU2VsZWN0ZWQgQ2FuY2VsbGVkIGJ5IEhvc3RcIixcclxuICAgICAgICAgICAgMHgxRjogXCJNYW51YWwgU2VsZWN0aW9uIFRpbWVvdXRcIixcclxuICAgICAgICAgICAgMHgyMDogXCJNYW51YWwgU2VsY3Rpb24gQ2FuY2VsbGVkIGJ5IENhcmRob2xkZXJcIixcclxuICAgICAgICAgICAgMHgyMTogXCJXYWl0aW5nIGZvciBDYXJkIENhbmNlbGxlZCBieSBIb3N0XCIsXHJcbiAgICAgICAgICAgIDB4MjI6IFwiV2FpdGluZyBmb3IgQ2FyZCBUaW1lb3V0XCIsXHJcbiAgICAgICAgICAgIDB4MjM6IFwiQ2FuY2VsbGVkIGJ5IENhcmQgU3dpcGUgKE1TUikgW1NDUkFdIHx8IFdhaXRpbmcgZm9yIENhcmQgQ2FuY2VsbGVkIGJ5IENhcmRob2xkZXIgW1BJTl1cIixcclxuICAgICAgICAgICAgMHgyNDogXCJXYWl0aW5nIGZvciBDYXJkIElDQyBTZWF0ZWRcIixcclxuICAgICAgICAgICAgMHgyNTogXCJXYWl0aW5nIGZvciBDYXJkIE1TUiBTd2lwZWRcIixcclxuICAgICAgICAgICAgMHhGRjogXCJVbmtub3duIFRyYW5zYWN0aW9uIFN0YXR1c1wiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRsdlBhcnNlciA9IChkYXRhLCBpc01zcikgPT4ge1xyXG4gICAgICAgIGxldCBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGxldCBpVExWID0gMDtcclxuICAgICAgICBsZXQgaVRhZztcclxuICAgICAgICBsZXQgYlRhZyA9IHRydWU7XHJcbiAgICAgICAgbGV0IGJ5dGVWYWx1ZTtcclxuICAgICAgICBsZXQgbGVuZ3RoVmFsdWU7XHJcbiAgICAgICAgbGV0IHRhZ0J5dGVzID0gbnVsbDtcclxuICAgICAgICBsZXQgVGFnQnVmZmVyID0gW107XHJcblxyXG4gICAgICAgIHdoaWxlIChpVExWIDwgZGF0YUxlbmd0aCkge1xyXG4gICAgICAgICAgICBieXRlVmFsdWUgPSBkYXRhW2lUTFZdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGJUYWcpIHtcclxuICAgICAgICAgICAgICAgIGlUYWcgPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IGJNb3JlVGFnQnl0ZXMgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChieXRlVmFsdWUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvL0ZpcnN0IGJ5dGUgb2YgdGFnIGNhbm5vdCBiZSB6ZXJvLlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlIChiTW9yZVRhZ0J5dGVzICYmIChpVExWIDwgZGF0YUxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBieXRlVmFsdWUgPSBkYXRhW2lUTFZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlUTFYrKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVGFnQnVmZmVyW2lUYWddID0gYnl0ZVZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBiTW9yZVRhZ0J5dGVzID0gKGlUYWcgPT09IDApID8gKChieXRlVmFsdWUgJiB0aGlzLm1vcmVUYWdCeXRlc0ZsYWcxKSA9PSB0aGlzLm1vcmVUYWdCeXRlc0ZsYWcxKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICgoYnl0ZVZhbHVlICYgdGhpcy5tb3JlVGFnQnl0ZXNGbGFnMikgPT0gdGhpcy5tb3JlVGFnQnl0ZXNGbGFnMik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlUYWcrKztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0YWdCeXRlcyA9IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoVGFnQnVmZmVyLnNsaWNlKDAsIGlUYWcpKTtcclxuICAgICAgICAgICAgICAgIGJUYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxlbmd0aFZhbHVlID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoKGJ5dGVWYWx1ZSAmIHRoaXMubW9yZUxlbmd0aEZsYWcpID09IHRoaXMubW9yZUxlbmd0aEZsYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbkxlbmd0aEJ5dGVzID0gYnl0ZVZhbHVlICYgdGhpcy5vbmVCeXRlTGVuZ3RoTWFzaztcclxuICAgICAgICAgICAgICAgICAgICBpVExWKys7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlMZW4gPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKGlMZW4gPCBuTGVuZ3RoQnl0ZXMpICYmIChpVExWIDwgZGF0YUxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZVZhbHVlID0gZGF0YVtpVExWXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaVRMVisrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGhWYWx1ZSA9ICgobGVuZ3RoVmFsdWUgJiAweDAwMDAwMEZGKSA8PCA4KSArIGJ5dGVWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaUxlbisrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aFZhbHVlID0gYnl0ZVZhbHVlICYgdGhpcy5vbmVCeXRlTGVuZ3RoTWFzaztcclxuICAgICAgICAgICAgICAgICAgICBpVExWKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRhZ0J5dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhZ0J5dGUgPSBUYWdCdWZmZXJbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbmRJbmRleCA9ICgoaVRMViArIGxlbmd0aFZhbHVlKSA+IGRhdGFMZW5ndGgpID8gZGF0YUxlbmd0aCA6IGlUTFYgKyBsZW5ndGhWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxlbiA9IGVuZEluZGV4IC0gaVRMVjtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWVCeXRlcyA9IChsZW4gPiAwKSA/IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoZGF0YS5zbGljZShpVExWLCBpVExWICsgbGVuKSkgOiBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidGFnXCI6IHRhZ0J5dGVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRhZ0xlbmd0aFwiOiAoIWxlbmd0aFZhbHVlKSA/ICh2YWx1ZUJ5dGVzLmxlbmd0aCArIDEgLyAyKSA6IGxlbmd0aFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRhZ1ZhbHVlXCI6IHRoaXMuaGV4T3JBc2NpaUZvcm1hdHRlcih0YWdCeXRlcywgdmFsdWVCeXRlcywgaXNNc3IpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggISgodGFnQnl0ZSAmIHRoaXMuY29uc3RydWN0ZWRGbGFnKSA9PSB0aGlzLmNvbnN0cnVjdGVkRmxhZykgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlUTFYgKz0gbGVuZ3RoVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGJUYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgaGV4T3JBc2NpaUZvcm1hdHRlciA9ICh0YWdCeXRlcywgdmFsdWVCeXRlcywgaXNNc3IpID0+IHtcclxuICAgICAgICBzd2l0Y2godGFnQnl0ZXMpIHtcclxuICAgICAgICAgICAgY2FzZSBcIkRGREYxQVwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3ZhbHVlQnl0ZXN9ICR7dGhpcy50cnhTdGF0dXNUb1N0cmluZ1sgcGFyc2VJbnQodmFsdWVCeXRlcywgMTYpIF19YFxyXG4gICAgICAgICAgICBjYXNlIFwiREZERjREXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCI1RjIwXCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oZXhUb0FzY2lpKHZhbHVlQnl0ZXMpO1xyXG4gICAgICAgICAgICBjYXNlIFwiREZERjI1XCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGlzTXNyKSA/IHRoaXMuaGV4VG9Bc2NpaSggKHZhbHVlQnl0ZXMgPyB2YWx1ZUJ5dGVzLnN1YnN0cmluZygwLCAxNCkgOiB2YWx1ZUJ5dGVzKSApIDogdmFsdWVCeXRlcztcclxuICAgICAgICAgICAgY2FzZSBcIkRGREY0MFwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh2YWx1ZUJ5dGVzID09PSAweDgwKSA/IGAke3ZhbHVlQnl0ZXN9ICBDQkMtTUFDIGNoZWNrZWQgaW4gQVJRQyBvbmxpbmUgcmVzcG9uc2VgIDogKHZhbHVlQnl0ZXMgPT09IDB4MDEpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlQnl0ZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBFbXZQYXJzZXI7IiwiY2xhc3MgTGVuZ3RoRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcIkRldmljZSBjb21tdW5pY2F0aW9uIGVycm9yLiBMZW5ndGggZG9lcyBub3QgbWF0Y2ggZGF0YVwiKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBcIkJsZVRyYW5zbWlzc2lvbkVycm9yXCI7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gMTAxMjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTGVuZ3RoRXJyb3I7IiwiY2xhc3MgRGV2aWNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGNvZGUsIG5hbWUsIG1lc3NhZ2UgfSkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IChuYW1lIHx8IFwiRGV2aWNlRXJyb3JcIik7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gKGNvZGUgfHwgMTAwMClcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRGV2aWNlRXJyb3I7IiwiaW1wb3J0IEVtdlBhcnNlciBmcm9tICcuLi9wYXJzZXJzL2VtdlBhcnNlcidcclxuaW1wb3J0IEFwaUVycm9yIGZyb20gJy4vYXBpRXJyb3InO1xyXG5pbXBvcnQgTGVuZ3RoRXJyb3IgZnJvbSAnLi9sZW5ndGhFcnJvcic7XHJcbmltcG9ydCBEZXZpY2VFcnJvciBmcm9tICcuL2RldmljZUVycm9yJztcclxuXHJcbmNsYXNzIEVycm9ySGFuZGxlciBleHRlbmRzIEVtdlBhcnNlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihjYWxsYmFja3MpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2sgPSBjYWxsYmFja3MuZXJyb3JDYWxsYmFjaztcclxuICAgIH07XHJcblxyXG4gICAgYnVpbGREZXZpY2VFcnIgPSBlcnIgPT4gKGVyciBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikgPyBcclxuICAgICAgICBuZXcgQXBpRXJyb3IoZXJyKSA6IChlcnIgaW5zdGFuY2VvZiBFcnJvcikgPyBcclxuICAgICAgICAgICAgZXJyIDogbmV3IERldmljZUVycm9yKGVycik7XHJcblxyXG4gICAgdGhyb3dMZW5FcnIgPSAoKSA9PiBuZXcgTGVuZ3RoRXJyb3IoKTtcclxuXHJcbiAgICBzZW5kRXJyVG9DYWxsYmFjayA9IGVyciA9PiB7XHJcbiAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrKGVycik7XHJcbiAgICAgICAgcmV0dXJuIGVycjtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEVycm9ySGFuZGxlcjsiLCJjb25zdCBub3RGb3VuZE9iaiA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgZXJyb3JDb2RlOiA4LFxyXG4gICAgZXJyb3JOYW1lOiBcIk5vdEZvdW5kRXJyb3JcIlxyXG59KTtcclxuXHJcbmNvbnN0IGFwaU5ldHdvcmtFcnIgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvZGU6IDE5LFxyXG4gICAgbmFtZTogJ05ldHdvcmtFcnJvcidcclxufSk7XHJcblxyXG5jb25zdCBkZXZpY2VOb3RGb3VuZCA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMTAwMixcclxuICAgIG5hbWU6ICdEZXZpY2VOb3RGb3VuZCcsXHJcbiAgICBtZXNzYWdlOiBcIlBsZWFzZSBzZWxlY3QgZGV2aWNlIHRvIGNvbm5lY3RcIlxyXG59KTtcclxuXHJcbmNvbnN0IGdhdHRTZXJ2ZXJOb3RDb25uZWN0ZWQgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvZGU6IDEwMDMsXHJcbiAgICBuYW1lOiBcIkdhdHRTZXJ2ZXJOb3RDb25uZWN0ZWRcIixcclxuICAgIG1lc3NhZ2U6IFwiUGxlYXNlIGNvbm5lY3QgZGVzaXJlZCBkZXZpY2VcIlxyXG59KTtcclxuXHJcbmNvbnN0IGNvbW1hbmROb3RTZW50ID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAxMDA0LCBcclxuICAgIG5hbWU6IFwiQ29tbWFuZE5vdFNlbnRcIiwgXHJcbiAgICBtZXNzYWdlOiBcIkNvbW1hbmQgY2hhcmFjdGVyaXN0aWMgbm90IGZvdW5kLCBkZXZpY2Ugbm90IG9wZW5lZFwiXHJcbn0pO1xyXG5cclxuY29uc3QgZGV2aWNlTm90T3BlbiA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMTAwNSwgXHJcbiAgICBuYW1lOiBcIkNvbW1hbmROb3RTZW50XCIsIFxyXG4gICAgbWVzc2FnZTogXCJEZXZpY2Ugbm90IG9wZW5lZFwiXHJcbn0pO1xyXG5cclxuY29uc3QgY29tbWFuZE5vdFNlbnRGcm9tSG9zdCA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMTAwNiwgXHJcbiAgICBuYW1lOiBcIkNvbW1hbmROb3RTZW50XCIsIFxyXG4gICAgbWVzc2FnZTogXCJBcHBsaWNhdGlvbiBGcm9tIEhvc3Qgbm90IGZvdW5kLiAgRGV2aWNlIG5vdCBjb25uZWN0ZWRcIlxyXG59KTtcclxuXHJcbmNvbnN0IHJlYWRGYWlsZWQgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvZGU6IDEwMDcsIFxyXG4gICAgbmFtZTogXCJSZWFkRmFpbGVkXCIsIFxyXG4gICAgbWVzc2FnZTogXCJVbmFibGUgdG8gcmVhZCBkYXRhIGZyb20gZGV2aWNlLiBDb21tdW5pY2F0aW9uIGVycm9yXCJcclxufSk7XHJcblxyXG5jb25zdCByZXNwb25zZU5vdFJlY2VpdmVkID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAxMDA4LCBcclxuICAgIG5hbWU6ICdSZXNwb25zZU5vdFJlY2VpdmVkJywgXHJcbiAgICBtZXNzYWdlOiBcIkNvbW1hbmQgd2FzIHNlbnQsIGJ1dCByZXNwb25zZSB3YXMgbm90IHJlY2VpdmVkIGZyb20gZGV2aWNlXCJcclxufSk7XHJcblxyXG5jb25zdCBnZXRTZXJ2aWNlRmFpbCA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMTAwOSwgXHJcbiAgICBuYW1lOiBcIkdldFNlcnZpY2VGYWlsXCIsIFxyXG4gICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcmV0cmlldmUgcHJpbWFyeSBHQVRUIHNlcnZpY2UuIFBsZWFzZSBjb25uZWN0IGRldmljZVwiXHJcbn0pO1xyXG5cclxuY29uc3QgY29tbWFuZE5vdEFjY2VwdGVkID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAxMDEzLFxyXG4gICAgbmFtZTogXCJDb21tYW5kTm90QWNjZXB0ZWRcIixcclxuICAgIG1lc3NhZ2U6IFwiRGV2aWNlIGRpZCBub3QgYWNjZXB0IGNvbW1hbmRcIlxyXG59KTtcclxuXHJcbmNvbnN0IG1pc3NpbmdSZXF1aXJlZEZpZWxkcyA9IGZpZWxkTmFtZSA9PiBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvZGU6IDEwMTQsXHJcbiAgICBuYW1lOiBcIk1pc3NpbmdSZXF1aXJlZFBhcmFtZXRlclwiLFxyXG4gICAgbWVzc2FnZTogYCcke2ZpZWxkTmFtZX0nIGlzIHJlcXVpcmVkIHRvIGNhbGwgdGhpcyBmdW5jdGlvbi5gXHJcbn0pO1xyXG5cclxuY29uc3Qgd3JvbmdJbnB1dFR5cGVzID0gYWNjZXB0YWJsZVR5cGVzID0+IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMTAxNSxcclxuICAgIG5hbWU6IFwiSW5jb3JyZWN0SW5wdXRUeXBlXCIsXHJcbiAgICBtZXNzYWdlOiBgUGFyYW1ldGVyIHR5cGUgd2FzIG5vdCBjb3JyZWN0LCBhY2NlcHRhYmxlIHR5cGUocykgYXJlOiAke2FjY2VwdGFibGVUeXBlcy5qb2luKFwiLCBcIil9YFxyXG59KTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgICBjb21tYW5kTm90QWNjZXB0ZWQsXHJcbiAgICBjb21tYW5kTm90U2VudCxcclxuICAgIHJlc3BvbnNlTm90UmVjZWl2ZWQsXHJcbiAgICBkZXZpY2VOb3RGb3VuZCxcclxuICAgIGRldmljZU5vdE9wZW4sXHJcbiAgICBnYXR0U2VydmVyTm90Q29ubmVjdGVkLFxyXG4gICAgcmVhZEZhaWxlZCxcclxuICAgIGNvbW1hbmROb3RTZW50RnJvbUhvc3QsXHJcbiAgICBnZXRTZXJ2aWNlRmFpbCxcclxuICAgIG5vdEZvdW5kT2JqLFxyXG4gICAgYXBpTmV0d29ya0VycixcclxuICAgIG1pc3NpbmdSZXF1aXJlZEZpZWxkcyxcclxuICAgIHdyb25nSW5wdXRUeXBlc1xyXG59XHJcbiIsImltcG9ydCBFcnJvckhhbmRsZXIgZnJvbSAnLi4vZXJyb3JIYW5kbGVyJztcclxuaW1wb3J0IHsgXHJcbiAgICBkZXZpY2VOb3RGb3VuZCwgXHJcbiAgICBnYXR0U2VydmVyTm90Q29ubmVjdGVkLFxyXG4gICAgZ2V0U2VydmljZUZhaWwsXHJcbiAgICBub3RGb3VuZE9iaixcclxuICAgIGFwaU5ldHdvcmtFcnJcclxufSBmcm9tICcuLi9lcnJvckhhbmRsZXIvZXJyQ29uc3RhbnRzJztcclxuaW1wb3J0IHsgY2FyZFR5cGVBbGwsIGNhcmRUeXBlc09iaiwgc3VjY2Vzc2Z1bENsb3NlIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuXHJcbmNsYXNzIERldmljZUJhc2UgZXh0ZW5kcyBFcnJvckhhbmRsZXIge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsYmFja3MpIHtcclxuICAgICAgICBzdXBlcihjYWxsYmFja3MpO1xyXG5cclxuICAgICAgICB0aGlzLmRldmljZSA9IGRldmljZTtcclxuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RDYWxsYmFjayA9IGNhbGxiYWNrcy5kaXNjb25uZWN0SGFuZGxlcjtcclxuICAgICAgICB0aGlzLmdhdHRTZXJ2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2FyZFNlcnZpY2UgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmRldmljZVVVSURzID0gW1xyXG4gICAgICAgICAgICBcIjA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDEwNFwiLFxyXG4gICAgICAgICAgICBcIjA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDEwM1wiLCBcclxuICAgICAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDFcIlxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdHVzVmVyYm9zaXR5ID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIFwibWluaW11bVwiOiAweDAwLFxyXG4gICAgICAgICAgICAnbWVkaXVtJzogMHgwMSxcclxuICAgICAgICAgICAgJ3ZlcmJvc2UnOiAweDAyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVuY3lDb2RlID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgICdkb2xsYXInOiBbMHgwOCwgMHg0MF0sXHJcbiAgICAgICAgICAgICdldXJvJzogWzB4MDksIDB4NzhdLFxyXG4gICAgICAgICAgICAncG91bmQnOiBbMHgwOCwgMHgyNl0sXHJcbiAgICAgICAgICAgICdkZWZhdWx0JzogWzB4MDAsIDB4MDBdIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uVHlwZXMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgJ3B1cmNoYXNlJzogMHgwMCxcclxuICAgICAgICAgICAgJ2Nhc2hhZHZhbmNlJzogMHgwMSxcclxuICAgICAgICAgICAgJ2Nhc2hiYWNrJzogMHgwMixcclxuICAgICAgICAgICAgJ3B1cmNoYXNlZ29vZHMnOiAweDA0LFxyXG4gICAgICAgICAgICAncHVyY2hhc2VzZXJ2aWNlcyc6IDB4MDgsXHJcbiAgICAgICAgICAgICdjb250YWN0bGVzc2Nhc2hiYWNrJzogMHgwOSxcclxuICAgICAgICAgICAgJ2Nhc2htYW51YWwnOiAweDEyLFxyXG4gICAgICAgICAgICAncmVmdW5kJzogMHgyMCwgXHJcbiAgICAgICAgICAgICdjaGlwb25seXBheW1lbnQnOiAweDUwXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY29tbWFuZFJlc3BBdmFpbGFibGUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjYXJkVHlwZXMgPSBjYXJkVHlwZVN0ciA9PiAoY2FyZFR5cGVTdHIgIT09ICdhbGwnKSA/IFxyXG4gICAgICAgIChjYXJkVHlwZXNPYmpbIGNhcmRUeXBlU3RyIF0gfHwgMHgwMykgOiAoY2FyZFR5cGVBbGxbIHRoaXMuZGV2aWNlVHlwZSBdIHx8IDB4MDMpO1xyXG4gICAgICAgIFxyXG5cclxuICAgIGNvbm5lY3QgPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtHQVRUXTogRGV2aWNlIENvbm5lY3Rpb24gUmVxdWVzdCB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgIHJldHVybiAodGhpcy5kZXZpY2UpID9cclxuICAgICAgICAgICAgdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0KClcclxuICAgICAgICAgICAgICAgIC50aGVuKHNlcnZlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0dBVFRdOiBEZXZpY2UgY29ubmVjdGVkIC0gR0FUVCBTZXJ2ZXIgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseSB8fCAke25ldyBEYXRlKCl9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYXR0U2VydmVyID0gc2VydmVyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90Rm91bmQpIClcclxuICAgIH0pO1xyXG5cclxuICAgIGRpc2Nvbm5lY3QgPSAoKSA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiAge1xyXG4gICAgICAgIGlmICghdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHN1Y2Nlc3NmdWxDbG9zZSApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRldmljZS5nYXR0LmRpc2Nvbm5lY3QoKVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggc3VjY2Vzc2Z1bENsb3NlIClcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBjYWNoZUNhcmRTZXJ2aWNlQmFzZSA9IHNlcnZpY2VJbmRleCA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHNlcnZpY2VJbmRleCA9IHNlcnZpY2VJbmRleCB8fCAwO1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtHQVRUXTogQ2FjaGUgQ2FyZCBTZXJ2aWNlIFJlcXVlc3QgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICByZXR1cm4gKCF0aGlzLmdhdHRTZXJ2ZXIpID8gXHJcbiAgICAgICAgICAgIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihnYXR0U2VydmVyTm90Q29ubmVjdGVkKSApXHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgdGhpcy5maW5kUHJpbWFyeVNlcnZpY2Uoc2VydmljZUluZGV4KVxyXG4gICAgICAgICAgICAudGhlbihzZXJ2aWNlID0+IHJlc29sdmUoc2VydmljZSkpXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpXHJcbiAgICB9KTtcclxuXHJcbiAgICBmaW5kUHJpbWFyeVNlcnZpY2UgPSBzZXJ2aWNlSW5kZXggPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+XHJcbiAgICAgICAgdGhpcy5nYXR0U2VydmVyLmdldFByaW1hcnlTZXJ2aWNlKHRoaXMuZGV2aWNlVVVJRHNbc2VydmljZUluZGV4XSlcclxuICAgICAgICAudGhlbihzZXJ2aWNlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jYXJkU2VydmljZSA9IHNlcnZpY2U7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbR0FUVF06IFN1Y2Nlc3MhIEdBVFQgQ2FyZCBTZXJ2aWNlIHJldHJpZXZlZCBhbmQgY2FjaGVkIHx8ICR7bmV3IERhdGUoKX1gKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGV2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ2dhdHRzZXJ2ZXJkaXNjb25uZWN0ZWQnLCB0aGlzLmRpc2Nvbm5lY3RIYW5kbGVyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHNlcnZpY2UgKTtcclxuICAgICAgICB9KS5jYXRjaCggZXJyID0+IHtcclxuICAgICAgICAgICAgaWYgKGVyci5jb2RlID09PSBub3RGb3VuZE9iai5lcnJvckNvZGUgJiYgZXJyLm5hbWUgPT09IG5vdEZvdW5kT2JqLmVycm9yTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiggdGhpcy5kZXZpY2VVVUlEc1tzZXJ2aWNlSW5kZXggKyAxXSAhPT0gXCJ1bmRlZmluZWRcIiApKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBbRVJST1JdOiBGYWlsZWQgdG8gY29ubmVjdC4gVVVJRDogJHt0aGlzLmRldmljZVVVSURzWyBzZXJ2aWNlSW5kZXggXX0gaXMgbm90IHZhbGlkIGZvciB0aGlzIGRldmljZS4gVHJ5aW5nIGFnYWluIHdpdGggVVVJRDogJHt0aGlzLmRldmljZVVVSURzWyBzZXJ2aWNlSW5kZXggKyAxIF19IHx8ICR7bmV3IERhdGUoKX1gXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuZmluZFByaW1hcnlTZXJ2aWNlKHNlcnZpY2VJbmRleCArIDEpICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbRVJST1JdOiBGYWlsZWQgdG8gcmV0cmlldmUgQ2FyZCBTZXJ2aWNlIC0gVVVJRDogJHt0aGlzLmRldmljZVVVSURzWyBzZXJ2aWNlSW5kZXggXX0gaXMgbm90IHZhbGlkIGZvciB0aGlzIGRldmljZS4gfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoIGVyciApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgY29ubmVjdEFuZENhY2hlID0gb3B0aW9uYWxJbmRleCA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cclxuICAgICAgICBsZXQgdHJ5VG9Db25uZWN0ID0gdHJ5Q291bnQgPT4gbmV3IFByb21pc2UoIChpbm5lclJlc29sdmUsIGlubmVyUmVqZWN0KSA9PiAodHJ5Q291bnQgPCA0KSA/IFxyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3QoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oICgpID0+IHRoaXMuY2FjaGVDYXJkU2VydmljZUJhc2Uob3B0aW9uYWxJbmRleCkgKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oIGNhY2hlU2VydmljZVJlc3AgPT4gaW5uZXJSZXNvbHZlKCBjYWNoZVNlcnZpY2VSZXNwIClcclxuICAgICAgICAgICAgICAgICkuY2F0Y2goIGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVyci5jb2RlID09PSBhcGlOZXR3b3JrRXJyLmNvZGUgJiYgZXJyLm5hbWUgPT09IGFwaU5ldHdvcmtFcnIubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0VSUk9SXTogRXJyb3IgY2FjaGluZyBHQVRUIFNlcnZpY2UgLSBDbGVhcmluZyBjYWNoZSBhbmQgdHJ5aW5nIGFnYWluLiB8fCAke25ldyBEYXRlKCl9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyR2F0dENhY2hlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5uZXJSZXNvbHZlKCB0cnlUb0Nvbm5lY3QoIHRyeUNvdW50ICsgMSApICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtFUlJPUl06IEZhaWxlZCB0byBjYWNoZSBHQVRUIFNlcnZpY2UgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5uZXJSZWplY3QoIGVyciApXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICBpbm5lclJlamVjdCggdGhpcy5idWlsZERldmljZUVycihnZXRTZXJ2aWNlRmFpbCkgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiB0cnlUb0Nvbm5lY3QoMCkudGhlbihcclxuICAgICAgICAgICAgY2FjaGVTZXJ2aWNlUmVzcCA9PiByZXNvbHZlKCBjYWNoZVNlcnZpY2VSZXNwKVxyXG4gICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIG9uRGVzdHJveUhhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGV2aWNlICYmIHRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSBcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGV2aWNlLmdhdHQuZGlzY29ubmVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHdhaXRGb3JEZXZpY2VSZXNwb25zZSA9IG1heFRyaWVzID0+IG5ldyBQcm9taXNlKCByZXNvbHZlID0+IHtcclxuXHJcbiAgICAgICAgbGV0IHdhaXRGb3JSZXNwb25zZSA9IHRyeU51bWJlciA9PiBcclxuICAgICAgICAgICAgKHRyeU51bWJlciA8IG1heFRyaWVzKSA/IFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuY29tbWFuZFJlc3BBdmFpbGFibGUpID8gcmVzb2x2ZSggdHJ1ZSApIDogc2V0VGltZW91dCgoKSA9PiB3YWl0Rm9yUmVzcG9uc2UodHJ5TnVtYmVyICsgMSksIDIwMClcclxuICAgICAgICAgICAgOiByZXNvbHZlKCBmYWxzZSApO1xyXG5cclxuICAgICAgICB3YWl0Rm9yUmVzcG9uc2UoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkaXNjb25uZWN0SGFuZGxlciA9IGV2ZW50ID0+IHtcclxuICAgICAgICB0aGlzLmdhdHRTZXJ2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2FyZFNlcnZpY2UgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbRGlzY29ubmVjdGVkXTogRGlzY29ubmVjdCBldmVudC4gUmV0dXJuaW5nIGV2ZW50IHRvIHVzZXIsIHJlbW92aW5nIGRldmljZSBsaXN0ZW5lciB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGlzY29ubmVjdENhbGxiYWNrKGV2ZW50KTtcclxuICAgICAgICB0aGlzLmRldmljZS5yZW1vdmVFdmVudExpc3RlbmVyKCdnYXR0c2VydmVyZGlzY29ubmVjdGVkJywgdGhpcy5kaXNjb25uZWN0SGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgaXNEZXZpY2VDb25uZWN0ZWQgPSAoKSA9PiAodGhpcy5kZXZpY2UuZ2F0dCkgPyB0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCA6IGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEZXZpY2VCYXNlOyIsImltcG9ydCBEZXZpY2VCYXNlIGZyb20gJy4uL2RldmljZXMvYmFzZUNsYXNzJztcclxuXHJcbmNsYXNzIFBpblV0aWxzIGV4dGVuZHMgRGV2aWNlQmFzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIGNhbGxCYWNrcykge1xyXG4gICAgICAgIHN1cGVyKGRldmljZSwgY2FsbEJhY2tzKTtcclxuICAgIH1cclxuXHJcbiAgICBkZWNpbWFsVG9CaW5hcnkgPSBudW0gPT4ge1xyXG4gICAgICAgIGxldCBiaW5hcnlOdW0gPSAobnVtID4+PiAwKS50b1N0cmluZygyKTtcclxuICAgICAgICByZXR1cm4gXCIwMDAwMDAwMFwiLnN1YnN0cihiaW5hcnlOdW0ubGVuZ3RoKSArIGJpbmFyeU51bTtcclxuICAgIH1cclxuXHJcbiAgICBzdHJpbmdOdW1Ub0Jvb2wgPSBzdHJpbmdOdW0gPT4gISErc3RyaW5nTnVtO1xyXG5cclxuICAgIGZpbmROdWxsVGVybWluYXRlZFN0cmluZyA9IG51bGxUZXJtaW5hdGVkQXJyYXkgPT4ge1xyXG4gICAgICAgIGxldCB0YXJnZXRJbmRleDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudWxsVGVybWluYXRlZEFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChudWxsVGVybWluYXRlZEFycmF5W2ldID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbFRlcm1pbmF0ZWRBcnJheVtpICsgMV0gPT09IDAgJiYgbnVsbFRlcm1pbmF0ZWRBcnJheVtpICsgMl0gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAodGFyZ2V0SW5kZXgpID8gXHJcbiAgICAgICAgICAgIHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcobnVsbFRlcm1pbmF0ZWRBcnJheS5zbGljZSgyLCB0YXJnZXRJbmRleCkgKSBcclxuICAgICAgICAgICAgOiB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKG51bGxUZXJtaW5hdGVkQXJyYXkuc2xpY2UoMikgKTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kUGluTGVuZ3RoID0gKG1heExlbiwgbWluTGVuKSA9PiB7XHJcbiAgICAgICAgbGV0IG1heExlbmd0aCA9IDEyO1xyXG4gICAgICAgIGxldCBtaW5MZW5ndGggPSA0O1xyXG5cclxuICAgICAgICBpZiAobWF4TGVuKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4TGVuID09PSAnbnVtYmVyJyAmJiBtYXhMZW4gPD0gMTIpXHJcbiAgICAgICAgICAgICAgICBtYXhMZW5ndGggPSAobWF4TGVuID49IDQpID8gbWF4TGVuIDogMTI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobWluTGVuKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWluTGVuID09PSAnbnVtYmVyJyAmJiBtaW5MZW4gPj00KVxyXG4gICAgICAgICAgICAgICAgbWluTGVuZ3RoID0gKG1pbkxlbiA8PSBtYXhMZW5ndGgpID8gbWluTGVuIDogNDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwYXJzZUludChgJHttYXhMZW5ndGgudG9TdHJpbmcoMTYpfSR7bWluTGVuZ3RoLnRvU3RyaW5nKDE2KX1gLCAxNik7XHJcbiAgICB9XHJcblxyXG4gICAgYnVpbGRQaW5PcHRpb25zQnl0ZSA9IChsYW5ndWFnZVNlbGVjdGlvbiwgd2FpdE1lc3NhZ2UsIHZlcmlmeVBpbiwgcGluQmxvY2tGb3JtYXQpID0+IHtcclxuICAgICAgICBjb25zdCBsYW5ndWFnZVByb21wdHMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgXCJkaXNhYmxlZFwiOiBcIjAwXCIsXHJcbiAgICAgICAgICAgIFwiZW5nbGlzaGZyZW5jaFwiOiBcIjAxXCIsXHJcbiAgICAgICAgICAgIFwiYWxsc3BlY2lmaWVkXCI6IFwiMTBcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsYW5ndWFnZVNlbGVjdGlvbiA9IChsYW5ndWFnZVNlbGVjdGlvbikgPyAobGFuZ3VhZ2VQcm9tcHRzWyBsYW5ndWFnZVNlbGVjdGlvbi50b0xvd2VyQ2FzZSgpIF0gfHwgbGFuZ3VhZ2VQcm9tcHRzLmRpc2FibGVkKSA6IGxhbmd1YWdlUHJvbXB0cy5kaXNhYmxlZDtcclxuICAgICAgICB3YWl0TWVzc2FnZSA9ICh0eXBlb2Ygd2FpdE1lc3NhZ2UgPT09ICdib29sZWFuJykgPyB3YWl0TWVzc2FnZSA6IHRydWU7XHJcbiAgICAgICAgdmVyaWZ5UGluID0gKHR5cGVvZiB3YWl0TWVzc2FnZSA9PT0gJ2Jvb2xlYW4nKSA/IHdhaXRNZXNzYWdlIDogdHJ1ZTtcclxuICAgICAgICBcclxuICAgICAgICBwaW5CbG9ja0Zvcm1hdCA9IChwaW5CbG9ja0Zvcm1hdCkgPyBcclxuICAgICAgICAgICAgKHBpbkJsb2NrRm9ybWF0LnRvTG93ZXJDYXNlKCkgaW4gWydpc28wJywgJ2lzbzMnXSkgPyBcclxuICAgICAgICAgICAgICAgIChwaW5CbG9ja0Zvcm1hdC50b0xvd2VyQ2FzZSgpID09PSAnaXNvMCcpID8gJzAnIDogJzEnIFxyXG4gICAgICAgICAgICA6ICcwJ1xyXG4gICAgICAgIDogJzAnO1xyXG5cclxuICAgICAgICBjb25zdCBiaW5hcnlSZXN1bHQgPSBgMDAwJHtsYW5ndWFnZVNlbGVjdGlvbn0keygod2FpdE1lc3NhZ2UpID8gJzEnIDogJzAnKX0keygodmVyaWZ5UGluKSA/ICcxJyA6ICcwJyl9JHtwaW5CbG9ja0Zvcm1hdH1gO1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtQaW5PcHRpb25zQnl0ZV06IGJpbmFyeSBzdHJpbmc6ICR7YmluYXJ5UmVzdWx0fSB8fCBieXRlIHJlc3VsdDogJHtwYXJzZUludChiaW5hcnlSZXN1bHQsIDIpfWApXHJcblxyXG4gICAgICAgIHJldHVybiBwYXJzZUludChiaW5hcnlSZXN1bHQsIDIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQaW5VdGlsczsiLCJpbXBvcnQgUGluVXRpbHMgZnJvbSAnLi4vdXRpbHMvcGluVXRpbHMnO1xyXG5pbXBvcnQgeyBjb25maWdTdHIsIHVua25vd24sIGFzY2lpIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuXHJcbmNsYXNzIFBhcnNlUGluQ29uZmlnIGV4dGVuZHMgUGluVXRpbHMge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsQmFja3MpIHtcclxuICAgICAgICBzdXBlcihkZXZpY2UsIGNhbGxCYWNrcyk7XHJcblxyXG4gICAgICAgIHRoaXMudHJhY2tEYXRhT3B0aW9ucyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICBcIjAwXCI6IFwiRGlzYWJsZWRcIixcclxuICAgICAgICAgICAgXCIwMVwiOiBcIkVuYWJsZWRcIixcclxuICAgICAgICAgICAgXCIxMVwiOiBcIlJlcXVpcmVkXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5lbXZMMkNvbmZpZ09wdGlvbnMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgXCIwMDAwXCI6IFwiTm8gTDIgQ2FwYWJpbGl0eVwiLFxyXG4gICAgICAgICAgICBcIjAwMDFcIjogYCR7Y29uZmlnU3RyfSBDMSAoRU1WQ28gY2VydGlmaWVkKWAsXHJcbiAgICAgICAgICAgIFwiMDAxMFwiOiBgJHtjb25maWdTdHJ9IEMyYCxcclxuICAgICAgICAgICAgXCIwMDExXCI6IGAke2NvbmZpZ1N0cn0gQzNgLFxyXG4gICAgICAgICAgICBcIjAxMDBcIjogYCR7Y29uZmlnU3RyfSBDNCAoRU1WQ28gY2VydGlmaWVkKWAsXHJcbiAgICAgICAgICAgIFwiMDEwMVwiOiBgJHtjb25maWdTdHJ9IEM1IChFTVZDbyBjZXJ0aWZpZWQpYCxcclxuICAgICAgICAgICAgXCIwMTEwXCI6IGAke2NvbmZpZ1N0cn0gQzZgLFxyXG4gICAgICAgICAgICBcIjAxMTFcIjogYCR7Y29uZmlnU3RyfSBDN2BcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5lbmFibGVkQnJhbmRzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIFwiMFwiOiBcIkFsbCBjb250YWNsZXNzIGtlcm5hbHMgZW5hYmxlZFwiLFxyXG4gICAgICAgICAgICBcIjFcIjogXCJQYXlQYXNzL01DTCBzdXBwb3J0IGRpc2FibGVkXCIsXHJcbiAgICAgICAgICAgIFwiMlwiOiBcInBheVdhdmUgc3VwcG9ydCBkaXNhYmxlZFwiLFxyXG4gICAgICAgICAgICBcIjRcIjogXCJFeHByZXNzcGF5IHN1cHBvcnQgZGlzYWJsZWRcIixcclxuICAgICAgICAgICAgXCI4XCI6IFwiRC1QQVMgc3VwcG9ydCBkaXNhYmxlZFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VEZXZpY2VDb25maWd1cmF0aW9uID0gY29uZmlnQXJyID0+ICh7XHJcbiAgICAgICAgLi4udGhpcy5maXJzdERldmljZUNvbnRyb2xCeXRlKCB0aGlzLmRlY2ltYWxUb0JpbmFyeShjb25maWdBcnJbMV0pICksXHJcbiAgICAgICAgLi4udGhpcy5zZWNvbmREZXZpY2VDb250cm9sQnl0ZSggdGhpcy5kZWNpbWFsVG9CaW5hcnkoY29uZmlnQXJyWzJdKSApLFxyXG4gICAgICAgIC4uLnRoaXMubWFza0NvbmZpZ3VyYXRpb25CeXRlKCB0aGlzLmRlY2ltYWxUb0JpbmFyeShjb25maWdBcnJbM10pICksXHJcbiAgICAgICAgLi4udGhpcy5tc3JDb25maWd1cmF0aW9uQnl0ZSggdGhpcy5kZWNpbWFsVG9CaW5hcnkoY29uZmlnQXJyWzRdKSApLFxyXG4gICAgICAgIG1hc2tDaGFyYWN0ZXI6IHRoaXMuZmluZE1hc2tDaGFyYWN0ZXIoY29uZmlnQXJyWzVdKSxcclxuICAgICAgICBsZWFkaW5nVW5tYXNrZWRMZW5ndGg6IHBhcnNlSW50KHRoaXMuZGVjaW1hbFRvQmluYXJ5KCBjb25maWdBcnJbNl0pLnNsaWNlKDQpLCAyKSxcclxuICAgICAgICB0cmFpbGluZ1VubWFza2VkTGVuZ3RoOiBwYXJzZUludCh0aGlzLmRlY2ltYWxUb0JpbmFyeSggY29uZmlnQXJyWzZdKS5zbGljZSgwLCA0KSwgMiksXHJcbiAgICAgICAgZW12TDJJY3NDb25maWc6ICh0aGlzLmVtdkwyQ29uZmlnT3B0aW9uc1sgdGhpcy5kZWNpbWFsVG9CaW5hcnkoY29uZmlnQXJyWzddKS5zbGljZSgwLCA0KSBdIHx8IGAke3Vua25vd259L1VuZG9jdW1lbnRlZCBFTVYgTDIgSUNTICR7Y29uZmlnU3RyfWApLFxyXG4gICAgICAgIC4uLnRoaXMuY29udGFjdGxlc3NDb25maWcoIGNvbmZpZ0Fycls4XSApXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb250YWN0bGVzc0NvbmZpZyA9IGNvbnRhY3RsZXNzQnl0ZSA9PiAoe1xyXG4gICAgICAgIGNvbnRhY3RsZXNzU3VwcG9ydDogdGhpcy5lbmFibGVkQnJhbmRzWyB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKFtjb250YWN0bGVzc0J5dGVdKVswXSBdLFxyXG4gICAgICAgIGNvbnRhY3RsZXNzR3VpQ29udHJvbHM6ICh0aGlzLmRlY2ltYWxUb0JpbmFyeShjb250YWN0bGVzc0J5dGUpWzVdID09PSBcIjFcIikgPyBcIkFsdGVybmF0ZVwiIDogXCJTdGFuZGFyZFwiXHJcbiAgICB9KVxyXG5cclxuICAgIGZpbmRNYXNrQ2hhcmFjdGVyID0gbnVtQ2hhciA9PiB7XHJcbiAgICAgICAgaWYgKG51bUNoYXIgPT09IDQ4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgJHthc2NpaX06ICcwJ2BcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG51bUNoYXJUb0hleCA9IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoW251bUNoYXJdKTtcclxuICAgICAgICAgICAgY29uc3QgbnVtQ2hhclRvQXNjaWkgPSB0aGlzLmhleFRvQXNjaWkoIG51bUNoYXJUb0hleCApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChudW1DaGFyVG9Bc2NpaSkgPyBgJHthc2NpaX06ICcke251bUNoYXJUb0FzY2lpfSdgIFxyXG4gICAgICAgICAgICAgICAgOiBgTm9uLSR7YXNjaWl9IGNoYXJhY3RlciBpbiBoZXg6ICcke251bUNoYXJUb0hleH0nYFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmaXJzdERldmljZUNvbnRyb2xCeXRlID0gZGV2aWNlQ29udHJvbEJ5dGUgPT4gKHtcclxuICAgICAgICByZXF1aXJlTXV0dWFsQXV0aDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woZGV2aWNlQ29udHJvbEJ5dGVbMF0pLFxyXG4gICAgICAgIG1zckVuY3J5cHRpb25WYXJpYW50OiAoZGV2aWNlQ29udHJvbEJ5dGVbMV0gPT09IFwiMVwiKSA/IFwiREFUQVwiIDogXCJQSU5cIixcclxuICAgICAgICBpc0NsZWFyVGV4dEVuYWJsZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKGRldmljZUNvbnRyb2xCeXRlWzNdKSxcclxuICAgICAgICBpc0JlZXBlck1vZGVFbmFibGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbChkZXZpY2VDb250cm9sQnl0ZVs0XSksXHJcbiAgICAgICAgaXNCaXRtYXBMb2NrZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKGRldmljZUNvbnRyb2xCeXRlWzZdKSxcclxuICAgICAgICBpc0NvbmZpZ3VyYXRpb25Mb2NrZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKGRldmljZUNvbnRyb2xCeXRlWzddKVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2Vjb25kRGV2aWNlQ29udHJvbEJ5dGUgPSBkZXZpY2VDdHJsQnl0ZSA9PiAoe1xyXG4gICAgICAgIGlzQXJwY01hY0VuYWJsZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKGRldmljZUN0cmxCeXRlWzFdKSxcclxuICAgICAgICBpc0ZpbmFuY2lhbEljY0NhcmRUeXBlUmVwb3J0aW5nRW5hYmxlZDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woZGV2aWNlQ3RybEJ5dGVbMl0pLFxyXG4gICAgICAgIGFycWNCYXRjaERhdGFPdXRwdXRGb3JtYXQ6IChkZXZpY2VDdHJsQnl0ZVszXSA9PT0gXCIxXCIpID8gXCJSZXNlcnZlZCBGb3JtYXRcIiA6IFwiRHluYVBybyBGb3JtYXRcIlxyXG4gICAgfSk7XHJcblxyXG4gICAgbWFza0NvbmZpZ3VyYXRpb25CeXRlID0gbWFza0NvbmZpZ0J5dGUgPT4gKHtcclxuICAgICAgICBpc0lzb01hc2tFbmFibGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbChtYXNrQ29uZmlnQnl0ZVs3XSksXHJcbiAgICAgICAgaXNDaGVja0RpZ2l0RW5hYmxlZDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2wobWFza0NvbmZpZ0J5dGVbNl0pLFxyXG4gICAgICAgIGlzTXMyUG9pbnQwRW5hYmxlZDogKCBtYXNrQ29uZmlnQnl0ZS5zbGljZSg0LCA2KSAhPT0gXCIwMFwiKVxyXG4gICAgfSk7XHJcblxyXG4gICAgbXNyQ29uZmlndXJhdGlvbkJ5dGUgPSBtc3JDb25maWdCeXRlID0+ICh7XHJcbiAgICAgICAgaXNBQU1WQWNhcmRFbmFibGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbChtc3JDb25maWdCeXRlWzddKSxcclxuICAgICAgICB0cmFjazNEYXRhOiAoIHRoaXMudHJhY2tEYXRhT3B0aW9uc1sgbXNyQ29uZmlnQnl0ZS5zbGljZSg0LCA2KSBdIHx8IHVua25vd24gKSxcclxuICAgICAgICB0cmFjazJEYXRhOiAoIHRoaXMudHJhY2tEYXRhT3B0aW9uc1sgbXNyQ29uZmlnQnl0ZS5zbGljZSgyLCA0KSBdIHx8IHVua25vd24gKSxcclxuICAgICAgICB0cmFjazFEYXRhOiAoIHRoaXMudHJhY2tEYXRhT3B0aW9uc1sgbXNyQ29uZmlnQnl0ZS5zbGljZSgwLCAyKSBdIHx8IHVua25vd24gKSxcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBhcnNlUGluQ29uZmlnO1xyXG4iLCJpbXBvcnQgUGFyc2VQaW5Db25maWcgZnJvbSAnLi9waW5Db25maWd1cmF0aW9uJztcclxuaW1wb3J0IHsgdW5rbm93biB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XHJcblxyXG5jbGFzcyBQaW5TdGF0dXNQYXJzZXIgZXh0ZW5kcyBQYXJzZVBpbkNvbmZpZyB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIGNhbGxCYWNrcykge1xyXG4gICAgICAgIHN1cGVyKGRldmljZSwgY2FsbEJhY2tzKTtcclxuXHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25TdGF0dXMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgMHgwMDogXCJPa1wiLFxyXG4gICAgICAgICAgICAweDAxOiBcIkNhcmRob2xkZXIgQ2FuY2VsXCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiVGltZW91dFwiLFxyXG4gICAgICAgICAgICAweDAzOiBcIkhvc3QgQ2FuY2VsXCIsXHJcbiAgICAgICAgICAgIDB4MDQ6IFwiVmVyaWZ5IGZhaWxcIixcclxuICAgICAgICAgICAgMHgwNTogXCJLZXlwYWQgU2VjdXJpdHlcIixcclxuICAgICAgICAgICAgMHgwNjogXCJDYWxpYnJhdGlvbiBEb25lXCIsXHJcbiAgICAgICAgICAgIDB4MDc6IFwiV3JpdGUgd2l0aCBkdXBsaWNhdGUgUklEIGFuZCBpbmRleFwiLFxyXG4gICAgICAgICAgICAweDA4OiBcIldyaXRlIHdpdGggY29ycnVwdGVkIEtleVwiLFxyXG4gICAgICAgICAgICAweDA5OiBcIkNBIFB1YmxpYyBLZXkgcmVhY2hlZCBtYXhpbXVtIGNhcGFjaXR5XCIsXHJcbiAgICAgICAgICAgIDB4MEE6IFwiQ0EgUHVibGljIEtleSByZWFkIHdpdGggaW52YWxpZCBSSUQgb3IgSW5kZXhcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLkFDS1NUUyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIk9rXCIsXHJcbiAgICAgICAgICAgIDB4MTU6IFwiUklEIGVycm9yL0luZGV4IG5vdCBmb3VuZFwiLFxyXG4gICAgICAgICAgICAweDgwOiBcIkRldmljZSBFcnJvcjogZXJyb3IsIHRhbXBlciwgbWlzc2luZyBjZXJ0aWZpY2F0ZSBvciBpbmNvcnJlY3Qgc2lnbmF0dXJlIGRldGVjdGVkXCIsXHJcbiAgICAgICAgICAgIDB4ODE6IFwiRGV2aWNlIG5vdCBpZGxlXCIsXHJcbiAgICAgICAgICAgIDB4ODI6IFwiRGF0YSBFcnJvciBvciBCYWQgUGFyYW1hdGVyKHMpXCIsXHJcbiAgICAgICAgICAgIDB4ODM6IFwiTGVuZ3RoIEVycm9yOiBkYXRhIHNpemUgaXMgZWl0aGVyIHRvbyBzbWFsbCwgdG9vIGxhcmdlLCBpbmNvbXBsZXRlLCBvciBPSUQgb2YgdGhlIGNlcnQgZG9lc24ndCBtYXRjaCBwcmVkZWZpbmVkIE9JRFwiLFxyXG4gICAgICAgICAgICAweDg0OiBcIlBBTiBFeGlzdHNcIixcclxuICAgICAgICAgICAgMHg4NTogXCJNaXNzaW5nIG9yIEluY29ycmVjdCBLZXlcIixcclxuICAgICAgICAgICAgMHg4NjogXCJEZXZpY2UgQnVzeVwiLFxyXG4gICAgICAgICAgICAweDg3OiBcIkRldmljZSBMb2NrZWRcIixcclxuICAgICAgICAgICAgMHg4ODogXCJBdXRoIHJlcXVpcmVkXCIsXHJcbiAgICAgICAgICAgIDB4ODk6IFwiQmFkIEF1dGhcIixcclxuICAgICAgICAgICAgMHg4QTogXCJEZXZpY2UgTm90IEF2YWlsYWJsZVwiLFxyXG4gICAgICAgICAgICAweDhCOiBcIkFtb3VudCBOZWVkZWQgLSBJZiBQSU4gYW1vdW50IGlzIHJlcXVpcmVkLCBubyBhbW91bnQgaGFzIGJlZW4gc2V0XCIsXHJcbiAgICAgICAgICAgIDB4OEM6IFwiQmF0dGVyeSBpcyBjcml0aWNhbGx5IGxvd1wiLFxyXG4gICAgICAgICAgICAweDhEOiBcIkRldmljZSBpcyByZXNldHRpbmdcIixcclxuICAgICAgICAgICAgMHg5MDogXCJDZXJ0aWZpY2F0ZSBkb2VzIG5vdCBleGlzdFwiLFxyXG4gICAgICAgICAgICAweDkxOiBcIkV4cGlyZWQgKENlcnQvQ1JMKVwiLFxyXG4gICAgICAgICAgICAweDkyOiBcIkludmFsaWQgKENlcnQvQ1JML01lc3NhZ2UpXCIsXHJcbiAgICAgICAgICAgIDB4OTM6IFwiUmV2b2tlZCAoQ2VydC9DUkwpXCIsXHJcbiAgICAgICAgICAgIDB4OTQ6IFwiQ1JMIGRvZXMgbm90IGV4aXN0XCIsXHJcbiAgICAgICAgICAgIDB4OTU6IFwiQ2VydGlmaWNhdGUgZXhpc3RzXCIsXHJcbiAgICAgICAgICAgIDB4OTY6IFwiRHVwbGljYXRlIEtTTi9LZXlcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnBpbkRpc3BsYXlNZXNzYWdlcyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIkhhbmRzIE9mZlwiLFxyXG4gICAgICAgICAgICAweDAxOiBcIkFwcHJvdmVkXCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiRGVjbGluZWRcIixcclxuICAgICAgICAgICAgMHgwMzogXCJDYW5jZWxsZWRcIixcclxuICAgICAgICAgICAgMHgwNDogXCJUaGFuayBZb3VcIixcclxuICAgICAgICAgICAgMHgwNTogXCJQSU4gSW52YWxpZFwiLFxyXG4gICAgICAgICAgICAweDA2OiBcIlByb2Nlc3NpbmdcIixcclxuICAgICAgICAgICAgMHgwNzogXCJQbGVhc2UgV2FpdFwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucGluQ29tbWFuZElkcyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAxOiBcInJlc3BvbnNlQUNLXCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiY2xlYXJTZXNzaW9uXCIsXHJcbiAgICAgICAgICAgIDB4MDM6IFwic3dpcGVcIixcclxuICAgICAgICAgICAgMHgwNDogXCJyZXF1ZXN0UGluRW50cnlcIixcclxuICAgICAgICAgICAgMHgwNTogXCJjYW5jZWxDb21tYW5kXCIsXHJcbiAgICAgICAgICAgIDB4MDY6IFwicmVxdWVzdENhcmRob2xkZXJTZWxlY3Rpb25cIixcclxuICAgICAgICAgICAgMHgwNzogXCJkaXNwbGF5TWVzc2FnZVwiLFxyXG4gICAgICAgICAgICAweDA4OiBcInJlcXVlc3REZXZpY2VTdGF0dXNcIixcclxuICAgICAgICAgICAgMHgwOTogXCJyZXF1ZXN0RGV2aWNlQ29uZmlndXJhdGlvblwiLFxyXG4gICAgICAgICAgICAweDBBOiBcInJlcXVlc3RNc3JEYXRhXCIsXHJcbiAgICAgICAgICAgIDB4MEI6IFwiZ2V0Q2hhbGxlbmdlXCIsXHJcbiAgICAgICAgICAgIDB4MDc6IFwiZGlzcGxheU1lc3NhZ2VcIixcclxuICAgICAgICAgICAgMHhBMjogXCJlbXZUcmFuc2FjdGlvblN0YXR1c1wiLFxyXG4gICAgICAgICAgICAweEFCOiBcInJlcXVlc3RFbXZEYXRhXCIsXHJcbiAgICAgICAgICAgIDB4MzA6IFwiZ2V0S3NuXCIsXHJcbiAgICAgICAgICAgIDB4MDU6IFwiY2FuY2VsQ29tbWFuZFwiLFxyXG4gICAgICAgICAgICAweDFBOiBcInJlcXVlc3REZXZpY2VJbmZvXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jYXJkVHlwZXNFbnVtID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIDB4MDA6IFwiT3RoZXJcIixcclxuICAgICAgICAgICAgMHgwMTogXCJGaW5hbmNpYWxcIixcclxuICAgICAgICAgICAgMHgwMjogXCJBQU1WQVwiLFxyXG4gICAgICAgICAgICAweDAzOiBcIk1hbnVhbFwiLFxyXG4gICAgICAgICAgICAweDA0OiBcIlVua25vd25cIixcclxuICAgICAgICAgICAgMHgwNTogXCJJQ0NcIixcclxuICAgICAgICAgICAgMHgwNjogXCJDb250YWN0bGVzcyBJQ0MgLSBFTVZcIixcclxuICAgICAgICAgICAgMHgwNzogXCJGaW5hbmNpYWwgTVNSICsgSUNDXCIsXHJcbiAgICAgICAgICAgIDB4MDg6IFwiQ29udGFjdGxlc3MgSUNDIC0gTVNEXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5kZXZpY2VTdGF0ZSA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIklkbGVcIixcclxuICAgICAgICAgICAgMHgwMTogXCJTZXNzaW9uXCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiV2FpdCBGb3IgQ2FyZFwiLFxyXG4gICAgICAgICAgICAweDAzOiBcIldhaXQgRm9yIFBJTlwiLFxyXG4gICAgICAgICAgICAweDA0OiBcIldhaXQgRm9yIFNlbGVjdGlvblwiLFxyXG4gICAgICAgICAgICAweDA1OiBcIkRpc3BsYXlpbmcgTWVzc2FnZVwiLFxyXG4gICAgICAgICAgICAweDA2OiBcIlRlc3QgKFJlc2VydmVkIGZvciBmdXR1cmUgdXNlKVwiLFxyXG4gICAgICAgICAgICAweDA3OiBcIk1hbnVhbCBDYXJkIEVudHJ5XCIsXHJcbiAgICAgICAgICAgIDB4MDk6IFwiV2FpdCBDYXJkaG9sZGVyIEVudHJ5XCIsXHJcbiAgICAgICAgICAgIDB4MEE6IFwiQ2hpcCBDYXJkXCIsXHJcbiAgICAgICAgICAgIDB4MEI6IFwiSUNDIEtlcm5lbCBUZXN0XCIsXHJcbiAgICAgICAgICAgIDB4MEM6IFwiRU1WIFRyYW5zYWN0aW9uXCIsXHJcbiAgICAgICAgICAgIDB4MEQ6IFwiU2hvdyBQQU5cIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnBpbktleVN0YXR1c0VudW0gPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgXCIwMFwiOiBcIlBJTiBLZXkgT0tcIixcclxuICAgICAgICAgICAgXCIwMVwiOiBcIlBJTiBLZXkgRXhoYXVzdGVkXCIsXHJcbiAgICAgICAgICAgIFwiMTBcIjogXCJObyBQSU4gS2V5XCIsXHJcbiAgICAgICAgICAgIFwiMTFcIjogXCJQSU4gS2V5IE5vdCBCb3VuZFwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMubXNyS2V5U3RhdHVzRW51bSA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICBcIjAwXCI6IFwiTVNSIEtleSBPS1wiLFxyXG4gICAgICAgICAgICBcIjAxXCI6IFwiTVNSIEtleSBFeGhhdXN0ZWRcIixcclxuICAgICAgICAgICAgXCIxMFwiOiBcIk5vIE1TUiBLZXlcIixcclxuICAgICAgICAgICAgXCIxMVwiOiBcIk1TUiBLZXkgTm90IEJvdW5kXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jYXJkRGF0YUlkcyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAxOiBcInRyYWNrMVwiLFxyXG4gICAgICAgICAgICAweDAyOiBcInRyYWNrMlwiLFxyXG4gICAgICAgICAgICAweDAzOiBcInRyYWNrM1wiLFxyXG4gICAgICAgICAgICAweDA0OiBcImVuY3J5cHRlZFRyYWNrMVwiLFxyXG4gICAgICAgICAgICAweDA1OiBcImVuY3J5cHRlZFRyYWNrMlwiLFxyXG4gICAgICAgICAgICAweDA2OiBcImVuY3J5cHRlZFRyYWNrM1wiLFxyXG4gICAgICAgICAgICAweDA3OiBcIm1hZ25lUHJpbnRcIixcclxuICAgICAgICAgICAgMHg0MDogXCJlbmNyeXB0ZWRQYW5BbmRFeHBcIixcclxuICAgICAgICAgICAgMHg0MTogXCJzZXJpYWxOdW1iZXJcIixcclxuICAgICAgICAgICAgMHg2MzogXCJrc25BbmRNYWduZVByaW50U3RhdHVzXCIsXHJcbiAgICAgICAgICAgIDB4NjQ6IFwiQ0JDLU1BQ1wiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZGhvbGRlclN0YXR1c0lkcyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAxOiBcIldhaXRpbmcgZm9yIGFtb3VudCBjb25maXJtYXRpb24gc2VsZWN0aW9uXCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiQW1vdW50IGNvbmZpcm1hdGlvbiBzZWxlY3RlZFwiLFxyXG4gICAgICAgICAgICAweDAzOiBcIldhaXRpbmcgZm9yIG11bHRpLXBheW1lbnQgSUNDIEFwcGxpY2F0aW9uIHNlbGVjdGlvblwiLFxyXG4gICAgICAgICAgICAweDA0OiBcIklDQyBBcHBsaWNhdGlvbiBzZWxlY3RlZFwiLFxyXG4gICAgICAgICAgICAweDA3OiBcIldhaXRpbmcgZm9yIGxhbmd1YWdlIHNlbGVjdGlvblwiLFxyXG4gICAgICAgICAgICAweDA4OiBcIkxhbmd1YWdlIHNlbGVjdGVkXCIsXHJcbiAgICAgICAgICAgIDB4MDk6IFwiV2FpdGluZyBmb3IgY3JlZGl0L2RlYml0IHNlbGVjdGlvblwiLFxyXG4gICAgICAgICAgICAweDBBOiBcIkNyZWRpdC9EZWJpdCBzZWxlY3RlZFwiLFxyXG4gICAgICAgICAgICAweDBCOiBcIldhaXRpbmcgZm9yIFBpbiBFbnRyeSBmb3IgSUNDXCIsXHJcbiAgICAgICAgICAgIDB4MEM6IFwiUElOIGVudGVyZWQgZm9yIElDQ1wiLFxyXG4gICAgICAgICAgICAweDBEOiBcIldhaXRpbmcgZm9yIFBpbiBFbnRyeSBmb3IgTVNSXCIsXHJcbiAgICAgICAgICAgIDB4MEU6IFwiUElOIGVudGVyZWQgZm9yIE1TUlwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYnVmZmVyVHlwZXMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgMHgwMjogXCJEZXZpY2UgQ2VydGlmaWNhdGVcIixcclxuICAgICAgICAgICAgMHgzMjogXCJTZXQgQklOIChNQUMpXCIsXHJcbiAgICAgICAgICAgIDB4NDI6IFwiQ1NSXCIsXHJcbiAgICAgICAgICAgIDB4QTE6IFwiRU1WIGRhdGEgaW4gVExWIGZvcm1hdCwgVGFnIERhdGEgKE1BQylcIixcclxuICAgICAgICAgICAgMHhBMjogXCJSRVNFUlZFRFwiLFxyXG4gICAgICAgICAgICAweEEzOiBcIlJFU0VSVkVEXCIsXHJcbiAgICAgICAgICAgIDB4QTQ6IFwiRU1WIGRhdGEgaW4gVExWIGZvcm1hdCwgQXV0aG9yaXphdGlvbiBSZXF1ZXN0IChBUlFDKVwiLFxyXG4gICAgICAgICAgICAweEE1OiBcIkNBIFB1YmxpYyBLZXkgKE1BQylcIixcclxuICAgICAgICAgICAgMHhBQjogXCJFTVYgZGF0YSBpbiBUTFYgZm9ybWF0LCBCYXRjaCBEYXRhXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jYXJkRGF0YU9iaiA9IHt9O1xyXG5cclxuICAgICAgICB0aGlzLmFycWNBcnJpdmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuYmF0Y2hEYXRhQXJyaXZpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5hcnFjVG90YWxMZW4gPSAwO1xyXG4gICAgICAgIHRoaXMuYmF0Y2hUb3RhbExlbiA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdHVzRW51bSA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICBvazogMHgwMCxcclxuICAgICAgICAgICAgZW1wdHk6IDB4MDEsXHJcbiAgICAgICAgICAgIGVycm9yOiAweDAyLFxyXG4gICAgICAgICAgICBkaXNhYmxlZDogMHgwM1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnZlcnRTdGF0dXNUb1N0cmluZyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIk9rXCIsXHJcbiAgICAgICAgICAgIDB4MDE6IFwiRW1wdHlcIixcclxuICAgICAgICAgICAgMHgwMjogXCJFcnJvclwiLFxyXG4gICAgICAgICAgICAweDA0OiBcIkRpc2FibGVkXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kRW12Q2FyZGhvbGRlclN0YXR1cyA9IGNhcmRIb2xkZXJTdGF0dXNCeXRlID0+ICAoe1xyXG4gICAgICAgIGVtdkNhcmRob2xkZXJTdGF0dXM6ICh0aGlzLmNhcmRob2xkZXJTdGF0dXNJZHNbIGNhcmRIb2xkZXJTdGF0dXNCeXRlIF0gfHwgYCR7dW5rbm93bn0vVW5kb2N1bWVudGVkIENhcmRob2xkZXIgSW50ZXJhY3Rpb24gU3RhdHVzIElEOiAke2NhcmRIb2xkZXJTdGF0dXNCeXRlfWApXHJcbiAgICB9KTtcclxuXHJcbiAgICBmaW5kT3BlcmF0aW9uU3RhdHVzID0gc3RhdHVzSWQgPT4gKHtcclxuICAgICAgICBvcGVyYXRpb25TdGF0dXM6ICh0aGlzLm9wZXJhdGlvblN0YXR1c1sgc3RhdHVzSWQgXSB8fCBgJHt1bmtub3dufSBPcGVyYXRpb24gU3RhdHVzYClcclxuICAgIH0pO1xyXG5cclxuICAgIHBhcnNlRGlzcGxheU1lc3NhZ2VEb25lID0gZGlzcGxheVN0YXR1cyA9PiB0aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMoZGlzcGxheVN0YXR1c1syXSk7XHJcblxyXG4gICAgcGFyc2VFbXZDb21wbGV0aW9uID0gY29tbWFuZFJlc3AgPT4ge1xyXG4gICAgICAgIC8vVE9ETzpcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlshLSEtIS0hLSBlbXZDb21wbGV0aW9uIC0hLSEtIS0hXCIsIGNvbW1hbmRSZXNwKTtcclxuICAgICAgICByZXR1cm4gKHtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9ybWF0U2VyaWFsTnVtYmVyID0gY29tbWFuZFJlc3AgPT4ge1xyXG4gICAgICAgIHRoaXMucmVxdWVzdGVkU24gPSB7XHJcbiAgICAgICAgICAgIHNlcmlhbE51bWJlcjogdGhpcy5maW5kTnVsbFRlcm1pbmF0ZWRTdHJpbmcoY29tbWFuZFJlc3ApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZ2V0U2VyaWFsTnVtYmVyID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgZm9ybWF0S3NuQW5kU24gPSBjb21tYW5kUmVzcCA9PiB7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0ZWRLc24gPSB7XHJcbiAgICAgICAgICAgIGtzbjogdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggY29tbWFuZFJlc3Auc2xpY2UoMiwgMTIpICksXHJcbiAgICAgICAgICAgIHNlcmlhbE51bWJlcjogdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggY29tbWFuZFJlc3Auc2xpY2UoMTIsIDIwKSApXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRLc25BdmFpbGFibGUgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybjtcclxufVxyXG5cclxuICAgIGhhbmRsZUJpZ0Jsb2NrQmVnaW4gPSBiaWdCbG9ja0RhdGEgPT4ge1xyXG4gICAgICAgIHN3aXRjaChiaWdCbG9ja0RhdGFbMV0pIHtcclxuICAgICAgICAgICAgY2FzZSAweEE0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcnFjQXJyaXZpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcnFjVG90YWxMZW4gPSB0aGlzLnJlYWRUd29CeXRlTGVuZ3RoKFsgYmlnQmxvY2tEYXRhWzVdLCBiaWdCbG9ja0RhdGFbNF0gXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAweEFCOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5iYXRjaERhdGFBcnJpdmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJhdGNoVG90YWxMZW4gPSB0aGlzLnJlYWRUd29CeXRlTGVuZ3RoKFsgYmlnQmxvY2tEYXRhWzVdLCBiaWdCbG9ja0RhdGFbNF0gXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAweDE4OlxyXG4gICAgICAgICAgICBjYXNlIDB4MjA6XHJcbiAgICAgICAgICAgIGNhc2UgMHgyMTpcclxuICAgICAgICAgICAgICAgIC8vRGVidWcgZGF0YS4gSWdub3JlLlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlclR5cGU6ICh0aGlzLmJ1ZmZlclR5cGVzWyBiaWdCbG9ja0RhdGFbMV0gXSB8fCBcIkJ1ZmZlciB0eXBlIG5vdCBkb2N1bWVudGVkXCIpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUFycWNCaWdCbG9ja0ZpbmlzaCA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBhcnFjID0gdGhpcy5idWlsZEluaXRpYWxEYXRhQXJyYXkoZmFsc2UpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFGb3JBcnFjID0gdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggYXJxYyApO1xyXG5cclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbQVJRQ106ICR7ZGF0YUZvckFycWN9YCk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZERhdGFPYmogPSB7XHJcbiAgICAgICAgICAgIC4uLnRoaXMuY2FyZERhdGFPYmosXHJcbiAgICAgICAgICAgIGFycWNEYXRhOiBkYXRhRm9yQXJxYyxcclxuICAgICAgICAgICAgYXJxY0RhdGFQYXJzZWQ6IHRoaXMudGx2UGFyc2VyKFxyXG4gICAgICAgICAgICAgICAgYXJxYy5zbGljZSgyKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJhd0RhdGEgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5hcnFjQXJyaXZpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVCYXRjaEJpZ0Jsb2NrRmluaXNoID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJhdGNoID0gdGhpcy5idWlsZEluaXRpYWxEYXRhQXJyYXkoZmFsc2UpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFGb3JCYXRjaCA9IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIGJhdGNoICk7XHJcblxyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtCQVRDSCBEQVRBXTogJHtkYXRhRm9yQmF0Y2h9YCk7XHJcblxyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25IYXNTdGFydGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcnNlZEJhdGNoRGF0YSA9IHRoaXMudGx2UGFyc2VyKFxyXG4gICAgICAgICAgICBiYXRjaC5zbGljZSgyKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGlzU2lnbmF0dXJlUmVxdWlyZWQgPSBwYXJzZWRCYXRjaERhdGEuZmluZCggKHsgdGFnIH0pID0+IHRhZyA9PT0gXCJERkRGNDBcIik7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZERhdGFPYmogPSAoaXNTaWduYXR1cmVSZXF1aXJlZCkgPyAoe1xyXG4gICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICBiYXRjaERhdGE6IGRhdGFGb3JCYXRjaCxcclxuICAgICAgICAgICAgYmF0Y2hEYXRhUGFyc2VkOiBwYXJzZWRCYXRjaERhdGEsXHJcbiAgICAgICAgICAgIHNpZ25hdHVyZVJlcXVpcmVkOiAoaXNTaWduYXR1cmVSZXF1aXJlZCA9PT0gMHgwMSlcclxuICAgICAgICB9KSA6ICh7XHJcbiAgICAgICAgICAgIC4uLnRoaXMuY2FyZERhdGFPYmosXHJcbiAgICAgICAgICAgIGJhdGNoRGF0YTogZGF0YUZvckJhdGNoLFxyXG4gICAgICAgICAgICBiYXRjaERhdGFQYXJzZWQ6IHBhcnNlZEJhdGNoRGF0YVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnJhd0RhdGEgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5iYXRjaERhdGFBcnJpdmluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2FjdGlvbkNhbGxiYWNrKCB0aGlzLmNhcmREYXRhT2JqICk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQmlnQmxvY2tGaW5pc2ggPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXJxY0Fycml2aW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUFycWNCaWdCbG9ja0ZpbmlzaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmJhdGNoRGF0YUFycml2aW5nKSB7XHJcbiAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQmF0Y2hCaWdCbG9ja0ZpbmlzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwYXJzZUVtdkNhcmRob2xkZXJJbnRlcmFjdGlvblN0YXR1cyA9IGNhcmRob2xkZXJSZXNwID0+IHtcclxuICAgICAgICBzd2l0Y2goY2FyZGhvbGRlclJlc3BbMV0pIHtcclxuICAgICAgICAgICAgY2FzZSAweDAyOiBcclxuICAgICAgICAgICAgICAgIHJldHVybiAoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZmluZEVtdkNhcmRob2xkZXJTdGF0dXMoY2FyZGhvbGRlclJlc3BbMV0pLFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudENvbmZpcm1lZDogKGNhcmRob2xkZXJSZXNwWzRdID09PSAweDAxKSA/IHRydWUgOiAoY2FyZGhvbGRlclJlc3BbNF0gPT09IDB4MDIpID8gZmFsc2UgOiBcIlVua25vd24vVW5kb2N1bWVudGVkIEFtb3VudCBDb25maXJtZWQgU3RhdHVzXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYXNlIDB4MDQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHtcclxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmZpbmRFbXZDYXJkaG9sZGVyU3RhdHVzKGNhcmRob2xkZXJSZXNwWzFdKSxcclxuICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbk9yTGFiZWxOYW1lOiB0aGlzLmJ1ZmZlclRvVXRmOCggY2FyZGhvbGRlclJlc3Auc2xpY2UoNCkgKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNhc2UgMHgwQTpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZmluZEVtdkNhcmRob2xkZXJTdGF0dXMoY2FyZGhvbGRlclJlc3BbMV0pLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZFNlbGVjdGVkOiAoY2FyZGhvbGRlclJlc3BbNF0gPT09IDB4MDEpID8gXCJDcmVkaXRcIiA6IFxyXG4gICAgICAgICAgICAgICAgICAgIChjYXJkaG9sZGVyUmVzcFs0XSA9PT0gMHgwMikgPyBcIkRlYml0XCIgOiBgJHt1bmtub3dufS9VbmRvY3VtZW50ZWQgcGF5bWVudCBtZXRob2Qgc2VsZWN0ZWRgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2FzZSAweDIwOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5maW5kRW12Q2FyZGhvbGRlclN0YXR1cyhjYXJkaG9sZGVyUmVzcFsxXSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGx2RGF0YTogdGhpcy50bHZQYXJzZXIoIGNhcmRob2xkZXJSZXNwLnNsaWNlKDQpICkgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAodHlwZW9mIGNhcmRob2xkZXJSZXNwWzRdID09PSAndW5kZWZpbmVkJykgPyB0aGlzLmZpbmRFbXZDYXJkaG9sZGVyU3RhdHVzKGNhcmRob2xkZXJSZXNwWzFdKSBcclxuICAgICAgICAgICAgICAgICAgICA6ICh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZmluZEVtdkNhcmRob2xkZXJTdGF0dXMoY2FyZGhvbGRlclJlc3BbMV0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmRvY3VtZW50ZWREYXRhOiB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKCBjYXJkaG9sZGVyUmVzcC5zbGljZSg0KSApXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlQ2FyZFN0YXR1c1JlcG9ydCA9IGNhcmRTdGF0dXMgPT4gKGNhcmRTdGF0dXMubGVuZ3RoIDwgNCkgPyAgXHJcbiAgICAgICAgdGhpcy5maW5kT3BlcmF0aW9uU3RhdHVzKGNhcmRTdGF0dXNbMl0pXHJcbiAgICAgICAgOiAoe1xyXG4gICAgICAgICAgICAuLi50aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMoY2FyZFN0YXR1c1syXSksXHJcbiAgICAgICAgICAgIGNhcmRTdGF0dXM6IChjYXJkU3RhdHVzWzJdID09PSAweDAwKSA/IFwiT2tcIiA6IFwiRXJyb3JcIixcclxuICAgICAgICAgICAgY2FyZFR5cGU6IHRoaXMuY2FyZFR5cGVzRW51bVsgY2FyZFN0YXR1c1szXSBdXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgcGFyc2VBY2tSZXNwb25zZSA9IGFja1Jlc3AgPT4gKHtcclxuICAgICAgICBjb2RlOiBhY2tSZXNwWzFdLFxyXG4gICAgICAgIG1lc3NhZ2U6IHRoaXMuQUNLU1RTWyBhY2tSZXNwWzFdIF0sXHJcbiAgICAgICAgY29tbWFuZFR5cGU6ICggdGhpcy5waW5Db21tYW5kSWRzWyBhY2tSZXNwWzJdIF0gfHwgXCJEZXZpY2UgZXJyb3Igb3IgY29tbWFuZCB0eXBlIG5vdCBkb2N1bWVudGVkXCIgKVxyXG4gICAgfSk7XHJcblxyXG4gICAgcGFyc2VEZXZpY2VTdGF0ZVJlcG9ydCA9IGRldmljZVJlc3AgPT4gKHtcclxuICAgICAgICBkZXZpY2VTdGF0ZTogdGhpcy5kZXZpY2VTdGF0ZVsgZGV2aWNlUmVzcFsxXSBdLCBcclxuICAgICAgICBzZXNzaW9uU3RhdGU6IHRoaXMucGFyc2VTZXNzaW9uU3RhdGUoXHJcbiAgICAgICAgICAgIHRoaXMuZGVjaW1hbFRvQmluYXJ5KCBkZXZpY2VSZXNwWzJdIClcclxuICAgICAgICApLFxyXG4gICAgICAgIGRldmljZVN0YXR1czogdGhpcy5wYXJzZURldmljZVN0YXR1cyhcclxuICAgICAgICAgICAgdGhpcy5kZWNpbWFsVG9CaW5hcnkoZGV2aWNlUmVzcFszXSlcclxuICAgICAgICApLFxyXG4gICAgICAgIGRldmljZUNlcnRTdGF0dXM6IHRoaXMucGFyc2VDZXJ0U3RhdHVzKCBcclxuICAgICAgICAgICAgdGhpcy5kZWNpbWFsVG9CaW5hcnkoIGRldmljZVJlc3BbNF0gKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgaGFyZHdhcmVTdGF0dXM6IHRoaXMucGFyc2VIYXJkd2FyZVN0YXR1cyhcclxuICAgICAgICAgICAgdGhpcy5kZWNpbWFsVG9CaW5hcnkoZGV2aWNlUmVzcFs1XSlcclxuICAgICAgICApLFxyXG4gICAgICAgIGFkZGl0aW9uYWxJbmZvOiB0aGlzLnBhcnNlQWRkaXRpb25hbEluZm8oXHJcbiAgICAgICAgICAgIHRoaXMuZGVjaW1hbFRvQmluYXJ5KGRldmljZVJlc3BbNl0pXHJcbiAgICAgICAgKVxyXG4gICAgfSk7XHJcblxyXG4gICAgcGFyc2VTZXNzaW9uU3RhdGUgPSBiaW5hcnlTdHJpbmcgPT4gKHtcclxuICAgICAgICBwb3dlckRpZENoYW5nZTogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1swXSApLFxyXG4gICAgICAgIGNhcmREYXRhSXNBdmFpbGFibGU6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbNF0gKSxcclxuICAgICAgICBwYW5QYXJzZWRGcm9tQ2FyZDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s1XSApLFxyXG4gICAgICAgIGV4dGVybmFsUGFuU2VudDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s2XSApLFxyXG4gICAgICAgIGFtb3VudFdhc1NlbnQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbN10gKVxyXG4gICAgfSk7XHJcblxyXG4gICAgcGFyc2VDZXJ0U3RhdHVzID0gYmluYXJ5U3RyaW5nID0+ICh7XHJcbiAgICAgICAgbXNyQ3JsQ2VydEV4aXN0czogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1swXSApLFxyXG4gICAgICAgIHBpbkNybENlcnRFeGlzdHM6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbMV0gKSxcclxuICAgICAgICBtZmdVbmJpbmRDZXJ0RXhpc3RzOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzNdICksXHJcbiAgICAgICAgbXNyQ2FDZXJ0RXhpc3RzOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzRdICksXHJcbiAgICAgICAgcGluQ2FDZXJ0RXhpc3RzOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzVdICksXHJcbiAgICAgICAgZGV2aWNlQ2FDZXJ0RXhpc3RzOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzZdICksXHJcbiAgICAgICAgZGV2aWNlQ2VydEV4aXN0czogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s3XSApXHJcbiAgICB9KTtcclxuXHJcbiAgICBwYXJzZURldmljZVN0YXR1cyA9IGJpbmFyeVN0cmluZyA9PiAoYmluYXJ5U3RyaW5nICE9PSBcIjAwMDAwMDAwXCIpID8gKHtcclxuICAgICAgICBwaW5LZXlTdGF0dXM6IHRoaXMucGluS2V5U3RhdHVzRW51bVsgYmluYXJ5U3RyaW5nLnNsaWNlKDYpIF0sXHJcbiAgICAgICAgbXNyS2V5U3RhdHVzOiB0aGlzLm1zcktleVN0YXR1c0VudW1bIGJpbmFyeVN0cmluZy5zbGljZSg0LCA2KSBdLFxyXG4gICAgICAgIHRhbXBlckRldGVjdGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzNdICksXHJcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzFdICksXHJcbiAgICAgICAgZGV2aWNlRXJyb3JEZXRlY3RlZDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1swXSApXHJcbiAgICB9KVxyXG4gICAgOiBcIk9rXCI7XHJcblxyXG4gICAgcGFyc2VIYXJkd2FyZVN0YXR1cyA9IGJpbmFyeVN0cmluZyA9PiAoe1xyXG4gICAgICAgIElFM19vbmx5OiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzBdICksXHJcbiAgICAgICAgU1JFRDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1sxXSApLFxyXG4gICAgICAgIE1hZ0hlYWRJc1Byb2dyYW1tZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbNl0gKSxcclxuICAgICAgICB0YW1wZXJTZW5zb3JzQXJlQWN0aXZlOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzddIClcclxuICAgIH0pO1xyXG5cclxuICAgIHBhcnNlQWRkaXRpb25hbEluZm8gPSBiaW5hcnlTdHJpbmcgPT4gKHtcclxuICAgICAgICBJQ0NfQWNxdWlyZXJNYXN0ZXJLZXlJc0luamVjdGVkOiAhdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s3XSApLFxyXG4gICAgICAgIElDQ19TZXNzaW9uS2V5SXNBY3RpdmU6ICF0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzZdICksXHJcbiAgICAgICAgQ0FQS19FbXZEYXRhYmFzZUlzQ29ycnVwdGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzVdICksXHJcbiAgICAgICAgRW12VGVybWluYWxEYXRhYmFzZUlzQ29ycnVwdGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzRdICksXHJcbiAgICAgICAgY2FyZElzUHJlc2VudEluQ2hpcENhcmRDb25uZWN0b3I6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbM10gKVxyXG4gICAgfSk7XHJcblxyXG4gICAgcGFyc2VDYXJkRGF0YSA9IHBhcnRpYWxOb3RpZmljYXRpb24gPT4ge1xyXG4gICAgICAgIGNvbnN0IHRyYWNrS2V5ID0gKHRoaXMuY2FyZERhdGFJZHNbIHBhcnRpYWxOb3RpZmljYXRpb25bMV0gXSB8fCBgdHJhY2tOYW1lJHt1bmtub3dufWApO1xyXG5cclxuICAgICAgICBpZiAocGFydGlhbE5vdGlmaWNhdGlvblsyXSA9PT0gdGhpcy5zdGF0dXNFbnVtLm9rKSB7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2godHJhY2tLZXkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFjazFcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmREYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHJhY2tLZXldOiB0aGlzLmJ1ZmZlclRvVXRmOChwYXJ0aWFsTm90aWZpY2F0aW9uLnNsaWNlKDQpKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFjazJcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmREYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHJhY2tLZXldOiB0aGlzLmJ1ZmZlclRvVXRmOChwYXJ0aWFsTm90aWZpY2F0aW9uLnNsaWNlKDQpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5mb3JtYXRFeHBQQU4oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsTm90aWZpY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImtzbkFuZE1hZ25lUHJpbnRTdGF0dXNcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmREYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrc246IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcocGFydGlhbE5vdGlmaWNhdGlvbi5zbGljZSg0LCAxNCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWduZVByaW50U3RhdHVzOiB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHBhcnRpYWxOb3RpZmljYXRpb24uc2xpY2UoLTQpKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZERhdGFPYmogPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuY2FyZERhdGFPYmosXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0cmFja0tleV06IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcocGFydGlhbE5vdGlmaWNhdGlvbi5zbGljZSg0KSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FyZERhdGFPYmogPSB7XHJcbiAgICAgICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICAgICAgW3RyYWNrS2V5XTogdGhpcy5jb252ZXJ0U3RhdHVzVG9TdHJpbmdbIHBhcnRpYWxOb3RpZmljYXRpb25bMl0gXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlUGluUmVzcG9uc2UgPSBwaW5SZXNwID0+IHtcclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbUElOIFJlc3BvbnNlXTogUmVzcG9uc2UgZnJvbSBQSU4gRW50cnk6ICR7dGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhwaW5SZXNwKX1gKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gKHBpblJlc3AubGVuZ3RoID4gMikgPyAoe1xyXG4gICAgICAgICAgICBwaW5EYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMocGluUmVzcFsxXSksXHJcbiAgICAgICAgICAgICAgICBwaW5Lc246IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIHBpblJlc3Auc2xpY2UoMiwgMTIpICksXHJcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRQaW5CbG9jazogdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggcGluUmVzcC5zbGljZSgxMiwgMjApIClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgOiB0aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMocGluUmVzcFsxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VDYXJkaG9sZGVyUmVzcG9uc2UgPSBzZWxlY3Rpb25SZXNwID0+IHtcclxuICAgICAgICBjb25zdCBkZXZpY2VLZXlzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIDB4NzE6IFwiTGVmdCBmdW5jdGlvbiBrZXlcIixcclxuICAgICAgICAgICAgMHg3MjogXCJNaWRkbGUgZnVuY3Rpb24ga2V5XCIsXHJcbiAgICAgICAgICAgIDB4NzQ6IFwiUmlnaHQgZnVuY3Rpb24ga2V5XCIsXHJcbiAgICAgICAgICAgIDB4Nzg6IFwiRW50ZXIga2V5XCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChzZWxlY3Rpb25SZXNwLmxlbmd0aCA+IDIpID8gKHtcclxuICAgICAgICAgICAgLi4udGhpcy5maW5kT3BlcmF0aW9uU3RhdHVzKHNlbGVjdGlvblJlc3BbMV0pLFxyXG4gICAgICAgICAgICBrZXlQcmVzc2VkOiAoZGV2aWNlS2V5c1sgc2VsZWN0aW9uUmVzcFsyXSBdIHx8IGAke3Vua25vd259L1VuZG9jdW1lbnRlZCBLZXlgKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgOiB0aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMoc2VsZWN0aW9uUmVzcFsxXSlcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGluU3RhdHVzUGFyc2VyOyIsImltcG9ydCBQaW5TdGF0dXNQYXJzZXIgZnJvbSAnLi4vcGFyc2Vycy9waW5TdGF0dXNQYXJzZXInO1xyXG5pbXBvcnQgeyBcclxuICAgIGRldmljZU5vdEZvdW5kLCBcclxuICAgIHJlYWRGYWlsZWQsIFxyXG4gICAgY29tbWFuZE5vdFNlbnRGcm9tSG9zdCwgXHJcbiAgICBjb21tYW5kTm90U2VudCxcclxuICAgIGRldmljZU5vdE9wZW4sXHJcbiAgICByZXNwb25zZU5vdFJlY2VpdmVkXHJcbn0gZnJvbSAnLi4vZXJyb3JIYW5kbGVyL2VyckNvbnN0YW50cyc7XHJcbmltcG9ydCB7IG9wZW5TdWNjZXNzLCBzdWNjZXNzQ29kZSwgbm9TZXNzaW9uVG9DbGVhciwgZ2F0dEJ1c3ksIHN1Y2Nlc3NmdWxDbG9zZSB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XHJcblxyXG5jbGFzcyBQaW5QYWQgZXh0ZW5kcyBQaW5TdGF0dXNQYXJzZXIge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsQmFja3MpIHtcclxuICAgICAgICBzdXBlcihkZXZpY2UsIGNhbGxCYWNrcyk7XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbkNhbGxiYWNrID0gY2FsbEJhY2tzLnRyYW5zYWN0aW9uQ2FsbGJhY2sgfHwgY2FsbEJhY2tzO1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayA9IGNhbGxCYWNrcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrO1xyXG5cclxuICAgICAgICB0aGlzLmRldmljZUZyb21Ib3N0TGVuID0gJzA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDIyMCc7XHJcbiAgICAgICAgdGhpcy5kZXZpY2VGcm9tSG9zdERhdGEgPSAnMDUwOGU2ZjgtYWQ4Mi04OThmLWY4NDMtZTM0MTBjYjYwMjIxJztcclxuICAgICAgICB0aGlzLmRldmljZVRvSG9zdExlbiA9ICcwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAyMjInO1xyXG4gICAgICAgIHRoaXMuZGV2aWNlVG9Ib3N0RGF0YSA9ICcwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAyMjMnO1xyXG5cclxuICAgICAgICB0aGlzLmNhcmREYXRhTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZURhdGFDaGFyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZW5kTGVuVG9EZXZpY2UgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmNvbW1hbmRTZW50ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zd2lwZUhhc0JlZ3VuID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbkhhc1N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRhdGFHYXRoZXJlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLmVtdk9wdGlvbnMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgJ25vcm1hbCc6IDB4MDAsXHJcbiAgICAgICAgICAgICdieXBhc3NwaW4nOiAweDAxLFxyXG4gICAgICAgICAgICAnZm9yY2VvbmxpbmUnOiAweDAyLFxyXG4gICAgICAgICAgICAnYWNxdWlyZXJub3RhdmFpbGFibGUnOiAweDA0XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZGlzcGxheVR5cGVzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgICdzd2lwZWlkbGVhbHRlcm5hdGUnOiAweDAwLFxyXG4gICAgICAgICAgICAnc3dpcGVjYXJkJzogMHgwMSxcclxuICAgICAgICAgICAgJ3BsZWFzZXN3aXBlJzogMHgwMixcclxuICAgICAgICAgICAgJ3BsZWFzZXN3aXBlYWdhaW4nOiAweDAzLFxyXG4gICAgICAgICAgICAnY2hpcGVycm9ydXNlc3dpcGUnOiAweDA0XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVwb3J0SWRzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIHJlc3BvbnNlQWNrOiAweDAxLFxyXG4gICAgICAgICAgICBlbmRTZXNzaW9uOiAweDAyLFxyXG4gICAgICAgICAgICByZXF1ZXN0Q2FyZFN3aXBlOiAweDAzLFxyXG4gICAgICAgICAgICBjYXJkU3RhdHVzUmVwb3J0OiAweDIyLFxyXG4gICAgICAgICAgICBkZXZpY2VTdGF0ZVJlcG9ydDogMHgyMCxcclxuICAgICAgICAgICAgY2FyZERhdGFSZXBvcnQ6IDB4MjMsXHJcbiAgICAgICAgICAgIGVtdkNhcmRob2xkZXJTdGF0dXM6IDB4MkMsXHJcbiAgICAgICAgICAgIGJpZ0Jsb2NrRGF0YTogMHgyOSxcclxuICAgICAgICAgICAgZW12Q29tcGxldGlvbjogMHhBMixcclxuICAgICAgICAgICAgZ2V0S3NuOiAweDMwLFxyXG4gICAgICAgICAgICByZXF1ZXN0U246IDB4MUEsXHJcbiAgICAgICAgICAgIGRldmljZUNvbmZpZzogMHgwOSxcclxuICAgICAgICAgICAgcGluUmVzcG9uc2U6IDB4MjQsXHJcbiAgICAgICAgICAgIHNlbGVjdGlvblJlc3BvbnNlOiAweDI1LFxyXG4gICAgICAgICAgICBkaXNwbGF5UmVzcDogMHgyN1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnRvbmVDaG9pY2UgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgJ25vc291bmQnOiAweDAwLFxyXG4gICAgICAgICAgICAnb25lYmVlcCc6IDB4MDEsXHJcbiAgICAgICAgICAgICd0d29iZWVwcyc6IDB4MDJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0aWFsTm90aWZpY2F0aW9uID0gWzB4MDBdO1xyXG5cclxuICAgICAgICB0aGlzLmNsZWFyU2Vzc2lvbkNtZCA9IFsweDAxLCAweDAyLCAweDAwXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDYXJkU2VydmljZSA9ICgpID0+IG5ldyBQcm9taXNlKCAocGFyZW50UmVzb2x2ZSwgcGFyZW50UmVqZWN0KSA9PiAoIXRoaXMuZGV2aWNlKSA/XHJcbiAgICAgICAgcGFyZW50UmVqZWN0KFxyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkRGV2aWNlRXJyKGRldmljZU5vdEZvdW5kKVxyXG4gICAgICAgIClcclxuICAgICAgICA6XHJcbiAgICAgICAgdGhpcy5jb25uZWN0QW5kQ2FjaGUoMilcclxuICAgICAgICAgICAgLnRoZW4oIHNlcnZpY2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0dBVFRdOiBDYWNoZSBBcHBEYXRhVG9Ib3N0TGVuZ3RoIENoYXJhY3RlcmlzdGljIHx8ICR7bmV3IERhdGUoKX1gKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VydmljZS5nZXRDaGFyYWN0ZXJpc3RpYyh0aGlzLmRldmljZVRvSG9zdExlbikgXHJcbiAgICAgICAgICAgIH0pLnRoZW4oIGNoYXJhY3RlcmlzdGljID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtHQVRUXTogQmVnaW4gbm90aWZpY2F0aW9ucyBvbiBBcHBEYXRhVG9Ib3N0TGVuZ3RoIENoYXJhY3RlcmlzdGljIHx8ICR7bmV3IERhdGUoKX1gKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcmFjdGVyaXN0aWMuc3RhcnROb3RpZmljYXRpb25zKClcclxuICAgICAgICAgICAgfSkudGhlbiggY2hhcmFjdGVyaXN0aWMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0dBVFRdOiBBZGQgbGlzdGVuZXIgdG8gbm90aWZpY2F0aW9ucyB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhcmFjdGVyaXN0aWN2YWx1ZWNoYW5nZWQnLCB0aGlzLmRhdGFXYXRjaGVyKTtcclxuICAgICAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYXJhY3RlcmlzdGljdmFsdWVjaGFuZ2VkJywgdGhpcy5kYXRhV2F0Y2hlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jYXJkRGF0YUxpc3RlbmVyID0gY2hhcmFjdGVyaXN0aWM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbR0FUVF06IENhY2hlIEFwcERhdGFUb0hvc3QgQ2hhcmFjdGVyaXN0aWMgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcmRTZXJ2aWNlLmdldENoYXJhY3RlcmlzdGljKHRoaXMuZGV2aWNlVG9Ib3N0RGF0YSk7XHJcbiAgICAgICAgICAgIH0pLnRoZW4oIGNoYXJhY3RlcmlzdGljID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY2VpdmVEYXRhQ2hhciA9IGNoYXJhY3RlcmlzdGljO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtHQVRUXTogQ2FjaGUgQXBwRGF0YUZyb21Ib3N0TGVuZ3RoIENoYXJhY3RlcmlzdGljIHx8ICR7bmV3IERhdGUoKX1gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FyZFNlcnZpY2UuZ2V0Q2hhcmFjdGVyaXN0aWModGhpcy5kZXZpY2VGcm9tSG9zdExlbilcclxuICAgICAgICAgICAgfSkudGhlbiggY2hhcmFjdGVyaXN0aWMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZExlblRvRGV2aWNlID0gY2hhcmFjdGVyaXN0aWM7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0dBVFRdOiBDYWNoZSBBcHBEYXRhRnJvbUhvc3QgQ2hhcmFjdGVyaXN0aWMgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJkU2VydmljZS5nZXRDaGFyYWN0ZXJpc3RpYyh0aGlzLmRldmljZUZyb21Ib3N0RGF0YSlcclxuICAgICAgICAgICAgfSkudGhlbiggY2hhcmFjdGVyaXN0aWMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZENoYXJhY3RlcmlzdGljID0gY2hhcmFjdGVyaXN0aWM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIElmIHRoaXMgbGlicmFyeSBpcyBiZWluZyB1c2VkIGluIGEgd2ViIGFwcGxpY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1ha2Ugc3VyZSB0aGUgZGV2aWNlIGNhbmNlbHMgYW55IGFjdGl2ZSBjb21tYW5kLCBhbmQgZGlzY29ubmVjdHMgcHJvcGVybHlcclxuICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCB0aGlzLm9uRGVzdHJveUhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5vbkRlc3Ryb3lIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtHQVRUXTogU3VjY2Vzc2Z1bGx5IGNhY2hlZCBhbGwgR0FUVCBzZXJ2aWNlcyBhbmQgY2hhcmFjdGVyaXN0aWNzLiBSZXR1cm5pbmcgc3VjY2Vzc2Z1bCBwYWlyIHRvIHVzZXIgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWxheVByb21pc2UoNDAwKVxyXG4gICAgICAgICAgICB9KS50aGVuKCgpID0+IHBhcmVudFJlc29sdmUoeyBcclxuICAgICAgICAgICAgICAgICAgICBjb2RlOiBzdWNjZXNzQ29kZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcGVuU3VjY2Vzc1xyXG4gICAgICAgICAgICB9KSkuY2F0Y2goZXJyID0+IHBhcmVudFJlamVjdCggdGhpcy5idWlsZERldmljZUVycihlcnIpICkpXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBkYXRhV2F0Y2hlciA9IGV2ZW50ID0+IHtcclxuICAgICAgICBsZXQgZGF0YUV2ZW50ID0gZXZlbnQudGFyZ2V0LnZhbHVlLmdldFVpbnQ4KDApO1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtOT1RJRlk6IEFwcERhdGFUb0hvc3RMZW5ndGhdOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoW2RhdGFFdmVudF0pfSB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbW1hbmRTZW50ICYmIGRhdGFFdmVudCA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kUmVzcEF2YWlsYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRTZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWFkQ29tbWFuZFJlc3AoKTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkQ29tbWFuZFJlc3AgPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gKCF0aGlzLnJlY2VpdmVEYXRhQ2hhcikgP1xyXG4gICAgICAgIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihyZWFkRmFpbGVkKSlcclxuICAgICAgICA6IFxyXG4gICAgICAgIHRoaXMucmVjZWl2ZURhdGFDaGFyLnJlYWRWYWx1ZSgpXHJcbiAgICAgICAgICAgIC50aGVuKHZhbHVlID0+IHRoaXMucmVhZFZhbHVlSGFuZGxlcih2YWx1ZSkgKVxyXG4gICAgICAgICAgICAudGhlbih2YWx1ZSA9PiByZXNvbHZlKHZhbHVlKSlcclxuICAgICAgICAgICAgLmNhdGNoKCBlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVyci5jb2RlID09PSBnYXR0QnVzeS5jb2RlICYmIGVyci5tZXNzYWdlID09PSBnYXR0QnVzeS5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0lORk9dOiBSZWFkIGZhaWxlZCBkdWUgdG8gZGV2aWNlIGJlaW5nIGJ1c3kuIEF0dGVtcHRpbmcgcmVhZCBhZ2FpbiB8fCAke25ldyBEYXRlKCl9YClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggdGhpcy5yZWFkQ29tbWFuZFJlc3AoKSApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHJldHVybiByZWplY3QodGhpcy5idWlsZERldmljZUVycihlcnIpKVxyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgcmVhZFZhbHVlSGFuZGxlciA9IHJlYWRWYWx1ZSA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgY29uc3QgY29tbWFuZFJlc3AgPSB0aGlzLnJlYWRCeXRlQXJyYXkocmVhZFZhbHVlKTtcclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbUkVBRDogQXBwRGF0YVRvSG9zdF06ICR7dGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhjb21tYW5kUmVzcCl9IHx8ICR7bmV3IERhdGUoKX1gKTtcclxuXHJcbiAgICAgICAgaWYgKGNvbW1hbmRSZXNwLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzd2l0Y2goY29tbWFuZFJlc3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMucmVzcG9uc2VBY2s6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMucGFyc2VBY2tSZXNwb25zZShjb21tYW5kUmVzcCkgKVxyXG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLnJlcG9ydElkcy5kZXZpY2VTdGF0ZVJlcG9ydDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggdGhpcy5oYW5kbGVEZXZpY2VTdGF0ZVJlcG9ydChjb21tYW5kUmVzcCkgKVxyXG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLnJlcG9ydElkcy5jYXJkU3RhdHVzUmVwb3J0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCB0aGlzLmhhbmRsZUNhcmRTdGF0dXNSZXBvcnQoY29tbWFuZFJlc3ApIClcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMuY2FyZERhdGFSZXBvcnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuaGFuZGxlQ2FyZERhdGFSZXBvcnQoY29tbWFuZFJlc3ApIClcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMuZW12Q2FyZGhvbGRlclN0YXR1czpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggdGhpcy5oYW5kbGVDYXJkaG9sZGVyU3RhdHVzUmVwb3J0KGNvbW1hbmRSZXNwKSApXHJcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMucmVwb3J0SWRzLmVtdkNvbXBsZXRpb246XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuaGFuZGxlRW12Q29tcGxldGlvbihjb21tYW5kUmVzcCkgKVxyXG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLnJlcG9ydElkcy5iaWdCbG9ja0RhdGE6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuaGFuZGxlQmlnQmxvY2tEYXRhKGNvbW1hbmRSZXNwKSApXHJcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMucmVwb3J0SWRzLmdldEtzbjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggdGhpcy5mb3JtYXRLc25BbmRTbihjb21tYW5kUmVzcCkgKVxyXG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLnJlcG9ydElkcy5yZXF1ZXN0U246XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuZm9ybWF0U2VyaWFsTnVtYmVyKGNvbW1hbmRSZXNwKSApXHJcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMucmVwb3J0SWRzLmRldmljZUNvbmZpZzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggdGhpcy5wYXJzZURldmljZUNvbmZpZ3VyYXRpb24oY29tbWFuZFJlc3ApIClcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMucGluUmVzcG9uc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uQ2FsbGJhY2soIHRoaXMucGFyc2VQaW5SZXNwb25zZShwaW5SZXNwKSApXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMuc2VsZWN0aW9uUmVzcG9uc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMucGFyc2VDYXJkaG9sZGVyUmVzcG9uc2UoY29tbWFuZFJlc3ApIClcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMuZGlzcGxheVJlc3A6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2soIHRoaXMuZmluZE9wZXJhdGlvblN0YXR1cyhjb21tYW5kUmVzcFsxXSkgKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBbRGF0YSBSZXNwXTogVGhlcmUgaXMgbm8gcGFyc2VyIGZvciB0aGlzIGRhdGEsIHJldHVybmluZyB0byBjYWxsZXI6ICR7dGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhjb21tYW5kUmVzcCl9IHx8ICR7bmV3IERhdGUoKX1gXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggdGhpcy50cmFuc2FjdGlvbkNhbGxiYWNrKCBjb21tYW5kUmVzcCApICk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmVzb2x2ZSggY29tbWFuZFJlc3AgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGhhbmRsZUVtdkNvbXBsZXRpb24gPSBjb21tYW5kUmVzcCA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJbIV0gRU1WIENvbXBsZXRpb246IFwiLCBjb21tYW5kUmVzcCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhcclxuICAgICAgICAgICAgdGhpcy5wYXJzZUVtdkNvbXBsZXRpb24oY29tbWFuZFJlc3ApXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUJpZ0Jsb2NrRGF0YSA9IGJpZ0Jsb2NrRGF0YSA9PiB7XHJcbiAgICAgICAgc3dpdGNoKGJpZ0Jsb2NrRGF0YVsyXSkge1xyXG4gICAgICAgICAgICBjYXNlIDB4MDA6XHJcbiAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQmlnQmxvY2tCZWdpbiggYmlnQmxvY2tEYXRhICk7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDB4NjM6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1heEJsb2NrSWQgPSBNYXRoLm1heCguLi5PYmplY3Qua2V5cyh0aGlzLnJhd0RhdGEpKSArIDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUJpZ0Jsb2NrRmluaXNoKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRoaXMucmF3RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLnJhd0RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgWyBiaWdCbG9ja0RhdGFbMl0gXTogYmlnQmxvY2tEYXRhLnNsaWNlKDQpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ2FyZGhvbGRlclN0YXR1c1JlcG9ydCA9IGNvbW1hbmRSZXNwID0+IHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhcclxuICAgICAgICAgICAgdGhpcy5wYXJzZUVtdkNhcmRob2xkZXJJbnRlcmFjdGlvblN0YXR1cyhjb21tYW5kUmVzcClcclxuICAgICAgICApO1xyXG5cclxuICAgIGhhbmRsZUNhcmRTdGF0dXNSZXBvcnQgPSBjb21tYW5kUmVzcCA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrKFxyXG4gICAgICAgICAgICB0aGlzLnBhcnNlQ2FyZFN0YXR1c1JlcG9ydChjb21tYW5kUmVzcClcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiAodGhpcy5zd2lwZUhhc0JlZ3VuIHx8IHRoaXMudHJhbnNhY3Rpb25IYXNTdGFydGVkKSA/IFxyXG4gICAgICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AoIFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuc3dpcGVIYXNCZWd1biA/IFsweDAxLCAweDBBLCAweDAwXSA6IFsweDAxLCAweEFCLCAweDAwXSlcclxuICAgICAgICAgICAgKS50aGVuKCBhY2tSZXNwID0+IHJlc29sdmUoIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhhY2tSZXNwKSApXHJcbiAgICAgICAgICAgICkuY2F0Y2goZXJyID0+IHRoaXMuc2VuZEVyclRvQ2FsbGJhY2soIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSApKVxyXG4gICAgICAgIDogcmVzb2x2ZSgpXHJcbiAgICB9KTtcclxuXHJcbiAgICBoYW5kbGVEZXZpY2VTdGF0ZVJlcG9ydCA9IGNvbW1hbmRSZXNwID0+IHtcclxuICAgICAgICBpZiAodGhpcy5kYXRhR2F0aGVyZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhR2F0aGVyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vU2VuZCBhc3NlbWJsZWQgdHJhbnNhY3Rpb24gZGF0YSB0byBjYWxsYmFja1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgc3dpcGVEYXRhOiB0aGlzLmNhcmREYXRhT2JqXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrKFxyXG4gICAgICAgICAgICB0aGlzLnBhcnNlRGV2aWNlU3RhdGVSZXBvcnQoY29tbWFuZFJlc3ApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVDYXJkRGF0YVJlcG9ydCA9IGNvbW1hbmRSZXNwID0+IHtcclxuICAgICAgICBpZiAodGhpcy5zd2lwZUhhc0JlZ3VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3dpcGVIYXNCZWd1biA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFHYXRoZXJlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29tbWFuZFJlc3AubGVuZ3RoICE9PSAzKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VDYXJkRGF0YShjb21tYW5kUmVzcClcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiVHJhaWxpbmcgY2FyZCBkYXRhOiBcIiwgY29tbWFuZFJlc3ApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShcIltFUlJPUl0gVW5kb2N1bWVudGVkIENhcmQgRGF0YSBiZWxvd1wiKTtcclxuICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShjb21tYW5kUmVzcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlcXVlc3RDYXJkU3dpcGUgPSBzd2lwZU9wdGlvbnMgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLnN3aXBlSGFzQmVndW4gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY2FyZERhdGFPYmogPSB7fTtcclxuXHJcbiAgICAgICAgcmV0dXJuICghdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpID8gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGRldmljZU5vdE9wZW4pKVxyXG4gICAgICAgICAgICA6IFxyXG4gICAgICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AoIHRoaXMuY2xlYXJTZXNzaW9uQ21kIClcclxuICAgICAgICAgICAgLnRoZW4oIGFja1Jlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrKGFja1Jlc3ApO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZFN3aXBlQ29tbWFuZCggKHN3aXBlT3B0aW9ucyB8fCB7fSkgKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9KS50aGVuKCByZXNwID0+IHJlc29sdmUocmVzcClcclxuICAgICAgICAgICAgKS5jYXRjaCggZXJyID0+IHJlamVjdChlcnIpKVxyXG4gICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICBzdGFydFRyYW5zYWN0aW9uID0gZW12T3B0aW9ucyA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25IYXNTdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmNhcmREYXRhT2JqID0ge307XHJcbiAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0lORk9dOiBFTVYgdHJhbnNhY3Rpb24gYmVndW4gfHwgJHtuZXcgRGF0ZSgpfWApXHJcblxyXG4gICAgICAgIHJldHVybiAoIXRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSA/IHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihkZXZpY2VOb3RPcGVuKSlcclxuICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AodGhpcy5jbGVhclNlc3Npb25DbWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbiggYWNrUmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhhY2tSZXNwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKCAoKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcCggdGhpcy5idWlsZEVtdkNvbW1hbmQoIGVtdk9wdGlvbnMgfHwge30gKSApXHJcbiAgICAgICAgICAgICAgICApLnRoZW4oIHJlc3AgPT4gcmVzb2x2ZShyZXNwKVxyXG4gICAgICAgICAgICAgICAgKS5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmVxdWVzdFBpbkVudHJ5ID0gcGluT3B0aW9ucyA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtQSU5dOiBSZXF1ZXN0IGZvciBQSU4gZW50cnkgc3RhcnQgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwicGlub3B0aW9uczogXCIsIHBpbk9wdGlvbnMpO1xyXG5cclxuICAgICAgICByZXR1cm4gKCF0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCkgPyByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90T3BlbikpXHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKCB0aGlzLmJ1aWxkUGluQ29tbWFuZCggcGluT3B0aW9ucyB8fCB7fSApIClcclxuICAgICAgICAgICAgICAgIC50aGVuKCByZXNwID0+IHJlc29sdmUocmVzcClcclxuICAgICAgICAgICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcclxuICAgIH0pOyBcclxuXHJcbiAgICBidWlsZFBpbkNvbW1hbmQgPSAoe1xyXG4gICAgICAgIGxhbmd1YWdlU2VsZWN0aW9uLFxyXG4gICAgICAgIGRpc3BsYXlUeXBlLFxyXG4gICAgICAgIHRpbWVvdXQsXHJcbiAgICAgICAgbWF4UGluTGVuZ3RoLFxyXG4gICAgICAgIG1pblBpbkxlbmd0aCxcclxuICAgICAgICB0b25lQ2hvaWNlLFxyXG4gICAgICAgIHdhaXRNZXNzYWdlLFxyXG4gICAgICAgIHZlcmlmeVBpbixcclxuICAgICAgICBwaW5CbG9ja0Zvcm1hdFxyXG4gICAgfSkgPT4ge1xyXG5cclxuICAgICAgICBjb25zdCBwaW5EaXNwbGF5T3B0aW9ucyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICBcImVudGVycGluXCI6IDB4MDAsXHJcbiAgICAgICAgICAgIFwiZW50ZXJwaW5hbW91bnRcIjogMHgwMSxcclxuICAgICAgICAgICAgXCJyZWVudGVycGluYW1vdW50XCI6IDB4MDIsXHJcbiAgICAgICAgICAgIFwicmVlbnRlcnBpblwiOiAweDAzLFxyXG4gICAgICAgICAgICBcInZlcmlmeXBpblwiOiAweDA0XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBwaW5DbWQgPSBbXHJcbiAgICAgICAgICAgIDB4MDEsIDB4MDQsXHJcbiAgICAgICAgICAgICh0aW1lb3V0IHx8IDB4MUUpLFxyXG4gICAgICAgICAgICAoKGRpc3BsYXlUeXBlKSA/IChwaW5EaXNwbGF5T3B0aW9uc1sgZGlzcGxheVR5cGUudG9Mb3dlckNhc2UoKSBdIHx8IDB4MDApOiAweDAwKSxcclxuICAgICAgICAgICAgKHRoaXMuZmluZFBpbkxlbmd0aChtYXhQaW5MZW5ndGgsIG1pblBpbkxlbmd0aCkpLFxyXG4gICAgICAgICAgICAodG9uZUNob2ljZSkgPyAodGhpcy50b25lQ2hvaWNlWyB0b25lQ2hvaWNlLnRvTG93ZXJDYXNlKCkgXSB8fCAweDAxKSA6IDB4MDEsXHJcbiAgICAgICAgICAgICh0aGlzLmJ1aWxkUGluT3B0aW9uc0J5dGUobGFuZ3VhZ2VTZWxlY3Rpb24sIHdhaXRNZXNzYWdlLCB2ZXJpZnlQaW4sIHBpbkJsb2NrRm9ybWF0KSlcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnW1BJTiBDTURdIEJ1aWx0IFBJTiBDb21tYW5kOiAnLCBwaW5DbWQpO1xyXG5cclxuICAgICAgICByZXR1cm4gcGluQ21kO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkU3dpcGVDb21tYW5kID0gKHsgXHJcbiAgICAgICAgdGltZW91dCwgXHJcbiAgICAgICAgaXNGYWxsYmFjaywgXHJcbiAgICAgICAgdG9uZUNob2ljZSwgXHJcbiAgICAgICAgZGlzcGxheVR5cGVcclxuICAgIH0pID0+IHtcclxuICAgICAgICBsZXQgY29tbWFuZCA9IFsgXHJcbiAgICAgICAgICAgIDB4MDEsIDB4MDMsIFxyXG4gICAgICAgICAgICAodGltZW91dCB8fCAweDNDKSxcclxuICAgICAgICAgICAgKGlzRmFsbGJhY2sgPT09IHRydWUpID8gMHgwNCA6IChkaXNwbGF5VHlwZSkgPyAodGhpcy5kaXNwbGF5VHlwZXNbIGRpc3BsYXlUeXBlLnRvTG93ZXJDYXNlKCkgXSB8fCAweDAyKSA6IDB4MDIsXHJcbiAgICAgICAgICAgICh0b25lQ2hvaWNlKSA/ICh0aGlzLnRvbmVDaG9pY2VbIHRvbmVDaG9pY2UudG9Mb3dlckNhc2UoKSBdIHx8IDB4MDEpIDogMHgwMVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiBjb21tYW5kO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkRW12Q29tbWFuZCA9ICh7IFxyXG4gICAgICAgIHRpbWVvdXQsIFxyXG4gICAgICAgIHBpblRpbWVvdXQsIFxyXG4gICAgICAgIGNhcmRUeXBlLCBcclxuICAgICAgICB0cmFuc2FjdGlvblR5cGUsIFxyXG4gICAgICAgIGNhc2hCYWNrLCBcclxuICAgICAgICBjdXJyZW5jeUNvZGUsXHJcbiAgICAgICAgdG9uZUNob2ljZSwgXHJcbiAgICAgICAgaXNRdWlja0NoaXAsIFxyXG4gICAgICAgIGF1dGhvcml6ZWRBbW91bnQsIFxyXG4gICAgICAgIGVtdk9wdGlvbnMgXHJcbiAgICB9KSA9PiB7XHJcbiAgICAgICAgbGV0IGNvbW1hbmQgPSBbIFxyXG4gICAgICAgICAgICAweDAxLCAweEEyLFxyXG4gICAgICAgICAgICAodGltZW91dCB8fCAweDNDKSxcclxuICAgICAgICAgICAgKHBpblRpbWVvdXQgfHwgMHgxNCksXHJcbiAgICAgICAgICAgIDB4MDAsXHJcbiAgICAgICAgICAgICh0b25lQ2hvaWNlKSA/ICh0aGlzLnRvbmVDaG9pY2VbIHRvbmVDaG9pY2UudG9Mb3dlckNhc2UoKSBdIHx8IDB4MDEpIDogMHgwMSxcclxuICAgICAgICAgICAgKGNhcmRUeXBlKSA/IHRoaXMuY2FyZFR5cGVzKCBjYXJkVHlwZS50b0xvd2VyQ2FzZSgpICkgOiB0aGlzLmNhcmRUeXBlcyhcImFsbFwiKSxcclxuICAgICAgICAgICAgKGVtdk9wdGlvbnMpID8gKHRoaXMuZW12T3B0aW9uc1sgZW12T3B0aW9ucy50b0xvd2VyQ2FzZSgpIF0gfHwgMHgwMCkgOiAweDAwXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgY29tbWFuZCA9IChhdXRob3JpemVkQW1vdW50KSA/IFxyXG4gICAgICAgICAgICBjb21tYW5kLmNvbmNhdCggdGhpcy5jb252ZXJ0TnVtVG9BbW91bnQoYXV0aG9yaXplZEFtb3VudCkgKSBcclxuICAgICAgICAgICAgOiBjb21tYW5kLmNvbmNhdCggWzB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsIDB4MDBdICk7XHJcblxyXG4gICAgICAgIGNvbW1hbmQgPSAodHJhbnNhY3Rpb25UeXBlKSA/IFxyXG4gICAgICAgICAgICBjb21tYW5kLmNvbmNhdCggKHRoaXMudHJhbnNhY3Rpb25UeXBlc1sgdHJhbnNhY3Rpb25UeXBlLnRvTG93ZXJDYXNlKCkgXSB8fCAweDAwKSApXHJcbiAgICAgICAgICAgIDogY29tbWFuZC5jb25jYXQoMHgwMClcclxuXHJcbiAgICAgICAgY29tbWFuZCA9IChjYXNoQmFjaykgPyBjb21tYW5kLmNvbmNhdCggdGhpcy5jb252ZXJ0TnVtVG9BbW91bnQoIGNhc2hCYWNrICkgKSBcclxuICAgICAgICAgICAgOiBjb21tYW5kLmNvbmNhdCggdGhpcy5uZXdBcnJheVBhcnRpYWwoMHgwMCwgNikgKTtcclxuXHJcbiAgICAgICAgY29tbWFuZCA9IGNvbW1hbmQuY29uY2F0KCB0aGlzLm5ld0FycmF5UGFydGlhbCgweDAwLCAxMikgKTtcclxuXHJcbiAgICAgICAgY29tbWFuZCA9IChjdXJyZW5jeUNvZGUpID8gY29tbWFuZC5jb25jYXQoKCB0aGlzLmN1cnJlbmN5Q29kZVsgY3VycmVuY3lDb2RlLnRvTG93ZXJDYXNlKCkgXSB8fCAgdGhpcy5jdXJyZW5jeUNvZGVbJ2RlZmF1bHQnXSApKVxyXG4gICAgICAgICAgICA6IGNvbW1hbmQuY29uY2F0KFsweDA4LCAweDQwXSlcclxuXHJcbiAgICAgICAgY29tbWFuZC5wdXNoKDB4MDApO1xyXG5cclxuICAgICAgICBjb21tYW5kLnB1c2goXHJcbiAgICAgICAgICAgIChpc1F1aWNrQ2hpcCA9PT0gZmFsc2UpID8gMHgwMCA6IDB4MDFcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIGNvbW1hbmQgPSBjb21tYW5kLmNvbmNhdCggdGhpcy5uZXdBcnJheVBhcnRpYWwoMHgwMCwgMjgpIClcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbW1hbmQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZFBpbkNvbW1hbmQgPSB3cml0ZUNvbW1hbmQgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbQXBwRnJvbUhvc3RMZW5ndGhdOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoW3dyaXRlQ29tbWFuZC5sZW5ndGhdKX0gfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICByZXR1cm4gKCF0aGlzLnNlbmRMZW5Ub0RldmljZSkgPyByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoY29tbWFuZE5vdFNlbnRGcm9tSG9zdCkgKVxyXG4gICAgICAgIDogdGhpcy5zZW5kTGVuVG9EZXZpY2Uud3JpdGVWYWx1ZShVaW50OEFycmF5Lm9mKCB3cml0ZUNvbW1hbmQubGVuZ3RoICkpXHJcbiAgICAgICAgICAgIC50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbQXBwRnJvbUhvc3REYXRhXTogJHt0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHdyaXRlQ29tbWFuZCl9IHx8ICR7bmV3IERhdGUoKX1gKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZFNlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuY29tbWFuZENoYXJhY3RlcmlzdGljLndyaXRlVmFsdWUoIFVpbnQ4QXJyYXkuZnJvbSh3cml0ZUNvbW1hbmQpICkgKVxyXG4gICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kU2VudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2VuZENvbW1hbmRXaXRoUmVzcCA9IHdyaXRlQ29tbWFuZCA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gIHRoaXMuc2VuZFBpbkNvbW1hbmQod3JpdGVDb21tYW5kKVxyXG4gICAgICAgIC50aGVuKCAoKSA9PiAodGhpcy5jb21tYW5kUmVzcEF2YWlsYWJsZSkgPyBQcm9taXNlLnJlc29sdmUodHJ1ZSkgOiB0aGlzLndhaXRGb3JEZXZpY2VSZXNwb25zZSgxNikgKVxyXG4gICAgICAgIC50aGVuKCB3YWl0UmVzcCA9PiAod2FpdFJlc3ApID8gdGhpcy5yZWFkQ29tbWFuZFJlc3AoKSA6IHRoaXMudHJ5Q29tbWFuZEFnYWluKHdyaXRlQ29tbWFuZCkgKVxyXG4gICAgICAgIC50aGVuKCByZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZFJlc3BBdmFpbGFibGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCByZXNwb25zZSApO1xyXG4gICAgICAgIH0pLmNhdGNoKCBlcnIgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRSZXNwQXZhaWxhYmxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikgKVxyXG4gICAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIHRyeUNvbW1hbmRBZ2FpbiA9IHdyaXRlQ29tbWFuZCA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gdGhpcy5zZW5kUGluQ29tbWFuZCh3cml0ZUNvbW1hbmQpXHJcbiAgICAgICAgLnRoZW4oICgpID0+IHRoaXMud2FpdEZvckRldmljZVJlc3BvbnNlKDUpIClcclxuICAgICAgICAudGhlbiggd2FpdFJlc3AgPT4gKHdhaXRSZXNwKSA/IHJlc29sdmUoIHRoaXMucmVhZENvbW1hbmRSZXNwKCkgKVxyXG4gICAgICAgICAgICA6IHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihyZXNwb25zZU5vdFJlY2VpdmVkKSApXHJcbiAgICAgICAgKVxyXG4gICAgKTtcclxuXHJcbiAgICBjYW5jZWxUcmFuc2FjdGlvbiA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiAoIXRoaXMuY29tbWFuZENoYXJhY3RlcmlzdGljKSA/IFxyXG4gICAgICAgIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihjb21tYW5kTm90U2VudCkpXHJcbiAgICAgICAgOlxyXG4gICAgICAgIHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcChbMHgwMSwgMHgwNSwgMHgwMF0pXHJcbiAgICAgICAgLnRoZW4oIGFja1Jlc3AgPT4gcmVzb2x2ZShhY2tSZXNwKSApXHJcbiAgICAgICAgLmNhdGNoKCBlcnIgPT4gcmVqZWN0KGVycikgKVxyXG4gICAgKTtcclxuXHJcbiAgICBjbGVhclNlc3Npb24gPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtDbGVhclNlc3Npb25dOiBSZXF1ZXN0IHRvIGNsZWFyIHNlc3Npb24gfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICByZXR1cm4gKCF0aGlzLnNlbmRMZW5Ub0RldmljZSkgPyByZXNvbHZlKG5vU2Vzc2lvblRvQ2xlYXIpIFxyXG4gICAgICAgICAgICA6IHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcCh0aGlzLmNsZWFyU2Vzc2lvbkNtZClcclxuICAgICAgICAgICAgLnRoZW4oIGFja1Jlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrKGFja1Jlc3ApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0NsZWFyU2Vzc2lvbl06IFJlY2VpdmVkIGNsZWFyIHNlc3Npb24gcmVzcG9uc2UgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoYWNrUmVzcClcclxuICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihlcnIpICkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY2xvc2VQaW5EZXZpY2UgPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gKCF0aGlzLmNhcmREYXRhTGlzdGVuZXIpID9cclxuICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKS50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtDbG9zZSBEZXZpY2VdOiBEZXZpY2UgQ2xvc2VkLiBDbGVhcmluZyBKUyBjYWNoZSB8fCAke25ldyBEYXRlKCl9YCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJHYXR0Q2FjaGUoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHJlamVjdCggZXJyICkgKVxyXG4gICAgICAgIDpcclxuICAgICAgICB0aGlzLmNhcmREYXRhTGlzdGVuZXIuc3RvcE5vdGlmaWNhdGlvbnMoKVxyXG4gICAgICAgIC50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtDbG9zZSBEZXZpY2VdOiBHQVRUIG5vdGlmaWNhdGlvbnMgc3RvcHBlZC4gQ2xlYXJpbmcgSlMgY2FjaGUgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYXJkRGF0YUxpc3RlbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYXJhY3RlcmlzdGljdmFsdWVjaGFuZ2VkJywgdGhpcy5kYXRhV2F0Y2hlcik7XHJcbiAgICAgICAgICAgIHRoaXMuY2FyZERhdGFMaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJHYXR0Q2FjaGUoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCB0aGlzLmRpc2Nvbm5lY3QoKSApXHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHJlamVjdCggZXJyICkgKVxyXG4gICAgKTtcclxuXHJcbiAgICBjbG9zZURldmljZSA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiAoIXRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSA/IFxyXG4gICAgICAgIHJlc29sdmUoc3VjY2Vzc2Z1bENsb3NlKSBcclxuICAgICAgICA6IHRoaXMuY2xlYXJTZXNzaW9uKClcclxuICAgICAgICAgICAgLnRoZW4oICgpID0+IFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVBpbkRldmljZSgpXHJcbiAgICAgICAgICAgICkudGhlbigoKT0+IHJlc29sdmUoc3VjY2Vzc2Z1bENsb3NlKVxyXG4gICAgICAgICAgICApLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QodGhpcy5idWlsZERldmljZUVycihlcnIpIClcclxuICAgICAgICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgY2xlYXJHYXR0Q2FjaGUgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbkhhc1N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJlY2VpdmVEYXRhQ2hhciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jb21tYW5kQ2hhcmFjdGVyaXN0aWMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2VuZExlblRvRGV2aWNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNvbW1hbmRTZW50ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jb21tYW5kUmVzcEF2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc3dpcGVIYXNCZWd1biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZGF0YUdhdGhlcmVkID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBpblBhZDsiLCJpbXBvcnQgUGluUGFkIGZyb20gJy4vcGluUGFkJztcclxuaW1wb3J0IHsgZGV2aWNlTm90SWRsZSwgZHBNaW5pIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuaW1wb3J0IHsgcmVzcG9uc2VOb3RSZWNlaXZlZCwgZGV2aWNlTm90Rm91bmQgfSBmcm9tICcuLi9lcnJvckhhbmRsZXIvZXJyQ29uc3RhbnRzJztcclxuXHJcbmNsYXNzIERwTWluaSBleHRlbmRzIFBpblBhZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIGNhbGxCYWNrcykge1xyXG4gICAgICAgIHN1cGVyKGRldmljZSwgY2FsbEJhY2tzKTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRLc25BdmFpbGFibGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJlcXVlc3RlZEtzbiA9IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5nZXRTZXJpYWxOdW1iZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJlcXVlc3RlZFNuID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5kZXZpY2VUeXBlID0gZHBNaW5pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBHZXREZXZpY2VJbmZvXHJcbiAgICBnZXREZXZpY2VJbmZvID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+ICghdGhpcy5kZXZpY2UpID9cclxuICAgICAgICByZWplY3QodGhpcy5idWlsZERldmljZUVycihkZXZpY2VOb3RGb3VuZCkpIFxyXG4gICAgICAgIDogdGhpcy5nYXRoZXJEZXZpY2VJbmZvKClcclxuICAgICAgICAgICAgLnRoZW4oIGRldmljZUluZm8gPT4gcmVzb2x2ZShkZXZpY2VJbmZvKVxyXG4gICAgICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSkgKVxyXG4gICAgKTtcclxuXHJcbiAgICBnYXRoZXJEZXZpY2VJbmZvID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLmNoZWNrSWZEZXZpY2VJZGxlKClcclxuICAgICAgICAudGhlbiggKCkgPT4gdGhpcy5nZXREZXZpY2VJbmZvUHJvY2VlZCgpXHJcbiAgICAgICAgKS50aGVuKCBkZXZpY2VJbmZvID0+IFxyXG4gICAgICAgICAgICAgcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICAgLi4uZGV2aWNlSW5mbyxcclxuICAgICAgICAgICAgICAgICBkZXZpY2VOYW1lOiB0aGlzLmRldmljZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgIGlzQ29ubmVjdGVkOiB0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCxcclxuICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpXHJcbiAgICAgfSk7XHJcblxyXG4gICAgZ2V0RGV2aWNlSW5mb0Jhc2UgPSAoKSA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKFsweDAxLCAweDFBLCAweDA1XSlcclxuICAgICAgICAudGhlbiggYWNrUmVzcCA9PiByZXNvbHZlKGFja1Jlc3ApKVxyXG4gICAgfSk7XHJcblxyXG4gICAgZ2V0RGV2aWNlSW5mb1Byb2NlZWQgPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2VuZFBpbkNvbW1hbmQoWzB4MDAsIDB4MUEsIDB4MDVdKVxyXG4gICAgICAgIC50aGVuKCAoKSA9PiAodGhpcy5nZXRTZXJpYWxOdW1iZXIgfHwgdGhpcy53YWl0Rm9yU24oNSkpIFxyXG4gICAgICAgICkudGhlbiggd2FpdFJlc3AgPT4gKHdhaXRSZXNwKSA/IFByb21pc2UucmVzb2x2ZSgpIDogXHJcbiAgICAgICAgICAgIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihyZXNwb25zZU5vdFJlY2VpdmVkKSlcclxuICAgICAgICApLnRoZW4oICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IHJldHVyblNuID0geyBcclxuICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlcjogdGhpcy5oZXhUb0FzY2lpKHRoaXMucmVxdWVzdGVkU24uc2VyaWFsTnVtYmVyKSBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0U2VyaWFsTnVtYmVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdGVkU24gPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggIHJldHVyblNuICk7XHJcbiAgICAgICAgfSkuY2F0Y2goIGVyciA9PiByZWplY3QoZXJyKSlcclxuICAgIH0pXHJcblxyXG4gICAgY2hlY2tJZkRldmljZUlkbGUgPSAoKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICB0aGlzLmdldERldmljZUluZm9CYXNlKClcclxuICAgICAgICAudGhlbiggYWNrUmVzcCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhY2tSZXNwLm1lc3NhZ2UgPT09IGRldmljZU5vdElkbGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNsZWFyU2Vzc2lvbigpXHJcbiAgICAgICAgICAgICAgICAudGhlbiggKCkgPT4gdGhpcy5nZXREZXZpY2VJbmZvQmFzZSgpICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2soYWNrUmVzcCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihhY2tSZXNwID0+IHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrKGFja1Jlc3ApO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxuXHJcbiAgICB3YWl0Rm9yU24gPSBtYXhUcmllcyA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiB7XHJcblxyXG4gICAgICAgIGxldCB3YWl0Rm9yUmVzcG9uc2UgPSB0cnlOdW1iZXIgPT4gXHJcbiAgICAgICAgICAgICh0cnlOdW1iZXIgPCBtYXhUcmllcykgPyBcclxuICAgICAgICAgICAgICAgICh0aGlzLmdldFNlcmlhbE51bWJlcikgPyByZXNvbHZlKCB0cnVlICkgOiBzZXRUaW1lb3V0KCgpID0+IHdhaXRGb3JSZXNwb25zZSh0cnlOdW1iZXIgKyAxKSwgMjAwKVxyXG4gICAgICAgICAgICA6IHJlc29sdmUoIGZhbHNlICk7XHJcblxyXG4gICAgICAgIHdhaXRGb3JSZXNwb25zZSgwKTtcclxuICAgIH0pO1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IERwTWluaTsiLCJpbXBvcnQgUGluUGFkIGZyb20gJy4vcGluUGFkJztcclxuaW1wb3J0IHsgZGV2aWNlTm90SWRsZSwgZHluYVByb0dvIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuaW1wb3J0IHsgcmVzcG9uc2VOb3RSZWNlaXZlZCwgZGV2aWNlTm90Rm91bmQsIGRldmljZU5vdE9wZW4sIG1pc3NpbmdSZXF1aXJlZEZpZWxkcyB9IGZyb20gJy4uL2Vycm9ySGFuZGxlci9lcnJDb25zdGFudHMnO1xyXG5cclxuY2xhc3MgRHluYVByb0dvIGV4dGVuZHMgUGluUGFkIHtcclxuICAgIGNvbnN0cnVjdG9yKGRldmljZSwgY2FsbEJhY2tzKSB7XHJcbiAgICAgICAgc3VwZXIoZGV2aWNlLCBjYWxsQmFja3MpO1xyXG5cclxuICAgICAgICB0aGlzLmdldEtzbkF2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVxdWVzdGVkS3NuID0gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmdldFNlcmlhbE51bWJlciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVxdWVzdGVkU24gPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmRldmljZVR5cGUgPSBkeW5hUHJvR287XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGlzcGxheU1lc3NhZ2UgPSBkaXNwbGF5T3B0aW9ucyA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiBcclxuICAgICAgICAodGhpcy5kZXZpY2UgJiYgdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpID8gXHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGREaXNwbGF5Q21kKCAoZGlzcGxheU9wdGlvbnMgfHwge30pICkudGhlbiggY21kID0+IHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcChjbWQpIFxyXG4gICAgICAgICAgICAgICAgKS50aGVuKHJlc3AgPT4gcmVzb2x2ZShyZXNwKVxyXG4gICAgICAgICAgICAgICAgKS5jYXRjaChlcnIgPT4gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikgKSlcclxuICAgICAgICAgICAgOiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90T3BlbikpICk7XHJcblxyXG4gICAgYnVpbGREaXNwbGF5Q21kID0gKHsgZGlzcGxheVRpbWUsIG1lc3NhZ2VJZCwgfSkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IFxyXG4gICAgICAgICh0eXBlb2YobWVzc2FnZUlkKSA9PT0gJ3VuZGVmaW5lZCcpID8gXHJcbiAgICAgICAgICAgIHJlamVjdCggbWlzc2luZ1JlcXVpcmVkRmllbGRzKFwibWVzc2FnZUlkXCIpICkgXHJcbiAgICAgICAgICAgIDogcmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAweDAxLCAweDA3LFxyXG4gICAgICAgICAgICAgICAgKHR5cGVvZihkaXNwbGF5VGltZSkgIT09ICd1bmRlZmluZWQnKSA/IGRpc3BsYXlUaW1lIDogMHgwRixcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VJZFxyXG4gICAgICAgICAgICBdKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgLy8jcmVnaW9uIEdldERldmljZUluZm9cclxuICAgIGdldERldmljZUluZm8gPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gKCF0aGlzLmRldmljZSkgP1xyXG4gICAgICAgIHJlamVjdCh0aGlzLmJ1aWxkRGV2aWNlRXJyKGRldmljZU5vdEZvdW5kKSkgXHJcbiAgICAgICAgOiB0aGlzLmdhdGhlckRldmljZUluZm8oKVxyXG4gICAgICAgICAgICAudGhlbiggZGV2aWNlSW5mbyA9PiByZXNvbHZlKGRldmljZUluZm8pXHJcbiAgICAgICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihlcnIpKSApXHJcbiAgICApO1xyXG5cclxuICAgIGdhdGhlckRldmljZUluZm8gPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJZkRldmljZUlkbGUoKVxyXG4gICAgICAgIC50aGVuKCAoKSA9PiB0aGlzLmdldERldmljZUluZm9Qcm9jZWVkKClcclxuICAgICAgICApLnRoZW4oIGRldmljZUluZm8gPT4gXHJcbiAgICAgICAgICAgICByZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgICAuLi5kZXZpY2VJbmZvLFxyXG4gICAgICAgICAgICAgICAgIGRldmljZU5hbWU6IHRoaXMuZGV2aWNlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgaXNDb25uZWN0ZWQ6IHRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkLFxyXG4gICAgICAgICAgICAgfSlcclxuICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QoZXJyKSlcclxuICAgICB9KTtcclxuXHJcbiAgICBnZXREZXZpY2VJbmZvQmFzZSA9ICgpID0+IG5ldyBQcm9taXNlKCByZXNvbHZlID0+IHtcclxuICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AoWzB4MDEsIDB4MUEsIDB4MDVdKVxyXG4gICAgICAgIC50aGVuKCBhY2tSZXNwID0+IHJlc29sdmUoYWNrUmVzcCkpXHJcbiAgICB9KTtcclxuXHJcbiAgICBnZXREZXZpY2VJbmZvUHJvY2VlZCA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZW5kUGluQ29tbWFuZChbMHgwMCwgMHgxQSwgMHgwNV0pXHJcbiAgICAgICAgLnRoZW4oICgpID0+ICh0aGlzLmdldFNlcmlhbE51bWJlcikgPyBQcm9taXNlLnJlc29sdmUodHJ1ZSkgOiB0aGlzLndhaXRGb3JTbig1KSBcclxuICAgICAgICApLnRoZW4oIHdhaXRSZXNwID0+ICh3YWl0UmVzcCkgPyBQcm9taXNlLnJlc29sdmUoKSA6IFxyXG4gICAgICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIocmVzcG9uc2VOb3RSZWNlaXZlZCkpXHJcbiAgICAgICAgKS50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCByZXR1cm5TbiA9IHsgXHJcbiAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXI6IHRoaXMuaGV4VG9Bc2NpaSh0aGlzLnJlcXVlc3RlZFNuLnNlcmlhbE51bWJlcikgXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmdldFNlcmlhbE51bWJlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RlZFNuID0gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoICByZXR1cm5TbiApO1xyXG4gICAgICAgIH0pLmNhdGNoKCBlcnIgPT4gcmVqZWN0KGVycikpXHJcbiAgICB9KVxyXG5cclxuICAgIGNoZWNrSWZEZXZpY2VJZGxlID0gKCkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgdGhpcy5nZXREZXZpY2VJbmZvQmFzZSgpXHJcbiAgICAgICAgLnRoZW4oIGFja1Jlc3AgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYWNrUmVzcC5tZXNzYWdlID09PSBkZXZpY2VOb3RJZGxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbGVhclNlc3Npb24oKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oICgpID0+IHRoaXMuZ2V0RGV2aWNlSW5mb0Jhc2UoKSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrKGFja1Jlc3ApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oYWNrUmVzcCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhhY2tSZXNwKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG4gICAgd2FpdEZvclNuID0gbWF4VHJpZXMgPT4gbmV3IFByb21pc2UoIHJlc29sdmUgPT4ge1xyXG5cclxuICAgICAgICBsZXQgd2FpdEZvclJlc3BvbnNlID0gdHJ5TnVtYmVyID0+IFxyXG4gICAgICAgICAgICAodHJ5TnVtYmVyIDwgbWF4VHJpZXMpID8gXHJcbiAgICAgICAgICAgICAgICAodGhpcy5nZXRTZXJpYWxOdW1iZXIpID8gcmVzb2x2ZSggdHJ1ZSApIDogc2V0VGltZW91dCgoKSA9PiB3YWl0Rm9yUmVzcG9uc2UodHJ5TnVtYmVyICsgMSksIDIwMClcclxuICAgICAgICAgICAgOiByZXNvbHZlKCBmYWxzZSApO1xyXG5cclxuICAgICAgICB3YWl0Rm9yUmVzcG9uc2UoMCk7XHJcbiAgICB9KTtcclxuICAgIC8vI2VuZHJlZ2lvblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEeW5hUHJvR287IiwiaW1wb3J0IERldmljZUJhc2UgZnJvbSAnLi4vZGV2aWNlcy9iYXNlQ2xhc3MnO1xyXG5cclxuY2xhc3MgU2NyYVN3aXBlUGFyc2VyIGV4dGVuZHMgRGV2aWNlQmFzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIGNhbGxCYWNrcykge1xyXG4gICAgICAgIHN1cGVyKGRldmljZSwgY2FsbEJhY2tzKTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhTmFtZXMgPSBbXHJcbiAgICAgICAgICAgICd0cmFjazEnLFxyXG4gICAgICAgICAgICAndHJhY2syJyxcclxuICAgICAgICAgICAgJ3RyYWNrMycsXHJcbiAgICAgICAgICAgICdrc24nLFxyXG4gICAgICAgICAgICAnbWFnbmVQcmludCcsXHJcbiAgICAgICAgICAgICdtYWduZVByaW50U3RhdHVzJyxcclxuICAgICAgICAgICAgJ3NlcmlhbE51bWJlcicsXHJcbiAgICAgICAgICAgICdlbmNTZXNzaW9uSWQnLFxyXG4gICAgICAgICAgICAndHJhY2sxTWFza2VkJyxcclxuICAgICAgICAgICAgJ3RyYWNrMk1hc2tlZCcsXHJcbiAgICAgICAgICAgICd0cmFjazNNYXNrZWQnXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgdGhpcy5vZmZzZXQgPSAzO1xyXG5cclxuICAgICAgICAvL01vdmVkIFN0YXR1cyBFbnVtcyB0byBEZXZpY2VCYXNlIGZvciBpbmhlcml0YW5jZS5cclxuICAgIH1cclxuXHJcbiAgICB0cmFja0luZGljZXMgPSBvZmZzZXQgPT4gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgdHJhY2sxRGVjb2RlU3RhdHVzOiBvZmZzZXQsXHJcbiAgICAgICAgdHJhY2syRGVjb2RlU3RhdHVzOiBvZmZzZXQgKyAxLFxyXG4gICAgICAgIHRyYWNrM0RlY29kZVN0YXR1czogb2Zmc2V0ICsgMixcclxuICAgICAgICB0cmFjazFMZW46IG9mZnNldCArIDMsXHJcbiAgICAgICAgdHJhY2syTGVuOiBvZmZzZXQgKyA0LFxyXG4gICAgICAgIHRyYWNrM0xlbjogb2Zmc2V0ICsgNSxcclxuICAgICAgICBjYXJkRW5jb2RlVHlwZTogb2Zmc2V0ICsgNixcclxuICAgICAgICB0cmFjazFTdGFydDogb2Zmc2V0ICsgNyxcclxuICAgICAgICB0cmFjazFFbmQ6IG9mZnNldCArIDExOCxcclxuICAgICAgICB0cmFjazJTdGFydDogb2Zmc2V0ICsgMTE5LFxyXG4gICAgICAgIHRyYWNrMkVuZDogb2Zmc2V0ICsgMjMwLFxyXG4gICAgICAgIHRyYWNrM1N0YXJ0OiBvZmZzZXQgKyAyMzEsXHJcbiAgICAgICAgdHJhY2szRW5kOiBvZmZzZXQgKyAzNDIsXHJcbiAgICAgICAgY2FyZFN0YXR1czogb2Zmc2V0ICsgMzQzLFxyXG4gICAgICAgIG1hZ25lUHJpbnRTdGF0dXNTdGFydDogb2Zmc2V0ICsgMzQ0LFxyXG4gICAgICAgIG1hZ25lUHJpbnRTdGF0dXNFbmQ6IG9mZnNldCArICAzNDcsXHJcbiAgICAgICAgbWFnbmVQcmludExlbjogb2Zmc2V0ICsgMzQ4LFxyXG4gICAgICAgIG1hZ25lUHJpbnRTdGFydDogb2Zmc2V0ICsgMzQ5LFxyXG4gICAgICAgIG1hZ25lUHJpbnRFbmQ6IG9mZnNldCArIDQ3NixcclxuICAgICAgICBzZXJpYWxOdW1iZXJTdGFydDogb2Zmc2V0ICsgNDc3LFxyXG4gICAgICAgIHNlcmlhbE51bWJlckVuZDogb2Zmc2V0ICsgNDkyLFxyXG4gICAgICAgIGRldmljZUVuY1N0YXR1c1N0YXJ0OiBvZmZzZXQgKyA0OTMsXHJcbiAgICAgICAgZGV2aWNlRW5jU3RhdHVzRW5kOiBvZmZzZXQgKyA0OTQsXHJcbiAgICAgICAga3NuU3RhcnQ6IG9mZnNldCArIDQ5NSxcclxuICAgICAgICBrc25FbmQ6IG9mZnNldCArIDUwNCxcclxuICAgICAgICB0cmFjazFNYXNrZWRMZW46IG9mZnNldCArIDUwNSxcclxuICAgICAgICB0cmFjazJNYXNrZWRMZW46IG9mZnNldCArIDUwNixcclxuICAgICAgICB0cmFjazNNYXNrZWRMZW46IG9mZnNldCArIDUwNyxcclxuICAgICAgICB0cmFjazFNYXNrZWRTdGFydDogb2Zmc2V0ICsgNTA4LFxyXG4gICAgICAgIHRyYWNrMU1hc2tlZEVuZDogb2Zmc2V0ICsgNjE5LFxyXG4gICAgICAgIHRyYWNrMk1hc2tlZFN0YXJ0OiBvZmZzZXQgKyA2MjAsXHJcbiAgICAgICAgdHJhY2syTWFza2VkRW5kOiBvZmZzZXQgKyA3MzEsXHJcbiAgICAgICAgdHJhY2szTWFza2VkU3RhcnQ6IG9mZnNldCArIDczMixcclxuICAgICAgICB0cmFjazNNYXNrZWRFbmQ6IG9mZnNldCArIDg0MyxcclxuICAgICAgICBlbmNTZXNzaW9uSWRTdGFydDogb2Zmc2V0ICsgODQ0LFxyXG4gICAgICAgIGVuY1Nlc3Npb25JZEVuZDogb2Zmc2V0ICsgODUxLFxyXG4gICAgICAgIHRyYWNrMUFic0xlbjogb2Zmc2V0ICsgODUyLFxyXG4gICAgICAgIHRyYWNrMkFic0xlbjogb2Zmc2V0ICsgODUzLFxyXG4gICAgICAgIHRyYWNrM0Fic0xlbjogb2Zmc2V0ICsgODU0LFxyXG4gICAgICAgIG1hZ25lUHJpbnRBYnNMZW46IG9mZnNldCArIDg1NVxyXG4gICAgfSk7XHJcblxyXG4gICAgcGFyc2VIaWREYXRhID0gZGF0YSA9PiB7XHJcbiAgICAgICAgbGV0IHRyYWNrUG9zaXRpb25zID0gdGhpcy50cmFja0luZGljZXModGhpcy5vZmZzZXQpO1xyXG4gICAgICAgIGxldCB0cmFja0luZm8gPSB7fTtcclxuICAgIFxyXG4gICAgICAgIC8vSXRlcmF0ZSB0aHJvdWdoIHRyYWNrIG5hbWVzIGFuZCBmb3JtYXQgaW4ga2V5IHZhbHVlIHBhaXIgZm9ybWF0LlxyXG4gICAgICAgIHRoaXMuZGF0YU5hbWVzLmZvckVhY2goIGRhdGFQcm9wID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCB0cmFja0RhdGEgPSBkYXRhLnNsaWNlKFxyXG4gICAgICAgICAgICAgICAgdHJhY2tQb3NpdGlvbnNbYCR7ZGF0YVByb3B9U3RhcnRgXSwgdHJhY2tQb3NpdGlvbnNbYCR7ZGF0YVByb3B9RW5kYF0gKyAxXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHJhY2tQb3NpdGlvbnMuaGFzT3duUHJvcGVydHkoYCR7ZGF0YVByb3B9TGVuYCkpIHtcclxuICAgICAgICAgICAgICAgIHRyYWNrRGF0YSA9IHRyYWNrRGF0YS5zbGljZShcclxuICAgICAgICAgICAgICAgICAgICAwLCBkYXRhW3RyYWNrUG9zaXRpb25zW2Ake2RhdGFQcm9wfUxlbmBdXVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL1NwZWNpYWwgZm9ybWF0dGluZyBpcyBuZWVkZWQgZm9yIHRyYWNrMk1hc2tlZCwgdHJhY2tzIHdpdGggYSBcIkRlY29kZVN0YXR1c1wiIGZpZWxkLCBEZXZpY2UgU2VyaWFsIE51bWJlciwgYW5kIHRyYWNrcyB0aGF0IGhhdmUgYSBcIm1hc2tlZFwiIHN1ZmZpeC5cclxuICAgICAgICAgICAgLy9UaGUgYmVsb3cgdGVybmFyeSByZXR1cm5zIHRoZSBwcm9wZXIgZm9ybWF0LCBkZXBlbmRpbmcgb24gdHJhY2sgbmFtZSwgYW5kIHBlcmZvcm1zIG11Y2ggYmV0dGVyIHRoYW4gaWYvZWxzZWlmL2Vsc2Ugc3RhdGVtZW50LlxyXG4gICAgICAgICAgICB0cmFja0luZm8gPSAoZGF0YVByb3AgPT09ICd0cmFjazJNYXNrZWQnKSA/IHRoaXMuZm9ybWF0VHJhY2syTWFza2VkKCB0cmFja0luZm8sIGRhdGFQcm9wLCB0aGlzLmJ1ZmZlclRvVXRmOCh0cmFja0RhdGEpICkgOiBcclxuICAgICAgICAgICAgICAgICh0cmFja1Bvc2l0aW9ucy5oYXNPd25Qcm9wZXJ0eShgJHtkYXRhUHJvcH1EZWNvZGVTdGF0dXNgKSkgPyB0aGlzLmZvcm1hdFRyYWNrV2l0aERlY29kZSggdHJhY2tJbmZvLCBkYXRhUHJvcCwgZGF0YVt0cmFja1Bvc2l0aW9uc1tgJHtkYXRhUHJvcH1EZWNvZGVTdGF0dXNgXV0sIHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcodHJhY2tEYXRhKSApIDogXHJcbiAgICAgICAgICAgICAgICAgICAgKGRhdGFQcm9wID09PSAnc2VyaWFsTnVtYmVyJykgPyB0aGlzLmZvcm1hdFNlcmlhbE51bWJlcih0cmFja0luZm8sIHRyYWNrRGF0YSkgOiBcclxuICAgICAgICAgICAgICAgICAgICB7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50cmFja0luZm8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtkYXRhUHJvcF0gOiAoZGF0YVByb3AudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnbWFza2VkJykpID8gdGhpcy5idWZmZXJUb1V0ZjgodHJhY2tEYXRhKSA6IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcodHJhY2tEYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7IHN3aXBlRGF0YTogeyAuLi50cmFja0luZm8gfSB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZvcm1hdFNlcmlhbE51bWJlciA9ICh0cmFja0luZm8sIHRyYWNrRGF0YSkgPT4gKHtcclxuICAgICAgICAuLi50cmFja0luZm8sXHJcbiAgICAgICAgc2VyaWFsTnVtYmVyOiB0aGlzLmJ1ZmZlclRvVXRmOCggKHRyYWNrRGF0YS5sZW5ndGggPiA3ID8gdHJhY2tEYXRhLnNsaWNlKDAsIDcpIDogdHJhY2tEYXRhICkgKVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy9Nb3ZlZCBFeHAgYW5kIFBBTiBmb3JtYXRpbmcgdG8gVXRpbHMgY2xhc3MgLSBmb3IgaW5oZXJpdGFuY2UuXHJcblxyXG4gICAgZm9ybWF0VHJhY2syTWFza2VkID0gKHRyYWNrSW5mbywgZGF0YVByb3AsIHRyYWNrMk1hc2tlZCkgPT4gKHtcclxuICAgICAgICAuLi50cmFja0luZm8sXHJcbiAgICAgICAgW2RhdGFQcm9wXSA6IHRyYWNrMk1hc2tlZCxcclxuICAgICAgICAuLi50aGlzLmZvcm1hdEV4cFBBTih0cmFjazJNYXNrZWQpXHJcbiAgICB9KTtcclxuXHJcbiAgICBmb3JtYXRUcmFja1dpdGhEZWNvZGUgPSAodHJhY2tJbmZvLCBkYXRhUHJvcCwgZGVjb2RlU3RhdHVzVmFsdWUsIHRyYWNrVmFsdWUpID0+ICh7XHJcbiAgICAgICAgLi4udHJhY2tJbmZvLFxyXG4gICAgICAgIFtkYXRhUHJvcF0gOiB0cmFja1ZhbHVlLFxyXG4gICAgICAgIFtgJHtkYXRhUHJvcH1EZWNvZGVTdGF0dXNgXSA6IGRlY29kZVN0YXR1c1ZhbHVlID09PSAweDAwID8gXCJPa1wiIDogXCJFcnJvclwiLFxyXG4gICAgICAgIFtgJHtkYXRhUHJvcH1EZWNvZGVTdGF0dXNDb2RlYF0gOiBkZWNvZGVTdGF0dXNWYWx1ZVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNjcmFTd2lwZVBhcnNlcjsiLCJpbXBvcnQgU2NyYVN3aXBlUGFyc2VyIGZyb20gJy4uL3BhcnNlcnMvc2NyYVN3aXBlUGFyc2VyJztcclxuXHJcbmNsYXNzIFRyeFN0YXR1c1BhcnNlciBleHRlbmRzIFNjcmFTd2lwZVBhcnNlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIGNhbGxCYWNrcykge1xyXG4gICAgICAgIHN1cGVyKGRldmljZSwgY2FsbEJhY2tzKTtcclxuXHJcbiAgICAgICAgdGhpcy5UcnhTdGF0dXNFbnVtID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIDB4MDA6IFwiVHJhbnNhY3Rpb24gU3RhcnRlZCBhbmQgSWRsZVwiLFxyXG4gICAgICAgICAgICAweDAxOiBcIkNhcmQgaXMgSW5zZXJ0ZWRcIixcclxuICAgICAgICAgICAgMHgwMjogXCJFcnJvclwiLFxyXG4gICAgICAgICAgICAweDAzOiBcIlRyYW5zYWN0aW9uIFByb2dyZXNzIENoYW5nZVwiLFxyXG4gICAgICAgICAgICAweDA0OiBcIldhaXRpbmcgZm9yIFVzZXIgUmVzcG9uc2VcIixcclxuICAgICAgICAgICAgMHgwNTogXCJUaW1lZCBPdXRcIixcclxuICAgICAgICAgICAgMHgwNjogXCJUcmFuc2FjdGlvbiBDb21wbGV0ZVwiLFxyXG4gICAgICAgICAgICAweDA3OiBcIkNhbmNlbGxlZCBieSBIb3N0XCIsXHJcbiAgICAgICAgICAgIDB4MDg6IFwiQ2FyZCBSZW1vdmVkXCIsXHJcbiAgICAgICAgICAgIDB4MDk6IFwiQ29udGFjdGxlc3MgVG9rZW4gRGV0ZWN0ZWQsIFBvd2VyaW5nIFVwIENhcmRcIixcclxuICAgICAgICAgICAgMHgwQTogXCJNU1IgU3dpcGUgRGV0ZWN0ZWRcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLlRyeFByb2dyZXNzSW5kaWNhdG9yID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIDB4MDA6IFwiTm8gdHJhbnNhY3Rpb24gaW4gcHJvZ3Jlc3NcIixcclxuICAgICAgICAgICAgMHgwMTogXCJXYWl0aW5nIGZvciBjYXJkaG9sZGVyIHRvIHByZXNlbnQgcGF5bWVudFwiLFxyXG4gICAgICAgICAgICAweDAyOiBcIlBvd2VyaW5nIHVwIHRoZSBjYXJkXCIsXHJcbiAgICAgICAgICAgIDB4MDM6IFwiU2VsZWN0aW5nIHRoZSBhcHBsaWNhdGlvblwiLFxyXG4gICAgICAgICAgICAweDA0OiBcIldhaXRpbmcgZm9yIHVzZXIgbGFuZ3VhZ2Ugc2VsZWN0aW9uXCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDA1OiBcIldhaXRpbmcgZm9yIHVzZXIgYXBwbGljYXRpb24gc2VsZWN0aW9uXCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDA2OiBcIkluaXRpYXRpbmcgYXBwbGljYXRpb25cIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MDc6IFwiUmVhZGluZyBhcHBsaWNhdGlvbiBkYXRhXCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDA4OiBcIk9mZmxpbmUgZGF0YSBhdXRoZW50aWNhdGlvblwiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgwOTogXCJQcm9jZXNzIHJlc3RyaWN0aW9uc1wiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgwQTogXCJDYXJkaG9sZGVyIHZlcmlmaWNhdGlvblwiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgwQjogXCJUZXJtaW5hbCByaXNrIG1hbmFnZW1lbnRcIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MEM6IFwiVGVybWluYWwgYWN0aW9uIGFuYWx5c2lzXCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDBEOiBcIkdlbmVyYXRpbmcgZmlyc3QgYXBwbGljYXRpb24gY3J5cHRvZ3JhbVwiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgwRTogXCJDYXJkIGFjdGlvbiBhbmFseXNpc1wiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgwRjogXCJPbmxpbmUgcHJvY2Vzc2luZ1wiLFxyXG4gICAgICAgICAgICAweDEwOiBcIldhaXRpbmcgb25saW5lIHByb2Nlc3NpbmcgcmVzcG9uc2VcIixcclxuICAgICAgICAgICAgMHgxMTogXCJUcmFuc2FjdGlvbiBDb21wbGV0ZVwiLFxyXG4gICAgICAgICAgICAweDEyOiBcIlRyYW5zYWN0aW9uIEVycm9yXCIsXHJcbiAgICAgICAgICAgIDB4MTM6IFwiVHJhbnNhY3Rpb24gQXBwcm92ZWRcIixcclxuICAgICAgICAgICAgMHgxNDogXCJUcmFuc2FjdGlvbiBEZWNsaW5lZFwiLFxyXG4gICAgICAgICAgICAweDE1OiBcIlRyYW5zYWN0aW9uIENhbmNlbGxlZCBieSBNU1IgU3dpcGVcIiwgIC8vTVNSIE9ubHlcclxuICAgICAgICAgICAgMHgxNjogXCJFTVYgZXJyb3IgLSBDb25kaXRpb25zIE5vdCBTYXRpc2ZpZWRcIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MTc6IFwiRU1WIGVycm9yIC0gQ2FyZCBCbG9ja2VkXCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDE4OiBcIkFwcGxpY2F0aW9uIHNlbGVjdGlvbiBmYWlsZWRcIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MTk6IFwiRU1WIGVycm9yIC0gQ2FyZCBOb3QgQWNjZXB0ZWRcIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MUE6IFwiRW1wdHkgQ2FuZGlkYXRlIExpc3RcIixcclxuICAgICAgICAgICAgMHgxQjogXCJBcHBsaWNhdGlvbiBCbG9ja2VkXCIsXHJcbiAgICAgICAgICAgIDB4Mjk6IFwiQ29udGFjdGxlc3MgUmVtb3ZlIENhcmRcIixcclxuICAgICAgICAgICAgMHgyQTogXCJDb2xsaXNpb24gRGV0ZWN0ZWRcIixcclxuICAgICAgICAgICAgMHgyQjogXCJSZWZlciB0byBNb2JpbGUgRGV2aWNlIFByb21wdFwiLFxyXG4gICAgICAgICAgICAweDJDOiBcIkNvbnRhY3RsZXNzIFRyYW5zYWN0aW9uIENvbXBsZXRlXCIsXHJcbiAgICAgICAgICAgIDB4MkQ6IFwiUmVxdWVzdCBTd2l0Y2ggdG8gSUNDL01TUiAtIEtlcm5lbCBoYXMgcmVmdXNlZCBjb250YWN0bGVzcyBwYXltZW50XCIsXHJcbiAgICAgICAgICAgIDB4MkU6IFwiV3JvbmcgQ2FyZCBUeXBlIChNU0Qgb3IgRU1WKVwiLFxyXG4gICAgICAgICAgICAweDJGOiBcIk5vIEFwcGxpY2F0aW9uIEludGVyY2hhbmdlIFByb2ZpbGUgKFRhZyA4MikgUmVjZWl2ZWRcIixcclxuICAgICAgICAgICAgMHgzMTogXCJNYWduZXRpYyBzdHJpcGUgZGVjb2RpbmcgZXJyb3IuXCIsXHJcbiAgICAgICAgICAgIDB4M0M6IFwiTWFnbmV0aWMgc3RyaXBlIGRlY29kaW5nIGR1cmluZyBUZWNobmljYWwgRmFsbGJhY2suIFJldmVydCB0byBNU1IsIHBvd2VyaW5nIHVwIGJ1dCBub3QgcmVjZWl2aW5nIGFuIEFuc3dlciB0byBSZXNldCBmcm9tIGNhcmQuXCIsXHJcbiAgICAgICAgICAgIDB4M0Q6IFwiTWFnbmV0aWMgc3RyaXBlIGNhcmQgZGVjb2RlZCBkdXJpbmcgTVNSIEZhbGxiYWNrLiBEZXZpY2UgcmV2ZXJ0ZWQgdG8gTVNSLCBidXQgZW5jb3VudGVyZWQgZmF0YWwgZXJyb3JzLlwiLFxyXG4gICAgICAgICAgICAweDNFOiBcIk1hZ25ldGljIHN0cmlwZSBjYXJkIGRlY29kZWQgZHVyaW5nIGEgTm8gRmFsbGJhY2sgTVNSIHJlYWQuXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVRyYW5zYWN0aW9uU3RhdHVzID0gbm90aWZpY2F0aW9uID0+IHtcclxuICAgICAgICBsZXQgZGF0YUxlbiA9IHRoaXMucmVhZFR3b0J5dGVMZW5ndGgoW1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25bMV0sXHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvblsyXVxyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICBsZXQgbmV3Tm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uLnNsaWNlKDMpO1xyXG5cclxuICAgICAgICByZXR1cm4gKG5ld05vdGlmaWNhdGlvbi5sZW5ndGggPT09IGRhdGFMZW4pID8gdGhpcy5wYXJzZU5vdGlmaWNhdGlvbnMobmV3Tm90aWZpY2F0aW9uKSA6IHRoaXMudGhyb3dMZW5FcnIoKTtcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIHBhcnNlTm90aWZpY2F0aW9ucyA9IG5vdGlmaWNhdGlvblNsaWNlID0+IHtcclxuICAgICAgICBsZXQgbmV3Tm90aWZpY2F0aW9uU2xpY2UgPSBub3RpZmljYXRpb25TbGljZS5zbGljZSg2KTtcclxuXHJcbiAgICAgICAgbGV0IG5vdGlmaWNhdGlvbkxlbmd0aCA9IHRoaXMucmVhZFR3b0J5dGVMZW5ndGgoW1xyXG4gICAgICAgICAgICBuZXdOb3RpZmljYXRpb25TbGljZVswXSxcclxuICAgICAgICAgICAgbmV3Tm90aWZpY2F0aW9uU2xpY2VbMV1cclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgbGV0IG5vdGlmaWNhdGlvbkNvbnRlbnQgPSBuZXdOb3RpZmljYXRpb25TbGljZS5zbGljZSgyKTtcclxuICAgICAgICBcclxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xyXG4gICAgICAgICAgICAvL25vdGlmaWNhdGlvbkNvbnRlbnQgRm9ybWF0IGJ5IEluZGV4OlxyXG4gICAgICAgICAgICAvLzA6IEV2ZW50ID0+IFNlZSB0aGlzLlRyeFN0YXR1c0VudW0gZm9yIGNvZGVzLlxyXG4gICAgICAgICAgICAvLzE6IEN1cnJlbnQgT3BlcmF0aW9uIFRpbWUgcmVtYWluaW5nIGluIHNlY29uZHMuXHJcbiAgICAgICAgICAgIC8vMjogQ3VycmVudCBUcmFuc2FjdGlvbiBQcm9ncmVzcyBJbmRpY2F0b3IgPT4gU2VlIHRoaXMuVHJ4UHJvZ3Jlc3NJbmRpY2F0b3IgZm9yIGNvZGVzLlxyXG4gICAgICAgICAgICAvLzMgLSA0OiBGaW5hbCBTdGF0dXMgPT4gTm8gZG9jdW1lbnRhdGlvbiBwcm92aWRlZCBmb3IgdGhpcyAodXN1YWxseSBpcyAwMDAwKS5cclxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xyXG5cclxuICAgICAgICBsZXQgdHJ4U3RhdHVzQ29kZSA9IG5vdGlmaWNhdGlvbkNvbnRlbnRbMF07XHJcbiAgICAgICAgbGV0IHRyeFByb2dyZXNzQ29kZSA9IG5vdGlmaWNhdGlvbkNvbnRlbnRbMl07XHJcblxyXG4gICAgICAgIHJldHVybiAobm90aWZpY2F0aW9uQ29udGVudC5sZW5ndGggPT09IG5vdGlmaWNhdGlvbkxlbmd0aCkgPyAge1xyXG4gICAgICAgICAgICB0cmFuc2FjdGlvblN0YXR1czoge1xyXG4gICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogdHJ4U3RhdHVzQ29kZSxcclxuICAgICAgICAgICAgICAgIHN0YXR1c01zZzogKCB0aGlzLlRyeFN0YXR1c0VudW1bIHRyeFN0YXR1c0NvZGUgXSB8fCBcIlN0YXR1cyBjb2RlIG1lc3NhZ2Ugbm90IGRvY3VtZW50ZWRcIiApLFxyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NDb2RlOiB0cnhQcm9ncmVzc0NvZGUsXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzc01zZzogKCB0aGlzLlRyeFByb2dyZXNzSW5kaWNhdG9yWyB0cnhQcm9ncmVzc0NvZGUgXSB8fCBcIlByb2dyZXNzIGNvZGUgbWVzc2FnZSBub3QgZG9jdW1lbnRlZFwiIClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICA6XHJcbiAgICAgICAgdGhpcy50aHJvd0xlbkVycigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUcnhTdGF0dXNQYXJzZXI7IiwiaW1wb3J0IFRyeFN0YXR1c1BhcnNlciBmcm9tICcuL3RyeFN0YXR1c1BhcnNlcic7XHJcblxyXG5jb25zdCBkdWtwdEZhaWx1cmVCYXNlID0gXCJGYWlsdXJlLCBEVUtQVCBzY2hlbWUgaXMgXCI7XHJcbmNvbnN0IGludmFsaWRCYXNlID0gXCJJbnZhbGlkIFwiO1xyXG5cclxuXHJcbmNsYXNzIFNjcmFFbXZQYXJzZXIgZXh0ZW5kcyBUcnhTdGF0dXNQYXJzZXIge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsQmFja3MpIHtcclxuICAgICAgICBzdXBlcihkZXZpY2UsIGNhbGxCYWNrcyk7XHJcblxyXG4gICAgICAgIHRoaXMuZW12UmVzdWx0Q29kZXMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgMHg4MTogZHVrcHRGYWlsdXJlQmFzZSArIFwibm90IGxvYWRlZFwiLFxyXG4gICAgICAgICAgICAweDgyOiBkdWtwdEZhaWx1cmVCYXNlICsgXCJsb2FkZWQgYnV0IGFsbCBvZiBpdHMga2V5cyBoYXZlIGJlZW4gdXNlZFwiLFxyXG4gICAgICAgICAgICAweDgzOiBkdWtwdEZhaWx1cmVCYXNlICsgXCJub3QgbG9hZGVkIChTZWN1cml0eSBMZXZlbCBub3QgMyBvciA0KVwiLFxyXG4gICAgICAgICAgICAweDg0OiBpbnZhbGlkQmFzZSArIFwiVG90YWwgVHJhbnNhY3Rpb24gVGltZSBGaWVsZFwiLFxyXG4gICAgICAgICAgICAweDg1OiBpbnZhbGlkQmFzZSArIFwiQ2FyZCBUeXBlIEZpZWxkXCIsXHJcbiAgICAgICAgICAgIDB4ODY6IGludmFsaWRCYXNlICsgXCJPcHRpb25zIEZpZWxkXCIsXHJcbiAgICAgICAgICAgIDB4ODc6IGludmFsaWRCYXNlICsgXCJBbW91bnQgQXV0aG9yaXplZCBGaWVsZFwiLFxyXG4gICAgICAgICAgICAweDg4OiBpbnZhbGlkQmFzZSArIFwiVHJhbnNhY3Rpb24gVHlwZSBGaWVsZFwiLFxyXG4gICAgICAgICAgICAweDg5OiBpbnZhbGlkQmFzZSArICBcIkNhc2ggQmFjayBGaWVsZFwiLFxyXG4gICAgICAgICAgICAweDhBOiBpbnZhbGlkQmFzZSArIFwiVHJhbnNhY3Rpb24gQ3VycmVuY3kgQ29kZSBGaWVsZFwiLFxyXG4gICAgICAgICAgICAweDhFOiBpbnZhbGlkQmFzZSArIFwiUmVwb3J0aW5nIE9wdGlvblwiLFxyXG4gICAgICAgICAgICAweDhGOiBcIlRyYW5zYWN0aW9uIEFscmVhZHkgSW4gUHJvZ3Jlc3NcIixcclxuICAgICAgICAgICAgMHg5MTogaW52YWxpZEJhc2UgKyBcIkRldmljZSBTZXJpYWwgTnVtYmVyXCIsXHJcbiAgICAgICAgICAgIDB4OTY6IGludmFsaWRCYXNlICsgXCJTeXN0ZW0gRGF0ZSBhbmQgVGltZVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VFbXZEYXRhID0gKGVtdkRhdGEsIGlzQXJxYykgPT4gKGlzQXJxYykgPyAoe1xyXG4gICAgICAgIGFycWNEYXRhOiB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKCBlbXZEYXRhLnNsaWNlKDExKSApLFxyXG4gICAgICAgIGFycWNEYXRhUGFyc2VkOlxyXG4gICAgICAgICAgICB0aGlzLnRsdlBhcnNlcihcclxuICAgICAgICAgICAgICAgIGVtdkRhdGEuc2xpY2UoMTMpLFxyXG4gICAgICAgICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfSlcclxuICAgICAgICA6XHJcbiAgICAgICAgKHtcclxuICAgICAgICAgICAgc2lnbmF0dXJlUmVxdWlyZWQ6IChlbXZEYXRhWzExXSA9PT0gMHg4MCkgPyBcIkNCQy1NQUMgY2hlY2tlZCBpbiBBUlFDIG9ubGluZSByZXNwb25zZVwiIDogKGVtdkRhdGFbMTFdID09PSAweDAxKSxcclxuICAgICAgICAgICAgYmF0Y2hEYXRhOiB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKCBlbXZEYXRhLnNsaWNlKDExKSApLFxyXG4gICAgICAgICAgICBiYXRjaERhdGFQYXJzZWQ6IHRoaXMudGx2UGFyc2VyKCBlbXZEYXRhLnNsaWNlKDE0KSwgdHJ1ZSApXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAvL1JlYWQgUmVzdWx0IENvZGUgZnJvbSBzdGFydFRyYW5zYWN0aW9uIGNvbW1hbmQgYW5kIHJldHVybiB0byB1c2VyLiBJZiBub3QgMCAtIHJldHVybiBlcnJvciBtZXNzYWdlLlxyXG4gICAgcGFyc2VFbXZDb21tYW5kUmVzcG9uc2UgPSByZXNwID0+ICB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0Q29kZSA9IHJlc3Auc2xpY2UoNCwgNik7XHJcblxyXG4gICAgICAgIC8vcmVzdWx0IGNvZGUgb2YgWzB4MDAsIDB4MDBdIGlzIHN1Y2Nlc3MuXHJcbiAgICAgICAgcmV0dXJuIChwYXJzZUludCggcmVzdWx0Q29kZS5qb2luKFwiXCIpICkpID9cclxuICAgICAgICAgICAgKHtcclxuICAgICAgICAgICAgICAgIGNvZGU6IHBhcnNlSW50KHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIHJlc3VsdENvZGUgKSwgMTYpLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJTdGFydFRyYW5zYWN0aW9uRXJyb3JcIixcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZW12UmVzdWx0Q29kZXNbIHJlc3VsdENvZGVbMV0gXSB8fCBcIlRyYW5zYWN0aW9uIEVycm9yIE1lc3NhZ2Ugbm90IHlldCBkb2N1bWVudGVkXCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAoe1xyXG4gICAgICAgICAgICAgICAgY29kZTogMCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiU3VjY2VzcywgdHJhbnNhY3Rpb24gaGFzIHN0YXJ0ZWRcIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlVXNlclNlbGVjdGlvblJlcXVlc3QgPSBzZWxlY3Rpb25SZXF1ZXN0ID0+ICh7XHJcbiAgICAgICAgdXNlclNlbGVjdGlvblJlcXVlc3Q6IHtcclxuICAgICAgICAgICAgc2VsZWN0aW9uVHlwZTogKHNlbGVjdGlvblJlcXVlc3RbMF0gPT09IDB4MDApID8gXCJBcHBsaWNhdGlvbiBTZWxlY3Rpb25cIiA6IFwiTGFuZ3VhZ2UgU2VsZWN0aW9uXCIsXHJcbiAgICAgICAgICAgIHRpbWVSZW1haW5pbmc6ICBzZWxlY3Rpb25SZXF1ZXN0WzFdLFxyXG4gICAgICAgICAgICBtZW51SXRlbXM6IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoc2VsZWN0aW9uUmVxdWVzdC5zbGljZSgyKSlcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTY3JhRW12UGFyc2VyOyIsImltcG9ydCBTY3JhRW12UGFyc2VyIGZyb20gJy4uL3BhcnNlcnMvc2NyYUVtdlBhcnNlcic7XHJcbmltcG9ydCB7IFxyXG4gICAgY29tbWFuZE5vdFNlbnQsXHJcbiAgICByZXNwb25zZU5vdFJlY2VpdmVkLFxyXG4gICAgZGV2aWNlTm90Rm91bmQsXHJcbiAgICBkZXZpY2VOb3RPcGVuLFxyXG4gICAgZ2F0dFNlcnZlck5vdENvbm5lY3RlZFxyXG59IGZyb20gJy4uL2Vycm9ySGFuZGxlci9lcnJDb25zdGFudHMnO1xyXG5pbXBvcnQgeyBcclxuICAgIGNsb3NlU3VjY2VzcywgXHJcbiAgICBzdWNjZXNzQ29kZSwgXHJcbiAgICBvcGVuU3VjY2VzcyBcclxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnO1xyXG5cclxuY2xhc3MgU2NyYSBleHRlbmRzIFNjcmFFbXZQYXJzZXIge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsQmFja3MpIHtcclxuICAgICAgICBzdXBlcihkZXZpY2UsIGNhbGxCYWNrcyk7XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbkNhbGxiYWNrID0gY2FsbEJhY2tzLnRyYW5zYWN0aW9uQ2FsbGJhY2sgfHwgY2FsbEJhY2tzO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheUNhbGxiYWNrID0gY2FsbEJhY2tzLmRpc3BsYXlDYWxsYmFjaztcclxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2sgPSBjYWxsQmFja3MudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjaztcclxuICAgICAgICB0aGlzLnVzZXJTZWxlY3Rpb25DYWxsYmFjayA9IGNhbGxCYWNrcy51c2VyU2VsZWN0aW9uQ2FsbGJhY2s7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5tYXhCbG9ja0lkID0gbnVsbDtcclxuICAgICAgICB0aGlzLmluaXRpYWxOb3RpZmljYXRpb24gPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmF3RGF0YSA9IHt9O1xyXG5cclxuICAgICAgICB0aGlzLmRhdGFSZWFkU3RhdHVzQ2hhcmFjdGVyaXN0aWMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZGF0YVJlYWR5Q2hhcmFjdGVyaXN0aWMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY29tbWFuZENoYXJhY3RlcmlzdGljID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNhcmREYXRhTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY2FyZERhdGFOb3RpZmljYXRpb24gPVwiMDUwOGU2ZjgtYWQ4Mi04OThmLWY4NDMtZTM0MTBjYjYwMjAxXCI7XHJcbiAgICAgICAgdGhpcy5jb21tYW5kQ2hhcklkID0gJzA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDIwMCc7XHJcbiAgICAgICAgdGhpcy5kYXRhUmVhZHlJZCA9IFwiMDUwOGU2ZjgtYWQ4Mi04OThmLWY4NDMtZTM0MTBjYjYwMjAyXCI7XHJcbiAgICAgICAgdGhpcy5kYXRhUmVhZFN0YXR1c0lkID0gXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAyMDNcIjtcclxuXHJcbiAgICAgICAgdGhpcy5lbXZPcHRpb25zID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgICdub3JtYWwnOiAweDAwLFxyXG4gICAgICAgICAgICAnYnlwYXNzcGluJzogMHgwMSxcclxuICAgICAgICAgICAgJ2ZvcmNlb25saW5lJzogMHgwMixcclxuICAgICAgICAgICAgJ3F1aWNrY2hpcCc6IDB4ODAsXHJcbiAgICAgICAgICAgICdwaW5ieXBhc3NxdWlja2NoaXAnOiAweDgxLFxyXG4gICAgICAgICAgICAnZm9yY2VvbmxpbmVxdWlja2NoaXAnOiAweDgyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVzdWx0Q29kZXMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgJzAwMDAnOiBcIlN1Y2Nlc3NcIixcclxuICAgICAgICAgICAgJzAzOEInOiBcIkludmFsaWQgU2VsZWN0aW9uIFN0YXR1c1wiLFxyXG4gICAgICAgICAgICAnMDM4Qyc6ICdJbnZhbGlkIFNlbGVjdGlvbiBSZXN1bHQnLFxyXG4gICAgICAgICAgICAnMDM4RCc6IFwiRmFpbHVyZSwgbm8gdHJhbnNhY3Rpb24gY3VycmVudGx5IGluIHByb2dyZXNzXCIsXHJcbiAgICAgICAgICAgICcwMzhGJzogXCJGYWlsdXJlLCB0cmFuc2FjdGlvbiBhbHJlYWR5IGluIHByb2dyZXNzXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5lbXZDb21tYW5kQmFzZSA9IFsweDQ5LCAweDE5LCAweDAwLCAweDAwLCAweDAzLCAweDAwLCAweDAwLCAweDEzXTtcclxuXHJcbiAgICAgICAgdGhpcy5jYW5jZWxFbXZDb21tYW5kID0gVWludDhBcnJheS5vZihcclxuICAgICAgICAgICAgMHg0OSwgMHgwNiwgMHgwMCwgMHgwMCwgMHgwMywgMHgwNCwgMHgwMCwgMHgwMFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FyZFNlcnZpY2VCYXNlID0gb3B0aW9uYWxJbmRleCA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gKCF0aGlzLmRldmljZSkgP1xyXG4gICAgICAgIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihkZXZpY2VOb3RGb3VuZCkpXHJcbiAgICAgICAgOlxyXG4gICAgICAgIHRoaXMuY29ubmVjdEFuZENhY2hlKG9wdGlvbmFsSW5kZXgpXHJcbiAgICAgICAgICAgIC50aGVuKCBzZXJ2aWNlID0+XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlLmdldENoYXJhY3RlcmlzdGljKHRoaXMuY2FyZERhdGFOb3RpZmljYXRpb24pXHJcbiAgICAgICAgICAgICkudGhlbihjaGFyYWN0ZXJpc3RpYyA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbR0FUVCBOT1RJRklDQVRJT05TXTogUmVxdWVzdCB0byBjYWNoZSBjaGFyYWN0ZXJpc3RpY3MsIHN0YXJ0IG5vdGlmaWNhdGlvbnMsIGFuZCBhdHRhY2ggbGlzdGVuZXJzLiB8fCAke25ldyBEYXRlKCl9YCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpYy5zdGFydE5vdGlmaWNhdGlvbnMoKVxyXG4gICAgICAgICAgICB9KS50aGVuKGNoYXJhY3RlcmlzdGljID0+IHtcclxuICAgICAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYXJhY3RlcmlzdGljdmFsdWVjaGFuZ2VkJywgdGhpcy5jYXJkRGF0YUhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuYWRkRXZlbnRMaXN0ZW5lcignY2hhcmFjdGVyaXN0aWN2YWx1ZWNoYW5nZWQnLCB0aGlzLmNhcmREYXRhSGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FyZERhdGFMaXN0ZW5lciA9IGNoYXJhY3RlcmlzdGljO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KS50aGVuKCBcclxuICAgICAgICAgICAgICAgICgpID0+IHRoaXMuY2FyZFNlcnZpY2UuZ2V0Q2hhcmFjdGVyaXN0aWModGhpcy5jb21tYW5kQ2hhcklkKVxyXG4gICAgICAgICAgICApLnRoZW4oY2hhcmFjdGVyaXN0aWMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQ2hhcmFjdGVyaXN0aWMgPSBjaGFyYWN0ZXJpc3RpYztcclxuXHJcbiAgICAgICAgICAgICAgICAvL0lmIHRoaXMgbGlicmFyeSBpcyBiZWluZyB1c2VkIGluIGEgd2ViIGFwcGxpY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAvL01ha2Ugc3VyZSB0aGUgZGV2aWNlIGRpc2Nvbm5lY3RzIHByb3Blcmx5IHVwb24gd2luZG93IHVubG9hZC5cclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5vbkRlc3Ryb3lIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5vbkRlc3Ryb3lIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pLnRoZW4oXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLmNhcmRTZXJ2aWNlLmdldENoYXJhY3RlcmlzdGljKHRoaXMuZGF0YVJlYWR5SWQpXHJcbiAgICAgICAgICAgICkudGhlbiggY2hhcmFjdGVyaXN0aWMgPT4gY2hhcmFjdGVyaXN0aWMuc3RhcnROb3RpZmljYXRpb25zKClcclxuICAgICAgICAgICAgKS50aGVuKCBjaGFyYWN0ZXJpc3RpYyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFyYWN0ZXJpc3RpY3ZhbHVlY2hhbmdlZCcsIHRoaXMuZGF0YVJlYWR5SGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5hZGRFdmVudExpc3RlbmVyKCdjaGFyYWN0ZXJpc3RpY3ZhbHVlY2hhbmdlZCcsIHRoaXMuZGF0YVJlYWR5SGFuZGxlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhUmVhZHlDaGFyYWN0ZXJpc3RpYyA9IGNoYXJhY3RlcmlzdGljO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KS50aGVuKFxyXG4gICAgICAgICAgICAgICAgKCkgPT4gdGhpcy5jYXJkU2VydmljZS5nZXRDaGFyYWN0ZXJpc3RpYyh0aGlzLmRhdGFSZWFkU3RhdHVzSWQpXHJcbiAgICAgICAgICAgICkudGhlbiggY2hhcmFjdGVyaXN0aWMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhUmVhZFN0YXR1c0NoYXJhY3RlcmlzdGljID0gY2hhcmFjdGVyaXN0aWM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbR0FUVCBOT1RJRklDQVRJT05TXTogU3VjY2VzcyEgQ2FjaGVkIGNoYXJhY3RlcmlzdGljcywgc3RhcnRlZCBub3RpZmljYXRpb25zLCBhbmQgYXR0YWNoZWQgbGlzdGVuZXJzLiB8fCAke25ldyBEYXRlKCl9YClcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgICAgICBjb2RlOiBzdWNjZXNzQ29kZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcGVuU3VjY2Vzc1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiByZWplY3QoIGVyciApKVxyXG4gICAgKTtcclxuXHJcbiAgICBkYXRhUmVhZHlIYW5kbGVyID0gZXZlbnQgPT4ge1xyXG4gICAgICAgIGxldCBldmVudFZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIGxldCBmb3JtYXR0ZWRFdmVudFZhbHVlID0gdGhpcy5yZWFkQnl0ZUFycmF5KGV2ZW50VmFsdWUpO1xyXG5cclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBkYXRhUmVhZHkgbGlzdGVuZXI6ICR7dGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhmb3JtYXR0ZWRFdmVudFZhbHVlKX1gKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29tbWFuZFNlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21tYW5kUmVzcEF2YWlsYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZFNlbnQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2FyZERhdGFIYW5kbGVyID0gZXZlbnQgPT4ge1xyXG4gICAgICAgIGxldCBldmVudFZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xyXG5cclxuICAgICAgICAvL0lmIHRoZSBmaXJzdCBwb3NpdGlvbiBpbiB0aGUgYXJyYXkgPT09IDI1NSwgY2FyZCBkYXRhIG5vdGlmaWNhdGlvbnMgaGF2ZSBmaW5pc2hlZC5cclxuICAgICAgICBpZiAoZXZlbnRWYWx1ZS5nZXRVaW50OCgwKSAhPT0gMjU1KSB7XHJcbiAgICAgICAgICAgIGxldCBub3RpZmljYXRpb25BcnJheSA9IHRoaXMucmVhZEJ5dGVBcnJheShldmVudFZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmF3RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIC4uLnRoaXMucmF3RGF0YSxcclxuICAgICAgICAgICAgICAgIFtub3RpZmljYXRpb25BcnJheVswXV06IG5vdGlmaWNhdGlvbkFycmF5LnNsaWNlKDEpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vS2VlcCB0cmFjayBvZiB0aGUgYW1vdW50IG9mIG5vdGlmaWNhdGlvbnMgc2VudCBmcm9tIGRldmljZS5cclxuICAgICAgICAgICAgdGhpcy5tYXhCbG9ja0lkID0gZXZlbnRWYWx1ZS5nZXRVaW50OCgxKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrTm90aWZpY2F0aW9uTGVuZ3RoKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbE5vdGlmaWNhdGlvbiA9ICh0aGlzLnJsZUZvcm1hdHNbIHRoaXMucmF3RGF0YVswXVswXSBdKSA/IHRoaXMuZGVjb2RlUkxFKHRoaXMucmF3RGF0YVswXSkgOiB0aGlzLnJhd0RhdGFbMF07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKHRoaXMucmF3RGF0YSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vQ2hlY2sgaWYgc3dpcGUgZGF0YVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5pdGlhbE5vdGlmaWNhdGlvblswXSA9PT0gMCB8fCB0aGlzLmluaXRpYWxOb3RpZmljYXRpb25bMF0gPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXR1cm5Ub1VzZXIodGhpcy50cmFuc2FjdGlvbkNhbGxiYWNrKSggdGhpcy5wYXJzZUhpZERhdGEoIHRoaXMuYnVpbGRJbml0aWFsRGF0YUFycmF5KHRydWUpICkgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBub3RpZmljYXRpb25JZCA9IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxOb3RpZmljYXRpb25bN10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbE5vdGlmaWNhdGlvbls4XVxyXG4gICAgICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmROb3RpZmljYXRpb25UeXBlKG5vdGlmaWNhdGlvbklkKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICBlbHNlIHRoaXMuc2VuZEVyclRvQ2FsbGJhY2soIHRoaXMudGhyb3dMZW5FcnIoKSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmaW5kTm90aWZpY2F0aW9uVHlwZSA9IG5vdGlmaWNhdGlvbklkID0+IHtcclxuICAgICAgICBsZXQgYnVpbHROb3RpZmljYXRpb24gPSB0aGlzLmJ1aWxkSW5pdGlhbERhdGFBcnJheSh0cnVlKTtcclxuXHJcbiAgICAgICAgc3dpdGNoKG5vdGlmaWNhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCIwMzAwXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKCc9PVRyYW5zYWN0aW9uIFN0YXR1cz09Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXR1cm5Ub1VzZXIodGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrKSh0aGlzLnBhcnNlVHJhbnNhY3Rpb25TdGF0dXMoIGJ1aWx0Tm90aWZpY2F0aW9uICkpO1xyXG4gICAgICAgICAgICBjYXNlIFwiMDMwMVwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShcIj09RGlzcGxheSBNZXNzYWdlIFJlcXVlc3Q9PVwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJldHVyblRvVXNlcih0aGlzLmRpc3BsYXlDYWxsYmFjaykoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlNZXNzYWdlOiB0aGlzLmJ1ZmZlclRvVXRmOCggYnVpbHROb3RpZmljYXRpb24uc2xpY2UoMTEpIClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYXNlIFwiMDMwMlwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShcIj09VXNlciBTZWxlY3Rpb24gUmVxdWVzdD09XCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZSh0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKGJ1aWx0Tm90aWZpY2F0aW9uKSk7XHJcbiAgICAgICAgICAgICAgICAvL1RPRE86IEZ1cnRoZXIgaW52ZXN0aWdhdGlvbiB3YXJyYW50ZWQgZm9yIHRoaXMgY2lyY3Vtc3RhbmNlLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0dXJuVG9Vc2VyKHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjaykoIHRoaXMucGFyc2VVc2VyU2VsZWN0aW9uUmVxdWVzdChidWlsZE5vdGlmaWNhdGlvbikgKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiMDMwM1wiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShcIj09QVJRQyBNZXNzYWdlPT1cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXR1cm5Ub1VzZXIodGhpcy50cmFuc2FjdGlvbkNhbGxiYWNrKSh0aGlzLnBhcnNlRW12RGF0YSggYnVpbHROb3RpZmljYXRpb24sIHRydWUgKSkgO1xyXG4gICAgICAgICAgICBjYXNlIFwiMDMwNFwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZSgnPT1CYXRjaCBEYXRhIE1lc3NhZ2U9PScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0dXJuVG9Vc2VyKHRoaXMudHJhbnNhY3Rpb25DYWxsYmFjaykodGhpcy5wYXJzZUVtdkRhdGEoIGJ1aWx0Tm90aWZpY2F0aW9uLCBmYWxzZSApKTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFVuZG9jdW1lbnRlZCBOb3RpZmljYXRpb24gSUQ6ICR7bm90aWZpY2F0aW9uSWR9YCwgYnVpbHROb3RpZmljYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZSggdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggYnVpbHROb3RpZmljYXRpb24gKSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGFydFRyYW5zYWN0aW9uID0gZW12T3B0aW9ucyA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gKCF0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCkgPyBcclxuICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90T3BlbikgKVxyXG4gICAgICAgIDpcclxuICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AoXHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGRFbXZDb21tYW5kKCBlbXZPcHRpb25zIHx8IHt9IClcclxuICAgICAgICApLnRoZW4oIHZhbHVlID0+IHtcclxuICAgICAgICAgICAgbGV0IGNvbW1hbmRSZXNwID0gdGhpcy5wYXJzZUVtdkNvbW1hbmRSZXNwb25zZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoY29tbWFuZFJlc3ApO1xyXG5cclxuICAgICAgICByZXR1cm4gKGNvbW1hbmRSZXNwLmNvZGUgPT09IDApID8gcmVzb2x2ZShjb21tYW5kUmVzcCkgOlxyXG4gICAgICAgICAgICAgICAgKGNvbW1hbmRSZXNwLmNvZGUgIT09IDkxOCkgPyByZWplY3QodGhpcy5idWlsZERldmljZUVycihjb21tYW5kUmVzcCkpIDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERldmljZURhdGVUaW1lKClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbiggKCkgPT4gdGhpcy5kZWxheVByb21pc2UoNTAwKSApXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oICgpID0+IHJlc29sdmUoIHRoaXMuc3RhcnRUcmFuc2FjdGlvbihlbXZPcHRpb25zKSApIClcclxuICAgICAgICB9KS5jYXRjaChlcnIgPT4gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikpIClcclxuICAgICk7IFxyXG5cclxuICAgIGJ1aWxkRW12Q29tbWFuZCA9ICh7IFxyXG4gICAgICAgIHRpbWVvdXQsIFxyXG4gICAgICAgIGNhcmRUeXBlLCBcclxuICAgICAgICB0cmFuc2FjdGlvblR5cGUsIFxyXG4gICAgICAgIGNhc2hCYWNrLCBcclxuICAgICAgICBjdXJyZW5jeUNvZGUsIFxyXG4gICAgICAgIHJlcG9ydFZlcmJvc2l0eSxcclxuICAgICAgICBlbXZPcHRpb25zLFxyXG4gICAgICAgIGF1dGhvcml6ZWRBbW91bnRcclxuICAgIH0pID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgdGltZW91dDogJHt0aW1lb3V0fSB8fCBjYXJkVHlwZTogJHtjYXJkVHlwZX0gfHwgdHJhbnNhY3Rpb25UeXBlOiAke3RyYW5zYWN0aW9uVHlwZX0gfHwgZW12T3B0aW9uczogJHtlbXZPcHRpb25zfSB8fCBhdXRob3JpemVkQW1vdW50OiAke2F1dGhvcml6ZWRBbW91bnR9IHx8IGNhc2hCYWNrOiAke2Nhc2hCYWNrfSB8fCBjdXJyZW5jeUNvZGU6ICR7Y3VycmVuY3lDb2RlfSB8fCByZXBvcnRWZXJib3NpdHk6ICR7cmVwb3J0VmVyYm9zaXR5fWApXHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGNvbW1hbmQgPSBbIFxyXG4gICAgICAgICAgICAuLi50aGlzLmVtdkNvbW1hbmRCYXNlLCBcclxuICAgICAgICAgICAgdGltZW91dCB8fCAweDNDLCBcclxuICAgICAgICAgICAgKGNhcmRUeXBlKSA/IHRoaXMuY2FyZFR5cGVzKCBjYXJkVHlwZS50b0xvd2VyQ2FzZSgpICkgOiAweDAzLFxyXG4gICAgICAgICAgICAodHlwZW9mKGVtdk9wdGlvbnMpICE9PSAndW5kZWZpbmVkJykgPyAodGhpcy5lbXZPcHRpb25zWyBlbXZPcHRpb25zLnRvTG93ZXJDYXNlKCkgXSkgOiAweDgwXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ2Jhc2UgY29tbWFuZDogJywgY29tbWFuZCk7XHJcblxyXG4gICAgICAgIGNvbW1hbmQgPSAoYXV0aG9yaXplZEFtb3VudCkgPyBcclxuICAgICAgICAgICAgY29tbWFuZC5jb25jYXQoIHRoaXMuY29udmVydE51bVRvQW1vdW50KGF1dGhvcml6ZWRBbW91bnQpIClcclxuICAgICAgICAgICAgOiBjb21tYW5kLmNvbmNhdCggWzB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsIDB4MDBdICk7XHJcblxyXG4gICAgICAgIGNvbW1hbmQgPSAodHJhbnNhY3Rpb25UeXBlKSA/IFxyXG4gICAgICAgICAgICBjb21tYW5kLmNvbmNhdCh0aGlzLnRyYW5zYWN0aW9uVHlwZXNbIHRyYW5zYWN0aW9uVHlwZS50b0xvd2VyQ2FzZSgpIF0gfHwgMHgwMCkgXHJcbiAgICAgICAgICAgIDogY29tbWFuZC5jb25jYXQoMHgwMClcclxuICAgICAgICBcclxuICAgICAgICBjb21tYW5kID0gKGNhc2hCYWNrKSA/IGNvbW1hbmQuY29uY2F0KCB0aGlzLmNvbnZlcnROdW1Ub0Ftb3VudChjYXNoQmFjaykgKVxyXG4gICAgICAgICAgICA6IGNvbW1hbmQuY29uY2F0KCB0aGlzLm5ld0FycmF5UGFydGlhbCgweDAwLCA2KSApO1xyXG5cclxuICAgICAgICBjb21tYW5kID0gKGN1cnJlbmN5Q29kZSkgPyBjb21tYW5kLmNvbmNhdCggdGhpcy5jdXJyZW5jeUNvZGVbIGN1cnJlbmN5Q29kZS50b0xvd2VyQ2FzZSgpIF0gfHwgIHRoaXMuY3VycmVuY3lDb2RlWydkZWZhdWx0J10gKVxyXG4gICAgICAgICAgICA6IGNvbW1hbmQuY29uY2F0KCBbMHgwOCwgMHg0MF0gKTtcclxuXHJcbiAgICAgICAgY29tbWFuZC5wdXNoKFxyXG4gICAgICAgICAgICAocmVwb3J0VmVyYm9zaXR5KSA/ICggdGhpcy5zdGF0dXNWZXJib3NpdHlbIHJlcG9ydFZlcmJvc2l0eS50b0xvd2VyQ2FzZSgpIF0gfHwgMHgwMCApIDogMHgwMVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGNvbW1hbmQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZENvbW1hbmRWYWx1ZSA9ICgpID0+IG5ldyBQcm9taXNlIChyZXNvbHZlID0+IHRoaXMuY29tbWFuZENoYXJhY3RlcmlzdGljLnJlYWRWYWx1ZSgpXHJcbiAgICAgICAgLnRoZW4oIHZhbHVlID0+IHJlc29sdmUoIHRoaXMucmVhZEJ5dGVBcnJheSh2YWx1ZSkgKSkpO1xyXG5cclxuICAgIHJlYWRCYXR0ZXJ5TGV2ZWwgPSAoKSA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiBcclxuICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AoWzB4NDUsIDB4MDBdKS50aGVuKHZhbHVlID0+IHJlc29sdmUoIHZhbHVlWzJdICkpXHJcbiAgICApO1xyXG5cclxuICAgIGNoZWNrTm90aWZpY2F0aW9uTGVuZ3RoID0gKCkgPT4gTWF0aC5tYXgoLi4uT2JqZWN0LmtleXModGhpcy5yYXdEYXRhKSkgPT09IHRoaXMubWF4QmxvY2tJZCAtIDE7XHJcbiAgIFxyXG4gICAgc2VuZENvbW1hbmRXaXRoUmVzcCA9IHdyaXRlQ29tbWFuZCA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5jb21tYW5kQ2hhcmFjdGVyaXN0aWMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihjb21tYW5kTm90U2VudCkpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBTZW5kaW5nIGNvbW1hbmQ6ICR7dGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyh3cml0ZUNvbW1hbmQpfWApO1xyXG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRTZW50ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYy53cml0ZVZhbHVlKFVpbnQ4QXJyYXkuZnJvbSh3cml0ZUNvbW1hbmQpKVxyXG4gICAgICAgICAgICAudGhlbiggKCkgPT4gKHRoaXMuY29tbWFuZFJlc3BBdmFpbGFibGUpID8gUHJvbWlzZS5yZXNvbHZlKCB0cnVlICkgOiB0aGlzLndhaXRGb3JEZXZpY2VSZXNwb25zZSgxNSkpXHJcbiAgICAgICAgICAgIC50aGVuKCB3YWl0UmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRSZXNwQXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiAoIXdhaXRSZXNwKSA/IFxyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihyZXNwb25zZU5vdFJlY2VpdmVkKSkgOiB0aGlzLnJlYWRDb21tYW5kVmFsdWUoKVxyXG4gICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHJlc29sdmUocmVzcG9uc2UpXHJcbiAgICAgICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihlcnIpICkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVyblRvVXNlciA9IHNwZWNpZmllZENhbGxiYWNrID0+IHJldHVybk9iaiA9PiB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsTm90aWZpY2F0aW9uID0gbnVsbDtcclxuICAgICAgICB0aGlzLm1heEJsb2NrSWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmF3RGF0YSA9IHt9O1xyXG4gICAgICAgIHJldHVybiBzcGVjaWZpZWRDYWxsYmFjayhyZXR1cm5PYmopO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkRGF0ZVRpbWVDb21tYW5kID0gKCkgPT4ge1xyXG4gICAgICAgIGxldCBkYXRlVGltZUNvbW1hbmQgPSBbMHg0OSwgMHgyMiwgMHgwMCwgMHgwMCwgMHgwMywgMHgwQywgMHgwMCwgMHgxQ107XHJcbiAgICAgICAgZGF0ZVRpbWVDb21tYW5kID0gZGF0ZVRpbWVDb21tYW5kLmNvbmNhdCggdGhpcy5uZXdBcnJheVBhcnRpYWwoMHgwMCwgMTcpICk7XHJcbiAgICAgICAgLy9Gb3JtYXQgRGF0ZSBzZWdtZW50IGJlbG93XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICAvL01vbnRoICh6ZXJvIGJhc2VkIGluZGV4LCBzbyBhZGQgMSkuXHJcbiAgICAgICAgZGF0ZVRpbWVDb21tYW5kLnB1c2goIFxyXG4gICAgICAgICAgICB0aGlzLmNhc3REZWNUb0hleCggY3VycmVudC5nZXRNb250aCgpICsgMSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBkYXRlVGltZUNvbW1hbmQucHVzaChcclxuICAgICAgICAgICAgdGhpcy5jYXN0RGVjVG9IZXgoIGN1cnJlbnQuZ2V0RGF0ZSgpIClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBkYXRlVGltZUNvbW1hbmQucHVzaChcclxuICAgICAgICAgICAgdGhpcy5jYXN0RGVjVG9IZXgoIGN1cnJlbnQuZ2V0SG91cnMoKSApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgZGF0ZVRpbWVDb21tYW5kLnB1c2goXHJcbiAgICAgICAgICAgIHRoaXMuY2FzdERlY1RvSGV4KCBjdXJyZW50LmdldE1pbnV0ZXMoKSApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgZGF0ZVRpbWVDb21tYW5kLnB1c2goXHJcbiAgICAgICAgICAgIHRoaXMuY2FzdERlY1RvSGV4KCBjdXJyZW50LmdldFNlY29uZHMoKSApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy9DdXJyZW50bHkgdW51c2VkIG9mZnNldC4gIDB4MDAgLSAweDA2IGlzIHZhbGlkIC0gYnV0IGlzIG5vdCBleGFtaW5lZC5cclxuICAgICAgICBkYXRlVGltZUNvbW1hbmQucHVzaCgweDAwKTtcclxuXHJcbiAgICAgICAgLy9ZZWFyIGlzIGJhc2VkIHVwb24gMjAwOCA9PT0gMHgwMC5cclxuICAgICAgICBkYXRlVGltZUNvbW1hbmQucHVzaChcclxuICAgICAgICAgICAgdGhpcy5jYXN0RGVjVG9IZXgoIGN1cnJlbnQuZ2V0RnVsbFllYXIoKSAtIDIwMDggKVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgLy9NQUMgLSBmb3IgYWxsIGRldmljZXMgZXhjZXB0IHR3byBleGNlcHRpb25zIChzZWUgZG9jdW1lbnRhdGlvbikgdGhpcyBjYW4gYmUgcGFkZGVkIHdpdGggemVyb3MuXHJcbiAgICAgICAgZGF0ZVRpbWVDb21tYW5kID0gZGF0ZVRpbWVDb21tYW5kLmNvbmNhdCggdGhpcy5uZXdBcnJheVBhcnRpYWwoMHgwMCwgNCkgKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZGF0ZVRpbWVDb21tYW5kO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERldmljZURhdGVUaW1lID0gKCkgPT4gdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKFxyXG4gICAgICAgIHRoaXMuYnVpbGREYXRlVGltZUNvbW1hbmQoKVxyXG4gICAgKTtcclxuXHJcbiAgICBnZXRLc24gPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gXHJcbiAgICAgICAgKCF0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCkgPyByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZ2F0dFNlcnZlck5vdENvbm5lY3RlZCkpIFxyXG4gICAgICAgIDogdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKFsweDA5LCAweDAwXSlcclxuICAgICAgICAudGhlbiggcmVzcCA9PiB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHJlc3Auc2xpY2UoMikpIClcclxuICAgICAgICAudGhlbihmb3JtYXR0ZWRWYWx1ZSA9PiByZXNvbHZlKGZvcm1hdHRlZFZhbHVlKSlcclxuICAgICk7XHJcblxyXG4gICAgZ2V0RGV2aWNlU24gPSAoKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IFxyXG4gICAgICAgIHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcChbMHgwMCwgMHgwMSwgMHgwM10pXHJcbiAgICAgICAgLnRoZW4oIHJlc3AgPT4gdGhpcy5idWZmZXJUb1V0ZjgocmVzcC5zbGljZSgyKSkgXHJcbiAgICAgICAgKS50aGVuKGZvcm1hdHRlZFZhbHVlID0+IHJlc29sdmUoZm9ybWF0dGVkVmFsdWUpKVxyXG4gICAgKTtcclxuXHJcbiAgICBnYXRoZXJEZXZpY2VJbmZvID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBsZXQgYmF0dGVyeTtcclxuICAgICAgICBsZXQgc2VyaWFsTnVtO1xyXG5cclxuICAgICAgICB0aGlzLnJlYWRCYXR0ZXJ5TGV2ZWwoKVxyXG4gICAgICAgIC50aGVuKCByZXNwQmF0dGVyeSA9PiB7XHJcbiAgICAgICAgICAgIGJhdHRlcnkgPSByZXNwQmF0dGVyeTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGV2aWNlU24oKVxyXG4gICAgICAgIH0pLnRoZW4oIHJlc3BTbiA9PiB7XHJcbiAgICAgICAgICAgIHNlcmlhbE51bSA9IHJlc3BTbjtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoWyBiYXR0ZXJ5LCBzZXJpYWxOdW0gXSlcclxuICAgICAgICB9KS5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikgKVxyXG4gICAgfSk7XHJcblxyXG4gICAgZ2V0RGV2aWNlSW5mbyA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiAoIXRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSA/XHJcbiAgICAgICAgcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGRldmljZU5vdE9wZW4pICkgXHJcbiAgICAgICAgOiB0aGlzLmdhdGhlckRldmljZUluZm8oKVxyXG4gICAgICAgICAgICAudGhlbihcclxuICAgICAgICAgICAgICAgIGRldmljZUluZm8gPT4gcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlTmFtZTogdGhpcy5kZXZpY2UubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBiYXR0ZXJ5TGV2ZWw6IGRldmljZUluZm9bMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyOiBkZXZpY2VJbmZvWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQ29ubmVjdGVkOiB0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKS5jYXRjaChlcnIgPT4gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikgKSlcclxuICAgICk7XHJcblxyXG4gICAgc2VuZFVzZXJTZWxlY3Rpb24gPSBzZWxlY3Rpb25SZXN1bHQgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gKCF0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCkgPyBcclxuICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90T3BlbikgKSBcclxuICAgICAgICA6IHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcChbMHg0OSwgMHgwOCwgMHgwMCwgMHgwMCwgMHgwMywgMHgwMiwgMHgwMCwgMHgwMiwgMHgwMCwgc2VsZWN0aW9uUmVzdWx0XSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbVXNlciBTZWxlY3Rpb24gUmVzcF06ICR7dGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhyZXNwKX1gKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJTZWxlY3Rpb25SZXNwb25zZTogKHRoaXMucmVzdWx0Q29kZXNbIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKCByZXNwLnNsaWNlKDQsIDYpICkgXHJcbiAgICAgICAgICAgICAgICAgICAgXSB8fCBcIlVua25vd24gb3IgdW5kb2N1bWVudGVkIHJlc3VsdCBjb2RlXCIpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihlcnIpICkpXHJcbiAgICApXHJcblxyXG4gICAgc2VuZEFycGMgPSBhcnBjUmVzcCA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZClcclxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihkZXZpY2VOb3RPcGVuKSApO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGFycGNSZXNwICE9PSAnc3RyaW5nJyAmJiB0eXBlb2YgYXJwY1Jlc3AgIT09ICdvYmplY3QnKVxyXG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKCB3cm9uZ0lucHV0VHlwZXMoWydzdHJpbmcnLCAnYXJyYXkgb2YgbnVtYmVycyddKSApICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZGF0YUxlbiA9ICh0eXBlb2YgYXJwY1Jlc3AgPT09ICdzdHJpbmcnKSA/IChhcnBjUmVzcC5sZW5ndGggLyAyKSA6IGFycGNSZXNwLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBpbnB1dERhdGEgPSAodHlwZW9mIGFycGNSZXNwID09PSAnb2JqZWN0JykgPyBhcnBjUmVzcCA6IHRoaXMuaGV4VG9CeXRlcyhhcnBjUmVzcCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFycGNDbWQgPSBbMHg0OSwgKGRhdGFMZW4gKyA2KSwgMHgwMCwgMHgwMCwgMHgwMywgMHgwMywgMHgwMCwgZGF0YUxlbiwgLi4uaW5wdXREYXRhIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AoYXJwY0NtZCkudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW1NlbmQgQVJQQyBSZXNwXTogJHt0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHJlc3ApfWApO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHRDb2RlID0gKHJlc3AubGVuZ3RoID4gNSkgPyB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKCByZXNwLnNsaWNlKDQsIDYpICkgOiBcIlwiO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgc2VuZEFycGNSZXNwb25zZTogKHRoaXMucmVzdWx0Q29kZXNbIHJlc3VsdENvZGUgXSB8fCBcIlVua25vd24gb3IgdW5kb2N1bWVudGVkIHJlc3VsdCBjb2RlXCIpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBcclxuXHJcbiAgICBjbGVhckdhdHRDYWNoZSA9ICgpID0+IHtcclxuICAgICAgICBpZiAod2luZG93KVxyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5vbkRlc3Ryb3lIYW5kbGVyKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLm1heEJsb2NrSWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbE5vdGlmaWNhdGlvbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yYXdEYXRhID0ge307XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YVJlYWRTdGF0dXNDaGFyYWN0ZXJpc3RpYyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kYXRhUmVhZHlDaGFyYWN0ZXJpc3RpYyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jb21tYW5kQ2hhcmFjdGVyaXN0aWMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2FyZERhdGFMaXN0ZW5lciA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgY2Vhc2VOb3RpZmljYXRpb25zID0gKCkgPT4gbmV3IFByb21pc2UoIHJlc29sdmUgPT4gKCF0aGlzLmNhcmREYXRhTGlzdGVuZXIpID8gcmVzb2x2ZSgpIDogdGhpcy5jYXJkRGF0YUxpc3RlbmVyLnN0b3BOb3RpZmljYXRpb25zKClcclxuICAgICAgICAudGhlbiggKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNhcmREYXRhTGlzdGVuZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhcmFjdGVyaXN0aWN2YWx1ZWNoYW5nZWQnLCB0aGlzLmNhcmREYXRhSGFuZGxlcik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFSZWFkU3RhdHVzQ2hhcmFjdGVyaXN0aWMuc3RvcE5vdGlmaWNhdGlvbnMoKVxyXG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFSZWFkeUNoYXJhY3RlcmlzdGljLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYXJhY3RlcmlzdGljdmFsdWVjaGFuZ2VkJywgdGhpcy5kYXRhUmVhZHlIYW5kbGVyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKVxyXG4gICAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIGNhbmNlbFRyYW5zYWN0aW9uID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+ICghdGhpcy5jb21tYW5kQ2hhcmFjdGVyaXN0aWMpID8gXHJcbiAgICAgICAgcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGNvbW1hbmROb3RTZW50KSlcclxuICAgICAgICA6XHJcbiAgICAgICAgdGhpcy5jb21tYW5kQ2hhcmFjdGVyaXN0aWMud3JpdGVWYWx1ZSh0aGlzLmNhbmNlbEVtdkNvbW1hbmQpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4gcmVzb2x2ZSgpKVxyXG4gICAgICAgIC5jYXRjaChlcnIgPT4gcmVqZWN0KHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSkpXHJcbiAgICApO1xyXG5cclxuICAgIGNsb3NlRGV2aWNlID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IFxyXG4gICAgICAgICghdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpID8gcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgIGNvZGU6IHN1Y2Nlc3NDb2RlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBjbG9zZVN1Y2Nlc3NcclxuICAgICAgICB9KSBcclxuICAgICAgICA6XHJcbiAgICAgICAgdGhpcy5jZWFzZU5vdGlmaWNhdGlvbnMoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckdhdHRDYWNoZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgfSkudGhlbigoKSA9PiByZXNvbHZlKHtcclxuICAgICAgICAgICAgY29kZTogc3VjY2Vzc0NvZGUsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGNsb3NlU3VjY2Vzc1xyXG4gICAgICAgIH0pKS5jYXRjaChlcnIgPT4gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikgKSlcclxuICAgICkgXHJcblxyXG4gICAgY2xlYXJTZXNzaW9uID0gKCkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gXHJcbiAgICAgICAgKHRoaXMuZGV2aWNlICYmIHRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSA/IFxyXG4gICAgICAgICAgICByZXNvbHZlKFwiU0NSQSBkZXZpY2VzIGRvIG5vdCBjYXJyeSBhIHNlc3Npb25cIikgXHJcbiAgICAgICAgICAgIDogcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGRldmljZU5vdE9wZW4pKSApXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNjcmE7IiwiaW1wb3J0IFNjcmEgZnJvbSAnLi9zY3JhJztcclxuaW1wb3J0IHsgXHJcbiAgICBzd2lwZUxpc3RlbmluZyxcclxuICAgIHN1Y2Nlc3NDb2RlLFxyXG4gICAgZUR5bmFtb1xyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XHJcblxyXG5jbGFzcyBFRHluYW1vIGV4dGVuZHMgU2NyYSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIGNhbGxCYWNrcykge1xyXG4gICAgICAgIHN1cGVyKGRldmljZSwgY2FsbEJhY2tzKTtcclxuXHJcbiAgICAgICAgdGhpcy5kZXZpY2VUeXBlID0gZUR5bmFtbztcclxuICAgIH1cclxuXHJcbiAgICBnZXRDYXJkU2VydmljZSA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiBcclxuICAgICAgICB0aGlzLmdldENhcmRTZXJ2aWNlQmFzZSgxKVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4gcmVzb2x2ZShyZXNwKVxyXG4gICAgICAgICkuY2F0Y2goIGVyciA9PiByZWplY3QodGhpcy5idWlsZERldmljZUVycihlcnIpKSApXHJcbiAgICApO1xyXG5cclxuICAgIHJlcXVlc3RDYXJkU3dpcGUgPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gXHJcbiAgICAgICAgKCF0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCkgPyBcclxuICAgICAgICAgICAgdGhpcy5nZXRDYXJkU2VydmljZUJhc2UoMSlcclxuICAgICAgICAgICAgLnRoZW4oICgpID0+IFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IHN1Y2Nlc3NDb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHN3aXBlTGlzdGVuaW5nXHJcbiAgICAgICAgICAgICAgICB9KSBcclxuICAgICAgICAgICAgKS5jYXRjaChlcnIgPT4gcmVqZWN0KHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSApKVxyXG4gICAgICAgIDogcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgIGNvZGU6IHN1Y2Nlc3NDb2RlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBzd2lwZUxpc3RlbmluZ1xyXG4gICAgICAgIH0pIFxyXG4gICAgKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRUR5bmFtbzsiLCJpbXBvcnQgU2NyYSBmcm9tICcuL3NjcmEnO1xyXG5pbXBvcnQgeyBcclxuICAgIHN3aXBlTGlzdGVuaW5nLFxyXG4gICAgc3VjY2Vzc0NvZGUsXHJcbiAgICB0RHluYW1vXHJcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuaW1wb3J0IHsgY29tbWFuZE5vdEFjY2VwdGVkIH0gZnJvbSAnLi4vZXJyb3JIYW5kbGVyL2VyckNvbnN0YW50cyc7XHJcblxyXG5jbGFzcyBURHluYW1vIGV4dGVuZHMgU2NyYSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIGNhbGxCYWNrcykge1xyXG4gICAgICAgIHN1cGVyKGRldmljZSwgY2FsbEJhY2tzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRIZWFkQWx3YXlzT24gPSBbMHg1OCwgMHgwMSwgMHgwMV07XHJcbiAgICAgICAgLy90aGlzLnNldEhlYWRPZmZXaGVuSWRsZSA9IFVpbnQ4QXJyYXkub2YoMHg1OCwgMHgwMSwgMHgwMCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGV2aWNlVHlwZSA9IHREeW5hbW9cclxuICAgIH1cclxuXHJcbiAgICBnZXRDYXJkU2VydmljZSA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiBcclxuICAgICAgICB0aGlzLmdldENhcmRTZXJ2aWNlQmFzZSgpXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiByZXNvbHZlKHJlc3ApXHJcbiAgICAgICAgKS5jYXRjaCggZXJyID0+IHJlamVjdCh0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikpIClcclxuICAgICk7XHJcblxyXG4gICAgcmVxdWVzdENhcmRTd2lwZSA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiAoIXRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSA/XHJcbiAgICAgICAgdGhpcy5nZXRDYXJkU2VydmljZUJhc2UoKVxyXG4gICAgICAgIC50aGVuKCgpID0+IFxyXG4gICAgICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AodGhpcy5zZXRIZWFkQWx3YXlzT24pXHJcbiAgICAgICAgKS50aGVuKHNldEhlYWRPcGVuUmVzcCA9PiAocGFyc2VJbnQoc2V0SGVhZE9wZW5SZXNwKSA9PT0gMCkgPyBcclxuICAgICAgICAgICAgcmVzb2x2ZSh7IFxyXG4gICAgICAgICAgICAgICAgY29kZTogc3VjY2Vzc0NvZGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBzd2lwZUxpc3RlbmluZ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICA6XHJcbiAgICAgICAgICAgIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihjb21tYW5kTm90QWNjZXB0ZWQpIClcclxuICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QoZXJyKSlcclxuICAgICAgICA6XHJcbiAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKHRoaXMuc2V0SGVhZEFsd2F5c09uKVxyXG4gICAgICAgIC50aGVuKHNldEhlYWRPcGVuUmVzcCA9PiAocGFyc2VJbnQoc2V0SGVhZE9wZW5SZXNwKSA9PT0gMCkgPyBcclxuICAgICAgICAgICAgcmVzb2x2ZSh7IFxyXG4gICAgICAgICAgICAgICAgY29kZTogc3VjY2Vzc0NvZGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBzd2lwZUxpc3RlbmluZ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICA6XHJcbiAgICAgICAgICAgIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihjb21tYW5kTm90QWNjZXB0ZWQpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QoZXJyKSlcclxuICAgICk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFREeW5hbW87IiwiaW1wb3J0IERwTWluaSBmcm9tICcuLi9kZXZpY2VzL2R5bmFQcm9NaW5pJztcclxuaW1wb3J0IER5blByb0dvIGZyb20gJy4uL2RldmljZXMvZHluYVByb0dvJztcclxuaW1wb3J0IEVEeW5hbW8gZnJvbSAnLi4vZGV2aWNlcy9lRHluYW1vJztcclxuaW1wb3J0IFREeW5hbW8gZnJvbSAnLi4vZGV2aWNlcy90RHluYW1vJztcclxuaW1wb3J0IHsgXHJcbiAgICB0RHluYW1vLFxyXG4gICAgZUR5bmFtbyxcclxuICAgIGR5bmFQcm9HbyxcclxuICAgIGRwTWluaSBcclxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnOyBcclxuXHJcbmNvbnN0IGNvbW1hbmROb3RVc2VkID0gaXNTY3JhID0+IFxyXG4gICAgKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGAkeyhpc1NjcmEgPyAnU0NSQScgOiAnUGluUGFkJyl9IGRldmljZXMgZG8gbm90IHVzZSB0aGlzIGNvbW1hbmRgKTtcclxuXHJcbiAgICBcclxuY2xhc3MgRGV2aWNlSW50ZXJmYWNlIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgXHJcbiAgICAgICAgZ2V0Q2FyZFNlcnZpY2UsXHJcbiAgICAgICAgc3RhcnRUcmFuc2FjdGlvbixcclxuICAgICAgICBjYW5jZWxUcmFuc2FjdGlvbixcclxuICAgICAgICBzZW5kQ29tbWFuZFdpdGhSZXNwLFxyXG4gICAgICAgIGNsZWFyU2Vzc2lvbixcclxuICAgICAgICBjbG9zZURldmljZSxcclxuICAgICAgICBnZXREZXZpY2VJbmZvLFxyXG4gICAgICAgIHJlcXVlc3RDYXJkU3dpcGUsXHJcbiAgICAgICAgaXNEZXZpY2VDb25uZWN0ZWQsXHJcbiAgICAgICAgZGlzY29ubmVjdCxcclxuICAgICAgICByZXF1ZXN0UGluRW50cnksXHJcbiAgICAgICAgc2V0RGlzcGxheU1lc3NhZ2UsXHJcbiAgICAgICAgc2VuZFVzZXJTZWxlY3Rpb24sXHJcbiAgICAgICAgc2VuZEFycGNcclxuICAgIH0pIHtcclxuICAgICAgICB0aGlzLm9wZW5EZXZpY2UgPSBnZXRDYXJkU2VydmljZTtcclxuICAgICAgICB0aGlzLnN0YXJ0VHJhbnNhY3Rpb24gPSBzdGFydFRyYW5zYWN0aW9uO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsVHJhbnNhY3Rpb24gPSBjYW5jZWxUcmFuc2FjdGlvbjtcclxuICAgICAgICB0aGlzLnNlbmRDb21tYW5kID0gc2VuZENvbW1hbmRXaXRoUmVzcDtcclxuICAgICAgICB0aGlzLmNsZWFyU2Vzc2lvbiA9IGNsZWFyU2Vzc2lvbjtcclxuICAgICAgICB0aGlzLmNsb3NlRGV2aWNlID0gY2xvc2VEZXZpY2U7XHJcbiAgICAgICAgdGhpcy5kZXZpY2VJbmZvID0gZ2V0RGV2aWNlSW5mbztcclxuICAgICAgICB0aGlzLnJlcXVlc3RDYXJkU3dpcGUgPSByZXF1ZXN0Q2FyZFN3aXBlO1xyXG4gICAgICAgIHRoaXMuaXNEZXZpY2VPcGVuID0gaXNEZXZpY2VDb25uZWN0ZWQ7XHJcbiAgICAgICAgdGhpcy5mb3JjZURpc2Nvbm5lY3QgPSBkaXNjb25uZWN0O1xyXG4gICAgICAgIHRoaXMucmVxdWVzdFBpbkVudHJ5ID0gKHJlcXVlc3RQaW5FbnRyeSkgPyByZXF1ZXN0UGluRW50cnkgOiBjb21tYW5kTm90VXNlZCh0cnVlKTtcclxuICAgICAgICB0aGlzLnNldERpc3BsYXlNZXNzYWdlID0gKHNldERpc3BsYXlNZXNzYWdlKSA/IHNldERpc3BsYXlNZXNzYWdlIDogY29tbWFuZE5vdFVzZWQodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5zZW5kVXNlclNlbGVjdGlvbiA9IChzZW5kVXNlclNlbGVjdGlvbikgPyBzZW5kVXNlclNlbGVjdGlvbiA6IGNvbW1hbmROb3RVc2VkKCk7XHJcbiAgICAgICAgdGhpcy5zZW5kQXJwY1Jlc3BvbnNlID0gKHNlbmRBcnBjKSA/IHNlbmRBcnBjIDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKFwiRmVhdHVyZSBQZW5kaW5nIENvbXBsZXRpb25cIik7XHJcbiAgICB9XHJcbn07XHJcblxyXG5jb25zdCBuZXdEZXZpY2VJbnN0YW5jZSA9IHtcclxuICAgIFtlRHluYW1vXTogKGRldmljZSwgY2FsbGJhY2tzKSA9PiBuZXcgRUR5bmFtbyhkZXZpY2UsIGNhbGxiYWNrcyksXHJcbiAgICBbdER5bmFtb106ICAoZGV2aWNlLCBjYWxsYmFja3MpID0+IG5ldyBURHluYW1vKGRldmljZSwgY2FsbGJhY2tzKSxcclxuICAgIFtkeW5hUHJvR29dOiAoZGV2aWNlLCBjYWxsYmFja3MpID0+IG5ldyBEeW5Qcm9HbyhkZXZpY2UsIGNhbGxiYWNrcyksXHJcbiAgICBbZHBNaW5pXTogKGRldmljZSwgY2FsbGJhY2tzKSA9PiBuZXcgRHBNaW5pKGRldmljZSwgY2FsbGJhY2tzKSxcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGJ1aWxkRGV2aWNlT2JqZWN0ID0gKGRldmljZSwgY2FsbGJhY2tzLCBkZXZpY2VUeXBlU3RyaW5nKSA9PiAoe1xyXG4gICAgaWQ6IGRldmljZS5pZCxcclxuICAgIG5hbWU6IGRldmljZS5uYW1lLFxyXG4gICAgZGV2aWNlVHlwZTogZGV2aWNlVHlwZVN0cmluZyxcclxuICAgIGRldmljZUludGVyZmFjZTogbmV3IERldmljZUludGVyZmFjZShcclxuICAgICAgICBuZXdEZXZpY2VJbnN0YW5jZVsgZGV2aWNlVHlwZVN0cmluZyBdKGRldmljZSwgY2FsbGJhY2tzKVxyXG4gICAgKVxyXG59KTtcclxuXHJcbiIsImltcG9ydCB7XHJcbiAgICB0RHluYW1vLFxyXG4gICAgZUR5bmFtbyxcclxuICAgIGR5bmFQcm9HbyxcclxuICAgIGRwTWluaVxyXG59IGZyb20gJy4vY29uc3RhbnRzJztcclxuaW1wb3J0IHsgbm90Rm91bmRPYmogfSBmcm9tICcuLi9lcnJvckhhbmRsZXIvZXJyQ29uc3RhbnRzJztcclxuXHJcbmNvbnN0IGVEeW5hbW9QYXR0ZXJuID0gbmV3IFJlZ0V4cCgvXmVEeW5hbW8tLyk7XHJcbmNvbnN0IHREeW5hbW9QYXR0ZXJuID0gbmV3IFJlZ0V4cCgvXnREeW5hbW8tLyk7XHJcbmNvbnN0IGRwTWluaVBhdHRlcm4gPSBuZXcgUmVnRXhwKC9eRFBNaW5pLyk7XHJcbmNvbnN0IGRwR29QYXR0ZXJuID0gbmV3IFJlZ0V4cCgvXkRQRy8pO1xyXG5cclxuXHJcbmNvbnN0IGluc3BlY3REZXZpY2VOYW1lID0gZGV2aWNlTmFtZSA9PiAodER5bmFtb1BhdHRlcm4udGVzdChkZXZpY2VOYW1lKSkgPyB0RHluYW1vIDogXHJcbiAgICAoZUR5bmFtb1BhdHRlcm4udGVzdChkZXZpY2VOYW1lKSkgPyBlRHluYW1vIDogXHJcbiAgICAgICAgKGRwR29QYXR0ZXJuLnRlc3QoZGV2aWNlTmFtZSkpID8gZHluYVByb0dvIDogXHJcbiAgICAgICAgICAgIChkcE1pbmlQYXR0ZXJuLnRlc3QoZGV2aWNlTmFtZSkpID8gZHBNaW5pIDogXCJcIjtcclxuXHJcbmNvbnN0IGZvcm1hdFR5cGVTdHJpbmcgPSBkZXZpY2VUeXBlU3RyID0+IHtcclxuICAgIGNvbnN0IGRldmljZVR5cGVBcnIgPSBbZHluYVByb0dvLCBkcE1pbmksIGVEeW5hbW8sIHREeW5hbW9dO1xyXG4gICAgbGV0IHJldHVyblN0ciA9IFwiXCI7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXZpY2VUeXBlQXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGRldmljZVR5cGVTdHIudG9Mb3dlckNhc2UoKSA9PT0gZGV2aWNlVHlwZUFycltpXS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVyblN0ciA9IGRldmljZVR5cGVBcnJbaV07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmV0dXJuU3RyO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZmluZERldmljZVR5cGVTdHJpbmcgPSAobmFtZVN0ciwgdHlwZVN0cikgPT4ge1xyXG4gICAgaWYgKHR5cGVTdHIpIHtcclxuICAgICAgICBjb25zdCBmb3JtYXR0ZWRTdHIgPSBmb3JtYXRUeXBlU3RyaW5nKHR5cGVTdHIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiWyEhXTogXCIsIGZvcm1hdHRlZFN0cik7XHJcblxyXG4gICAgICAgIGlmIChmb3JtYXR0ZWRTdHIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFN0cjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGluc3BlY3REZXZpY2VOYW1lKG5hbWVTdHIpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmaW5kRGV2aWNlQnlQcm9kdWN0TmFtZSA9IHNlbGVjdGVkRGV2aWNlID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBsZXQgbW9kZWxOYW1lU3RyaW5nO1xyXG5cclxuICAgIHJldHVybiBzZWxlY3RlZERldmljZS5nYXR0LmNvbm5lY3QoKVxyXG4gICAgLnRoZW4oc2VydmVyID0+IHNlcnZlci5nZXRQcmltYXJ5U2VydmljZSgnZGV2aWNlX2luZm9ybWF0aW9uJylcclxuICAgICkudGhlbihzZXJ2aWNlID0+IHNlcnZpY2UuZ2V0Q2hhcmFjdGVyaXN0aWMoJ21vZGVsX251bWJlcl9zdHJpbmcnKVxyXG4gICAgKS50aGVuKGNoYXJhY3RlcmlzdGljID0+IGNoYXJhY3RlcmlzdGljLnJlYWRWYWx1ZSgpXHJcbiAgICApLnRoZW4odmFsdWUgPT4ge1xyXG4gICAgICAgIG1vZGVsTmFtZVN0cmluZyA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKS5kZWNvZGUodmFsdWUpLnRyaW0oKTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCBzZWxlY3RlZERldmljZS5nYXR0LmRpc2Nvbm5lY3QoKSApO1xyXG4gICAgfSkudGhlbiggKCkgPT4gcmVzb2x2ZSggbW9kZWxOYW1lU3RyaW5nIClcclxuICAgICkuY2F0Y2goZXJyID0+IChcclxuICAgICAgICAgICAgZXJyLmNvZGUgPT09IG5vdEZvdW5kT2JqLmVycm9yQ29kZSAmJiBcclxuICAgICAgICAgICAgZXJyLm5hbWUgPT09IG5vdEZvdW5kT2JqLmVycm9yTmFtZSAmJiBcclxuICAgICAgICAgICAgZXJyLm1lc3NhZ2UuaW5jbHVkZXMoXCIwMDAwMTgwYS0wMDAwLTEwMDAtODAwMC0wMDgwNWY5YjM0ZmJcIilcclxuICAgICAgICApID8gKCFzZWxlY3RlZERldmljZS5nYXR0LmNvbm5lY3RlZCkgPyByZXNvbHZlKCBkeW5hUHJvR28gKSBcclxuICAgICAgICAgICAgOiBQcm9taXNlLnJlc29sdmUoIHNlbGVjdGVkRGV2aWNlLmdhdHQuZGlzY29ubmVjdCgpICkudGhlbigoKSA9PiByZXNvbHZlKCBkeW5hUHJvR28gKSlcclxuICAgICAgICA6IHJlamVjdChlcnIpXHJcbiAgICApO1xyXG59KTtcclxuIiwiaW1wb3J0IEFwaUVycm9yIGZyb20gJy4vZXJyb3JIYW5kbGVyL2FwaUVycm9yJztcclxuaW1wb3J0IHsgYWxsRGV2aWNlQ29uZmlnLCBmaW5kRGV2aWNlQnlEZXZpY2VOYW1lIH0gZnJvbSAnLi9jb25maWd1cmF0aW9ucyc7XHJcbmltcG9ydCB7IGJ1aWxkRGV2aWNlT2JqZWN0IH0gZnJvbSAnLi91dGlscy9pbnN0YW5jaWF0ZURldmljZSc7XHJcbmltcG9ydCB7IGZpbmREZXZpY2VUeXBlU3RyaW5nLCBmaW5kRGV2aWNlQnlQcm9kdWN0TmFtZSB9IGZyb20gJy4vdXRpbHMvaWRlbnRpZnlEZXZpY2UnO1xyXG5cclxuXHJcbmNvbnN0IGFycmFuZ2VDYWxsYmFja3MgPSBjYWxsQmFja3MgPT4ge1xyXG5cclxuICAgIGNvbnN0IGRlZmF1bHRDYWxsYmFjayA9IGRhdGFPYmogPT4ge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcIkNhbGxiYWNrIG5vdCBwcm92aWRlZCB0byAnc2NhbkZvckRldmljZXMnIGZ1bmN0aW9uLiBQbGVhc2UgcHJvdmlkZSBhdCBsZWFzdCBvbmUgY2FsbGJhY2sgZnVuY3Rpb24gdG8gdGhpcyBtZXRob2RcIik7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ0cmFuc2FjdGlvbkNhbGxiYWNrIGRhdGE6IFwiLCBkYXRhT2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBjYWxsQmFja3MgPSBjYWxsQmFja3MgfHwgZGVmYXVsdENhbGxiYWNrO1xyXG4gICAgXHJcbiAgICBjb25zdCBpc0Z1bmNUeXBlID0gKHR5cGVvZiBjYWxsQmFja3MgPT09ICdmdW5jdGlvbicpO1xyXG5cclxuICAgIGNvbnN0IHByb3BBc3NpZ25tZW50ID0gcHJvcE5hbWUgPT4gKGNhbGxCYWNrc1twcm9wTmFtZV0pID8gY2FsbEJhY2tzW3Byb3BOYW1lXSA6IFxyXG4gICAgICAgIChpc0Z1bmNUeXBlKSA/IGNhbGxCYWNrcyA6IGNhbGxCYWNrcy50cmFuc2FjdGlvbkNhbGxiYWNrO1xyXG5cclxuICAgIGNvbnN0IGRlZmF1bHRFcnJDYWxsYmFjayA9IGVyck9iaiA9PiBcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiW01hZ2Vuc2FCbHVldG9vdGggSW50ZXJuYWwgRXJyb3JdOiBcIiwgZXJyT2JqKTtcclxuXHJcbiAgICBjYWxsQmFja3MuZXJyb3JDYWxsYmFjayA9IChjYWxsQmFja3MuZXJyb3JDYWxsYmFjayB8fCBkZWZhdWx0RXJyQ2FsbGJhY2spO1xyXG4gICAgY2FsbEJhY2tzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2sgPSAoIGNhbGxCYWNrcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrIHx8IHByb3BBc3NpZ25tZW50KCd0cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrJykgKTtcclxuICAgIGNhbGxCYWNrcy51c2VyU2VsZWN0aW9uQ2FsbGJhY2sgPSAoIGNhbGxCYWNrcy51c2VyU2VsZWN0aW9uQ2FsbGJhY2sgfHwgcHJvcEFzc2lnbm1lbnQoJ3VzZXJTZWxlY3Rpb25DYWxsYmFjaycpICk7XHJcbiAgICBjYWxsQmFja3MuZGlzcGxheUNhbGxiYWNrID0gKCBjYWxsQmFja3MuZGlzcGxheUNhbGxiYWNrIHx8IHByb3BBc3NpZ25tZW50KCdkaXNwbGF5Q2FsbGJhY2snKSApO1xyXG4gICAgY2FsbEJhY2tzLmRpc2Nvbm5lY3RIYW5kbGVyID0gKGNhbGxCYWNrcy5kaXNjb25uZWN0SGFuZGxlciB8fCBwcm9wQXNzaWdubWVudCgndHJhbnNhY3Rpb25DYWxsYmFjaycpICk7XHJcblxyXG4gICAgcmV0dXJuIGNhbGxCYWNrcztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNjYW5Gb3JEZXZpY2VzID0gKGNhbGxCYWNrcywgZGV2aWNlTmFtZSwgZGV2aWNlVHlwZSkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGlmICh0eXBlb2YgY2FsbEJhY2tzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgY2FsbEJhY2tzLnRyYW5zYWN0aW9uQ2FsbGJhY2sgPT09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgIHJldHVybiByZWplY3QoXCJXaGVuIHByb3ZpZGluZyBtdWx0aXBsZSBjYWxsYmFja3MgaW4gYW4gb2JqZWN0LCAndHJhbnNhY3Rpb25DYWxsYmFjaycgbXVzdCBiZSBwcm92aWRlZFwiKTtcclxuXHJcbiAgICBjYWxsQmFja3MgPSBhcnJhbmdlQ2FsbGJhY2tzKGNhbGxCYWNrcyk7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IChkZXZpY2VOYW1lKSA/IGZpbmREZXZpY2VCeURldmljZU5hbWUoZGV2aWNlTmFtZSkgOiBhbGxEZXZpY2VDb25maWc7XHJcbiAgICBcclxuICAgIHJldHVybiBuYXZpZ2F0b3IuYmx1ZXRvb3RoLnJlcXVlc3REZXZpY2UoIG9wdGlvbnMgKVxyXG4gICAgICAgIC50aGVuKGRldmljZSA9PiB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkZXZpY2VUeXBlTmFtZSA9IGZpbmREZXZpY2VUeXBlU3RyaW5nKGRldmljZS5uYW1lLCBkZXZpY2VUeXBlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoZGV2aWNlVHlwZU5hbWUpID8gcmVzb2x2ZSggYnVpbGREZXZpY2VPYmplY3QoZGV2aWNlLCBjYWxsQmFja3MsIGRldmljZVR5cGVOYW1lKSApIDpcclxuICAgICAgICAgICAgICAgIGZpbmREZXZpY2VCeVByb2R1Y3ROYW1lKGRldmljZSkudGhlbiggXHJcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlVHlwZVN0cmluZyA9PiAoIWRldmljZVR5cGVTdHJpbmcpID8gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChcIlNlbGVjdGVkIGRldmljZSBpcyBub3Qgc3VwcG9ydGVkXCIpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlc29sdmUoIGJ1aWxkRGV2aWNlT2JqZWN0KGRldmljZSwgY2FsbEJhY2tzLCBkZXZpY2VUeXBlU3RyaW5nKSApXHJcbiAgICAgICAgICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QoZXJyKSk7XHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+ICh0eXBlb2YgZXJyID09PSBcIm9iamVjdFwiKSA/IFxyXG4gICAgICAgICAgICByZWplY3QoIG5ldyBBcGlFcnJvcihlcnIpICkgOiBcclxuICAgICAgICAgICAgcmVqZWN0KFwiU2VsZWN0ZWQgZGV2aWNlIGlzIG5vdCBzdXBwb3J0ZWRcIilcclxuICAgICAgICApXHJcbn0pO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9