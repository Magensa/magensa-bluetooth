!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["magensa-bluetooth"]=t():e["magensa-bluetooth"]=t()}(window,(function(){return function(e){var t={};function i(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t),i.d(t,"scanForDevices",(function(){return fe}));class a extends Error{constructor(e){let{message:t,code:i,name:a}=e;super(t||"Web Bluetooth API threw an unknown, or undocumented error"),this.code=i||1e3,this.name=a||"WebBluetoothError"}}var s=a;const r={filters:[{services:["0508e6f8-ad82-898f-f843-e3410cb60104"]},{services:["0508e6f8-ad82-898f-f843-e3410cb60101"]},{services:["0508e6f8-ad82-898f-f843-e3410cb60103"]}],optionalServices:["0508e6f8-ad82-898f-f843-e3410cb60104","0508e6f8-ad82-898f-f843-e3410cb60103","0508e6f8-ad82-898f-f843-e3410cb60101","0508e6f8-ad82-898f-f843-e3410cb60202","device_information"],keepRepeatedDevices:!1,acceptAllAdvertisements:!1};function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o=class{constructor(){n(this,"logDeviceState",e=>{let t=new CustomEvent("deviceLog",{bubbles:!0,detail:e});window.dispatchEvent(t)}),n(this,"convertArrayToHexString",e=>Array.from(e,e=>("0"+(255&e).toString(16)).slice(-2)).join("").toUpperCase()),n(this,"readTwoByteLength",e=>e[0]<<8|e[1]),n(this,"bufferToUtf8",e=>new TextDecoder("utf-8").decode(Uint8Array.from(e))),n(this,"castDecToHex",e=>parseInt(e.toString(16),16)),n(this,"newArrayPartial",(e,t)=>new Array(t).fill(e)),n(this,"readByteArray",e=>{let t=[];for(let i=0;i<e.byteLength;i++)t.push(e.getUint8(i));return t}),n(this,"hexToAscii",e=>{let t="";for(let i=0;i<e.length&&"00"!==e.substr(i,2);i+=2)t+=String.fromCharCode(parseInt(e.substr(i,2),16));return t.trim()}),n(this,"hexToBytes",e=>{let t=[];for(let i=0;i<e.length;i+=2)t.push(parseInt(e.substr(i,2),16));return t}),n(this,"decodeRLE",e=>{let t=[e[0]],i=0,a=e.length;for(let s=1;s<a;s++)i=s+1,i+1<a&&e[s]===e[i]?(t.push(...this.newArrayPartial(e[s],e[i+1])),s=i+1):t.push(e[s]);return t}),n(this,"buildInitialDataArray",e=>{let t=[];for(let e=Math.min(...Object.keys(this.rawData));e<this.maxBlockId;e++)t=t.concat(...this.rawData[e]);return e?this.checkRle(t):t}),n(this,"checkRle",e=>this.rleFormats[this.initialNotification[0]]?this.decodeRLE(e):e),n(this,"convertCurrencyCode",e=>{let t=e.toLowerCase();return"us"===t?[8,64]:"euro"===t?[9,120]:[0,0]}),n(this,"convertNumToAmount",e=>{let t=e.toString(),i=[];for(;t.length<12;)t="0"+t;for(let e=0;e<t.length;e+=2)i.push(parseInt(t.substr(e,2),16));return i}),n(this,"delayPromise",(e,t)=>new Promise(i=>{setTimeout(i,e,t)})),this.rleFormats=Object.freeze({0:!1,1:!0,2:!1,3:!0})}};function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var h=class extends o{constructor(){super(),c(this,"formatExpPAN",e=>{let t="object"==typeof e?this.bufferToUtf8(e.slice(4)):e;if(-1!==t.indexOf(";")){let e=this.splitExpPAN(t);return{maskedPAN:e[0],Last4:e[1],expirationDate:e[2],serviceCode:e[3]}}return{maskedPAN:"",Last4:"",expirationDate:"",serviceCode:""}}),c(this,"splitExpPAN",e=>{if(e.length>3){let t=e.replace(";","").replace("?","").split("="),i=t[1].slice(0,4),a=t[1].slice(4,7),s=i.slice(-2)+"/"+i.slice(0,2);return[t[0],t[0].slice(-4),s,a]}return["Not Found","Not Found","Not Found","Not Found"]})}};const d="Success, listening for swipe",l="DynaPro Mini",u="Configuration",m=Object.freeze({code:0,message:"Success, there was no session to clear"}),v=Object.freeze({code:19,message:"GATT operation already in progress."}),p=Object.freeze({code:0,message:"Device Closed"}),g=Object.freeze({eDynamo:3,tDynamo:7,[l]:3,dynaProGo:7}),C=Object.freeze({msr:1,chip:2,chipmsr:3,contactless:4,contactlessmsr:5,contactlesschip:6,all:7});function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var b=class extends h{constructor(){super(),f(this,"tlvParser",(e,t)=>{let i,a,s,r=e.length,n=[],o=0,c=!0,h=null,d=[];for(;o<r;)if(a=e[o],c){i=0;let t=!0;if(0===a)break;for(;t&&o<r;)a=e[o],o++,d[i]=a,t=0===i?(a&this.moreTagBytesFlag1)==this.moreTagBytesFlag1:(a&this.moreTagBytesFlag2)==this.moreTagBytesFlag2,i++;h=this.convertArrayToHexString(d.slice(0,i)),c=!1}else{if(s=0,(a&this.moreLengthFlag)==this.moreLengthFlag){let t=a&this.oneByteLengthMask;o++;let i=0;for(;i<t&&o<r;)a=e[o],o++,s=((255&s)<<8)+a,i++}else s=a&this.oneByteLengthMask,o++;if(h){let i=d[0],a=(o+s>r?r:o+s)-o,c=a>0?this.convertArrayToHexString(e.slice(o,o+a)):"";n.push({tag:h,tagLength:s||c.length+.5,tagValue:this.hexOrAsciiFormatter(h,c,t)}),(i&this.constructedFlag)!=this.constructedFlag&&(o+=s)}c=!0}return n}),f(this,"hexOrAsciiFormatter",(e,t,i)=>{switch(e){case"DFDF1A":return`${t} ${this.trxStatusToString[parseInt(t,16)]}`;case"DFDF4D":case"5F20":return this.hexToAscii(t);case"DFDF25":return i?this.hexToAscii(t?t.substring(0,14):t):t;case"DFDF40":return 128===t?`${t}  CBC-MAC checked in ARQC online response`:1===t;default:return t}}),this.moreTagBytesFlag1=31,this.moreTagBytesFlag2=128,this.constructedFlag=32,this.moreLengthFlag=128,this.oneByteLengthMask=127,this.trxStatusToString=Object.freeze({0:"Approved",1:"Declined",2:"Error",16:"Cancelled By Host",17:"Confirm Amount No",18:"Confirm Amount Timeout",19:"Confirm Amount Cancel",20:"MSR Select Debit",21:"MSR Select Debit",22:"MSR Select Credit/Debit timout",23:"MSR Select Credit/Debit cancel",24:"Signature Capture Cancelled by Host (SC-S Only | SC-F only)",25:"Signature Capture Timeout (SC-S Only | SC-F Only)",26:"Signature Capture Cancelled by Cardholder (SC-S Only | SC-F Only)",27:"PIN Entry Cancelled by Host",28:"PIN entry timeout",29:"PIN entry Cancelled by Cardholder",30:"Manual Selected Cancelled by Host",31:"Manual Selection Timeout",32:"Manual Selction Cancelled by Cardholder",33:"Waiting for Card Cancelled by Host",34:"Waiting for Card Timeout",35:"Cancelled by Card Swipe (MSR) [SCRA] || Waiting for Card Cancelled by Cardholder [PIN]",36:"Waiting for Card ICC Seated",37:"Waiting for Card MSR Swiped",255:"Unknown Transaction Status"})}};class D extends Error{constructor(){super("Device communication error. Length does not match data"),this.name="BleTransmissionError",this.code=1012}}var S=D;class y extends Error{constructor(e){let{code:t,name:i,message:a}=e;super(a),this.name=i||"DeviceError",this.code=t||1e3}}var T=y;function w(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var k=class extends b{constructor(e){super(),w(this,"buildDeviceErr",e=>e instanceof DOMException?new s(e):e instanceof Error?e:new T(e)),w(this,"throwLenErr",()=>new S),w(this,"sendErrToCallback",e=>(this.errorCallback(e),e)),this.errorCallback=e.errorCallback}};const A=Object.freeze({errorCode:8,errorName:"NotFoundError"}),P=Object.freeze({code:19,name:"NetworkError"}),E=Object.freeze({code:1002,name:"DeviceNotFound",message:"Please select device to connect"}),R=Object.freeze({code:1003,name:"GattServerNotConnected",message:"Please connect desired device"}),I=Object.freeze({code:1004,name:"CommandNotSent",message:"Command characteristic not found, device not opened"}),B=Object.freeze({code:1005,name:"CommandNotSent",message:"Device not opened"}),O=Object.freeze({code:1006,name:"CommandNotSent",message:"Application From Host not found.  Device not connected"}),N=Object.freeze({code:1007,name:"ReadFailed",message:"Unable to read data from device. Communication error"}),x=Object.freeze({code:1008,name:"ResponseNotReceived",message:"Command was sent, but response was not received from device"}),L=Object.freeze({code:1009,name:"GetServiceFail",message:"Failed to retrieve primary GATT service. Please connect device"}),M=Object.freeze({code:1013,name:"CommandNotAccepted",message:"Device did not accept command"});function H(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var j=class extends k{constructor(e,t){super(t),H(this,"cardTypes",e=>"all"!==e?C[e]||3:g[this.deviceType]||3),H(this,"connect",()=>new Promise((e,t)=>(this.logDeviceState(`[GATT]: Device Connection Request || ${new Date}`),this.device?this.device.gatt.connect().then(t=>(this.logDeviceState(`[GATT]: Device connected - GATT Server retrieved successfully || ${new Date}`),this.gattServer=t,e())):t(this.buildDeviceErr(E))))),H(this,"disconnect",()=>new Promise(e=>this.device.gatt.connected?(this.device.gatt.disconnect(),e(p)):e(p))),H(this,"cacheCardServiceBase",e=>new Promise((t,i)=>(e=e||0,this.logDeviceState(`[GATT]: Cache Card Service Request || ${new Date}`),this.gattServer?this.findPrimaryService(e).then(e=>t(e)).catch(e=>i(e)):i(this.buildDeviceErr(R))))),H(this,"findPrimaryService",e=>new Promise((t,i)=>this.gattServer.getPrimaryService(this.deviceUUIDs[e]).then(e=>(this.cardService=e,this.logDeviceState(`[GATT]: Success! GATT Card Service retrieved and cached || ${new Date}`),this.device.addEventListener("gattserverdisconnected",this.disconnectHandler),t(e))).catch(a=>a.code===A.errorCode&&a.name===A.errorName?(this.deviceUUIDs[e+1],this.logDeviceState(`[ERROR]: Failed to connect. UUID: ${this.deviceUUIDs[e]} is not valid for this device. Trying again with UUID: ${this.deviceUUIDs[e+1]} || ${new Date}`),t(this.findPrimaryService(e+1))):(this.logDeviceState(`[ERROR]: Failed to retrieve Card Service - UUID: ${this.deviceUUIDs[e]} is not valid for this device. || ${new Date}`),i(a))))),H(this,"connectAndCache",e=>new Promise((t,i)=>{let a=t=>new Promise((i,s)=>t<4?this.connect().then(()=>this.cacheCardServiceBase(e)).then(e=>i(e)).catch(e=>e.code===P.code&&e.name===P.name?setTimeout(()=>(this.logDeviceState(`[ERROR]: Error caching GATT Service - Clearing cache and trying again. || ${new Date}`),this.clearGattCache(),i(a(t+1))),500):(this.logDeviceState(`[ERROR]: Failed to cache GATT Service || ${new Date}`),s(e))):s(this.buildDeviceErr(L)));return a(0).then(e=>t(e)).catch(e=>i(e))})),H(this,"sendArpcBase",e=>new Promise((t,i)=>{if(!this.device.gatt.connected)return i(this.buildDeviceErr(B));if("string"!=typeof e&&"object"!=typeof e)return i(this.buildDeviceErr((a=["string","array of numbers"],Object.freeze({code:1015,name:"IncorrectInputType",message:`Parameter type was not correct, acceptable type(s) are: ${a.join(", ")}`}))));var a;const s="string"==typeof e?e.length/2:e.length,r="string"==typeof e?this.hexToBytes(e):e;return t(this.buildArpcCommand(s,r))})),H(this,"onDestroyHandler",()=>{if(this.device&&this.device.gatt.connected)return this.device.gatt.disconnect()}),H(this,"waitForDeviceResponse",e=>new Promise(t=>{let i=a=>a<e?this.commandRespAvailable?t(!0):setTimeout(()=>i(a+1),200):t(!1);i(0)})),H(this,"disconnectHandler",e=>{this.gattServer=null,this.cardService=null,this.logDeviceState(`[Disconnected]: Disconnect event. Returning event to user, removing device listener || ${new Date}`),this.disconnectCallback(e),this.device.removeEventListener("gattserverdisconnected",this.disconnectHandler)}),H(this,"isDeviceConnected",()=>!!this.device.gatt&&this.device.gatt.connected),this.device=e,this.disconnectCallback=t.disconnectHandler,this.gattServer=null,this.cardService=null,this.deviceUUIDs=["0508e6f8-ad82-898f-f843-e3410cb60104","0508e6f8-ad82-898f-f843-e3410cb60103","0508e6f8-ad82-898f-f843-e3410cb60101"],this.statusVerbosity=Object.freeze({minimum:0,medium:1,verbose:2}),this.currencyCode=Object.freeze({dollar:[8,64],euro:[9,120],pound:[8,38],default:[0,0]}),this.transactionTypes=Object.freeze({purchase:0,cashadvance:1,cashback:2,purchasegoods:4,purchaseservices:8,contactlesscashback:9,cashmanual:18,refund:32,chiponlypayment:80}),this.commandRespAvailable=!1}};function F(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var $=class extends j{constructor(e,t){super(e,t),F(this,"decimalToBinary",e=>{let t=(e>>>0).toString(2);return"00000000".substr(t.length)+t}),F(this,"stringNumToBool",e=>!!+e),F(this,"findNullTerminatedString",e=>{let t;for(let i=0;i<e.length;i++)if(0===e[i]&&0===e[i+1]&&0===e[i+2]){t=i;break}return t?this.convertArrayToHexString(e.slice(2,t)):this.convertArrayToHexString(e.slice(2))}),F(this,"findPinLength",(e,t)=>{let i=12,a=4;return e&&"number"==typeof e&&e<=12&&(i=e>=4?e:12),t&&"number"==typeof t&&t>=4&&(a=t<=i?t:4),parseInt(`${i.toString(16)}${a.toString(16)}`,16)}),F(this,"buildPinOptionsByte",(e,t,i,a)=>{const s=Object.freeze({disabled:"00",englishfrench:"01",allspecified:"10"}),r=`000${e=e&&s[e.toLowerCase()]||s.disabled}${(t="boolean"!=typeof t||t)?"1":"0"}${"boolean"!=typeof t||t?"1":"0"}${a=a&&a.toLowerCase()in["iso0","iso3"]?"iso0"===a.toLowerCase()?"0":"1":"0"}`;return this.logDeviceState(`[PinOptionsByte]: binary string representation: ${r} || byte result: ${parseInt(r,2)}`),parseInt(r,2)})}};function U(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var q=class extends ${constructor(e,t){super(e,t),U(this,"parseDeviceConfiguration",e=>({...this.firstDeviceControlByte(this.decimalToBinary(e[1])),...this.secondDeviceControlByte(this.decimalToBinary(e[2])),...this.maskConfigurationByte(this.decimalToBinary(e[3])),...this.msrConfigurationByte(this.decimalToBinary(e[4])),maskCharacter:this.findMaskCharacter(e[5]),leadingUnmaskedLength:parseInt(this.decimalToBinary(e[6]).slice(4),2),trailingUnmaskedLength:parseInt(this.decimalToBinary(e[6]).slice(0,4),2),emvL2IcsConfig:this.emvL2ConfigOptions[this.decimalToBinary(e[7]).slice(0,4)]||`Unknown/Undocumented EMV L2 ICS ${u}`,...this.contactlessConfig(e[8])})),U(this,"contactlessConfig",e=>({contactlessSupport:this.enabledBrands[this.convertArrayToHexString([e])[0]],contactlessGuiControls:"1"===this.decimalToBinary(e)[5]?"Alternate":"Standard"})),U(this,"findMaskCharacter",e=>{if(48===e)return"ASCII: '0'";{const t=this.convertArrayToHexString([e]),i=this.hexToAscii(t);return i?`ASCII: '${i}'`:`Non-ASCII character in hex: '${t}'`}}),U(this,"firstDeviceControlByte",e=>({requireMutualAuth:this.stringNumToBool(e[0]),msrEncryptionVariant:"1"===e[1]?"DATA":"PIN",isClearTextEnabled:this.stringNumToBool(e[3]),isBeeperModeEnabled:this.stringNumToBool(e[4]),isBitmapLocked:this.stringNumToBool(e[6]),isConfigurationLocked:this.stringNumToBool(e[7])})),U(this,"secondDeviceControlByte",e=>({isArpcMacEnabled:this.stringNumToBool(e[1]),isFinancialIccCardTypeReportingEnabled:this.stringNumToBool(e[2]),arqcBatchDataOutputFormat:"1"===e[3]?"Reserved Format":"DynaPro Format"})),U(this,"maskConfigurationByte",e=>({isIsoMaskEnabled:this.stringNumToBool(e[7]),isCheckDigitEnabled:this.stringNumToBool(e[6]),isMs2Point0Enabled:"00"!==e.slice(4,6)})),U(this,"msrConfigurationByte",e=>({isAAMVAcardEnabled:this.stringNumToBool(e[7]),track3Data:this.trackDataOptions[e.slice(4,6)]||"Unknown",track2Data:this.trackDataOptions[e.slice(2,4)]||"Unknown",track1Data:this.trackDataOptions[e.slice(0,2)]||"Unknown"})),this.trackDataOptions=Object.freeze({"00":"Disabled","01":"Enabled",11:"Required"}),this.emvL2ConfigOptions=Object.freeze({"0000":"No L2 Capability","0001":`${u} C1 (EMVCo certified)`,"0010":`${u} C2`,"0011":`${u} C3`,"0100":`${u} C4 (EMVCo certified)`,"0101":`${u} C5 (EMVCo certified)`,"0110":`${u} C6`,"0111":`${u} C7`}),this.enabledBrands=Object.freeze({0:"All contacless kernals enabled",1:"PayPass/MCL support disabled",2:"payWave support disabled",4:"Expresspay support disabled",8:"D-PAS support disabled"})}};function z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var W=class extends q{constructor(e,t){super(e,t),z(this,"findEmvCardholderStatus",e=>({emvCardholderStatus:this.cardholderStatusIds[e]||`Unknown/Undocumented Cardholder Interaction Status ID: ${e}`})),z(this,"findOperationStatus",e=>({operationStatus:this.operationStatus[e]||"Unknown Operation Status"})),z(this,"parseDisplayMessageDone",e=>this.findOperationStatus(e[2])),z(this,"parseEmvCompletion",e=>(console.log("[!-!-!-!- emvCompletion -!-!-!-!",e),{})),z(this,"formatSerialNumber",e=>{this.requestedSn={serialNumber:this.findNullTerminatedString(e)},this.getSerialNumber=!0}),z(this,"formatKsnAndSn",e=>{this.requestedKsn={ksn:this.convertArrayToHexString(e.slice(2,12)),serialNumber:this.convertArrayToHexString(e.slice(12,20))},this.getKsnAvailable=!0}),z(this,"handleBigBlockBegin",e=>{switch(e[1]){case 164:this.arqcArriving=!0,this.arqcTotalLen=this.readTwoByteLength([e[5],e[4]]);break;case 171:this.batchDataArriving=!0,this.batchTotalLen=this.readTwoByteLength([e[5],e[4]]);break;case 24:case 32:case 33:break;default:this.transactionStatusCallback({bufferType:this.bufferTypes[e[1]]||"Buffer type not documented"})}}),z(this,"handleArqcBigBlockFinish",()=>{const e=this.buildInitialDataArray(!1),t=this.convertArrayToHexString(e);return this.logDeviceState(`[ARQC]: ${t}`),this.cardDataObj={...this.cardDataObj,arqcData:t,arqcDataParsed:this.tlvParser(e.slice(2))},this.rawData={},this.arqcArriving=!1,this.isQuickChipTransaction?void 0:this.transactionCallback(this.cardDataObj)}),z(this,"handleBatchBigBlockFinish",()=>{const e=this.buildInitialDataArray(!1),t=this.convertArrayToHexString(e);this.logDeviceState(`[BATCH DATA]: ${t}`),this.transactionHasStarted=!1;const i=this.tlvParser(e.slice(2)),a=i.find(e=>{let{tag:t}=e;return"DFDF40"===t});return this.cardDataObj=a?{...this.cardDataObj,batchData:t,batchDataParsed:i,signatureRequired:1===a}:{...this.cardDataObj,batchData:t,batchDataParsed:i},this.rawData={},this.batchDataArriving=!1,this.transactionCallback(this.cardDataObj)}),z(this,"handleBigBlockFinish",()=>this.arqcArriving?this.handleArqcBigBlockFinish():this.batchDataArriving?this.handleBatchBigBlockFinish():void 0),z(this,"parseEmvCardholderInteractionStatus",e=>{switch(e[1]){case 2:return{...this.findEmvCardholderStatus(e[1]),amountConfirmed:1===e[4]||2!==e[4]&&"Unknown/Undocumented Amount Confirmed Status"};case 4:return{...this.findEmvCardholderStatus(e[1]),applicationOrLabelName:this.bufferToUtf8(e.slice(4))};case 10:return{...this.findEmvCardholderStatus(e[1]),methodSelected:1===e[4]?"Credit":2===e[4]?"Debit":"Unknown/Undocumented payment method selected"};case 32:return{...this.findEmvCardholderStatus(e[1]),tlvData:this.tlvParser(e.slice(4))};default:return void 0===e[4]?this.findEmvCardholderStatus(e[1]):{...this.findEmvCardholderStatus(e[1]),undocumentedData:this.convertArrayToHexString(e.slice(4))}}}),z(this,"parseCardStatusReport",e=>e.length<4?this.findOperationStatus(e[2]):{...this.findOperationStatus(e[2]),cardStatus:0===e[2]?"Ok":"Error",cardType:this.cardTypesEnum[e[3]]}),z(this,"parseAckResponse",e=>({code:e[1],message:this.ACKSTS[e[1]],commandType:this.pinCommandIds[e[2]]||"Device error or command type not documented"})),z(this,"parseDeviceStateReport",e=>({deviceState:this.deviceState[e[1]],sessionState:this.parseSessionState(this.decimalToBinary(e[2])),deviceStatus:this.parseDeviceStatus(this.decimalToBinary(e[3])),deviceCertStatus:this.parseCertStatus(this.decimalToBinary(e[4])),hardwareStatus:this.parseHardwareStatus(this.decimalToBinary(e[5])),additionalInfo:this.parseAdditionalInfo(this.decimalToBinary(e[6]))})),z(this,"parseSessionState",e=>({powerDidChange:this.stringNumToBool(e[0]),cardDataIsAvailable:this.stringNumToBool(e[4]),panParsedFromCard:this.stringNumToBool(e[5]),externalPanSent:this.stringNumToBool(e[6]),amountWasSent:this.stringNumToBool(e[7])})),z(this,"parseCertStatus",e=>({msrCrlCertExists:this.stringNumToBool(e[0]),pinCrlCertExists:this.stringNumToBool(e[1]),mfgUnbindCertExists:this.stringNumToBool(e[3]),msrCaCertExists:this.stringNumToBool(e[4]),pinCaCertExists:this.stringNumToBool(e[5]),deviceCaCertExists:this.stringNumToBool(e[6]),deviceCertExists:this.stringNumToBool(e[7])})),z(this,"parseDeviceStatus",e=>"00000000"!==e?{pinKeyStatus:this.pinKeyStatusEnum[e.slice(6)],msrKeyStatus:this.msrKeyStatusEnum[e.slice(4,6)],tamperDetected:this.stringNumToBool(e[3]),isAuthenticated:this.stringNumToBool(e[1]),deviceErrorDetected:this.stringNumToBool(e[0])}:"Ok"),z(this,"parseHardwareStatus",e=>({IE3_only:this.stringNumToBool(e[0]),SRED:this.stringNumToBool(e[1]),MagHeadIsProgrammed:this.stringNumToBool(e[6]),tamperSensorsAreActive:this.stringNumToBool(e[7])})),z(this,"parseAdditionalInfo",e=>({ICC_AcquirerMasterKeyIsInjected:!this.stringNumToBool(e[7]),ICC_SessionKeyIsActive:!this.stringNumToBool(e[6]),CAPK_EmvDatabaseIsCorrupted:this.stringNumToBool(e[5]),EmvTerminalDatabaseIsCorrupted:this.stringNumToBool(e[4]),cardIsPresentInChipCardConnector:this.stringNumToBool(e[3])})),z(this,"parseCardData",e=>{const t=this.cardDataIds[e[1]]||"trackNameUnknown";if(e[2]===this.statusEnum.ok)switch(t){case"track1":this.cardDataObj={...this.cardDataObj,[t]:this.bufferToUtf8(e.slice(4))};break;case"track2":this.cardDataObj={...this.cardDataObj,[t]:this.bufferToUtf8(e.slice(4)),...this.formatExpPAN(e)};break;case"ksnAndMagnePrintStatus":this.cardDataObj={...this.cardDataObj,ksn:this.convertArrayToHexString(e.slice(4,14)),magnePrintStatus:this.convertArrayToHexString(e.slice(-4))};break;default:this.cardDataObj={...this.cardDataObj,[t]:this.convertArrayToHexString(e.slice(4))}}else this.cardDataObj={...this.cardDataObj,[t]:this.convertStatusToString[e[2]]}}),z(this,"parsePinResponse",e=>(this.logDeviceState(`[PIN Response]: Response from PIN Entry: ${this.convertArrayToHexString(e)}`),e.length>2?{pinData:{...this.findOperationStatus(e[1]),pinKsn:this.convertArrayToHexString(e.slice(2,12)),encryptedPinBlock:this.convertArrayToHexString(e.slice(12,20))}}:this.findOperationStatus(e[1]))),z(this,"parseCardholderResponse",e=>{const t=Object.freeze({113:"Left function key",114:"Middle function key",116:"Right function key",120:"Enter key"});return e.length>2?{...this.findOperationStatus(e[1]),keyPressed:t[e[2]]||"Unknown/Undocumented Key"}:this.findOperationStatus(e[1])}),this.operationStatus=Object.freeze({0:"Ok",1:"Cardholder Cancel",2:"Timeout",3:"Host Cancel",4:"Verify fail",5:"Keypad Security",6:"Calibration Done",7:"Write with duplicate RID and index",8:"Write with corrupted Key",9:"CA Public Key reached maximum capacity",10:"CA Public Key read with invalid RID or Index"}),this.ACKSTS=Object.freeze({0:"Ok",21:"RID error/Index not found",128:"Device Error: error, tamper, missing certificate or incorrect signature detected",129:"Device not idle",130:"Data Error or Bad Paramater(s)",131:"Length Error: data size is either too small, too large, incomplete, or OID of the cert doesn't match predefined OID",132:"PAN Exists",133:"Missing or Incorrect Key",134:"Device Busy",135:"Device Locked",136:"Auth required",137:"Bad Auth",138:"Device Not Available",139:"Amount Needed - If PIN amount is required, no amount has been set",140:"Battery is critically low",141:"Device is resetting",144:"Certificate does not exist",145:"Expired (Cert/CRL)",146:"Invalid (Cert/CRL/Message)",147:"Revoked (Cert/CRL)",148:"CRL does not exist",149:"Certificate exists",150:"Duplicate KSN/Key"}),this.pinDisplayMessages=Object.freeze({0:"Hands Off",1:"Approved",2:"Declined",3:"Cancelled",4:"Thank You",5:"PIN Invalid",6:"Processing",7:"Please Wait"}),this.pinCommandIds=Object.freeze({1:"responseACK",2:"clearSession",3:"swipe",4:"requestPinEntry",5:"cancelCommand",6:"requestCardholderSelection",7:"displayMessage",8:"requestDeviceStatus",9:"requestDeviceConfiguration",10:"requestMsrData",11:"getChallenge",7:"displayMessage",162:"emvTransactionStatus",171:"requestEmvData",48:"getKsn",5:"cancelCommand",26:"requestDeviceInfo",16:"sendBigBlockData"}),this.cardTypesEnum=Object.freeze({0:"Other",1:"Financial",2:"AAMVA",3:"Manual",4:"Unknown",5:"ICC",6:"Contactless ICC - EMV",7:"Financial MSR + ICC",8:"Contactless ICC - MSD"}),this.deviceState=Object.freeze({0:"Idle",1:"Session",2:"Wait For Card",3:"Wait For PIN",4:"Wait For Selection",5:"Displaying Message",6:"Test (Reserved for future use)",7:"Manual Card Entry",9:"Wait Cardholder Entry",10:"Chip Card",11:"ICC Kernel Test",12:"EMV Transaction",13:"Show PAN"}),this.pinKeyStatusEnum=Object.freeze({"00":"PIN Key OK","01":"PIN Key Exhausted",10:"No PIN Key",11:"PIN Key Not Bound"}),this.msrKeyStatusEnum=Object.freeze({"00":"MSR Key OK","01":"MSR Key Exhausted",10:"No MSR Key",11:"MSR Key Not Bound"}),this.cardDataIds=Object.freeze({1:"track1",2:"track2",3:"track3",4:"encryptedTrack1",5:"encryptedTrack2",6:"encryptedTrack3",7:"magnePrint",64:"encryptedPanAndExp",65:"serialNumber",99:"ksnAndMagnePrintStatus",100:"CBC-MAC"}),this.cardholderStatusIds=Object.freeze({1:"Waiting for amount confirmation selection",2:"Amount confirmation selected",3:"Waiting for multi-payment ICC Application selection",4:"ICC Application selected",7:"Waiting for language selection",8:"Language selected",9:"Waiting for credit/debit selection",10:"Credit/Debit selected",11:"Waiting for Pin Entry for ICC",12:"PIN entered for ICC",13:"Waiting for Pin Entry for MSR",14:"PIN entered for MSR"}),this.bufferTypes=Object.freeze({2:"Device Certificate",50:"Set BIN (MAC)",66:"CSR",161:"EMV data in TLV format, Tag Data (MAC)",162:"RESERVED",163:"RESERVED",164:"EMV data in TLV format, Authorization Request (ARQC)",165:"CA Public Key (MAC)",171:"EMV data in TLV format, Batch Data"}),this.cardDataObj={},this.arqcArriving=!1,this.batchDataArriving=!1,this.arqcTotalLen=0,this.batchTotalLen=0,this.statusEnum=Object.freeze({ok:0,empty:1,error:2,disabled:3}),this.convertStatusToString=Object.freeze({0:"Ok",1:"Empty",2:"Error",4:"Disabled"})}};function K(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var G=class extends W{constructor(e,t){super(e,t),K(this,"getCardService",()=>new Promise((e,t)=>this.device?this.connectAndCache(2).then(e=>(this.logDeviceState(`[GATT]: Cache AppDataToHostLength Characteristic || ${new Date}`),e.getCharacteristic(this.deviceToHostLen))).then(e=>(this.logDeviceState(`[GATT]: Begin notifications on AppDataToHostLength Characteristic || ${new Date}`),e.startNotifications())).then(e=>(this.logDeviceState(`[GATT]: Add listener to notifications || ${new Date}`),e.removeEventListener("characteristicvaluechanged",this.dataWatcher),e.addEventListener("characteristicvaluechanged",this.dataWatcher),this.cardDataListener=e,this.logDeviceState(`[GATT]: Cache AppDataToHost Characteristic || ${new Date}`),this.cardService.getCharacteristic(this.deviceToHostData))).then(e=>(this.receiveDataChar=e,this.logDeviceState(`[GATT]: Cache AppDataFromHostLength Characteristic || ${new Date}`),this.cardService.getCharacteristic(this.deviceFromHostLen))).then(e=>(this.sendLenToDevice=e,this.logDeviceState(`[GATT]: Cache AppDataFromHost Characteristic || ${new Date}`),this.cardService.getCharacteristic(this.deviceFromHostData))).then(e=>(this.commandCharacteristic=e,window&&(window.removeEventListener("beforeunload",this.onDestroyHandler),window.addEventListener("beforeunload",this.onDestroyHandler)),this.logDeviceState(`[GATT]: Successfully cached all GATT services and characteristics. Returning successful pair to user || ${new Date}`),this.delayPromise(400))).then(()=>e({code:0,message:"Device Open"})).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(E)))),K(this,"dataWatcher",e=>{let t=e.target.value.getUint8(0);return this.logDeviceState(`[NOTIFY: AppDataToHostLength]: ${this.convertArrayToHexString([t])} || ${new Date}`),this.commandSent&&3===t?(this.commandRespAvailable=!0,void(this.commandSent=!1)):this.readCommandResp()}),K(this,"readCommandResp",()=>new Promise((e,t)=>this.receiveDataChar?this.receiveDataChar.readValue().then(e=>this.readValueHandler(e)).then(t=>e(t)).catch(i=>i.code===v.code&&i.message===v.message?(this.logDeviceState(`[INFO]: Read failed due to device being busy. Attempting read again || ${new Date}`),this.delayPromise(100).then(()=>e(this.readCommandResp()))):t(this.buildDeviceErr(i))):t(this.buildDeviceErr(N)))),K(this,"readValueHandler",e=>new Promise(t=>{const i=this.readByteArray(e);if(this.logDeviceState(`[READ: AppDataToHost]: ${this.convertArrayToHexString(i)} || ${new Date}`),i.length)switch(i[0]){case this.reportIds.responseAck:return t(this.parseAckResponse(i));case this.reportIds.deviceStateReport:return t(this.handleDeviceStateReport(i));case this.reportIds.cardStatusReport:return t(this.handleCardStatusReport(i));case this.reportIds.cardDataReport:return t(this.handleCardDataReport(i));case this.reportIds.emvCardholderStatus:return t(this.handleCardholderStatusReport(i));case this.reportIds.emvCompletion:return t(this.handleEmvCompletion(i));case this.reportIds.bigBlockData:return t(this.handleBigBlockData(i));case this.reportIds.getKsn:return t(this.formatKsnAndSn(i));case this.reportIds.requestSn:return t(this.formatSerialNumber(i));case this.reportIds.deviceConfig:return t(this.parseDeviceConfiguration(i));case this.reportIds.pinResponse:return t(this.transactionCallback(this.parsePinResponse(pinResp)));case this.reportIds.selectionResponse:return t(this.parseCardholderResponse(i));case this.reportIds.displayResp:return t(this.transactionStatusCallback(this.findOperationStatus(i[1])));default:return this.logDeviceState(`[Data Resp]: There is no parser for this data, returning to caller: ${this.convertArrayToHexString(i)} || ${new Date}`),t(this.transactionCallback(i))}else t(i)})),K(this,"handleEmvCompletion",e=>(console.log("[!] EMV Completion: ",e),this.transactionStatusCallback(this.parseEmvCompletion(e)))),K(this,"handleBigBlockData",e=>{switch(e[2]){case 0:this.handleBigBlockBegin(e);break;case 99:this.maxBlockId=Math.max(...Object.keys(this.rawData))+1,this.handleBigBlockFinish();break;default:this.rawData={...this.rawData,[e[2]]:e.slice(4)}}}),K(this,"handleCardholderStatusReport",e=>this.transactionStatusCallback(this.parseEmvCardholderInteractionStatus(e))),K(this,"handleCardStatusReport",e=>new Promise(t=>(this.transactionStatusCallback(this.parseCardStatusReport(e)),this.swipeHasBegun||this.transactionHasStarted?this.sendCommandWithResp(this.swipeHasBegun?[1,10,0]:[1,171,0]).then(e=>t(this.transactionStatusCallback(e))).catch(e=>this.sendErrToCallback(this.buildDeviceErr(e))):t()))),K(this,"handleDeviceStateReport",e=>{this.dataGathered&&(this.dataGathered=!1,this.transactionCallback({swipeData:this.cardDataObj})),this.transactionStatusCallback(this.parseDeviceStateReport(e))}),K(this,"handleCardDataReport",e=>{this.swipeHasBegun&&(this.swipeHasBegun=!1,this.dataGathered=!0),3!==e.length?this.parseCardData(e):(this.logDeviceState("[ERROR] Undocumented Card Data below"),this.logDeviceState(e))}),K(this,"requestCardSwipe",e=>new Promise((t,i)=>(this.swipeHasBegun=!0,this.cardDataObj={},this.device.gatt.connected?this.sendCommandWithResp(this.clearSessionCmd).then(t=>(this.transactionStatusCallback(t),this.sendCommandWithResp(this.buildSwipeCommand(e||{})))).then(e=>t(e)).catch(e=>i(e)):i(this.buildDeviceErr(B))))),K(this,"buildSwipeCommand",e=>{let{timeout:t,isFallback:i,toneChoice:a,displayType:s}=e;return[1,3,t||60,!0===i?4:void 0!==s?this.displayTypes[s.toLowerCase()]:2,void 0!==a?this.toneChoice[a.toLowerCase()]:1]}),K(this,"startTransaction",e=>new Promise((t,i)=>(this.transactionHasStarted=!0,this.cardDataObj={},this.logDeviceState(`[INFO]: EMV transaction begun || ${new Date}`),this.device.gatt.connected?this.sendCommandWithResp(this.clearSessionCmd).then(e=>(this.transactionStatusCallback(e),Promise.resolve())).then(()=>this.sendCommandWithResp(this.buildEmvCommand(e||{}))).then(e=>t(e)).catch(e=>i(e)):i(this.buildDeviceErr(B))))),K(this,"buildEmvCommand",e=>{let{timeout:t,pinTimeout:i,cardType:a,transactionType:s,cashBack:r,currencyCode:n,toneChoice:o,isQuickChip:c,authorizedAmount:h,emvOptions:d}=e;this.isQuickChipTransaction=!1!==c;let l=[1,162,t||60,i||20,0,void 0!==o&&this.toneChoice[o.toLowerCase()]||1,a?this.cardTypes(a.toLowerCase()):this.cardTypes("all"),void 0!==d?this.emvOptions[d.toLowerCase()]:0];return l=void 0!==h?l.concat(this.convertNumToAmount(h)):l.concat([0,0,0,0,1,0]),l=void 0!==s?l.concat(this.transactionTypes[s.toLowerCase()]):l.concat(0),l=void 0!==r?l.concat(this.convertNumToAmount(r)):l.concat(this.newArrayPartial(0,6)),l=l.concat(this.newArrayPartial(0,12)),l=n?l.concat(this.currencyCode[n.toLowerCase()]||this.currencyCode.default):l.concat(this.currencyCode.dollar),l.push(0),l.push(this.isQuickChipTransaction?1:0),l=l.concat(this.newArrayPartial(0,28)),l}),K(this,"requestPinEntry",e=>new Promise((t,i)=>(this.logDeviceState(`[PIN]: Request for PIN entry start || ${new Date}`),console.log("pinoptions: ",e),this.device.gatt.connected?this.sendCommandWithResp(this.buildPinCommand(e||{})).then(e=>t(e)).catch(e=>i(e)):i(this.buildDeviceErr(B))))),K(this,"buildPinCommand",e=>{let{languageSelection:t,displayType:i,timeout:a,maxPinLength:s,minPinLength:r,toneChoice:n,waitMessage:o,verifyPin:c,pinBlockFormat:h}=e;const d=Object.freeze({enterpin:0,enterpinamount:1,reenterpinamount:2,reenterpin:3,verifypin:4}),l=[1,4,a||30,i&&d[i.toLowerCase()]||0,this.findPinLength(s,r),void 0!==n?this.toneChoice[n.toLowerCase()]:1,this.buildPinOptionsByte(t,o,c,h)];return console.log("[PIN CMD] Built PIN Command: ",l),l}),K(this,"buildArpcCommand",(e,t)=>new Promise((i,a)=>{this.sendBigBlockData(164,e,t).then(()=>i([1,164,...this.newArrayPartial(0,10)])).catch(e=>a(e))})),K(this,"sendBigBlockData",(e,t,i)=>new Promise((a,s)=>{let r=[1,16,e,0,255&t];if(t<60){r=r.concat(...this.newArrayPartial(0,60)),console.log(`blockZero length: ${r.length}`),this.logDeviceState(`[Send Big Block Data Legacy]: ${this.convertArrayToHexString(r)}`);let n=[1,16,e,1,t,...i];return n.length<65&&(n=n.concat(...this.newArrayPartial(0,65-n.length))),this.sendPinCommand(r).then(e=>(console.log("block zero resp:",e,new Date),this.sendPinCommand(n))).then(e=>(console.log("legacy block resp: ",e),a())).catch(e=>s(this.buildDeviceErr(e)))}this.sendExtendedBigBlockData(e,t,i,r).then(e=>(console.log("beginQueResp",e),a()))})),K(this,"sendExtendedBigBlockData",(e,t,i,a)=>new Promise((s,r)=>{const n=Math.ceil(t/60);let o=!1,c=[];a=a.concat([t>>8&255,t>>16&255,t>>24&255,1,...this.newArrayPartial(0,56)]),console.log(`blockZero length: ${a.length}`,new Date),this.logDeviceState(`[Send Big Block Data Extended]: ${this.convertArrayToHexString(a)} || ${new Date}`);const h=()=>new Promise((e,t)=>{if(o)return this.delayPromise(500).then(()=>e(h()));const i=c.shift();return i?(o=!0,i.promise().then(()=>i.resolve()).then(()=>(o=!1,e(h()))).catch(e=>{o=!1,t(i.reject(e))})):e(!0)}),d=e=>new Promise((t,i)=>{c.push({promise:e,resolve:t,reject:i})});d(()=>new Promise(e=>this.sendPinCommand(a).then(t=>(console.log("block zero resp:",t,new Date),e()))));for(let t=0,a=1;a<=n;a++){let s=i.slice(t,t+60),r=[1,16,e,a,s.length,...s];65!==r.length&&(r=r.concat(...this.newArrayPartial(0,65-r.length))),console.log("adding new iteration: ",r,new Date),d(()=>new Promise(e=>this.sendPinCommand(r).then(t=>(console.log("resp from sendPinCommand in iteration",t,new Date),e()))))}return console.log("data Blocks",c,new Date),h().then(e=>s(e)).catch(e=>r(e))})),K(this,"sendArpc",e=>new Promise((t,i)=>this.sendArpcBase(e).then(e=>this.sendCommandWithResp(e)).then(e=>(this.logDeviceState(`[Send ARPC Resp]: ${this.convertArrayToHexString(e)}`),console.log("ARPC Final Result:",e),t(e))).catch(e=>i(this.buildDeviceErr(e))))),K(this,"sendPinCommand",e=>new Promise((t,i)=>(this.logDeviceState(`[AppFromHostLength]: ${this.convertArrayToHexString([e.length])} || ${new Date}`),this.sendLenToDevice?this.sendLenToDevice.writeValue(Uint8Array.of(e.length)).then(()=>(this.logDeviceState(`[AppFromHostData]: ${this.convertArrayToHexString(e)} || ${new Date}`),this.commandSent=!0,t(this.commandCharacteristic.writeValue(Uint8Array.from(e))))).catch(e=>(this.commandSent=!1,i(e))):i(this.buildDeviceErr(O))))),K(this,"sendCommandWithResp",e=>new Promise((t,i)=>this.sendPinCommand(e).then(()=>this.commandRespAvailable?Promise.resolve(!0):this.waitForDeviceResponse(16)).then(t=>t?this.readCommandResp():this.tryCommandAgain(e)).then(e=>(this.commandRespAvailable=!1,t(e))).catch(e=>(this.commandRespAvailable=!1,i(this.buildDeviceErr(e)))))),K(this,"tryCommandAgain",e=>new Promise((t,i)=>this.sendPinCommand(e).then(()=>this.waitForDeviceResponse(5)).then(e=>e?t(this.readCommandResp()):i(this.buildDeviceErr(x))))),K(this,"cancelTransaction",()=>new Promise((e,t)=>this.commandCharacteristic?this.sendCommandWithResp([1,5,0]).then(t=>e(t)).catch(e=>t(e)):t(this.buildDeviceErr(I)))),K(this,"clearSession",()=>new Promise((e,t)=>(this.logDeviceState(`[ClearSession]: Request to clear session || ${new Date}`),this.sendLenToDevice?this.sendCommandWithResp(this.clearSessionCmd).then(t=>(this.transactionStatusCallback(t),this.logDeviceState(`[ClearSession]: Received clear session response || ${new Date}`),e(t))).catch(e=>t(this.buildDeviceErr(e))):e(m)))),K(this,"closePinDevice",()=>new Promise((e,t)=>this.cardDataListener?this.cardDataListener.stopNotifications().then(()=>(this.logDeviceState(`[Close Device]: GATT notifications stopped. Clearing JS cache || ${new Date}`),this.cardDataListener.removeEventListener("characteristicvaluechanged",this.dataWatcher),this.cardDataListener=null,this.clearGattCache(),e(this.disconnect()))).catch(e=>t(e)):this.disconnect().then(()=>(this.logDeviceState(`[Close Device]: Device Closed. Clearing JS cache || ${new Date}`),this.clearGattCache(),e())).catch(e=>t(e)))),K(this,"closeDevice",()=>new Promise((e,t)=>this.device.gatt.connected?this.clearSession().then(()=>this.closePinDevice()).then(()=>e(p)).catch(e=>(this.disconnect(),t(this.buildDeviceErr(e)))):e(p))),K(this,"clearGattCache",()=>{this.transactionHasStarted=!1,this.receiveDataChar=null,this.commandCharacteristic=null,this.sendLenToDevice=null,this.commandSent=!1,this.commandRespAvailable=!1,this.swipeHasBegun=!1,this.dataGathered=!1,this.isQuickChipTransaction=!0}),this.transactionCallback=t.transactionCallback||t,this.transactionStatusCallback=t.transactionStatusCallback,this.deviceFromHostLen="0508e6f8-ad82-898f-f843-e3410cb60220",this.deviceFromHostData="0508e6f8-ad82-898f-f843-e3410cb60221",this.deviceToHostLen="0508e6f8-ad82-898f-f843-e3410cb60222",this.deviceToHostData="0508e6f8-ad82-898f-f843-e3410cb60223",this.cardDataListener=null,this.receiveDataChar=null,this.commandCharacteristic=null,this.sendLenToDevice=null,this.commandSent=!1,this.swipeHasBegun=!1,this.transactionHasStarted=!1,this.dataGathered=!1,this.isQuickChipTransaction=!0,this.emvOptions=Object.freeze({normal:0,bypasspin:1,forceonline:2,acquirernotavailable:4}),this.displayTypes=Object.freeze({swipeidlealternate:0,swipecard:1,pleaseswipe:2,pleaseswipeagain:3,chiperroruseswipe:4}),this.reportIds=Object.freeze({responseAck:1,endSession:2,requestCardSwipe:3,cardStatusReport:34,deviceStateReport:32,cardDataReport:35,emvCardholderStatus:44,bigBlockData:41,emvCompletion:162,getKsn:48,requestSn:26,deviceConfig:9,pinResponse:36,selectionResponse:37,displayResp:39}),this.toneChoice=Object.freeze({nosound:0,onebeep:1,twobeeps:2}),this.initialNotification=[0],this.clearSessionCmd=[1,2,0]}};function V(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var _=class extends G{constructor(e,t){super(e,t),V(this,"getDeviceInfo",()=>new Promise((e,t)=>this.device?this.gatherDeviceInfo().then(t=>e(t)).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(E)))),V(this,"gatherDeviceInfo",()=>new Promise((e,t)=>{this.checkIfDeviceIdle().then(()=>this.getDeviceInfoProceed()).then(t=>e({...t,deviceName:this.device.name,isConnected:this.device.gatt.connected})).catch(e=>t(e))})),V(this,"getDeviceInfoBase",()=>new Promise(e=>{this.sendCommandWithResp([1,26,5]).then(t=>e(t))})),V(this,"getDeviceInfoProceed",()=>new Promise((e,t)=>{this.sendPinCommand([0,26,5]).then(()=>this.getSerialNumber||this.waitForSn(5)).then(e=>e?Promise.resolve():t(this.buildDeviceErr(x))).then(()=>{let t={serialNumber:this.hexToAscii(this.requestedSn.serialNumber)};return this.getSerialNumber=!1,this.requestedSn=null,e(t)}).catch(e=>t(e))})),V(this,"checkIfDeviceIdle",()=>new Promise(e=>{this.getDeviceInfoBase().then(t=>"Device not idle"===t.message?this.clearSession().then(()=>this.getDeviceInfoBase()):(this.transactionStatusCallback(t),e())).then(t=>(this.transactionStatusCallback(t),e()))})),V(this,"waitForSn",e=>new Promise(t=>{let i=a=>a<e?this.getSerialNumber?t(!0):setTimeout(()=>i(a+1),200):t(!1);i(0)})),this.getKsnAvailable=!1,this.requestedKsn=null,this.getSerialNumber=!1,this.requestedSn=null,this.deviceType=l}};function Q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Y=class extends G{constructor(e,t){super(e,t),Q(this,"setDisplayMessage",e=>new Promise((t,i)=>this.device&&this.device.gatt.connected?this.buildDisplayCmd(e||{}).then(e=>this.sendCommandWithResp(e)).then(e=>t(e)).catch(e=>i(this.buildDeviceErr(e))):i(this.buildDeviceErr(B)))),Q(this,"buildDisplayCmd",e=>{let{displayTime:t,messageId:i}=e;return new Promise((e,a)=>{return void 0===i?a((s="messageId",Object.freeze({code:1014,name:"MissingRequiredParameter",message:`'${s}' is required to call this function.`}))):e([1,7,void 0!==t?t:15,i]);var s})}),Q(this,"getDeviceInfo",()=>new Promise((e,t)=>this.device?this.gatherDeviceInfo().then(t=>e(t)).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(E)))),Q(this,"gatherDeviceInfo",()=>new Promise((e,t)=>{this.checkIfDeviceIdle().then(()=>this.getDeviceInfoProceed()).then(t=>e({...t,deviceName:this.device.name,isConnected:this.device.gatt.connected})).catch(e=>t(e))})),Q(this,"getDeviceInfoBase",()=>new Promise(e=>{this.sendCommandWithResp([1,26,5]).then(t=>e(t))})),Q(this,"getDeviceInfoProceed",()=>new Promise((e,t)=>{this.sendPinCommand([0,26,5]).then(()=>this.getSerialNumber?Promise.resolve(!0):this.waitForSn(5)).then(e=>e?Promise.resolve():t(this.buildDeviceErr(x))).then(()=>{let t={serialNumber:this.hexToAscii(this.requestedSn.serialNumber)};return this.getSerialNumber=!1,this.requestedSn=null,e(t)}).catch(e=>t(e))})),Q(this,"checkIfDeviceIdle",()=>new Promise(e=>{this.getDeviceInfoBase().then(t=>"Device not idle"===t.message?this.clearSession().then(()=>this.getDeviceInfoBase()):(this.transactionStatusCallback(t),e())).then(t=>(this.transactionStatusCallback(t),e()))})),Q(this,"waitForSn",e=>new Promise(t=>{let i=a=>a<e?this.getSerialNumber?t(!0):setTimeout(()=>i(a+1),200):t(!1);i(0)})),this.getKsnAvailable=!1,this.requestedKsn=null,this.getSerialNumber=!1,this.requestedSn=null,this.deviceType="dynaProGo"}};function J(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Z=class extends j{constructor(e,t){super(e,t),J(this,"trackIndices",e=>Object.freeze({track1DecodeStatus:e,track2DecodeStatus:e+1,track3DecodeStatus:e+2,track1Len:e+3,track2Len:e+4,track3Len:e+5,cardEncodeType:e+6,track1Start:e+7,track1End:e+118,track2Start:e+119,track2End:e+230,track3Start:e+231,track3End:e+342,cardStatus:e+343,magnePrintStatusStart:e+344,magnePrintStatusEnd:e+347,magnePrintLen:e+348,magnePrintStart:e+349,magnePrintEnd:e+476,serialNumberStart:e+477,serialNumberEnd:e+492,deviceEncStatusStart:e+493,deviceEncStatusEnd:e+494,ksnStart:e+495,ksnEnd:e+504,track1MaskedLen:e+505,track2MaskedLen:e+506,track3MaskedLen:e+507,track1MaskedStart:e+508,track1MaskedEnd:e+619,track2MaskedStart:e+620,track2MaskedEnd:e+731,track3MaskedStart:e+732,track3MaskedEnd:e+843,encSessionIdStart:e+844,encSessionIdEnd:e+851,track1AbsLen:e+852,track2AbsLen:e+853,track3AbsLen:e+854,magnePrintAbsLen:e+855})),J(this,"parseHidData",e=>{let t=this.trackIndices(this.offset),i={};return this.dataNames.forEach(a=>{let s=e.slice(t[`${a}Start`],t[`${a}End`]+1);t.hasOwnProperty(`${a}Len`)&&(s=s.slice(0,e[t[`${a}Len`]])),i="track2Masked"===a?this.formatTrack2Masked(i,a,this.bufferToUtf8(s)):t.hasOwnProperty(`${a}DecodeStatus`)?this.formatTrackWithDecode(i,a,e[t[`${a}DecodeStatus`]],this.convertArrayToHexString(s)):"serialNumber"===a?this.formatSerialNumber(i,s):{...i,[a]:a.toLowerCase().includes("masked")?this.bufferToUtf8(s):this.convertArrayToHexString(s)}}),{swipeData:{...i}}}),J(this,"formatSerialNumber",(e,t)=>({...e,serialNumber:this.bufferToUtf8(t.length>7?t.slice(0,7):t)})),J(this,"formatTrack2Masked",(e,t,i)=>({...e,[t]:i,...this.formatExpPAN(i)})),J(this,"formatTrackWithDecode",(e,t,i,a)=>({...e,[t]:a,[`${t}DecodeStatus`]:0===i?"Ok":"Error",[`${t}DecodeStatusCode`]:i})),this.dataNames=["track1","track2","track3","ksn","magnePrint","magnePrintStatus","serialNumber","encSessionId","track1Masked","track2Masked","track3Masked"],this.offset=3}};function X(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ee=class extends Z{constructor(e,t){super(e,t),X(this,"parseTransactionStatus",e=>{let t=this.readTwoByteLength([e[1],e[2]]),i=e.slice(3);return i.length===t?this.parseNotifications(i):this.throwLenErr()}),X(this,"parseNotifications",e=>{let t=e.slice(6),i=this.readTwoByteLength([t[0],t[1]]),a=t.slice(2),s=a[0],r=a[2];return a.length===i?{transactionStatus:{statusCode:s,statusMsg:this.TrxStatusEnum[s]||"Status code message not documented",progressCode:r,progressMsg:this.TrxProgressIndicator[r]||"Progress code message not documented"}}:this.throwLenErr()}),this.TrxStatusEnum=Object.freeze({0:"Transaction Started and Idle",1:"Card is Inserted",2:"Error",3:"Transaction Progress Change",4:"Waiting for User Response",5:"Timed Out",6:"Transaction Complete",7:"Cancelled by Host",8:"Card Removed",9:"Contactless Token Detected, Powering Up Card",10:"MSR Swipe Detected"}),this.TrxProgressIndicator=Object.freeze({0:"No transaction in progress",1:"Waiting for cardholder to present payment",2:"Powering up the card",3:"Selecting the application",4:"Waiting for user language selection",5:"Waiting for user application selection",6:"Initiating application",7:"Reading application data",8:"Offline data authentication",9:"Process restrictions",10:"Cardholder verification",11:"Terminal risk management",12:"Terminal action analysis",13:"Generating first application cryptogram",14:"Card action analysis",15:"Online processing",16:"Waiting online processing response",17:"Transaction Complete",18:"Transaction Error",19:"Transaction Approved",20:"Transaction Declined",21:"Transaction Cancelled by MSR Swipe",22:"EMV error - Conditions Not Satisfied",23:"EMV error - Card Blocked",24:"Application selection failed",25:"EMV error - Card Not Accepted",26:"Empty Candidate List",27:"Application Blocked",41:"Contactless Remove Card",42:"Collision Detected",43:"Refer to Mobile Device Prompt",44:"Contactless Transaction Complete",45:"Request Switch to ICC/MSR - Kernel has refused contactless payment",46:"Wrong Card Type (MSD or EMV)",47:"No Application Interchange Profile (Tag 82) Received",49:"Magnetic stripe decoding error.",60:"Magnetic stripe decoding during Technical Fallback. Revert to MSR, powering up but not receiving an Answer to Reset from card.",61:"Magnetic stripe card decoded during MSR Fallback. Device reverted to MSR, but encountered fatal errors.",62:"Magnetic stripe card decoded during a No Fallback MSR read."})}};function te(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ie=class extends ee{constructor(e,t){super(e,t),te(this,"parseEmvData",(e,t)=>t?{arqcData:this.convertArrayToHexString(e.slice(11)),arqcDataParsed:this.tlvParser(e.slice(13),!0)}:{signatureRequired:128===e[11]?"CBC-MAC checked in ARQC online response":1===e[11],batchData:this.convertArrayToHexString(e.slice(11)),batchDataParsed:this.tlvParser(e.slice(14),!0)}),te(this,"parseEmvCommandResponse",e=>{const t=e.slice(4,6);return parseInt(t.join(""))?{code:parseInt(this.convertArrayToHexString(t),16),name:"StartTransactionError",message:this.emvResultCodes[t[1]]||"Transaction Error Message not yet documented"}:{code:0,message:"Success, transaction has started"}}),te(this,"parseUserSelectionRequest",e=>({userSelectionRequest:{selectionType:0===e[0]?"Application Selection":"Language Selection",timeRemaining:e[1],menuItems:this.convertArrayToHexString(e.slice(2))}})),this.emvResultCodes=Object.freeze({129:"Failure, DUKPT scheme is not loaded",130:"Failure, DUKPT scheme is loaded but all of its keys have been used",131:"Failure, DUKPT scheme is not loaded (Security Level not 3 or 4)",132:"Invalid Total Transaction Time Field",133:"Invalid Card Type Field",134:"Invalid Options Field",135:"Invalid Amount Authorized Field",136:"Invalid Transaction Type Field",137:"Invalid Cash Back Field",138:"Invalid Transaction Currency Code Field",142:"Invalid Reporting Option",143:"Transaction Already In Progress",145:"Invalid Device Serial Number",150:"Invalid System Date and Time"})}};function ae(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var se=class extends ie{constructor(e,t){super(e,t),ae(this,"getCardServiceBase",e=>new Promise((t,i)=>this.device?this.connectAndCache(e).then(e=>e.getCharacteristic(this.cardDataNotification)).then(e=>(this.logDeviceState(`[GATT NOTIFICATIONS]: Request to cache characteristics, start notifications, and attach listeners. || ${new Date}`),e.startNotifications())).then(e=>(e.removeEventListener("characteristicvaluechanged",this.cardDataHandler),e.addEventListener("characteristicvaluechanged",this.cardDataHandler),this.cardDataListener=e,Promise.resolve())).then(()=>this.cardService.getCharacteristic(this.commandCharId)).then(e=>(this.commandCharacteristic=e,window&&(window.removeEventListener("beforeunload",this.onDestroyHandler),window.addEventListener("beforeunload",this.onDestroyHandler)),Promise.resolve())).then(()=>this.cardService.getCharacteristic(this.dataReadyId)).then(e=>e.startNotifications()).then(e=>(e.removeEventListener("characteristicvaluechanged",this.dataReadyHandler),e.addEventListener("characteristicvaluechanged",this.dataReadyHandler),this.dataReadyCharacteristic=e,Promise.resolve())).then(()=>this.cardService.getCharacteristic(this.dataReadStatusId)).then(e=>(this.dataReadStatusCharacteristic=e,this.logDeviceState(`[GATT NOTIFICATIONS]: Success! Cached characteristics, started notifications, and attached listeners. || ${new Date}`),t({code:0,message:"Device Open"}))).catch(e=>i(e)):i(this.buildDeviceErr(E)))),ae(this,"dataReadyHandler",e=>{let t=e.target.value,i=this.readByteArray(t);this.logDeviceState(`dataReady listener: ${this.convertArrayToHexString(i)}`),this.commandSent&&(this.commandRespAvailable=!0,this.commandSent=!1)}),ae(this,"cardDataHandler",e=>{let t=e.target.value;if(255!==t.getUint8(0)){let e=this.readByteArray(t);this.rawData={...this.rawData,[e[0]]:e.slice(1)}}else{if(this.maxBlockId=t.getUint8(1),this.checkNotificationLength()){if(this.initialNotification=this.rleFormats[this.rawData[0][0]]?this.decodeRLE(this.rawData[0]):this.rawData[0],this.logDeviceState(this.rawData),0===this.initialNotification[0]||1===this.initialNotification[0])return this.returnToUser(this.transactionCallback)(this.parseHidData(this.buildInitialDataArray(!0)));{let e=this.convertArrayToHexString([this.initialNotification[7],this.initialNotification[8]]);return this.findNotificationType(e)}}this.sendErrToCallback(this.throwLenErr())}}),ae(this,"findNotificationType",e=>{let t=this.buildInitialDataArray(!0);switch(e){case"0300":return this.logDeviceState("==Transaction Status=="),this.returnToUser(this.transactionStatusCallback)(this.parseTransactionStatus(t));case"0301":return this.logDeviceState("==Display Message Request=="),this.returnToUser(this.displayCallback)({displayMessage:this.bufferToUtf8(t.slice(11))});case"0302":return this.logDeviceState("==User Selection Request=="),this.logDeviceState(this.convertArrayToHexString(t)),this.returnToUser(this.transactionStatusCallback)(this.parseUserSelectionRequest(buildNotification));case"0303":return this.logDeviceState("==ARQC Message=="),this.returnToUser(this.transactionCallback)(this.parseEmvData(t,!0));case"0304":return this.logDeviceState("==Batch Data Message=="),this.returnToUser(this.transactionCallback)(this.parseEmvData(t,!1));default:this.logDeviceState(`Undocumented Notification ID: ${e}`,t),this.logDeviceState(this.convertArrayToHexString(t))}}),ae(this,"startTransaction",e=>new Promise((t,i)=>this.device.gatt.connected?this.sendCommandWithResp(this.buildEmvCommand(e||{})).then(a=>{let s=this.parseEmvCommandResponse(a);return this.logDeviceState(s),0===s.code?t(s):918!==s.code?i(this.buildDeviceErr(s)):this.setDeviceDateTime().then(()=>this.delayPromise(500)).then(()=>t(this.startTransaction(e)))}).catch(e=>i(this.buildDeviceErr(e))):i(this.buildDeviceErr(B)))),ae(this,"buildEmvCommand",e=>{let{timeout:t,cardType:i,transactionType:a,cashBack:s,currencyCode:r,reportVerbosity:n,emvOptions:o,authorizedAmount:c}=e;console.log(`timeout: ${t} || cardType: ${i} || transactionType: ${a} || emvOptions: ${o} || authorizedAmount: ${c} || cashBack: ${s} || currencyCode: ${r} || reportVerbosity: ${n}`);let h=[...this.emvCommandBase,t||60,i?this.cardTypes(i.toLowerCase()):3,void 0!==o?this.emvOptions[o.toLowerCase()]:128];return console.log("base command: ",h),h=c?h.concat(this.convertNumToAmount(c)):h.concat([0,0,0,0,1,0]),h=a?h.concat(this.transactionTypes[a.toLowerCase()]||0):h.concat(0),h=s?h.concat(this.convertNumToAmount(s)):h.concat(this.newArrayPartial(0,6)),h=r?h.concat(this.currencyCode[r.toLowerCase()]||this.currencyCode.default):h.concat([8,64]),h.push(n?this.statusVerbosity[n.toLowerCase()]||0:1),h}),ae(this,"readCommandValue",()=>new Promise(e=>this.commandCharacteristic.readValue().then(t=>e(this.readByteArray(t))))),ae(this,"readBatteryLevel",()=>new Promise(e=>this.sendCommandWithResp([69,0]).then(t=>e(t[2])))),ae(this,"checkNotificationLength",()=>Math.max(...Object.keys(this.rawData))===this.maxBlockId-1),ae(this,"sendCommandWithResp",e=>new Promise((t,i)=>this.commandCharacteristic?(this.logDeviceState(`Sending command: ${this.convertArrayToHexString(e)}`),this.commandSent=!0,this.commandCharacteristic.writeValue(Uint8Array.from(e)).then(()=>this.commandRespAvailable?Promise.resolve(!0):this.waitForDeviceResponse(15)).then(e=>(this.commandRespAvailable=!1,e?this.readCommandValue():i(this.buildDeviceErr(x)))).then(e=>t(e)).catch(e=>i(this.buildDeviceErr(e)))):i(this.buildDeviceErr(I)))),ae(this,"returnToUser",e=>t=>(this.initialNotification=null,this.maxBlockId=null,this.rawData={},e(t))),ae(this,"buildDateTimeCommand",e=>{let t=[73,34,0,0,3,12,0,28];t=t.concat(this.newArrayPartial(0,17));const i=e instanceof Date?e:new Date;return t.push(this.castDecToHex(i.getMonth()+1)),t.push(this.castDecToHex(i.getDate())),t.push(this.castDecToHex(i.getHours())),t.push(this.castDecToHex(i.getMinutes())),t.push(this.castDecToHex(i.getSeconds())),t.push(0),t.push(this.castDecToHex(i.getFullYear()-2008)),t=t.concat(this.newArrayPartial(0,4)),t}),ae(this,"setDeviceDateTime",e=>new Promise((t,i)=>this.sendCommandWithResp(this.buildDateTimeCommand(e)).then(e=>t(e)).catch(e=>i(this.buildDeviceErr(e))))),ae(this,"getKsn",()=>new Promise((e,t)=>this.device.gatt.connected?this.sendCommandWithResp([9,0]).then(e=>this.convertArrayToHexString(e.slice(2))).then(t=>e(t)):t(this.buildDeviceErr(R)))),ae(this,"getDeviceSn",()=>new Promise(e=>this.sendCommandWithResp([0,1,3]).then(e=>this.bufferToUtf8(e.slice(2))).then(t=>e(t)))),ae(this,"gatherDeviceInfo",()=>new Promise((e,t)=>{let i,a;this.readBatteryLevel().then(e=>(i=e,this.getDeviceSn())).then(t=>(a=t,e([i,a]))).catch(e=>t(e))})),ae(this,"getDeviceInfo",()=>new Promise((e,t)=>this.device.gatt.connected?this.gatherDeviceInfo().then(t=>e({deviceName:this.device.name,deviceType:this.deviceType,batteryLevel:t[0],serialNumber:t[1],isConnected:this.device.gatt.connected})).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(B)))),ae(this,"sendUserSelection",e=>new Promise((t,i)=>this.device.gatt.connected?this.sendCommandWithResp([73,8,0,0,3,2,0,2,0,e]).then(e=>(this.logDeviceState(`[User Selection Resp]: ${this.convertArrayToHexString(e)}`),t({userSelectionResponse:this.resultCodes[this.convertArrayToHexString(e.slice(4,6))]||"Unknown or undocumented result code"}))).catch(e=>i(this.buildDeviceErr(e))):i(this.buildDeviceErr(B)))),ae(this,"buildArpcCommand",(e,t)=>[73,e+6,0,0,3,3,0,e,...t]),ae(this,"sendArpc",e=>new Promise((t,i)=>this.sendArpcBase(e).then(e=>this.sendCommandWithResp(e)).then(e=>{this.logDeviceState(`[Send ARPC Resp]: ${this.convertArrayToHexString(e)}`);const i=e.length>5?this.convertArrayToHexString(e.slice(4,6)):"";return t({sendArpcResponse:this.resultCodes[i]||"Unknown or undocumented result code"})}).catch(e=>i(this.buildDeviceErr(e))))),ae(this,"clearGattCache",()=>{window&&window.removeEventListener("beforeunload",this.onDestroyHandler),this.maxBlockId=null,this.initialNotification=null,this.rawData={},this.dataReadStatusCharacteristic=null,this.dataReadyCharacteristic=null,this.commandCharacteristic=null,this.cardDataListener=null}),ae(this,"ceaseNotifications",()=>new Promise(e=>this.cardDataListener?this.cardDataListener.stopNotifications().then(()=>(this.cardDataListener.removeEventListener("characteristicvaluechanged",this.cardDataHandler),this.dataReadStatusCharacteristic.stopNotifications())).then(()=>(this.dataReadyCharacteristic.removeEventListener("characteristicvaluechanged",this.dataReadyHandler),e())):e())),ae(this,"cancelTransaction",()=>new Promise((e,t)=>this.commandCharacteristic?this.commandCharacteristic.writeValue(this.cancelEmvCommand).then(()=>e()).catch(e=>t(this.buildDeviceErr(e))):t(this.buildDeviceErr(I)))),ae(this,"closeDevice",()=>new Promise((e,t)=>this.device.gatt.connected?this.ceaseNotifications().then(()=>(this.clearGattCache(),this.disconnect())).then(()=>e({code:0,message:"Device Closed"})).catch(e=>t(this.buildDeviceErr(e))):e({code:0,message:"Device Closed"}))),ae(this,"clearSession",()=>new Promise((e,t)=>this.device&&this.device.gatt.connected?e("SCRA devices do not carry a session"):t(this.buildDeviceErr(B)))),this.transactionCallback=t.transactionCallback||t,this.displayCallback=t.displayCallback,this.transactionStatusCallback=t.transactionStatusCallback,this.userSelectionCallback=t.userSelectionCallback,this.maxBlockId=null,this.initialNotification=null,this.rawData={},this.dataReadStatusCharacteristic=null,this.dataReadyCharacteristic=null,this.commandCharacteristic=null,this.cardDataListener=null,this.cardDataNotification="0508e6f8-ad82-898f-f843-e3410cb60201",this.commandCharId="0508e6f8-ad82-898f-f843-e3410cb60200",this.dataReadyId="0508e6f8-ad82-898f-f843-e3410cb60202",this.dataReadStatusId="0508e6f8-ad82-898f-f843-e3410cb60203",this.emvOptions=Object.freeze({normal:0,bypasspin:1,forceonline:2,quickchip:128,pinbypassquickchip:129,forceonlinequickchip:130}),this.resultCodes=Object.freeze({"0000":"Success","038B":"Invalid Selection Status","038C":"Invalid Selection Result","038D":"Failure, no transaction currently in progress","038F":"Failure, transaction already in progress"}),this.emvCommandBase=[73,25,0,0,3,0,0,19],this.cancelEmvCommand=Uint8Array.of(73,6,0,0,3,4,0,0)}};function re(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ne=class extends se{constructor(e,t){super(e,t),re(this,"getCardService",()=>new Promise((e,t)=>this.getCardServiceBase(1).then(t=>e(t)).catch(e=>t(this.buildDeviceErr(e))))),re(this,"requestCardSwipe",()=>new Promise((e,t)=>this.device.gatt.connected?e({code:0,message:d}):this.getCardServiceBase(1).then(()=>e({code:0,message:d})).catch(e=>t(this.buildDeviceErr(e))))),this.deviceType="eDynamo"}};function oe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ce=class extends se{constructor(e,t){super(e,t),oe(this,"getCardService",()=>new Promise((e,t)=>this.getCardServiceBase().then(t=>e(t)).catch(e=>t(this.buildDeviceErr(e))))),oe(this,"requestCardSwipe",()=>new Promise((e,t)=>this.device.gatt.connected?this.sendCommandWithResp(this.setHeadAlwaysOn).then(i=>0===parseInt(i)?e({code:0,message:d}):t(this.buildDeviceErr(M))).catch(e=>t(e)):this.getCardServiceBase().then(()=>this.sendCommandWithResp(this.setHeadAlwaysOn)).then(i=>0===parseInt(i)?e({code:0,message:d}):t(this.buildDeviceErr(M))).catch(e=>t(e)))),this.setHeadAlwaysOn=[88,1,1],this.deviceType="tDynamo"}};const he=e=>()=>Promise.resolve(`${e?"SCRA":"PinPad"} devices do not use this command`);class de{constructor(e){let{getCardService:t,startTransaction:i,cancelTransaction:a,sendCommandWithResp:s,clearSession:r,closeDevice:n,getDeviceInfo:o,requestCardSwipe:c,isDeviceConnected:h,disconnect:d,requestPinEntry:l,setDisplayMessage:u,sendUserSelection:m,sendArpc:v,setDeviceDateTime:p}=e;this.openDevice=t,this.startTransaction=i,this.cancelTransaction=a,this.sendCommand=s,this.clearSession=r,this.closeDevice=n,this.deviceInfo=o,this.requestCardSwipe=c,this.isDeviceOpen=h,this.forceDisconnect=d,this.requestPinEntry=l||he(!0),this.setDisplayMessage=u||he(!0),this.sendUserSelection=m||he(),this.sendArpcResponse=v||(()=>Promise.resolve("Feature Pending Completion")),this.setDeviceDateTime=p||he()}}const le={eDynamo:(e,t)=>new ne(e,t),tDynamo:(e,t)=>new ce(e,t),dynaProGo:(e,t)=>new Y(e,t),[l]:(e,t)=>new _(e,t)},ue=(e,t,i)=>({id:e.id,name:e.name,deviceType:i,deviceInterface:new de(le[i](e,t))}),me=new RegExp(/^eDynamo-/),ve=new RegExp(/^tDynamo-/),pe=new RegExp(/^DPMini/),ge=new RegExp(/^DPG/),Ce=(e,t)=>{if(t){const e=(e=>{const t=["dynaProGo",l,"eDynamo","tDynamo"];let i="";for(let a=0;a<t.length;a++)if(e.toLowerCase()===t[a].toLowerCase()){i=t[a];break}return i})(t);if(console.log("[!!]: ",e),e)return e}return i=e,ve.test(i)?"tDynamo":me.test(i)?"eDynamo":ge.test(i)?"dynaProGo":pe.test(i)?l:"";var i},fe=(e,t,i)=>new Promise((a,n)=>{if("object"==typeof e&&void 0===e.transactionCallback)return n("When providing multiple callbacks in an object, 'transactionCallback' must be provided");e=(e=>{const t="function"==typeof(e=e||(e=>{console.warn("Callback not provided to 'scanForDevices' function. Please provide at least one callback function to this method"),console.log("transactionCallback data: ",e)})),i=i=>e[i]?e[i]:t?e:e.transactionCallback;return e.errorCallback=e.errorCallback||(e=>console.error("[MagensaBluetooth Internal Error]: ",e)),e.transactionStatusCallback=e.transactionStatusCallback||i("transactionStatusCallback"),e.userSelectionCallback=e.userSelectionCallback||i("userSelectionCallback"),e.displayCallback=e.displayCallback||i("displayCallback"),e.disconnectHandler=e.disconnectHandler||i("transactionCallback"),e})(e);const o=t?(e=>({filters:[{namePrefix:e}],optionalServices:["0508e6f8-ad82-898f-f843-e3410cb60104","0508e6f8-ad82-898f-f843-e3410cb60103","0508e6f8-ad82-898f-f843-e3410cb60101","0508e6f8-ad82-898f-f843-e3410cb60202","device_information"],keepRepeatedDevices:!1,acceptAllAdvertisements:!1}))(t):r;return navigator.bluetooth.requestDevice(o).then(t=>{const s=Ce(t.name,i);return s?a(ue(t,e,s)):(r=t,new Promise((e,t)=>{let i;return r.gatt.connect().then(e=>e.getPrimaryService("device_information")).then(e=>e.getCharacteristic("model_number_string")).then(e=>e.readValue()).then(e=>(i=new TextDecoder("utf-8").decode(e).trim(),Promise.resolve(r.gatt.disconnect()))).then(()=>e(i)).catch(i=>i.code===A.errorCode&&i.name===A.errorName&&i.message.includes("0000180a-0000-1000-8000-00805f9b34fb")?r.gatt.connected?Promise.resolve(r.gatt.disconnect()).then(()=>e("dynaProGo")):e("dynaProGo"):t(i))})).then(i=>i?a(ue(t,e,i)):n("Selected device is not supported")).catch(e=>n(e));var r}).catch(e=>n("object"==typeof e?new s(e):"Selected device is not supported"))})}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZXJyb3JIYW5kbGVyL2FwaUVycm9yLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2NvbmZpZ3VyYXRpb25zL2luZGV4LmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3V0aWxzL2luZGV4LmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3BhcnNlcnMvc3dpcGVQYXJzZXIuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3BhcnNlcnMvZW12UGFyc2VyLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2Vycm9ySGFuZGxlci9sZW5ndGhFcnJvci5qcyIsIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC8uL3NyYy9lcnJvckhhbmRsZXIvZGV2aWNlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZXJyb3JIYW5kbGVyL2luZGV4LmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2Vycm9ySGFuZGxlci9lcnJDb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZGV2aWNlcy9iYXNlQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvdXRpbHMvcGluVXRpbHMuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvcGFyc2Vycy9waW5Db25maWd1cmF0aW9uLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3BhcnNlcnMvcGluU3RhdHVzUGFyc2VyLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2RldmljZXMvcGluUGFkLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2RldmljZXMvZHluYVByb01pbmkuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZGV2aWNlcy9keW5hUHJvR28uanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvcGFyc2Vycy9zY3JhU3dpcGVQYXJzZXIuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvcGFyc2Vycy90cnhTdGF0dXNQYXJzZXIuanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvcGFyc2Vycy9zY3JhRW12UGFyc2VyLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2RldmljZXMvc2NyYS5qcyIsIndlYnBhY2s6Ly9tYWdlbnNhLWJsdWV0b290aC8uL3NyYy9kZXZpY2VzL2VEeW5hbW8uanMiLCJ3ZWJwYWNrOi8vbWFnZW5zYS1ibHVldG9vdGgvLi9zcmMvZGV2aWNlcy90RHluYW1vLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3V0aWxzL2luc3RhbmNpYXRlRGV2aWNlLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL3V0aWxzL2lkZW50aWZ5RGV2aWNlLmpzIiwid2VicGFjazovL21hZ2Vuc2EtYmx1ZXRvb3RoLy4vc3JjL2RldmljZUVudHJ5LmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJBcGlFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiY29kZSIsInN1cGVyIiwidGhpcyIsImFsbERldmljZUNvbmZpZyIsImZpbHRlcnMiLCJzZXJ2aWNlcyIsIm9wdGlvbmFsU2VydmljZXMiLCJrZWVwUmVwZWF0ZWREZXZpY2VzIiwiYWNjZXB0QWxsQWR2ZXJ0aXNlbWVudHMiLCJVdGlsaXRpZXMiLCJsb2dJbmZvIiwibG9nRXZlbnQiLCJDdXN0b21FdmVudCIsImJ1YmJsZXMiLCJkZXRhaWwiLCJkaXNwYXRjaEV2ZW50IiwiYXJyYXkiLCJBcnJheSIsImZyb20iLCJieXRlIiwidG9TdHJpbmciLCJzbGljZSIsImpvaW4iLCJ0b1VwcGVyQ2FzZSIsInR3b0J5dGVzIiwiYXJyYXlCdWZmZXIiLCJUZXh0RGVjb2RlciIsImRlY29kZSIsIlVpbnQ4QXJyYXkiLCJudW0iLCJwYXJzZUludCIsInJlcGV0aXRpb25zIiwiZmlsbCIsImRhdGFWaWV3IiwidmFsdWVBcnJheSIsImJ5dGVMZW5ndGgiLCJwdXNoIiwiZ2V0VWludDgiLCJoZXhTdHJpbmciLCJhc2NpaVJlc3AiLCJsZW5ndGgiLCJzdWJzdHIiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJ0cmltIiwiaGV4U3RyIiwiYnl0ZXMiLCJjdXJyZW50IiwiYXJyYXlTZWdtZW50IiwicmV0dXJuU2VnbWVudCIsIm5leHRJbmRleCIsImluaXRpYWxMZW5ndGgiLCJuZXdBcnJheVBhcnRpYWwiLCJjaGVja0ZvclJsZSIsInJldHVybkFycmF5IiwiTWF0aCIsIm1pbiIsImtleXMiLCJyYXdEYXRhIiwibWF4QmxvY2tJZCIsImNvbmNhdCIsImNoZWNrUmxlIiwicmxlRm9ybWF0cyIsImluaXRpYWxOb3RpZmljYXRpb24iLCJkZWNvZGVSTEUiLCJjdXJyZW5jeVN0cmluZyIsImN1cnJlbmN5IiwidG9Mb3dlckNhc2UiLCJzdHJpbmdOdW0iLCJyZXR1cm5BcnIiLCJkZWxheSIsInBhc3NlZFZhbHVlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZnJlZXplIiwiMCIsIlN3aXBlUGFyc2VyIiwic3RyaW5nRGF0YSIsImJ1ZmZlclRvVXRmOCIsImluZGV4T2YiLCJmb3JtYXR0ZWRTdHJpbmciLCJzcGxpdEV4cFBBTiIsIm1hc2tlZFBBTiIsIkxhc3Q0IiwiZXhwaXJhdGlvbkRhdGUiLCJzZXJ2aWNlQ29kZSIsImV4cFBBTiIsInJlcGxhY2UiLCJzcGxpdCIsImV4cCIsImZvcm1hdHRlZEV4cCIsInN3aXBlTGlzdGVuaW5nIiwiZHBNaW5pIiwiY29uZmlnU3RyIiwibm9TZXNzaW9uVG9DbGVhciIsImdhdHRCdXN5Iiwic3VjY2Vzc2Z1bENsb3NlIiwiY2FyZFR5cGVBbGwiLCJjYXJkVHlwZXNPYmoiLCJFbXZQYXJzZXIiLCJkYXRhIiwiaXNNc3IiLCJpVGFnIiwiYnl0ZVZhbHVlIiwibGVuZ3RoVmFsdWUiLCJkYXRhTGVuZ3RoIiwicmVzdWx0IiwiaVRMViIsImJUYWciLCJ0YWdCeXRlcyIsIlRhZ0J1ZmZlciIsImJNb3JlVGFnQnl0ZXMiLCJtb3JlVGFnQnl0ZXNGbGFnMSIsIm1vcmVUYWdCeXRlc0ZsYWcyIiwiY29udmVydEFycmF5VG9IZXhTdHJpbmciLCJtb3JlTGVuZ3RoRmxhZyIsIm5MZW5ndGhCeXRlcyIsIm9uZUJ5dGVMZW5ndGhNYXNrIiwiaUxlbiIsInRhZ0J5dGUiLCJsZW4iLCJ2YWx1ZUJ5dGVzIiwiaGV4T3JBc2NpaUZvcm1hdHRlciIsImNvbnN0cnVjdGVkRmxhZyIsInRyeFN0YXR1c1RvU3RyaW5nIiwiaGV4VG9Bc2NpaSIsInN1YnN0cmluZyIsIkxlbmd0aEVycm9yIiwiRGV2aWNlRXJyb3IiLCJFcnJvckhhbmRsZXIiLCJjYWxsYmFja3MiLCJlcnIiLCJET01FeGNlcHRpb24iLCJlcnJvckNhbGxiYWNrIiwibm90Rm91bmRPYmoiLCJlcnJvckNvZGUiLCJlcnJvck5hbWUiLCJhcGlOZXR3b3JrRXJyIiwiZGV2aWNlTm90Rm91bmQiLCJnYXR0U2VydmVyTm90Q29ubmVjdGVkIiwiY29tbWFuZE5vdFNlbnQiLCJkZXZpY2VOb3RPcGVuIiwiY29tbWFuZE5vdFNlbnRGcm9tSG9zdCIsInJlYWRGYWlsZWQiLCJyZXNwb25zZU5vdFJlY2VpdmVkIiwiZ2V0U2VydmljZUZhaWwiLCJjb21tYW5kTm90QWNjZXB0ZWQiLCJEZXZpY2VCYXNlIiwiZGV2aWNlIiwiY2FyZFR5cGVTdHIiLCJkZXZpY2VUeXBlIiwicmVqZWN0IiwibG9nRGV2aWNlU3RhdGUiLCJEYXRlIiwiZ2F0dCIsImNvbm5lY3QiLCJ0aGVuIiwic2VydmVyIiwiZ2F0dFNlcnZlciIsImJ1aWxkRGV2aWNlRXJyIiwiY29ubmVjdGVkIiwiZGlzY29ubmVjdCIsInNlcnZpY2VJbmRleCIsImZpbmRQcmltYXJ5U2VydmljZSIsInNlcnZpY2UiLCJjYXRjaCIsImdldFByaW1hcnlTZXJ2aWNlIiwiZGV2aWNlVVVJRHMiLCJjYXJkU2VydmljZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJkaXNjb25uZWN0SGFuZGxlciIsIm9wdGlvbmFsSW5kZXgiLCJ0cnlUb0Nvbm5lY3QiLCJ0cnlDb3VudCIsImlubmVyUmVzb2x2ZSIsImlubmVyUmVqZWN0IiwiY2FjaGVDYXJkU2VydmljZUJhc2UiLCJjYWNoZVNlcnZpY2VSZXNwIiwiY2xlYXJHYXR0Q2FjaGUiLCJhcnBjUmVzcCIsImFjY2VwdGFibGVUeXBlcyIsImRhdGFMZW4iLCJpbnB1dERhdGEiLCJoZXhUb0J5dGVzIiwiYnVpbGRBcnBjQ29tbWFuZCIsIm1heFRyaWVzIiwid2FpdEZvclJlc3BvbnNlIiwidHJ5TnVtYmVyIiwiY29tbWFuZFJlc3BBdmFpbGFibGUiLCJldmVudCIsImRpc2Nvbm5lY3RDYWxsYmFjayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzdGF0dXNWZXJib3NpdHkiLCJjdXJyZW5jeUNvZGUiLCJ0cmFuc2FjdGlvblR5cGVzIiwiUGluVXRpbHMiLCJjYWxsQmFja3MiLCJiaW5hcnlOdW0iLCJudWxsVGVybWluYXRlZEFycmF5IiwidGFyZ2V0SW5kZXgiLCJtYXhMZW4iLCJtaW5MZW4iLCJtYXhMZW5ndGgiLCJtaW5MZW5ndGgiLCJsYW5ndWFnZVNlbGVjdGlvbiIsIndhaXRNZXNzYWdlIiwidmVyaWZ5UGluIiwicGluQmxvY2tGb3JtYXQiLCJsYW5ndWFnZVByb21wdHMiLCJiaW5hcnlSZXN1bHQiLCJkaXNhYmxlZCIsIlBhcnNlUGluQ29uZmlnIiwiY29uZmlnQXJyIiwiZmlyc3REZXZpY2VDb250cm9sQnl0ZSIsImRlY2ltYWxUb0JpbmFyeSIsInNlY29uZERldmljZUNvbnRyb2xCeXRlIiwibWFza0NvbmZpZ3VyYXRpb25CeXRlIiwibXNyQ29uZmlndXJhdGlvbkJ5dGUiLCJtYXNrQ2hhcmFjdGVyIiwiZmluZE1hc2tDaGFyYWN0ZXIiLCJsZWFkaW5nVW5tYXNrZWRMZW5ndGgiLCJ0cmFpbGluZ1VubWFza2VkTGVuZ3RoIiwiZW12TDJJY3NDb25maWciLCJlbXZMMkNvbmZpZ09wdGlvbnMiLCJjb250YWN0bGVzc0NvbmZpZyIsImNvbnRhY3RsZXNzQnl0ZSIsImNvbnRhY3RsZXNzU3VwcG9ydCIsImVuYWJsZWRCcmFuZHMiLCJjb250YWN0bGVzc0d1aUNvbnRyb2xzIiwibnVtQ2hhciIsIm51bUNoYXJUb0hleCIsIm51bUNoYXJUb0FzY2lpIiwiZGV2aWNlQ29udHJvbEJ5dGUiLCJyZXF1aXJlTXV0dWFsQXV0aCIsInN0cmluZ051bVRvQm9vbCIsIm1zckVuY3J5cHRpb25WYXJpYW50IiwiaXNDbGVhclRleHRFbmFibGVkIiwiaXNCZWVwZXJNb2RlRW5hYmxlZCIsImlzQml0bWFwTG9ja2VkIiwiaXNDb25maWd1cmF0aW9uTG9ja2VkIiwiZGV2aWNlQ3RybEJ5dGUiLCJpc0FycGNNYWNFbmFibGVkIiwiaXNGaW5hbmNpYWxJY2NDYXJkVHlwZVJlcG9ydGluZ0VuYWJsZWQiLCJhcnFjQmF0Y2hEYXRhT3V0cHV0Rm9ybWF0IiwibWFza0NvbmZpZ0J5dGUiLCJpc0lzb01hc2tFbmFibGVkIiwiaXNDaGVja0RpZ2l0RW5hYmxlZCIsImlzTXMyUG9pbnQwRW5hYmxlZCIsIm1zckNvbmZpZ0J5dGUiLCJpc0FBTVZBY2FyZEVuYWJsZWQiLCJ0cmFjazNEYXRhIiwidHJhY2tEYXRhT3B0aW9ucyIsInRyYWNrMkRhdGEiLCJ0cmFjazFEYXRhIiwiUGluU3RhdHVzUGFyc2VyIiwiY2FyZEhvbGRlclN0YXR1c0J5dGUiLCJlbXZDYXJkaG9sZGVyU3RhdHVzIiwiY2FyZGhvbGRlclN0YXR1c0lkcyIsInN0YXR1c0lkIiwib3BlcmF0aW9uU3RhdHVzIiwiZGlzcGxheVN0YXR1cyIsImZpbmRPcGVyYXRpb25TdGF0dXMiLCJjb21tYW5kUmVzcCIsImNvbnNvbGUiLCJsb2ciLCJyZXF1ZXN0ZWRTbiIsInNlcmlhbE51bWJlciIsImZpbmROdWxsVGVybWluYXRlZFN0cmluZyIsImdldFNlcmlhbE51bWJlciIsInJlcXVlc3RlZEtzbiIsImtzbiIsImdldEtzbkF2YWlsYWJsZSIsImJpZ0Jsb2NrRGF0YSIsImFycWNBcnJpdmluZyIsImFycWNUb3RhbExlbiIsInJlYWRUd29CeXRlTGVuZ3RoIiwiYmF0Y2hEYXRhQXJyaXZpbmciLCJiYXRjaFRvdGFsTGVuIiwidHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayIsImJ1ZmZlclR5cGUiLCJidWZmZXJUeXBlcyIsImFycWMiLCJidWlsZEluaXRpYWxEYXRhQXJyYXkiLCJkYXRhRm9yQXJxYyIsImNhcmREYXRhT2JqIiwiYXJxY0RhdGEiLCJhcnFjRGF0YVBhcnNlZCIsInRsdlBhcnNlciIsImlzUXVpY2tDaGlwVHJhbnNhY3Rpb24iLCJ0cmFuc2FjdGlvbkNhbGxiYWNrIiwiYmF0Y2giLCJkYXRhRm9yQmF0Y2giLCJ0cmFuc2FjdGlvbkhhc1N0YXJ0ZWQiLCJwYXJzZWRCYXRjaERhdGEiLCJpc1NpZ25hdHVyZVJlcXVpcmVkIiwiZmluZCIsInRhZyIsImJhdGNoRGF0YSIsImJhdGNoRGF0YVBhcnNlZCIsInNpZ25hdHVyZVJlcXVpcmVkIiwiaGFuZGxlQXJxY0JpZ0Jsb2NrRmluaXNoIiwiaGFuZGxlQmF0Y2hCaWdCbG9ja0ZpbmlzaCIsImNhcmRob2xkZXJSZXNwIiwiZmluZEVtdkNhcmRob2xkZXJTdGF0dXMiLCJhbW91bnRDb25maXJtZWQiLCJhcHBsaWNhdGlvbk9yTGFiZWxOYW1lIiwibWV0aG9kU2VsZWN0ZWQiLCJ0bHZEYXRhIiwidW5kb2N1bWVudGVkRGF0YSIsImNhcmRTdGF0dXMiLCJjYXJkVHlwZSIsImNhcmRUeXBlc0VudW0iLCJhY2tSZXNwIiwiQUNLU1RTIiwiY29tbWFuZFR5cGUiLCJwaW5Db21tYW5kSWRzIiwiZGV2aWNlUmVzcCIsImRldmljZVN0YXRlIiwic2Vzc2lvblN0YXRlIiwicGFyc2VTZXNzaW9uU3RhdGUiLCJkZXZpY2VTdGF0dXMiLCJwYXJzZURldmljZVN0YXR1cyIsImRldmljZUNlcnRTdGF0dXMiLCJwYXJzZUNlcnRTdGF0dXMiLCJoYXJkd2FyZVN0YXR1cyIsInBhcnNlSGFyZHdhcmVTdGF0dXMiLCJhZGRpdGlvbmFsSW5mbyIsInBhcnNlQWRkaXRpb25hbEluZm8iLCJiaW5hcnlTdHJpbmciLCJwb3dlckRpZENoYW5nZSIsImNhcmREYXRhSXNBdmFpbGFibGUiLCJwYW5QYXJzZWRGcm9tQ2FyZCIsImV4dGVybmFsUGFuU2VudCIsImFtb3VudFdhc1NlbnQiLCJtc3JDcmxDZXJ0RXhpc3RzIiwicGluQ3JsQ2VydEV4aXN0cyIsIm1mZ1VuYmluZENlcnRFeGlzdHMiLCJtc3JDYUNlcnRFeGlzdHMiLCJwaW5DYUNlcnRFeGlzdHMiLCJkZXZpY2VDYUNlcnRFeGlzdHMiLCJkZXZpY2VDZXJ0RXhpc3RzIiwicGluS2V5U3RhdHVzIiwicGluS2V5U3RhdHVzRW51bSIsIm1zcktleVN0YXR1cyIsIm1zcktleVN0YXR1c0VudW0iLCJ0YW1wZXJEZXRlY3RlZCIsImlzQXV0aGVudGljYXRlZCIsImRldmljZUVycm9yRGV0ZWN0ZWQiLCJJRTNfb25seSIsIlNSRUQiLCJNYWdIZWFkSXNQcm9ncmFtbWVkIiwidGFtcGVyU2Vuc29yc0FyZUFjdGl2ZSIsIklDQ19BY3F1aXJlck1hc3RlcktleUlzSW5qZWN0ZWQiLCJJQ0NfU2Vzc2lvbktleUlzQWN0aXZlIiwiQ0FQS19FbXZEYXRhYmFzZUlzQ29ycnVwdGVkIiwiRW12VGVybWluYWxEYXRhYmFzZUlzQ29ycnVwdGVkIiwiY2FyZElzUHJlc2VudEluQ2hpcENhcmRDb25uZWN0b3IiLCJwYXJ0aWFsTm90aWZpY2F0aW9uIiwidHJhY2tLZXkiLCJjYXJkRGF0YUlkcyIsInN0YXR1c0VudW0iLCJvayIsImZvcm1hdEV4cFBBTiIsIm1hZ25lUHJpbnRTdGF0dXMiLCJjb252ZXJ0U3RhdHVzVG9TdHJpbmciLCJwaW5SZXNwIiwicGluRGF0YSIsInBpbktzbiIsImVuY3J5cHRlZFBpbkJsb2NrIiwic2VsZWN0aW9uUmVzcCIsImRldmljZUtleXMiLCJrZXlQcmVzc2VkIiwicGluRGlzcGxheU1lc3NhZ2VzIiwiZW1wdHkiLCJlcnJvciIsIlBpblBhZCIsInBhcmVudFJlc29sdmUiLCJwYXJlbnRSZWplY3QiLCJjb25uZWN0QW5kQ2FjaGUiLCJnZXRDaGFyYWN0ZXJpc3RpYyIsImRldmljZVRvSG9zdExlbiIsImNoYXJhY3RlcmlzdGljIiwic3RhcnROb3RpZmljYXRpb25zIiwiZGF0YVdhdGNoZXIiLCJjYXJkRGF0YUxpc3RlbmVyIiwiZGV2aWNlVG9Ib3N0RGF0YSIsInJlY2VpdmVEYXRhQ2hhciIsImRldmljZUZyb21Ib3N0TGVuIiwic2VuZExlblRvRGV2aWNlIiwiZGV2aWNlRnJvbUhvc3REYXRhIiwiY29tbWFuZENoYXJhY3RlcmlzdGljIiwib25EZXN0cm95SGFuZGxlciIsImRlbGF5UHJvbWlzZSIsImRhdGFFdmVudCIsInRhcmdldCIsImNvbW1hbmRTZW50IiwicmVhZENvbW1hbmRSZXNwIiwicmVhZFZhbHVlIiwicmVhZFZhbHVlSGFuZGxlciIsInJlYWRCeXRlQXJyYXkiLCJyZXBvcnRJZHMiLCJyZXNwb25zZUFjayIsInBhcnNlQWNrUmVzcG9uc2UiLCJkZXZpY2VTdGF0ZVJlcG9ydCIsImhhbmRsZURldmljZVN0YXRlUmVwb3J0IiwiY2FyZFN0YXR1c1JlcG9ydCIsImhhbmRsZUNhcmRTdGF0dXNSZXBvcnQiLCJjYXJkRGF0YVJlcG9ydCIsImhhbmRsZUNhcmREYXRhUmVwb3J0IiwiaGFuZGxlQ2FyZGhvbGRlclN0YXR1c1JlcG9ydCIsImVtdkNvbXBsZXRpb24iLCJoYW5kbGVFbXZDb21wbGV0aW9uIiwiaGFuZGxlQmlnQmxvY2tEYXRhIiwiZ2V0S3NuIiwiZm9ybWF0S3NuQW5kU24iLCJyZXF1ZXN0U24iLCJmb3JtYXRTZXJpYWxOdW1iZXIiLCJkZXZpY2VDb25maWciLCJwYXJzZURldmljZUNvbmZpZ3VyYXRpb24iLCJwaW5SZXNwb25zZSIsInBhcnNlUGluUmVzcG9uc2UiLCJzZWxlY3Rpb25SZXNwb25zZSIsInBhcnNlQ2FyZGhvbGRlclJlc3BvbnNlIiwiZGlzcGxheVJlc3AiLCJwYXJzZUVtdkNvbXBsZXRpb24iLCJoYW5kbGVCaWdCbG9ja0JlZ2luIiwibWF4IiwiaGFuZGxlQmlnQmxvY2tGaW5pc2giLCJwYXJzZUVtdkNhcmRob2xkZXJJbnRlcmFjdGlvblN0YXR1cyIsInBhcnNlQ2FyZFN0YXR1c1JlcG9ydCIsInN3aXBlSGFzQmVndW4iLCJzZW5kQ29tbWFuZFdpdGhSZXNwIiwic2VuZEVyclRvQ2FsbGJhY2siLCJkYXRhR2F0aGVyZWQiLCJzd2lwZURhdGEiLCJwYXJzZURldmljZVN0YXRlUmVwb3J0IiwicGFyc2VDYXJkRGF0YSIsInN3aXBlT3B0aW9ucyIsImNsZWFyU2Vzc2lvbkNtZCIsImJ1aWxkU3dpcGVDb21tYW5kIiwicmVzcCIsInRpbWVvdXQiLCJpc0ZhbGxiYWNrIiwidG9uZUNob2ljZSIsImRpc3BsYXlUeXBlIiwiZGlzcGxheVR5cGVzIiwiZW12T3B0aW9ucyIsImJ1aWxkRW12Q29tbWFuZCIsInBpblRpbWVvdXQiLCJ0cmFuc2FjdGlvblR5cGUiLCJjYXNoQmFjayIsImlzUXVpY2tDaGlwIiwiYXV0aG9yaXplZEFtb3VudCIsImNvbW1hbmQiLCJjYXJkVHlwZXMiLCJjb252ZXJ0TnVtVG9BbW91bnQiLCJwaW5PcHRpb25zIiwiYnVpbGRQaW5Db21tYW5kIiwibWF4UGluTGVuZ3RoIiwibWluUGluTGVuZ3RoIiwicGluRGlzcGxheU9wdGlvbnMiLCJwaW5DbWQiLCJmaW5kUGluTGVuZ3RoIiwiYnVpbGRQaW5PcHRpb25zQnl0ZSIsInNlbmRCaWdCbG9ja0RhdGEiLCJkYXRhVHlwZSIsImJsb2NrWmVybyIsImxlZ2FjeURhdGEiLCJzZW5kUGluQ29tbWFuZCIsInNlbmRFeHRlbmRlZEJpZ0Jsb2NrRGF0YSIsImJlZ2luUXVlUmVzcCIsIm51bWJlck9mQmxvY2tzIiwiY2VpbCIsIndvcmtpbmdPblByb21pc2UiLCJjb21tYW5kQmxvY2tzIiwiYmVnaW5RdWV1ZSIsImJlZ2luUXVldWVSZXNvbHZlIiwiYmVnaW5RdWV1ZVJlamVjdCIsImRhdGFCbG9jayIsInNoaWZ0IiwicHJvbWlzZSIsImVucXVldWUiLCJibG9jayIsImRhdGFGb3JCbG9jayIsImJsb2NrQ21kIiwic2VuZEFycGNCYXNlIiwiYXJwY0NtZCIsIndyaXRlQ29tbWFuZCIsIndyaXRlVmFsdWUiLCJvZiIsIndhaXRGb3JEZXZpY2VSZXNwb25zZSIsIndhaXRSZXNwIiwidHJ5Q29tbWFuZEFnYWluIiwicmVzcG9uc2UiLCJzdG9wTm90aWZpY2F0aW9ucyIsImNsZWFyU2Vzc2lvbiIsImNsb3NlUGluRGV2aWNlIiwiZW5kU2Vzc2lvbiIsInJlcXVlc3RDYXJkU3dpcGUiLCJEcE1pbmkiLCJnYXRoZXJEZXZpY2VJbmZvIiwiZGV2aWNlSW5mbyIsImNoZWNrSWZEZXZpY2VJZGxlIiwiZ2V0RGV2aWNlSW5mb1Byb2NlZWQiLCJkZXZpY2VOYW1lIiwiaXNDb25uZWN0ZWQiLCJ3YWl0Rm9yU24iLCJyZXR1cm5TbiIsImdldERldmljZUluZm9CYXNlIiwiRHluYVByb0dvIiwiZGlzcGxheU9wdGlvbnMiLCJidWlsZERpc3BsYXlDbWQiLCJjbWQiLCJkaXNwbGF5VGltZSIsIm1lc3NhZ2VJZCIsImZpZWxkTmFtZSIsIlNjcmFTd2lwZVBhcnNlciIsIm9mZnNldCIsInRyYWNrMURlY29kZVN0YXR1cyIsInRyYWNrMkRlY29kZVN0YXR1cyIsInRyYWNrM0RlY29kZVN0YXR1cyIsInRyYWNrMUxlbiIsInRyYWNrMkxlbiIsInRyYWNrM0xlbiIsImNhcmRFbmNvZGVUeXBlIiwidHJhY2sxU3RhcnQiLCJ0cmFjazFFbmQiLCJ0cmFjazJTdGFydCIsInRyYWNrMkVuZCIsInRyYWNrM1N0YXJ0IiwidHJhY2szRW5kIiwibWFnbmVQcmludFN0YXR1c1N0YXJ0IiwibWFnbmVQcmludFN0YXR1c0VuZCIsIm1hZ25lUHJpbnRMZW4iLCJtYWduZVByaW50U3RhcnQiLCJtYWduZVByaW50RW5kIiwic2VyaWFsTnVtYmVyU3RhcnQiLCJzZXJpYWxOdW1iZXJFbmQiLCJkZXZpY2VFbmNTdGF0dXNTdGFydCIsImRldmljZUVuY1N0YXR1c0VuZCIsImtzblN0YXJ0Iiwia3NuRW5kIiwidHJhY2sxTWFza2VkTGVuIiwidHJhY2syTWFza2VkTGVuIiwidHJhY2szTWFza2VkTGVuIiwidHJhY2sxTWFza2VkU3RhcnQiLCJ0cmFjazFNYXNrZWRFbmQiLCJ0cmFjazJNYXNrZWRTdGFydCIsInRyYWNrMk1hc2tlZEVuZCIsInRyYWNrM01hc2tlZFN0YXJ0IiwidHJhY2szTWFza2VkRW5kIiwiZW5jU2Vzc2lvbklkU3RhcnQiLCJlbmNTZXNzaW9uSWRFbmQiLCJ0cmFjazFBYnNMZW4iLCJ0cmFjazJBYnNMZW4iLCJ0cmFjazNBYnNMZW4iLCJtYWduZVByaW50QWJzTGVuIiwidHJhY2tQb3NpdGlvbnMiLCJ0cmFja0luZGljZXMiLCJ0cmFja0luZm8iLCJkYXRhTmFtZXMiLCJmb3JFYWNoIiwiZGF0YVByb3AiLCJ0cmFja0RhdGEiLCJmb3JtYXRUcmFjazJNYXNrZWQiLCJmb3JtYXRUcmFja1dpdGhEZWNvZGUiLCJpbmNsdWRlcyIsInRyYWNrMk1hc2tlZCIsImRlY29kZVN0YXR1c1ZhbHVlIiwidHJhY2tWYWx1ZSIsIlRyeFN0YXR1c1BhcnNlciIsIm5vdGlmaWNhdGlvbiIsIm5ld05vdGlmaWNhdGlvbiIsInBhcnNlTm90aWZpY2F0aW9ucyIsInRocm93TGVuRXJyIiwibm90aWZpY2F0aW9uU2xpY2UiLCJuZXdOb3RpZmljYXRpb25TbGljZSIsIm5vdGlmaWNhdGlvbkxlbmd0aCIsIm5vdGlmaWNhdGlvbkNvbnRlbnQiLCJ0cnhTdGF0dXNDb2RlIiwidHJ4UHJvZ3Jlc3NDb2RlIiwidHJhbnNhY3Rpb25TdGF0dXMiLCJzdGF0dXNDb2RlIiwic3RhdHVzTXNnIiwiVHJ4U3RhdHVzRW51bSIsInByb2dyZXNzQ29kZSIsInByb2dyZXNzTXNnIiwiVHJ4UHJvZ3Jlc3NJbmRpY2F0b3IiLCJTY3JhRW12UGFyc2VyIiwiZW12RGF0YSIsImlzQXJxYyIsInJlc3VsdENvZGUiLCJlbXZSZXN1bHRDb2RlcyIsInNlbGVjdGlvblJlcXVlc3QiLCJ1c2VyU2VsZWN0aW9uUmVxdWVzdCIsInNlbGVjdGlvblR5cGUiLCJ0aW1lUmVtYWluaW5nIiwibWVudUl0ZW1zIiwiZHVrcHRGYWlsdXJlQmFzZSIsImludmFsaWRCYXNlIiwiU2NyYSIsImNhcmREYXRhTm90aWZpY2F0aW9uIiwiY2FyZERhdGFIYW5kbGVyIiwiY29tbWFuZENoYXJJZCIsImRhdGFSZWFkeUlkIiwiZGF0YVJlYWR5SGFuZGxlciIsImRhdGFSZWFkeUNoYXJhY3RlcmlzdGljIiwiZGF0YVJlYWRTdGF0dXNJZCIsImRhdGFSZWFkU3RhdHVzQ2hhcmFjdGVyaXN0aWMiLCJldmVudFZhbHVlIiwiZm9ybWF0dGVkRXZlbnRWYWx1ZSIsIm5vdGlmaWNhdGlvbkFycmF5IiwiY2hlY2tOb3RpZmljYXRpb25MZW5ndGgiLCJyZXR1cm5Ub1VzZXIiLCJwYXJzZUhpZERhdGEiLCJub3RpZmljYXRpb25JZCIsImZpbmROb3RpZmljYXRpb25UeXBlIiwiYnVpbHROb3RpZmljYXRpb24iLCJwYXJzZVRyYW5zYWN0aW9uU3RhdHVzIiwiZGlzcGxheUNhbGxiYWNrIiwiZGlzcGxheU1lc3NhZ2UiLCJwYXJzZVVzZXJTZWxlY3Rpb25SZXF1ZXN0IiwiYnVpbGROb3RpZmljYXRpb24iLCJwYXJzZUVtdkRhdGEiLCJwYXJzZUVtdkNvbW1hbmRSZXNwb25zZSIsInNldERldmljZURhdGVUaW1lIiwic3RhcnRUcmFuc2FjdGlvbiIsInJlcG9ydFZlcmJvc2l0eSIsImVtdkNvbW1hbmRCYXNlIiwicmVhZENvbW1hbmRWYWx1ZSIsInNwZWNpZmllZENhbGxiYWNrIiwicmV0dXJuT2JqIiwic3BlY2lmaWNUaW1lIiwiZGF0ZVRpbWVDb21tYW5kIiwiY2FzdERlY1RvSGV4IiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsImdldEZ1bGxZZWFyIiwiYnVpbGREYXRlVGltZUNvbW1hbmQiLCJmb3JtYXR0ZWRWYWx1ZSIsImJhdHRlcnkiLCJzZXJpYWxOdW0iLCJyZWFkQmF0dGVyeUxldmVsIiwicmVzcEJhdHRlcnkiLCJnZXREZXZpY2VTbiIsInJlc3BTbiIsImJhdHRlcnlMZXZlbCIsInNlbGVjdGlvblJlc3VsdCIsInVzZXJTZWxlY3Rpb25SZXNwb25zZSIsInJlc3VsdENvZGVzIiwic2VuZEFycGNSZXNwb25zZSIsImNhbmNlbEVtdkNvbW1hbmQiLCJjZWFzZU5vdGlmaWNhdGlvbnMiLCJ1c2VyU2VsZWN0aW9uQ2FsbGJhY2siLCJFRHluYW1vIiwiZ2V0Q2FyZFNlcnZpY2VCYXNlIiwiVER5bmFtbyIsInNldEhlYWRBbHdheXNPbiIsInNldEhlYWRPcGVuUmVzcCIsImNvbW1hbmROb3RVc2VkIiwiaXNTY3JhIiwiRGV2aWNlSW50ZXJmYWNlIiwiZ2V0Q2FyZFNlcnZpY2UiLCJjYW5jZWxUcmFuc2FjdGlvbiIsImNsb3NlRGV2aWNlIiwiZ2V0RGV2aWNlSW5mbyIsImlzRGV2aWNlQ29ubmVjdGVkIiwicmVxdWVzdFBpbkVudHJ5Iiwic2V0RGlzcGxheU1lc3NhZ2UiLCJzZW5kVXNlclNlbGVjdGlvbiIsInNlbmRBcnBjIiwib3BlbkRldmljZSIsInNlbmRDb21tYW5kIiwiaXNEZXZpY2VPcGVuIiwiZm9yY2VEaXNjb25uZWN0IiwibmV3RGV2aWNlSW5zdGFuY2UiLCJEeW5Qcm9HbyIsImJ1aWxkRGV2aWNlT2JqZWN0IiwiZGV2aWNlVHlwZVN0cmluZyIsImlkIiwiZGV2aWNlSW50ZXJmYWNlIiwiZUR5bmFtb1BhdHRlcm4iLCJSZWdFeHAiLCJ0RHluYW1vUGF0dGVybiIsImRwTWluaVBhdHRlcm4iLCJkcEdvUGF0dGVybiIsImZpbmREZXZpY2VUeXBlU3RyaW5nIiwibmFtZVN0ciIsInR5cGVTdHIiLCJmb3JtYXR0ZWRTdHIiLCJkZXZpY2VUeXBlU3RyIiwiZGV2aWNlVHlwZUFyciIsInJldHVyblN0ciIsImZvcm1hdFR5cGVTdHJpbmciLCJ0ZXN0Iiwic2NhbkZvckRldmljZXMiLCJpc0Z1bmNUeXBlIiwiZGF0YU9iaiIsIndhcm4iLCJwcm9wQXNzaWdubWVudCIsInByb3BOYW1lIiwiZXJyT2JqIiwiYXJyYW5nZUNhbGxiYWNrcyIsIm9wdGlvbnMiLCJuYW1lUHJlZml4IiwiZmluZERldmljZUJ5RGV2aWNlTmFtZSIsIm5hdmlnYXRvciIsImJsdWV0b290aCIsInJlcXVlc3REZXZpY2UiLCJkZXZpY2VUeXBlTmFtZSIsInNlbGVjdGVkRGV2aWNlIiwibW9kZWxOYW1lU3RyaW5nIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4Q0EsT0FBT0QsUUFBVUQsSUFDUSxtQkFBWEcsUUFBeUJBLE9BQU9DLElBQzlDRCxPQUFPLEdBQUlILEdBQ2UsaUJBQVpDLFFBQ2RBLFFBQVEscUJBQXVC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K0QsT0FDbEQ0QixRQUFRQyxRQUFTaW9CLEVBQWUvaUIsS0FBS08sZ0JBQzdDTCxLQUFNLElBQU1wRixFQUFTa29CLElBQ3RCcmlCLE1BQU1sQyxHQUNBQSxFQUFJcEksT0FBU3VJLEVBQVlDLFdBQ3pCSixFQUFJakssT0FBU29LLEVBQVlFLFdBQ3pCTCxFQUFJckksUUFBUXdqQixTQUFTLHdDQUNuQm1KLEVBQWUvaUIsS0FBS00sVUFDcEJ6RixRQUFRQyxRQUFTaW9CLEVBQWUvaUIsS0FBS08sY0FBZUwsS0FBSyxJQUFNcEYsRXBCdkQzRCxjb0JzRDZCQSxFcEJ0RDdCLGFvQndEUitFLEVBQU9wQixPQ2pCK0J5QixLQUM1QjZnQixHQUFzQkEsRUFFaEJqbUIsRUFBU2dtQixHQUFrQnBoQixFQUFRZ0QsRUFBV3FlLElBRGhEbGhCLEVBQU8scUNBRWJjLE1BQU1sQyxHQUFPb0IsRUFBT3BCLElESkNza0IsUUNLNUJwaUIsTUFBTWxDLEdBQ0xvQixFQUQ0QixpQkFBUnBCLEVBQ1osSUFBSXhJLEVBQVN3SSxHQUNkIiwiZmlsZSI6Im1hZ2Vuc2EtYmx1ZXRvb3RoLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibWFnZW5zYS1ibHVldG9vdGhcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wibWFnZW5zYS1ibHVldG9vdGhcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImNsYXNzIEFwaUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoeyBtZXNzYWdlLCBjb2RlLCBuYW1lIH0pIHtcclxuICAgICAgICBzdXBlciggKG1lc3NhZ2UgfHwgXCJXZWIgQmx1ZXRvb3RoIEFQSSB0aHJldyBhbiB1bmtub3duLCBvciB1bmRvY3VtZW50ZWQgZXJyb3JcIiApKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSAoY29kZSB8fCAxMDAwKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSAobmFtZSB8fCBcIldlYkJsdWV0b290aEVycm9yXCIpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwaUVycm9yOyIsImNvbnN0IGFsbERldmljZUNvbmZpZyA9IHtcclxuICAgIGZpbHRlcnM6IFtcclxuICAgICAgICB7IHNlcnZpY2VzOiBbXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDRcIl0gfSxcclxuICAgICAgICB7IHNlcnZpY2VzOiBbXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDFcIl0gfSwgXHJcbiAgICAgICAgeyBzZXJ2aWNlczogW1wiMDUwOGU2ZjgtYWQ4Mi04OThmLWY4NDMtZTM0MTBjYjYwMTAzXCJdIH1cclxuICAgIF0sXHJcbiAgICBvcHRpb25hbFNlcnZpY2VzOiBbXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDRcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDNcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDFcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAyMDJcIixcclxuICAgICAgICAnZGV2aWNlX2luZm9ybWF0aW9uJ1xyXG4gICAgXSxcclxuICAgIGtlZXBSZXBlYXRlZERldmljZXM6IGZhbHNlLFxyXG4gICAgYWNjZXB0QWxsQWR2ZXJ0aXNlbWVudHM6IGZhbHNlXHJcbn1cclxuXHJcbmNvbnN0IGZpbmREZXZpY2VCeURldmljZU5hbWUgPSBkZXZpY2VOYW1lID0+ICh7XHJcbiAgICBmaWx0ZXJzOiBbXHJcbiAgICAgICAgeyBuYW1lUHJlZml4OiBkZXZpY2VOYW1lIH1cclxuICAgIF0sXHJcbiAgICBvcHRpb25hbFNlcnZpY2VzOiBbXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDRcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDNcIiwgXHJcbiAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDFcIixcclxuICAgICAgICBcIjA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDIwMlwiLFxyXG4gICAgICAgICdkZXZpY2VfaW5mb3JtYXRpb24nXHJcbiAgICBdLFxyXG4gICAga2VlcFJlcGVhdGVkRGV2aWNlczogZmFsc2UsXHJcbiAgICBhY2NlcHRBbGxBZHZlcnRpc2VtZW50czogZmFsc2VcclxufSk7XHJcblxyXG5cclxuZXhwb3J0IHtcclxuICAgIGFsbERldmljZUNvbmZpZyxcclxuICAgIGZpbmREZXZpY2VCeURldmljZU5hbWVcclxufSIsImNsYXNzIFV0aWxpdGllcyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAgICAgdGhpcy5ybGVGb3JtYXRzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIDB4MDA6IGZhbHNlLCAgICAvL05vcm1hbFxyXG4gICAgICAgICAgICAweDAxOiB0cnVlLCAgICAgLy9STEUgZm9ybWF0XHJcbiAgICAgICAgICAgIDB4MDI6IGZhbHNlLCAgICAvL05vdGlmeSBVbmNvbXByZXNzZWRcclxuICAgICAgICAgICAgMHgwMzogdHJ1ZSAgICAgIC8vTm90aWZ5IFJMRSBmb3JtYXRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgfTtcclxuXHJcbiAgICAgbG9nRGV2aWNlU3RhdGUgPSBsb2dJbmZvID0+IHtcclxuICAgICAgICBsZXQgbG9nRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJkZXZpY2VMb2dcIiwgeyBcclxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcclxuICAgICAgICAgICAgZGV0YWlsOiBsb2dJbmZvIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChsb2dFdmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29udmVydEFycmF5VG9IZXhTdHJpbmcgPSBhcnJheSA9PlxyXG4gICAgICAgIEFycmF5LmZyb20oYXJyYXksIGJ5dGUgPT5cclxuICAgICAgICAgICAgKCcwJyArIChieXRlICYgMHhGRikudG9TdHJpbmcoMTYpKS5zbGljZSgtMilcclxuICAgICAgICApLmpvaW4oJycpLnRvVXBwZXJDYXNlKClcclxuICAgIFxyXG4gICAgcmVhZFR3b0J5dGVMZW5ndGggPSB0d29CeXRlcyA9PiAodHdvQnl0ZXNbMF0gPDwgOCkgfCB0d29CeXRlc1sxXTtcclxuXHJcbiAgICBidWZmZXJUb1V0ZjggPSBhcnJheUJ1ZmZlciA9PlxyXG4gICAgICAgIG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKS5kZWNvZGUoVWludDhBcnJheS5mcm9tKGFycmF5QnVmZmVyKSk7XHJcblxyXG4gICAgY2FzdERlY1RvSGV4ID0gbnVtID0+IHBhcnNlSW50KCBudW0udG9TdHJpbmcoMTYpLCAxNik7XHJcblxyXG4gICAgbmV3QXJyYXlQYXJ0aWFsID0gKG51bSwgcmVwZXRpdGlvbnMpID0+IG5ldyBBcnJheShyZXBldGl0aW9ucykuZmlsbChudW0pO1xyXG5cclxuICAgIHJlYWRCeXRlQXJyYXkgPSBkYXRhVmlldyA9PiB7XHJcbiAgICAgICAgbGV0IHZhbHVlQXJyYXkgPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFWaWV3LmJ5dGVMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YWx1ZUFycmF5LnB1c2goZGF0YVZpZXcuZ2V0VWludDgoaSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlQXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgaGV4VG9Bc2NpaSA9IGhleFN0cmluZyA9PiB7XHJcbiAgICAgICAgbGV0IGFzY2lpUmVzcCA9ICcnO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyAoaSA8IGhleFN0cmluZy5sZW5ndGggJiYgaGV4U3RyaW5nLnN1YnN0cihpLCAyKSAhPT0gJzAwJyk7IGkgKz0gMikge1xyXG4gICAgICAgICAgICBhc2NpaVJlc3AgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShcclxuICAgICAgICAgICAgICAgIHBhcnNlSW50KGhleFN0cmluZy5zdWJzdHIoaSwgMiksIDE2KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYXNjaWlSZXNwLnRyaW0oKTtcclxuICAgIH1cclxuXHJcbiAgICBoZXhUb0J5dGVzID0gaGV4U3RyID0+IHtcclxuICAgICAgICBsZXQgYnl0ZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBjdXJyZW50ID0gMDsgY3VycmVudCA8IGhleFN0ci5sZW5ndGg7IGN1cnJlbnQgKz0gMilcclxuICAgICAgICAgICAgYnl0ZXMucHVzaCggcGFyc2VJbnQoaGV4U3RyLnN1YnN0cihjdXJyZW50LCAyKSwgMTYpICk7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gYnl0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZGVjb2RlUkxFID0gYXJyYXlTZWdtZW50ID0+IHtcclxuICAgICAgICBsZXQgcmV0dXJuU2VnbWVudCA9IFsgYXJyYXlTZWdtZW50WzBdIF07XHJcbiAgICBcclxuICAgICAgICBsZXQgbmV4dEluZGV4ID0gMDtcclxuICAgICAgICBsZXQgaW5pdGlhbExlbmd0aCA9IGFycmF5U2VnbWVudC5sZW5ndGg7XHJcbiAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGluaXRpYWxMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBuZXh0SW5kZXggPSBpICsgMTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAobmV4dEluZGV4ICsgMSA8IGluaXRpYWxMZW5ndGgpIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGFycmF5U2VnbWVudFtpXSA9PT0gYXJyYXlTZWdtZW50W25leHRJbmRleF0pIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblNlZ21lbnQucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5uZXdBcnJheVBhcnRpYWwoYXJyYXlTZWdtZW50W2ldLCBhcnJheVNlZ21lbnRbbmV4dEluZGV4ICsgMV0pXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vYWRqdXN0IGluZGV4IGFjY29yZGluZ2x5LCBwcmlvciB0byBiZWluZyBpbmNyZW1lbnRlZCBieSB0aGUgaXRlcmF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgIGkgPSBuZXh0SW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSByZXR1cm5TZWdtZW50LnB1c2goYXJyYXlTZWdtZW50W2ldKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuU2VnbWVudC5wdXNoKGFycmF5U2VnbWVudFtpXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmV0dXJuU2VnbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBidWlsZEluaXRpYWxEYXRhQXJyYXkgPSBjaGVja0ZvclJsZSA9PiB7XHJcbiAgICAgICAgbGV0IHJldHVybkFycmF5ID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSBNYXRoLm1pbiguLi5PYmplY3Qua2V5cyh0aGlzLnJhd0RhdGEpKTsgaSA8IHRoaXMubWF4QmxvY2tJZDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJldHVybkFycmF5ID0gcmV0dXJuQXJyYXkuY29uY2F0KC4uLnRoaXMucmF3RGF0YVtpXSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoIWNoZWNrRm9yUmxlKSA/IHJldHVybkFycmF5IDogdGhpcy5jaGVja1JsZShyZXR1cm5BcnJheSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tSbGUgPSByZXR1cm5BcnJheSA9PiAodGhpcy5ybGVGb3JtYXRzWyB0aGlzLmluaXRpYWxOb3RpZmljYXRpb25bMF0gXSkgPyB0aGlzLmRlY29kZVJMRShyZXR1cm5BcnJheSkgOiByZXR1cm5BcnJheTtcclxuXHJcbiAgICBjb252ZXJ0Q3VycmVuY3lDb2RlID0gY3VycmVuY3lTdHJpbmcgPT4ge1xyXG4gICAgICAgIGxldCBjdXJyZW5jeSA9IGN1cnJlbmN5U3RyaW5nLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgIHJldHVybiAoY3VycmVuY3kgPT09ICd1cycpID8gWzB4MDgsIDB4NDBdIDogXHJcbiAgICAgICAgICAgIChjdXJyZW5jeSA9PT0gJ2V1cm8nKSA/IFsweDA5LCAweDc4XSA6IFsweDAwLCAweDAwXTtcclxuICAgIH1cclxuXHJcbiAgICAvL0NvbnZlcnQgbnVtYmVyIHRvIDYgYnl0ZSBhcnJheS5cclxuICAgIGNvbnZlcnROdW1Ub0Ftb3VudCA9IG51bSA9PiB7XHJcbiAgICAgICAgbGV0IHN0cmluZ051bSA9IG51bS50b1N0cmluZygpO1xyXG4gICAgICAgIGxldCByZXR1cm5BcnIgPSBbXTtcclxuICAgICAgICB3aGlsZSAoc3RyaW5nTnVtLmxlbmd0aCA8IDEyKVxyXG4gICAgICAgICAgICBzdHJpbmdOdW0gPSBcIjBcIiArIHN0cmluZ051bTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmdOdW0ubGVuZ3RoOyBpICs9MilcclxuICAgICAgICAgICAgcmV0dXJuQXJyLnB1c2goXHJcbiAgICAgICAgICAgICAgICBwYXJzZUludChzdHJpbmdOdW0uc3Vic3RyKGksIDIpLCAxNilcclxuICAgICAgICAgICAgKVxyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIHJldHVybkFycjtcclxuICAgIH1cclxuXHJcbiAgICBkZWxheVByb21pc2UgPSAoZGVsYXksIHBhc3NlZFZhbHVlKSA9PlxyXG4gICAgICAgIG5ldyBQcm9taXNlKCByZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSwgcGFzc2VkVmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVdGlsaXRpZXM7IiwiaW1wb3J0IFV0aWxpdGllcyBmcm9tIFwiLi4vdXRpbHNcIjtcclxuXHJcbmNsYXNzIFN3aXBlUGFyc2VyIGV4dGVuZHMgVXRpbGl0aWVzIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9ybWF0RXhwUEFOID0gcmF3RGF0YSA9PiB7XHJcbiAgICAgICAgbGV0IHN0cmluZ0RhdGEgPSAodHlwZW9mIHJhd0RhdGEgPT09ICdvYmplY3QnKSA/IHRoaXMuYnVmZmVyVG9VdGY4KHJhd0RhdGEuc2xpY2UoNCkpIDogcmF3RGF0YTtcclxuICAgIFxyXG4gICAgICAgIGlmIChzdHJpbmdEYXRhLmluZGV4T2YoJzsnKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgbGV0IGZvcm1hdHRlZFN0cmluZyA9IHRoaXMuc3BsaXRFeHBQQU4oc3RyaW5nRGF0YSk7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG1hc2tlZFBBTjogZm9ybWF0dGVkU3RyaW5nWzBdLFxyXG4gICAgICAgICAgICAgICAgTGFzdDQ6IGZvcm1hdHRlZFN0cmluZ1sxXSxcclxuICAgICAgICAgICAgICAgIGV4cGlyYXRpb25EYXRlOiBmb3JtYXR0ZWRTdHJpbmdbMl0sXHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlQ29kZTogZm9ybWF0dGVkU3RyaW5nWzNdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSByZXR1cm4ge1xyXG4gICAgICAgICAgICBtYXNrZWRQQU46IFwiXCIsXHJcbiAgICAgICAgICAgIExhc3Q0OiBcIlwiLFxyXG4gICAgICAgICAgICBleHBpcmF0aW9uRGF0ZTogXCJcIixcclxuICAgICAgICAgICAgc2VydmljZUNvZGU6IFwiXCJcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3BsaXRFeHBQQU4gPSBzdHJpbmdEYXRhID0+IHtcclxuICAgICAgICBpZiAoc3RyaW5nRGF0YS5sZW5ndGggPiAzKSB7XHJcbiAgICAgICAgICAgIGxldCBleHBQQU4gPSBzdHJpbmdEYXRhLnJlcGxhY2UoJzsnLCcnKS5yZXBsYWNlKCc/JywnJykuc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgbGV0IGV4cCA9IGV4cFBBTlsxXS5zbGljZSgwLCA0KTtcclxuICAgICAgICAgICAgbGV0IHNlcnZpY2VDb2RlID0gZXhwUEFOWzFdLnNsaWNlKDQsIDcpO1xyXG4gICAgICAgICAgICBsZXQgZm9ybWF0dGVkRXhwID0gZXhwLnNsaWNlKC0yKSArICcvJyArIGV4cC5zbGljZSgwLCAyKTtcclxuICAgICAgICAgICAgbGV0IG1hc2tlZFBBTiA9IGV4cFBBTlswXTtcclxuICAgICAgICAgICAgbGV0IGxhc3RGb3VyID0gZXhwUEFOWzBdLnNsaWNlKC00KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBbbWFza2VkUEFOLCBsYXN0Rm91ciwgZm9ybWF0dGVkRXhwLCBzZXJ2aWNlQ29kZV1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSByZXR1cm4gW1wiTm90IEZvdW5kXCIsIFwiTm90IEZvdW5kXCIsIFwiTm90IEZvdW5kXCIsIFwiTm90IEZvdW5kXCJdXHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTd2lwZVBhcnNlcjsiLCJjb25zdCBvcGVuU3VjY2VzcyA9IFwiRGV2aWNlIE9wZW5cIjtcclxuY29uc3QgY2xvc2VTdWNjZXNzID0gXCJEZXZpY2UgQ2xvc2VkXCJcclxuY29uc3Qgc3VjY2Vzc0NvZGUgPSAwO1xyXG5jb25zdCBzd2lwZUxpc3RlbmluZyA9IFwiU3VjY2VzcywgbGlzdGVuaW5nIGZvciBzd2lwZVwiXHJcbmNvbnN0IGRldmljZU5vdElkbGUgPSBcIkRldmljZSBub3QgaWRsZVwiO1xyXG5jb25zdCB0RHluYW1vID0gXCJ0RHluYW1vXCI7XHJcbmNvbnN0IGVEeW5hbW8gPSBcImVEeW5hbW9cIjtcclxuY29uc3QgZHluYVByb0dvID0gXCJkeW5hUHJvR29cIjtcclxuY29uc3QgZHBNaW5pID0gXCJEeW5hUHJvIE1pbmlcIjtcclxuXHJcbmNvbnN0IGNvbmZpZ1N0ciA9IFwiQ29uZmlndXJhdGlvblwiO1xyXG5jb25zdCB1bmtub3duID0gXCJVbmtub3duXCI7XHJcbmNvbnN0IGFzY2lpID0gXCJBU0NJSVwiO1xyXG5cclxuY29uc3Qgbm9TZXNzaW9uVG9DbGVhciA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMCxcclxuICAgIG1lc3NhZ2U6IFwiU3VjY2VzcywgdGhlcmUgd2FzIG5vIHNlc3Npb24gdG8gY2xlYXJcIlxyXG59KTtcclxuXHJcbmNvbnN0IGdhdHRCdXN5ID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAxOSwgXHJcbiAgICBtZXNzYWdlOiBcIkdBVFQgb3BlcmF0aW9uIGFscmVhZHkgaW4gcHJvZ3Jlc3MuXCJcclxufSk7XHJcblxyXG5jb25zdCBzdWNjZXNzZnVsQ2xvc2UgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvZGU6IHN1Y2Nlc3NDb2RlLFxyXG4gICAgbWVzc2FnZTogY2xvc2VTdWNjZXNzXHJcbn0pO1xyXG5cclxuY29uc3QgY2FyZFR5cGVBbGwgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIFtlRHluYW1vXTogMHgwMyxcclxuICAgIFt0RHluYW1vXTogMHgwNyxcclxuICAgIFtkcE1pbmldOiAweDAzLFxyXG4gICAgW2R5bmFQcm9Hb106IDB4MDdcclxufSk7XHJcblxyXG5jb25zdCBjYXJkVHlwZXNPYmogPSBPYmplY3QuZnJlZXplKHtcclxuICAgICdtc3InOiAweDAxLFxyXG4gICAgJ2NoaXAnOiAweDAyLFxyXG4gICAgJ2NoaXBtc3InOiAweDAzLFxyXG4gICAgJ2NvbnRhY3RsZXNzJzogMHgwNCxcclxuICAgICdjb250YWN0bGVzc21zcic6IDB4MDUsXHJcbiAgICAnY29udGFjdGxlc3NjaGlwJzoweDA2LFxyXG4gICAgJ2FsbCc6IDB4MDdcclxufSk7XHJcblxyXG5leHBvcnQge1xyXG4gICAgb3BlblN1Y2Nlc3MsXHJcbiAgICBzdWNjZXNzQ29kZSxcclxuICAgIHN3aXBlTGlzdGVuaW5nLFxyXG4gICAgZGV2aWNlTm90SWRsZSxcclxuICAgIGNsb3NlU3VjY2VzcyxcclxuICAgIG5vU2Vzc2lvblRvQ2xlYXIsXHJcbiAgICB0RHluYW1vLFxyXG4gICAgZUR5bmFtbyxcclxuICAgIGR5bmFQcm9HbyxcclxuICAgIGRwTWluaSxcclxuICAgIGNhcmRUeXBlQWxsLFxyXG4gICAgY2FyZFR5cGVzT2JqLFxyXG4gICAgZ2F0dEJ1c3ksXHJcbiAgICBzdWNjZXNzZnVsQ2xvc2UsXHJcbiAgICBjb25maWdTdHIsXHJcbiAgICB1bmtub3duLFxyXG4gICAgYXNjaWlcclxufVxyXG4iLCJpbXBvcnQgU3dpcGVQYXJzZXIgZnJvbSAnLi9zd2lwZVBhcnNlcic7XHJcbmltcG9ydCB7IGR5bmFQcm9HbyB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XHJcblxyXG5jbGFzcyBFbXZQYXJzZXIgZXh0ZW5kcyBTd2lwZVBhcnNlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLm1vcmVUYWdCeXRlc0ZsYWcxID0gMHgxRjtcclxuICAgICAgICB0aGlzLm1vcmVUYWdCeXRlc0ZsYWcyID0gMHg4MDtcclxuICAgICAgICB0aGlzLmNvbnN0cnVjdGVkRmxhZyA9IDB4MjA7XHJcbiAgICAgICAgdGhpcy5tb3JlTGVuZ3RoRmxhZyA9IDB4ODA7XHJcbiAgICAgICAgdGhpcy5vbmVCeXRlTGVuZ3RoTWFzayA9IDB4N0Y7XHJcblxyXG4gICAgICAgIHRoaXMudHJ4U3RhdHVzVG9TdHJpbmcgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgMHgwMDogXCJBcHByb3ZlZFwiLFxyXG4gICAgICAgICAgICAweDAxOiBcIkRlY2xpbmVkXCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiRXJyb3JcIixcclxuICAgICAgICAgICAgMHgxMDogXCJDYW5jZWxsZWQgQnkgSG9zdFwiLFxyXG4gICAgICAgICAgICAweDExOiBcIkNvbmZpcm0gQW1vdW50IE5vXCIsXHJcbiAgICAgICAgICAgIDB4MTI6IFwiQ29uZmlybSBBbW91bnQgVGltZW91dFwiLFxyXG4gICAgICAgICAgICAweDEzOiBcIkNvbmZpcm0gQW1vdW50IENhbmNlbFwiLFxyXG4gICAgICAgICAgICAweDE0OiBcIk1TUiBTZWxlY3QgRGViaXRcIixcclxuICAgICAgICAgICAgMHgxNTogXCJNU1IgU2VsZWN0IERlYml0XCIsXHJcbiAgICAgICAgICAgIDB4MTY6IFwiTVNSIFNlbGVjdCBDcmVkaXQvRGViaXQgdGltb3V0XCIsXHJcbiAgICAgICAgICAgIDB4MTc6IFwiTVNSIFNlbGVjdCBDcmVkaXQvRGViaXQgY2FuY2VsXCIsXHJcbiAgICAgICAgICAgIDB4MTg6IFwiU2lnbmF0dXJlIENhcHR1cmUgQ2FuY2VsbGVkIGJ5IEhvc3QgKFNDLVMgT25seSB8IFNDLUYgb25seSlcIixcclxuICAgICAgICAgICAgMHgxOTogXCJTaWduYXR1cmUgQ2FwdHVyZSBUaW1lb3V0IChTQy1TIE9ubHkgfCBTQy1GIE9ubHkpXCIsXHJcbiAgICAgICAgICAgIDB4MUE6IFwiU2lnbmF0dXJlIENhcHR1cmUgQ2FuY2VsbGVkIGJ5IENhcmRob2xkZXIgKFNDLVMgT25seSB8IFNDLUYgT25seSlcIixcclxuICAgICAgICAgICAgMHgxQjogXCJQSU4gRW50cnkgQ2FuY2VsbGVkIGJ5IEhvc3RcIixcclxuICAgICAgICAgICAgMHgxQzogXCJQSU4gZW50cnkgdGltZW91dFwiLFxyXG4gICAgICAgICAgICAweDFEOiBcIlBJTiBlbnRyeSBDYW5jZWxsZWQgYnkgQ2FyZGhvbGRlclwiLFxyXG4gICAgICAgICAgICAweDFFOiBcIk1hbnVhbCBTZWxlY3RlZCBDYW5jZWxsZWQgYnkgSG9zdFwiLFxyXG4gICAgICAgICAgICAweDFGOiBcIk1hbnVhbCBTZWxlY3Rpb24gVGltZW91dFwiLFxyXG4gICAgICAgICAgICAweDIwOiBcIk1hbnVhbCBTZWxjdGlvbiBDYW5jZWxsZWQgYnkgQ2FyZGhvbGRlclwiLFxyXG4gICAgICAgICAgICAweDIxOiBcIldhaXRpbmcgZm9yIENhcmQgQ2FuY2VsbGVkIGJ5IEhvc3RcIixcclxuICAgICAgICAgICAgMHgyMjogXCJXYWl0aW5nIGZvciBDYXJkIFRpbWVvdXRcIixcclxuICAgICAgICAgICAgMHgyMzogXCJDYW5jZWxsZWQgYnkgQ2FyZCBTd2lwZSAoTVNSKSBbU0NSQV0gfHwgV2FpdGluZyBmb3IgQ2FyZCBDYW5jZWxsZWQgYnkgQ2FyZGhvbGRlciBbUElOXVwiLFxyXG4gICAgICAgICAgICAweDI0OiBcIldhaXRpbmcgZm9yIENhcmQgSUNDIFNlYXRlZFwiLFxyXG4gICAgICAgICAgICAweDI1OiBcIldhaXRpbmcgZm9yIENhcmQgTVNSIFN3aXBlZFwiLFxyXG4gICAgICAgICAgICAweEZGOiBcIlVua25vd24gVHJhbnNhY3Rpb24gU3RhdHVzXCIsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGx2UGFyc2VyID0gKGRhdGEsIGlzTXNyKSA9PiB7XHJcbiAgICAgICAgbGV0IGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aDtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICAgICAgbGV0IGlUTFYgPSAwO1xyXG4gICAgICAgIGxldCBpVGFnO1xyXG4gICAgICAgIGxldCBiVGFnID0gdHJ1ZTtcclxuICAgICAgICBsZXQgYnl0ZVZhbHVlO1xyXG4gICAgICAgIGxldCBsZW5ndGhWYWx1ZTtcclxuICAgICAgICBsZXQgdGFnQnl0ZXMgPSBudWxsO1xyXG4gICAgICAgIGxldCBUYWdCdWZmZXIgPSBbXTtcclxuXHJcbiAgICAgICAgd2hpbGUgKGlUTFYgPCBkYXRhTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGJ5dGVWYWx1ZSA9IGRhdGFbaVRMVl07XHJcblxyXG4gICAgICAgICAgICBpZiAoYlRhZykge1xyXG4gICAgICAgICAgICAgICAgaVRhZyA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgYk1vcmVUYWdCeXRlcyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGJ5dGVWYWx1ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vRmlyc3QgYnl0ZSBvZiB0YWcgY2Fubm90IGJlIHplcm8uXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGJNb3JlVGFnQnl0ZXMgJiYgKGlUTFYgPCBkYXRhTGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVWYWx1ZSA9IGRhdGFbaVRMVl07XHJcbiAgICAgICAgICAgICAgICAgICAgaVRMVisrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBUYWdCdWZmZXJbaVRhZ10gPSBieXRlVmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJNb3JlVGFnQnl0ZXMgPSAoaVRhZyA9PT0gMCkgPyAoKGJ5dGVWYWx1ZSAmIHRoaXMubW9yZVRhZ0J5dGVzRmxhZzEpID09IHRoaXMubW9yZVRhZ0J5dGVzRmxhZzEpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgKChieXRlVmFsdWUgJiB0aGlzLm1vcmVUYWdCeXRlc0ZsYWcyKSA9PSB0aGlzLm1vcmVUYWdCeXRlc0ZsYWcyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaVRhZysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRhZ0J5dGVzID0gdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhUYWdCdWZmZXIuc2xpY2UoMCwgaVRhZykpO1xyXG4gICAgICAgICAgICAgICAgYlRhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGVuZ3RoVmFsdWUgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgoYnl0ZVZhbHVlICYgdGhpcy5tb3JlTGVuZ3RoRmxhZykgPT0gdGhpcy5tb3JlTGVuZ3RoRmxhZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuTGVuZ3RoQnl0ZXMgPSBieXRlVmFsdWUgJiB0aGlzLm9uZUJ5dGVMZW5ndGhNYXNrO1xyXG4gICAgICAgICAgICAgICAgICAgIGlUTFYrKztcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaUxlbiA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICgoaUxlbiA8IG5MZW5ndGhCeXRlcykgJiYgKGlUTFYgPCBkYXRhTGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlVmFsdWUgPSBkYXRhW2lUTFZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpVExWKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aFZhbHVlID0gKChsZW5ndGhWYWx1ZSAmIDB4MDAwMDAwRkYpIDw8IDgpICsgYnl0ZVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpTGVuKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoVmFsdWUgPSBieXRlVmFsdWUgJiB0aGlzLm9uZUJ5dGVMZW5ndGhNYXNrO1xyXG4gICAgICAgICAgICAgICAgICAgIGlUTFYrKztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGFnQnl0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFnQnl0ZSA9IFRhZ0J1ZmZlclswXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVuZEluZGV4ID0gKChpVExWICsgbGVuZ3RoVmFsdWUpID4gZGF0YUxlbmd0aCkgPyBkYXRhTGVuZ3RoIDogaVRMViArIGxlbmd0aFZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGVuID0gZW5kSW5kZXggLSBpVExWO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZUJ5dGVzID0gKGxlbiA+IDApID8gdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhkYXRhLnNsaWNlKGlUTFYsIGlUTFYgKyBsZW4pKSA6IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0YWdcIjogdGFnQnl0ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidGFnTGVuZ3RoXCI6ICghbGVuZ3RoVmFsdWUpID8gKHZhbHVlQnl0ZXMubGVuZ3RoICsgMSAvIDIpIDogbGVuZ3RoVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidGFnVmFsdWVcIjogdGhpcy5oZXhPckFzY2lpRm9ybWF0dGVyKHRhZ0J5dGVzLCB2YWx1ZUJ5dGVzLCBpc01zcilcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhKCh0YWdCeXRlICYgdGhpcy5jb25zdHJ1Y3RlZEZsYWcpID09IHRoaXMuY29uc3RydWN0ZWRGbGFnKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaVRMViArPSBsZW5ndGhWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYlRhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBoZXhPckFzY2lpRm9ybWF0dGVyID0gKHRhZ0J5dGVzLCB2YWx1ZUJ5dGVzLCBpc01zcikgPT4ge1xyXG4gICAgICAgIHN3aXRjaCh0YWdCeXRlcykge1xyXG4gICAgICAgICAgICBjYXNlIFwiREZERjFBXCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7dmFsdWVCeXRlc30gJHt0aGlzLnRyeFN0YXR1c1RvU3RyaW5nWyBwYXJzZUludCh2YWx1ZUJ5dGVzLCAxNikgXX1gXHJcbiAgICAgICAgICAgIGNhc2UgXCJERkRGNERcIjpcclxuICAgICAgICAgICAgY2FzZSBcIjVGMjBcIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhleFRvQXNjaWkodmFsdWVCeXRlcyk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJERkRGMjVcIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoaXNNc3IpID8gdGhpcy5oZXhUb0FzY2lpKCAodmFsdWVCeXRlcyA/IHZhbHVlQnl0ZXMuc3Vic3RyaW5nKDAsIDE0KSA6IHZhbHVlQnl0ZXMpICkgOiB2YWx1ZUJ5dGVzO1xyXG4gICAgICAgICAgICBjYXNlIFwiREZERjQwXCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHZhbHVlQnl0ZXMgPT09IDB4ODApID8gYCR7dmFsdWVCeXRlc30gIENCQy1NQUMgY2hlY2tlZCBpbiBBUlFDIG9ubGluZSByZXNwb25zZWAgOiAodmFsdWVCeXRlcyA9PT0gMHgwMSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVCeXRlcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEVtdlBhcnNlcjsiLCJjbGFzcyBMZW5ndGhFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwiRGV2aWNlIGNvbW11bmljYXRpb24gZXJyb3IuIExlbmd0aCBkb2VzIG5vdCBtYXRjaCBkYXRhXCIpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IFwiQmxlVHJhbnNtaXNzaW9uRXJyb3JcIjtcclxuICAgICAgICB0aGlzLmNvZGUgPSAxMDEyO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBMZW5ndGhFcnJvcjsiLCJjbGFzcyBEZXZpY2VFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgY29kZSwgbmFtZSwgbWVzc2FnZSB9KSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gKG5hbWUgfHwgXCJEZXZpY2VFcnJvclwiKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSAoY29kZSB8fCAxMDAwKVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEZXZpY2VFcnJvcjsiLCJpbXBvcnQgRW12UGFyc2VyIGZyb20gJy4uL3BhcnNlcnMvZW12UGFyc2VyJ1xyXG5pbXBvcnQgQXBpRXJyb3IgZnJvbSAnLi9hcGlFcnJvcic7XHJcbmltcG9ydCBMZW5ndGhFcnJvciBmcm9tICcuL2xlbmd0aEVycm9yJztcclxuaW1wb3J0IERldmljZUVycm9yIGZyb20gJy4vZGV2aWNlRXJyb3InO1xyXG5cclxuY2xhc3MgRXJyb3JIYW5kbGVyIGV4dGVuZHMgRW12UGFyc2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrcykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjayA9IGNhbGxiYWNrcy5lcnJvckNhbGxiYWNrO1xyXG4gICAgfTtcclxuXHJcbiAgICBidWlsZERldmljZUVyciA9IGVyciA9PiAoZXJyIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uKSA/IFxyXG4gICAgICAgIG5ldyBBcGlFcnJvcihlcnIpIDogKGVyciBpbnN0YW5jZW9mIEVycm9yKSA/IFxyXG4gICAgICAgICAgICBlcnIgOiBuZXcgRGV2aWNlRXJyb3IoZXJyKTtcclxuXHJcbiAgICB0aHJvd0xlbkVyciA9ICgpID0+IG5ldyBMZW5ndGhFcnJvcigpO1xyXG5cclxuICAgIHNlbmRFcnJUb0NhbGxiYWNrID0gZXJyID0+IHtcclxuICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2soZXJyKTtcclxuICAgICAgICByZXR1cm4gZXJyO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRXJyb3JIYW5kbGVyOyIsImNvbnN0IG5vdEZvdW5kT2JqID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBlcnJvckNvZGU6IDgsXHJcbiAgICBlcnJvck5hbWU6IFwiTm90Rm91bmRFcnJvclwiXHJcbn0pO1xyXG5cclxuY29uc3QgYXBpTmV0d29ya0VyciA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMTksXHJcbiAgICBuYW1lOiAnTmV0d29ya0Vycm9yJ1xyXG59KTtcclxuXHJcbmNvbnN0IGRldmljZU5vdEZvdW5kID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAxMDAyLFxyXG4gICAgbmFtZTogJ0RldmljZU5vdEZvdW5kJyxcclxuICAgIG1lc3NhZ2U6IFwiUGxlYXNlIHNlbGVjdCBkZXZpY2UgdG8gY29ubmVjdFwiXHJcbn0pO1xyXG5cclxuY29uc3QgZ2F0dFNlcnZlck5vdENvbm5lY3RlZCA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMTAwMyxcclxuICAgIG5hbWU6IFwiR2F0dFNlcnZlck5vdENvbm5lY3RlZFwiLFxyXG4gICAgbWVzc2FnZTogXCJQbGVhc2UgY29ubmVjdCBkZXNpcmVkIGRldmljZVwiXHJcbn0pO1xyXG5cclxuY29uc3QgY29tbWFuZE5vdFNlbnQgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvZGU6IDEwMDQsIFxyXG4gICAgbmFtZTogXCJDb21tYW5kTm90U2VudFwiLCBcclxuICAgIG1lc3NhZ2U6IFwiQ29tbWFuZCBjaGFyYWN0ZXJpc3RpYyBub3QgZm91bmQsIGRldmljZSBub3Qgb3BlbmVkXCJcclxufSk7XHJcblxyXG5jb25zdCBkZXZpY2VOb3RPcGVuID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAxMDA1LCBcclxuICAgIG5hbWU6IFwiQ29tbWFuZE5vdFNlbnRcIiwgXHJcbiAgICBtZXNzYWdlOiBcIkRldmljZSBub3Qgb3BlbmVkXCJcclxufSk7XHJcblxyXG5jb25zdCBjb21tYW5kTm90U2VudEZyb21Ib3N0ID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAxMDA2LCBcclxuICAgIG5hbWU6IFwiQ29tbWFuZE5vdFNlbnRcIiwgXHJcbiAgICBtZXNzYWdlOiBcIkFwcGxpY2F0aW9uIEZyb20gSG9zdCBub3QgZm91bmQuICBEZXZpY2Ugbm90IGNvbm5lY3RlZFwiXHJcbn0pO1xyXG5cclxuY29uc3QgcmVhZEZhaWxlZCA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMTAwNywgXHJcbiAgICBuYW1lOiBcIlJlYWRGYWlsZWRcIiwgXHJcbiAgICBtZXNzYWdlOiBcIlVuYWJsZSB0byByZWFkIGRhdGEgZnJvbSBkZXZpY2UuIENvbW11bmljYXRpb24gZXJyb3JcIlxyXG59KTtcclxuXHJcbmNvbnN0IHJlc3BvbnNlTm90UmVjZWl2ZWQgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvZGU6IDEwMDgsIFxyXG4gICAgbmFtZTogJ1Jlc3BvbnNlTm90UmVjZWl2ZWQnLCBcclxuICAgIG1lc3NhZ2U6IFwiQ29tbWFuZCB3YXMgc2VudCwgYnV0IHJlc3BvbnNlIHdhcyBub3QgcmVjZWl2ZWQgZnJvbSBkZXZpY2VcIlxyXG59KTtcclxuXHJcbmNvbnN0IGdldFNlcnZpY2VGYWlsID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAxMDA5LCBcclxuICAgIG5hbWU6IFwiR2V0U2VydmljZUZhaWxcIiwgXHJcbiAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byByZXRyaWV2ZSBwcmltYXJ5IEdBVFQgc2VydmljZS4gUGxlYXNlIGNvbm5lY3QgZGV2aWNlXCJcclxufSk7XHJcblxyXG5jb25zdCBjb21tYW5kTm90QWNjZXB0ZWQgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvZGU6IDEwMTMsXHJcbiAgICBuYW1lOiBcIkNvbW1hbmROb3RBY2NlcHRlZFwiLFxyXG4gICAgbWVzc2FnZTogXCJEZXZpY2UgZGlkIG5vdCBhY2NlcHQgY29tbWFuZFwiXHJcbn0pO1xyXG5cclxuY29uc3QgbWlzc2luZ1JlcXVpcmVkRmllbGRzID0gZmllbGROYW1lID0+IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY29kZTogMTAxNCxcclxuICAgIG5hbWU6IFwiTWlzc2luZ1JlcXVpcmVkUGFyYW1ldGVyXCIsXHJcbiAgICBtZXNzYWdlOiBgJyR7ZmllbGROYW1lfScgaXMgcmVxdWlyZWQgdG8gY2FsbCB0aGlzIGZ1bmN0aW9uLmBcclxufSk7XHJcblxyXG5jb25zdCB3cm9uZ0lucHV0VHlwZXMgPSBhY2NlcHRhYmxlVHlwZXMgPT4gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBjb2RlOiAxMDE1LFxyXG4gICAgbmFtZTogXCJJbmNvcnJlY3RJbnB1dFR5cGVcIixcclxuICAgIG1lc3NhZ2U6IGBQYXJhbWV0ZXIgdHlwZSB3YXMgbm90IGNvcnJlY3QsIGFjY2VwdGFibGUgdHlwZShzKSBhcmU6ICR7YWNjZXB0YWJsZVR5cGVzLmpvaW4oXCIsIFwiKX1gXHJcbn0pO1xyXG5cclxuZXhwb3J0IHtcclxuICAgIGNvbW1hbmROb3RBY2NlcHRlZCxcclxuICAgIGNvbW1hbmROb3RTZW50LFxyXG4gICAgcmVzcG9uc2VOb3RSZWNlaXZlZCxcclxuICAgIGRldmljZU5vdEZvdW5kLFxyXG4gICAgZGV2aWNlTm90T3BlbixcclxuICAgIGdhdHRTZXJ2ZXJOb3RDb25uZWN0ZWQsXHJcbiAgICByZWFkRmFpbGVkLFxyXG4gICAgY29tbWFuZE5vdFNlbnRGcm9tSG9zdCxcclxuICAgIGdldFNlcnZpY2VGYWlsLFxyXG4gICAgbm90Rm91bmRPYmosXHJcbiAgICBhcGlOZXR3b3JrRXJyLFxyXG4gICAgbWlzc2luZ1JlcXVpcmVkRmllbGRzLFxyXG4gICAgd3JvbmdJbnB1dFR5cGVzXHJcbn1cclxuIiwiaW1wb3J0IEVycm9ySGFuZGxlciBmcm9tICcuLi9lcnJvckhhbmRsZXInO1xyXG5pbXBvcnQgeyBcclxuICAgIGRldmljZU5vdEZvdW5kLCBcclxuICAgIGdhdHRTZXJ2ZXJOb3RDb25uZWN0ZWQsXHJcbiAgICBnZXRTZXJ2aWNlRmFpbCxcclxuICAgIG5vdEZvdW5kT2JqLFxyXG4gICAgZGV2aWNlTm90T3BlbixcclxuICAgIGFwaU5ldHdvcmtFcnIsXHJcbiAgICB3cm9uZ0lucHV0VHlwZXNcclxufSBmcm9tICcuLi9lcnJvckhhbmRsZXIvZXJyQ29uc3RhbnRzJztcclxuaW1wb3J0IHsgY2FyZFR5cGVBbGwsIGNhcmRUeXBlc09iaiwgc3VjY2Vzc2Z1bENsb3NlIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuXHJcbmNsYXNzIERldmljZUJhc2UgZXh0ZW5kcyBFcnJvckhhbmRsZXIge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsYmFja3MpIHtcclxuICAgICAgICBzdXBlcihjYWxsYmFja3MpO1xyXG5cclxuICAgICAgICB0aGlzLmRldmljZSA9IGRldmljZTtcclxuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RDYWxsYmFjayA9IGNhbGxiYWNrcy5kaXNjb25uZWN0SGFuZGxlcjtcclxuICAgICAgICB0aGlzLmdhdHRTZXJ2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2FyZFNlcnZpY2UgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmRldmljZVVVSURzID0gW1xyXG4gICAgICAgICAgICBcIjA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDEwNFwiLFxyXG4gICAgICAgICAgICBcIjA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDEwM1wiLCBcclxuICAgICAgICAgICAgXCIwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAxMDFcIlxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdHVzVmVyYm9zaXR5ID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIFwibWluaW11bVwiOiAweDAwLFxyXG4gICAgICAgICAgICAnbWVkaXVtJzogMHgwMSxcclxuICAgICAgICAgICAgJ3ZlcmJvc2UnOiAweDAyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVuY3lDb2RlID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgICdkb2xsYXInOiBbMHgwOCwgMHg0MF0sXHJcbiAgICAgICAgICAgICdldXJvJzogWzB4MDksIDB4NzhdLFxyXG4gICAgICAgICAgICAncG91bmQnOiBbMHgwOCwgMHgyNl0sXHJcbiAgICAgICAgICAgICdkZWZhdWx0JzogWzB4MDAsIDB4MDBdIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uVHlwZXMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgJ3B1cmNoYXNlJzogMHgwMCxcclxuICAgICAgICAgICAgJ2Nhc2hhZHZhbmNlJzogMHgwMSxcclxuICAgICAgICAgICAgJ2Nhc2hiYWNrJzogMHgwMixcclxuICAgICAgICAgICAgJ3B1cmNoYXNlZ29vZHMnOiAweDA0LFxyXG4gICAgICAgICAgICAncHVyY2hhc2VzZXJ2aWNlcyc6IDB4MDgsXHJcbiAgICAgICAgICAgICdjb250YWN0bGVzc2Nhc2hiYWNrJzogMHgwOSxcclxuICAgICAgICAgICAgJ2Nhc2htYW51YWwnOiAweDEyLFxyXG4gICAgICAgICAgICAncmVmdW5kJzogMHgyMCwgXHJcbiAgICAgICAgICAgICdjaGlwb25seXBheW1lbnQnOiAweDUwXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY29tbWFuZFJlc3BBdmFpbGFibGUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjYXJkVHlwZXMgPSBjYXJkVHlwZVN0ciA9PiAoY2FyZFR5cGVTdHIgIT09ICdhbGwnKSA/IFxyXG4gICAgICAgIChjYXJkVHlwZXNPYmpbIGNhcmRUeXBlU3RyIF0gfHwgMHgwMykgOiAoY2FyZFR5cGVBbGxbIHRoaXMuZGV2aWNlVHlwZSBdIHx8IDB4MDMpO1xyXG4gICAgICAgIFxyXG5cclxuICAgIGNvbm5lY3QgPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtHQVRUXTogRGV2aWNlIENvbm5lY3Rpb24gUmVxdWVzdCB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgIHJldHVybiAodGhpcy5kZXZpY2UpID9cclxuICAgICAgICAgICAgdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0KClcclxuICAgICAgICAgICAgICAgIC50aGVuKHNlcnZlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0dBVFRdOiBEZXZpY2UgY29ubmVjdGVkIC0gR0FUVCBTZXJ2ZXIgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseSB8fCAke25ldyBEYXRlKCl9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYXR0U2VydmVyID0gc2VydmVyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90Rm91bmQpIClcclxuICAgIH0pO1xyXG5cclxuICAgIGRpc2Nvbm5lY3QgPSAoKSA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiAge1xyXG4gICAgICAgIGlmICghdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHN1Y2Nlc3NmdWxDbG9zZSApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRldmljZS5nYXR0LmRpc2Nvbm5lY3QoKVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggc3VjY2Vzc2Z1bENsb3NlIClcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBjYWNoZUNhcmRTZXJ2aWNlQmFzZSA9IHNlcnZpY2VJbmRleCA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHNlcnZpY2VJbmRleCA9IHNlcnZpY2VJbmRleCB8fCAwO1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtHQVRUXTogQ2FjaGUgQ2FyZCBTZXJ2aWNlIFJlcXVlc3QgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICByZXR1cm4gKCF0aGlzLmdhdHRTZXJ2ZXIpID8gXHJcbiAgICAgICAgICAgIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihnYXR0U2VydmVyTm90Q29ubmVjdGVkKSApXHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgdGhpcy5maW5kUHJpbWFyeVNlcnZpY2Uoc2VydmljZUluZGV4KVxyXG4gICAgICAgICAgICAudGhlbihzZXJ2aWNlID0+IHJlc29sdmUoc2VydmljZSkpXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpXHJcbiAgICB9KTtcclxuXHJcbiAgICBmaW5kUHJpbWFyeVNlcnZpY2UgPSBzZXJ2aWNlSW5kZXggPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+XHJcbiAgICAgICAgdGhpcy5nYXR0U2VydmVyLmdldFByaW1hcnlTZXJ2aWNlKHRoaXMuZGV2aWNlVVVJRHNbc2VydmljZUluZGV4XSlcclxuICAgICAgICAudGhlbihzZXJ2aWNlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jYXJkU2VydmljZSA9IHNlcnZpY2U7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbR0FUVF06IFN1Y2Nlc3MhIEdBVFQgQ2FyZCBTZXJ2aWNlIHJldHJpZXZlZCBhbmQgY2FjaGVkIHx8ICR7bmV3IERhdGUoKX1gKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGV2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ2dhdHRzZXJ2ZXJkaXNjb25uZWN0ZWQnLCB0aGlzLmRpc2Nvbm5lY3RIYW5kbGVyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHNlcnZpY2UgKTtcclxuICAgICAgICB9KS5jYXRjaCggZXJyID0+IHtcclxuICAgICAgICAgICAgaWYgKGVyci5jb2RlID09PSBub3RGb3VuZE9iai5lcnJvckNvZGUgJiYgZXJyLm5hbWUgPT09IG5vdEZvdW5kT2JqLmVycm9yTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiggdGhpcy5kZXZpY2VVVUlEc1tzZXJ2aWNlSW5kZXggKyAxXSAhPT0gXCJ1bmRlZmluZWRcIiApKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBbRVJST1JdOiBGYWlsZWQgdG8gY29ubmVjdC4gVVVJRDogJHt0aGlzLmRldmljZVVVSURzWyBzZXJ2aWNlSW5kZXggXX0gaXMgbm90IHZhbGlkIGZvciB0aGlzIGRldmljZS4gVHJ5aW5nIGFnYWluIHdpdGggVVVJRDogJHt0aGlzLmRldmljZVVVSURzWyBzZXJ2aWNlSW5kZXggKyAxIF19IHx8ICR7bmV3IERhdGUoKX1gXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuZmluZFByaW1hcnlTZXJ2aWNlKHNlcnZpY2VJbmRleCArIDEpICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbRVJST1JdOiBGYWlsZWQgdG8gcmV0cmlldmUgQ2FyZCBTZXJ2aWNlIC0gVVVJRDogJHt0aGlzLmRldmljZVVVSURzWyBzZXJ2aWNlSW5kZXggXX0gaXMgbm90IHZhbGlkIGZvciB0aGlzIGRldmljZS4gfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoIGVyciApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgY29ubmVjdEFuZENhY2hlID0gb3B0aW9uYWxJbmRleCA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cclxuICAgICAgICBsZXQgdHJ5VG9Db25uZWN0ID0gdHJ5Q291bnQgPT4gbmV3IFByb21pc2UoIChpbm5lclJlc29sdmUsIGlubmVyUmVqZWN0KSA9PiAodHJ5Q291bnQgPCA0KSA/IFxyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3QoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oICgpID0+IHRoaXMuY2FjaGVDYXJkU2VydmljZUJhc2Uob3B0aW9uYWxJbmRleCkgKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oIGNhY2hlU2VydmljZVJlc3AgPT4gaW5uZXJSZXNvbHZlKCBjYWNoZVNlcnZpY2VSZXNwIClcclxuICAgICAgICAgICAgICAgICkuY2F0Y2goIGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVyci5jb2RlID09PSBhcGlOZXR3b3JrRXJyLmNvZGUgJiYgZXJyLm5hbWUgPT09IGFwaU5ldHdvcmtFcnIubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0VSUk9SXTogRXJyb3IgY2FjaGluZyBHQVRUIFNlcnZpY2UgLSBDbGVhcmluZyBjYWNoZSBhbmQgdHJ5aW5nIGFnYWluLiB8fCAke25ldyBEYXRlKCl9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyR2F0dENhY2hlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5uZXJSZXNvbHZlKCB0cnlUb0Nvbm5lY3QoIHRyeUNvdW50ICsgMSApICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtFUlJPUl06IEZhaWxlZCB0byBjYWNoZSBHQVRUIFNlcnZpY2UgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5uZXJSZWplY3QoIGVyciApXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICBpbm5lclJlamVjdCggdGhpcy5idWlsZERldmljZUVycihnZXRTZXJ2aWNlRmFpbCkgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiB0cnlUb0Nvbm5lY3QoMCkudGhlbihcclxuICAgICAgICAgICAgY2FjaGVTZXJ2aWNlUmVzcCA9PiByZXNvbHZlKCBjYWNoZVNlcnZpY2VSZXNwKVxyXG4gICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNlbmRBcnBjQmFzZSA9IGFycGNSZXNwID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKVxyXG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGRldmljZU5vdE9wZW4pICk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgYXJwY1Jlc3AgIT09ICdzdHJpbmcnICYmIHR5cGVvZiBhcnBjUmVzcCAhPT0gJ29iamVjdCcpXHJcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoIHdyb25nSW5wdXRUeXBlcyhbJ3N0cmluZycsICdhcnJheSBvZiBudW1iZXJzJ10pICkgKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGF0YUxlbiA9ICh0eXBlb2YgYXJwY1Jlc3AgPT09ICdzdHJpbmcnKSA/IChhcnBjUmVzcC5sZW5ndGggLyAyKSA6IGFycGNSZXNwLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBpbnB1dERhdGEgPSAodHlwZW9mIGFycGNSZXNwID09PSAnc3RyaW5nJykgPyB0aGlzLmhleFRvQnl0ZXMoYXJwY1Jlc3ApIDogYXJwY1Jlc3A7XHJcblxyXG4gICAgICAgIHJldHVybiByZXNvbHZlKFxyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkQXJwY0NvbW1hbmQoZGF0YUxlbiwgaW5wdXREYXRhKVxyXG4gICAgICAgIClcclxuICAgIH0pO1xyXG5cclxuICAgIG9uRGVzdHJveUhhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGV2aWNlICYmIHRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSBcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGV2aWNlLmdhdHQuZGlzY29ubmVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHdhaXRGb3JEZXZpY2VSZXNwb25zZSA9IG1heFRyaWVzID0+IG5ldyBQcm9taXNlKCByZXNvbHZlID0+IHtcclxuXHJcbiAgICAgICAgbGV0IHdhaXRGb3JSZXNwb25zZSA9IHRyeU51bWJlciA9PiBcclxuICAgICAgICAgICAgKHRyeU51bWJlciA8IG1heFRyaWVzKSA/IFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuY29tbWFuZFJlc3BBdmFpbGFibGUpID8gcmVzb2x2ZSggdHJ1ZSApIDogc2V0VGltZW91dCgoKSA9PiB3YWl0Rm9yUmVzcG9uc2UodHJ5TnVtYmVyICsgMSksIDIwMClcclxuICAgICAgICAgICAgOiByZXNvbHZlKCBmYWxzZSApO1xyXG5cclxuICAgICAgICB3YWl0Rm9yUmVzcG9uc2UoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkaXNjb25uZWN0SGFuZGxlciA9IGV2ZW50ID0+IHtcclxuICAgICAgICB0aGlzLmdhdHRTZXJ2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2FyZFNlcnZpY2UgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbRGlzY29ubmVjdGVkXTogRGlzY29ubmVjdCBldmVudC4gUmV0dXJuaW5nIGV2ZW50IHRvIHVzZXIsIHJlbW92aW5nIGRldmljZSBsaXN0ZW5lciB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGlzY29ubmVjdENhbGxiYWNrKGV2ZW50KTtcclxuICAgICAgICB0aGlzLmRldmljZS5yZW1vdmVFdmVudExpc3RlbmVyKCdnYXR0c2VydmVyZGlzY29ubmVjdGVkJywgdGhpcy5kaXNjb25uZWN0SGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgaXNEZXZpY2VDb25uZWN0ZWQgPSAoKSA9PiAodGhpcy5kZXZpY2UuZ2F0dCkgPyB0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCA6IGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEZXZpY2VCYXNlOyIsImltcG9ydCBEZXZpY2VCYXNlIGZyb20gJy4uL2RldmljZXMvYmFzZUNsYXNzJztcclxuXHJcbmNsYXNzIFBpblV0aWxzIGV4dGVuZHMgRGV2aWNlQmFzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIGNhbGxCYWNrcykge1xyXG4gICAgICAgIHN1cGVyKGRldmljZSwgY2FsbEJhY2tzKTtcclxuICAgIH1cclxuXHJcbiAgICBkZWNpbWFsVG9CaW5hcnkgPSBudW0gPT4ge1xyXG4gICAgICAgIGxldCBiaW5hcnlOdW0gPSAobnVtID4+PiAwKS50b1N0cmluZygyKTtcclxuICAgICAgICByZXR1cm4gXCIwMDAwMDAwMFwiLnN1YnN0cihiaW5hcnlOdW0ubGVuZ3RoKSArIGJpbmFyeU51bTtcclxuICAgIH1cclxuXHJcbiAgICBzdHJpbmdOdW1Ub0Jvb2wgPSBzdHJpbmdOdW0gPT4gISErc3RyaW5nTnVtO1xyXG5cclxuICAgIGZpbmROdWxsVGVybWluYXRlZFN0cmluZyA9IG51bGxUZXJtaW5hdGVkQXJyYXkgPT4ge1xyXG4gICAgICAgIGxldCB0YXJnZXRJbmRleDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudWxsVGVybWluYXRlZEFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChudWxsVGVybWluYXRlZEFycmF5W2ldID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbFRlcm1pbmF0ZWRBcnJheVtpICsgMV0gPT09IDAgJiYgbnVsbFRlcm1pbmF0ZWRBcnJheVtpICsgMl0gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAodGFyZ2V0SW5kZXgpID8gXHJcbiAgICAgICAgICAgIHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcobnVsbFRlcm1pbmF0ZWRBcnJheS5zbGljZSgyLCB0YXJnZXRJbmRleCkgKSBcclxuICAgICAgICAgICAgOiB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKG51bGxUZXJtaW5hdGVkQXJyYXkuc2xpY2UoMikgKTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kUGluTGVuZ3RoID0gKG1heExlbiwgbWluTGVuKSA9PiB7XHJcbiAgICAgICAgbGV0IG1heExlbmd0aCA9IDEyO1xyXG4gICAgICAgIGxldCBtaW5MZW5ndGggPSA0O1xyXG5cclxuICAgICAgICBpZiAobWF4TGVuKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4TGVuID09PSAnbnVtYmVyJyAmJiBtYXhMZW4gPD0gMTIpXHJcbiAgICAgICAgICAgICAgICBtYXhMZW5ndGggPSAobWF4TGVuID49IDQpID8gbWF4TGVuIDogMTI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobWluTGVuKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWluTGVuID09PSAnbnVtYmVyJyAmJiBtaW5MZW4gPj00KVxyXG4gICAgICAgICAgICAgICAgbWluTGVuZ3RoID0gKG1pbkxlbiA8PSBtYXhMZW5ndGgpID8gbWluTGVuIDogNDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwYXJzZUludChgJHttYXhMZW5ndGgudG9TdHJpbmcoMTYpfSR7bWluTGVuZ3RoLnRvU3RyaW5nKDE2KX1gLCAxNik7XHJcbiAgICB9XHJcblxyXG4gICAgYnVpbGRQaW5PcHRpb25zQnl0ZSA9IChsYW5ndWFnZVNlbGVjdGlvbiwgd2FpdE1lc3NhZ2UsIHZlcmlmeVBpbiwgcGluQmxvY2tGb3JtYXQpID0+IHtcclxuICAgICAgICBjb25zdCBsYW5ndWFnZVByb21wdHMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgXCJkaXNhYmxlZFwiOiBcIjAwXCIsXHJcbiAgICAgICAgICAgIFwiZW5nbGlzaGZyZW5jaFwiOiBcIjAxXCIsXHJcbiAgICAgICAgICAgIFwiYWxsc3BlY2lmaWVkXCI6IFwiMTBcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsYW5ndWFnZVNlbGVjdGlvbiA9IChsYW5ndWFnZVNlbGVjdGlvbikgPyAobGFuZ3VhZ2VQcm9tcHRzWyBsYW5ndWFnZVNlbGVjdGlvbi50b0xvd2VyQ2FzZSgpIF0gfHwgbGFuZ3VhZ2VQcm9tcHRzLmRpc2FibGVkKSA6IGxhbmd1YWdlUHJvbXB0cy5kaXNhYmxlZDtcclxuICAgICAgICB3YWl0TWVzc2FnZSA9ICh0eXBlb2Ygd2FpdE1lc3NhZ2UgPT09ICdib29sZWFuJykgPyB3YWl0TWVzc2FnZSA6IHRydWU7XHJcbiAgICAgICAgdmVyaWZ5UGluID0gKHR5cGVvZiB3YWl0TWVzc2FnZSA9PT0gJ2Jvb2xlYW4nKSA/IHdhaXRNZXNzYWdlIDogdHJ1ZTtcclxuICAgICAgICBcclxuICAgICAgICBwaW5CbG9ja0Zvcm1hdCA9IChwaW5CbG9ja0Zvcm1hdCkgPyBcclxuICAgICAgICAgICAgKHBpbkJsb2NrRm9ybWF0LnRvTG93ZXJDYXNlKCkgaW4gWydpc28wJywgJ2lzbzMnXSkgPyBcclxuICAgICAgICAgICAgICAgIChwaW5CbG9ja0Zvcm1hdC50b0xvd2VyQ2FzZSgpID09PSAnaXNvMCcpID8gJzAnIDogJzEnIFxyXG4gICAgICAgICAgICA6ICcwJ1xyXG4gICAgICAgIDogJzAnO1xyXG5cclxuICAgICAgICBjb25zdCBiaW5hcnlSZXN1bHQgPSBgMDAwJHtsYW5ndWFnZVNlbGVjdGlvbn0keygod2FpdE1lc3NhZ2UpID8gJzEnIDogJzAnKX0keygodmVyaWZ5UGluKSA/ICcxJyA6ICcwJyl9JHtwaW5CbG9ja0Zvcm1hdH1gO1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtQaW5PcHRpb25zQnl0ZV06IGJpbmFyeSBzdHJpbmcgcmVwcmVzZW50YXRpb246ICR7YmluYXJ5UmVzdWx0fSB8fCBieXRlIHJlc3VsdDogJHtwYXJzZUludChiaW5hcnlSZXN1bHQsIDIpfWApXHJcblxyXG4gICAgICAgIHJldHVybiBwYXJzZUludChiaW5hcnlSZXN1bHQsIDIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQaW5VdGlsczsiLCJpbXBvcnQgUGluVXRpbHMgZnJvbSAnLi4vdXRpbHMvcGluVXRpbHMnO1xyXG5pbXBvcnQgeyBjb25maWdTdHIsIHVua25vd24sIGFzY2lpIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuXHJcbmNsYXNzIFBhcnNlUGluQ29uZmlnIGV4dGVuZHMgUGluVXRpbHMge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsQmFja3MpIHtcclxuICAgICAgICBzdXBlcihkZXZpY2UsIGNhbGxCYWNrcyk7XHJcblxyXG4gICAgICAgIHRoaXMudHJhY2tEYXRhT3B0aW9ucyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICBcIjAwXCI6IFwiRGlzYWJsZWRcIixcclxuICAgICAgICAgICAgXCIwMVwiOiBcIkVuYWJsZWRcIixcclxuICAgICAgICAgICAgXCIxMVwiOiBcIlJlcXVpcmVkXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5lbXZMMkNvbmZpZ09wdGlvbnMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgXCIwMDAwXCI6IFwiTm8gTDIgQ2FwYWJpbGl0eVwiLFxyXG4gICAgICAgICAgICBcIjAwMDFcIjogYCR7Y29uZmlnU3RyfSBDMSAoRU1WQ28gY2VydGlmaWVkKWAsXHJcbiAgICAgICAgICAgIFwiMDAxMFwiOiBgJHtjb25maWdTdHJ9IEMyYCxcclxuICAgICAgICAgICAgXCIwMDExXCI6IGAke2NvbmZpZ1N0cn0gQzNgLFxyXG4gICAgICAgICAgICBcIjAxMDBcIjogYCR7Y29uZmlnU3RyfSBDNCAoRU1WQ28gY2VydGlmaWVkKWAsXHJcbiAgICAgICAgICAgIFwiMDEwMVwiOiBgJHtjb25maWdTdHJ9IEM1IChFTVZDbyBjZXJ0aWZpZWQpYCxcclxuICAgICAgICAgICAgXCIwMTEwXCI6IGAke2NvbmZpZ1N0cn0gQzZgLFxyXG4gICAgICAgICAgICBcIjAxMTFcIjogYCR7Y29uZmlnU3RyfSBDN2BcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5lbmFibGVkQnJhbmRzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIFwiMFwiOiBcIkFsbCBjb250YWNsZXNzIGtlcm5hbHMgZW5hYmxlZFwiLFxyXG4gICAgICAgICAgICBcIjFcIjogXCJQYXlQYXNzL01DTCBzdXBwb3J0IGRpc2FibGVkXCIsXHJcbiAgICAgICAgICAgIFwiMlwiOiBcInBheVdhdmUgc3VwcG9ydCBkaXNhYmxlZFwiLFxyXG4gICAgICAgICAgICBcIjRcIjogXCJFeHByZXNzcGF5IHN1cHBvcnQgZGlzYWJsZWRcIixcclxuICAgICAgICAgICAgXCI4XCI6IFwiRC1QQVMgc3VwcG9ydCBkaXNhYmxlZFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VEZXZpY2VDb25maWd1cmF0aW9uID0gY29uZmlnQXJyID0+ICh7XHJcbiAgICAgICAgLi4udGhpcy5maXJzdERldmljZUNvbnRyb2xCeXRlKCB0aGlzLmRlY2ltYWxUb0JpbmFyeShjb25maWdBcnJbMV0pICksXHJcbiAgICAgICAgLi4udGhpcy5zZWNvbmREZXZpY2VDb250cm9sQnl0ZSggdGhpcy5kZWNpbWFsVG9CaW5hcnkoY29uZmlnQXJyWzJdKSApLFxyXG4gICAgICAgIC4uLnRoaXMubWFza0NvbmZpZ3VyYXRpb25CeXRlKCB0aGlzLmRlY2ltYWxUb0JpbmFyeShjb25maWdBcnJbM10pICksXHJcbiAgICAgICAgLi4udGhpcy5tc3JDb25maWd1cmF0aW9uQnl0ZSggdGhpcy5kZWNpbWFsVG9CaW5hcnkoY29uZmlnQXJyWzRdKSApLFxyXG4gICAgICAgIG1hc2tDaGFyYWN0ZXI6IHRoaXMuZmluZE1hc2tDaGFyYWN0ZXIoY29uZmlnQXJyWzVdKSxcclxuICAgICAgICBsZWFkaW5nVW5tYXNrZWRMZW5ndGg6IHBhcnNlSW50KHRoaXMuZGVjaW1hbFRvQmluYXJ5KCBjb25maWdBcnJbNl0pLnNsaWNlKDQpLCAyKSxcclxuICAgICAgICB0cmFpbGluZ1VubWFza2VkTGVuZ3RoOiBwYXJzZUludCh0aGlzLmRlY2ltYWxUb0JpbmFyeSggY29uZmlnQXJyWzZdKS5zbGljZSgwLCA0KSwgMiksXHJcbiAgICAgICAgZW12TDJJY3NDb25maWc6ICh0aGlzLmVtdkwyQ29uZmlnT3B0aW9uc1sgdGhpcy5kZWNpbWFsVG9CaW5hcnkoY29uZmlnQXJyWzddKS5zbGljZSgwLCA0KSBdIHx8IGAke3Vua25vd259L1VuZG9jdW1lbnRlZCBFTVYgTDIgSUNTICR7Y29uZmlnU3RyfWApLFxyXG4gICAgICAgIC4uLnRoaXMuY29udGFjdGxlc3NDb25maWcoIGNvbmZpZ0Fycls4XSApXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb250YWN0bGVzc0NvbmZpZyA9IGNvbnRhY3RsZXNzQnl0ZSA9PiAoe1xyXG4gICAgICAgIGNvbnRhY3RsZXNzU3VwcG9ydDogdGhpcy5lbmFibGVkQnJhbmRzWyB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKFtjb250YWN0bGVzc0J5dGVdKVswXSBdLFxyXG4gICAgICAgIGNvbnRhY3RsZXNzR3VpQ29udHJvbHM6ICh0aGlzLmRlY2ltYWxUb0JpbmFyeShjb250YWN0bGVzc0J5dGUpWzVdID09PSBcIjFcIikgPyBcIkFsdGVybmF0ZVwiIDogXCJTdGFuZGFyZFwiXHJcbiAgICB9KVxyXG5cclxuICAgIGZpbmRNYXNrQ2hhcmFjdGVyID0gbnVtQ2hhciA9PiB7XHJcbiAgICAgICAgaWYgKG51bUNoYXIgPT09IDQ4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgJHthc2NpaX06ICcwJ2BcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG51bUNoYXJUb0hleCA9IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoW251bUNoYXJdKTtcclxuICAgICAgICAgICAgY29uc3QgbnVtQ2hhclRvQXNjaWkgPSB0aGlzLmhleFRvQXNjaWkoIG51bUNoYXJUb0hleCApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChudW1DaGFyVG9Bc2NpaSkgPyBgJHthc2NpaX06ICcke251bUNoYXJUb0FzY2lpfSdgIFxyXG4gICAgICAgICAgICAgICAgOiBgTm9uLSR7YXNjaWl9IGNoYXJhY3RlciBpbiBoZXg6ICcke251bUNoYXJUb0hleH0nYFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmaXJzdERldmljZUNvbnRyb2xCeXRlID0gZGV2aWNlQ29udHJvbEJ5dGUgPT4gKHtcclxuICAgICAgICByZXF1aXJlTXV0dWFsQXV0aDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woZGV2aWNlQ29udHJvbEJ5dGVbMF0pLFxyXG4gICAgICAgIG1zckVuY3J5cHRpb25WYXJpYW50OiAoZGV2aWNlQ29udHJvbEJ5dGVbMV0gPT09IFwiMVwiKSA/IFwiREFUQVwiIDogXCJQSU5cIixcclxuICAgICAgICBpc0NsZWFyVGV4dEVuYWJsZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKGRldmljZUNvbnRyb2xCeXRlWzNdKSxcclxuICAgICAgICBpc0JlZXBlck1vZGVFbmFibGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbChkZXZpY2VDb250cm9sQnl0ZVs0XSksXHJcbiAgICAgICAgaXNCaXRtYXBMb2NrZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKGRldmljZUNvbnRyb2xCeXRlWzZdKSxcclxuICAgICAgICBpc0NvbmZpZ3VyYXRpb25Mb2NrZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKGRldmljZUNvbnRyb2xCeXRlWzddKVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2Vjb25kRGV2aWNlQ29udHJvbEJ5dGUgPSBkZXZpY2VDdHJsQnl0ZSA9PiAoe1xyXG4gICAgICAgIGlzQXJwY01hY0VuYWJsZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKGRldmljZUN0cmxCeXRlWzFdKSxcclxuICAgICAgICBpc0ZpbmFuY2lhbEljY0NhcmRUeXBlUmVwb3J0aW5nRW5hYmxlZDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woZGV2aWNlQ3RybEJ5dGVbMl0pLFxyXG4gICAgICAgIGFycWNCYXRjaERhdGFPdXRwdXRGb3JtYXQ6IChkZXZpY2VDdHJsQnl0ZVszXSA9PT0gXCIxXCIpID8gXCJSZXNlcnZlZCBGb3JtYXRcIiA6IFwiRHluYVBybyBGb3JtYXRcIlxyXG4gICAgfSk7XHJcblxyXG4gICAgbWFza0NvbmZpZ3VyYXRpb25CeXRlID0gbWFza0NvbmZpZ0J5dGUgPT4gKHtcclxuICAgICAgICBpc0lzb01hc2tFbmFibGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbChtYXNrQ29uZmlnQnl0ZVs3XSksXHJcbiAgICAgICAgaXNDaGVja0RpZ2l0RW5hYmxlZDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2wobWFza0NvbmZpZ0J5dGVbNl0pLFxyXG4gICAgICAgIGlzTXMyUG9pbnQwRW5hYmxlZDogKCBtYXNrQ29uZmlnQnl0ZS5zbGljZSg0LCA2KSAhPT0gXCIwMFwiKVxyXG4gICAgfSk7XHJcblxyXG4gICAgbXNyQ29uZmlndXJhdGlvbkJ5dGUgPSBtc3JDb25maWdCeXRlID0+ICh7XHJcbiAgICAgICAgaXNBQU1WQWNhcmRFbmFibGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbChtc3JDb25maWdCeXRlWzddKSxcclxuICAgICAgICB0cmFjazNEYXRhOiAoIHRoaXMudHJhY2tEYXRhT3B0aW9uc1sgbXNyQ29uZmlnQnl0ZS5zbGljZSg0LCA2KSBdIHx8IHVua25vd24gKSxcclxuICAgICAgICB0cmFjazJEYXRhOiAoIHRoaXMudHJhY2tEYXRhT3B0aW9uc1sgbXNyQ29uZmlnQnl0ZS5zbGljZSgyLCA0KSBdIHx8IHVua25vd24gKSxcclxuICAgICAgICB0cmFjazFEYXRhOiAoIHRoaXMudHJhY2tEYXRhT3B0aW9uc1sgbXNyQ29uZmlnQnl0ZS5zbGljZSgwLCAyKSBdIHx8IHVua25vd24gKSxcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBhcnNlUGluQ29uZmlnO1xyXG4iLCJpbXBvcnQgUGFyc2VQaW5Db25maWcgZnJvbSAnLi9waW5Db25maWd1cmF0aW9uJztcclxuaW1wb3J0IHsgdW5rbm93biB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XHJcblxyXG5jbGFzcyBQaW5TdGF0dXNQYXJzZXIgZXh0ZW5kcyBQYXJzZVBpbkNvbmZpZyB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIGNhbGxCYWNrcykge1xyXG4gICAgICAgIHN1cGVyKGRldmljZSwgY2FsbEJhY2tzKTtcclxuXHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25TdGF0dXMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgMHgwMDogXCJPa1wiLFxyXG4gICAgICAgICAgICAweDAxOiBcIkNhcmRob2xkZXIgQ2FuY2VsXCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiVGltZW91dFwiLFxyXG4gICAgICAgICAgICAweDAzOiBcIkhvc3QgQ2FuY2VsXCIsXHJcbiAgICAgICAgICAgIDB4MDQ6IFwiVmVyaWZ5IGZhaWxcIixcclxuICAgICAgICAgICAgMHgwNTogXCJLZXlwYWQgU2VjdXJpdHlcIixcclxuICAgICAgICAgICAgMHgwNjogXCJDYWxpYnJhdGlvbiBEb25lXCIsXHJcbiAgICAgICAgICAgIDB4MDc6IFwiV3JpdGUgd2l0aCBkdXBsaWNhdGUgUklEIGFuZCBpbmRleFwiLFxyXG4gICAgICAgICAgICAweDA4OiBcIldyaXRlIHdpdGggY29ycnVwdGVkIEtleVwiLFxyXG4gICAgICAgICAgICAweDA5OiBcIkNBIFB1YmxpYyBLZXkgcmVhY2hlZCBtYXhpbXVtIGNhcGFjaXR5XCIsXHJcbiAgICAgICAgICAgIDB4MEE6IFwiQ0EgUHVibGljIEtleSByZWFkIHdpdGggaW52YWxpZCBSSUQgb3IgSW5kZXhcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLkFDS1NUUyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIk9rXCIsXHJcbiAgICAgICAgICAgIDB4MTU6IFwiUklEIGVycm9yL0luZGV4IG5vdCBmb3VuZFwiLFxyXG4gICAgICAgICAgICAweDgwOiBcIkRldmljZSBFcnJvcjogZXJyb3IsIHRhbXBlciwgbWlzc2luZyBjZXJ0aWZpY2F0ZSBvciBpbmNvcnJlY3Qgc2lnbmF0dXJlIGRldGVjdGVkXCIsXHJcbiAgICAgICAgICAgIDB4ODE6IFwiRGV2aWNlIG5vdCBpZGxlXCIsXHJcbiAgICAgICAgICAgIDB4ODI6IFwiRGF0YSBFcnJvciBvciBCYWQgUGFyYW1hdGVyKHMpXCIsXHJcbiAgICAgICAgICAgIDB4ODM6IFwiTGVuZ3RoIEVycm9yOiBkYXRhIHNpemUgaXMgZWl0aGVyIHRvbyBzbWFsbCwgdG9vIGxhcmdlLCBpbmNvbXBsZXRlLCBvciBPSUQgb2YgdGhlIGNlcnQgZG9lc24ndCBtYXRjaCBwcmVkZWZpbmVkIE9JRFwiLFxyXG4gICAgICAgICAgICAweDg0OiBcIlBBTiBFeGlzdHNcIixcclxuICAgICAgICAgICAgMHg4NTogXCJNaXNzaW5nIG9yIEluY29ycmVjdCBLZXlcIixcclxuICAgICAgICAgICAgMHg4NjogXCJEZXZpY2UgQnVzeVwiLFxyXG4gICAgICAgICAgICAweDg3OiBcIkRldmljZSBMb2NrZWRcIixcclxuICAgICAgICAgICAgMHg4ODogXCJBdXRoIHJlcXVpcmVkXCIsXHJcbiAgICAgICAgICAgIDB4ODk6IFwiQmFkIEF1dGhcIixcclxuICAgICAgICAgICAgMHg4QTogXCJEZXZpY2UgTm90IEF2YWlsYWJsZVwiLFxyXG4gICAgICAgICAgICAweDhCOiBcIkFtb3VudCBOZWVkZWQgLSBJZiBQSU4gYW1vdW50IGlzIHJlcXVpcmVkLCBubyBhbW91bnQgaGFzIGJlZW4gc2V0XCIsXHJcbiAgICAgICAgICAgIDB4OEM6IFwiQmF0dGVyeSBpcyBjcml0aWNhbGx5IGxvd1wiLFxyXG4gICAgICAgICAgICAweDhEOiBcIkRldmljZSBpcyByZXNldHRpbmdcIixcclxuICAgICAgICAgICAgMHg5MDogXCJDZXJ0aWZpY2F0ZSBkb2VzIG5vdCBleGlzdFwiLFxyXG4gICAgICAgICAgICAweDkxOiBcIkV4cGlyZWQgKENlcnQvQ1JMKVwiLFxyXG4gICAgICAgICAgICAweDkyOiBcIkludmFsaWQgKENlcnQvQ1JML01lc3NhZ2UpXCIsXHJcbiAgICAgICAgICAgIDB4OTM6IFwiUmV2b2tlZCAoQ2VydC9DUkwpXCIsXHJcbiAgICAgICAgICAgIDB4OTQ6IFwiQ1JMIGRvZXMgbm90IGV4aXN0XCIsXHJcbiAgICAgICAgICAgIDB4OTU6IFwiQ2VydGlmaWNhdGUgZXhpc3RzXCIsXHJcbiAgICAgICAgICAgIDB4OTY6IFwiRHVwbGljYXRlIEtTTi9LZXlcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnBpbkRpc3BsYXlNZXNzYWdlcyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIkhhbmRzIE9mZlwiLFxyXG4gICAgICAgICAgICAweDAxOiBcIkFwcHJvdmVkXCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiRGVjbGluZWRcIixcclxuICAgICAgICAgICAgMHgwMzogXCJDYW5jZWxsZWRcIixcclxuICAgICAgICAgICAgMHgwNDogXCJUaGFuayBZb3VcIixcclxuICAgICAgICAgICAgMHgwNTogXCJQSU4gSW52YWxpZFwiLFxyXG4gICAgICAgICAgICAweDA2OiBcIlByb2Nlc3NpbmdcIixcclxuICAgICAgICAgICAgMHgwNzogXCJQbGVhc2UgV2FpdFwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucGluQ29tbWFuZElkcyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAxOiBcInJlc3BvbnNlQUNLXCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiY2xlYXJTZXNzaW9uXCIsXHJcbiAgICAgICAgICAgIDB4MDM6IFwic3dpcGVcIixcclxuICAgICAgICAgICAgMHgwNDogXCJyZXF1ZXN0UGluRW50cnlcIixcclxuICAgICAgICAgICAgMHgwNTogXCJjYW5jZWxDb21tYW5kXCIsXHJcbiAgICAgICAgICAgIDB4MDY6IFwicmVxdWVzdENhcmRob2xkZXJTZWxlY3Rpb25cIixcclxuICAgICAgICAgICAgMHgwNzogXCJkaXNwbGF5TWVzc2FnZVwiLFxyXG4gICAgICAgICAgICAweDA4OiBcInJlcXVlc3REZXZpY2VTdGF0dXNcIixcclxuICAgICAgICAgICAgMHgwOTogXCJyZXF1ZXN0RGV2aWNlQ29uZmlndXJhdGlvblwiLFxyXG4gICAgICAgICAgICAweDBBOiBcInJlcXVlc3RNc3JEYXRhXCIsXHJcbiAgICAgICAgICAgIDB4MEI6IFwiZ2V0Q2hhbGxlbmdlXCIsXHJcbiAgICAgICAgICAgIDB4MDc6IFwiZGlzcGxheU1lc3NhZ2VcIixcclxuICAgICAgICAgICAgMHhBMjogXCJlbXZUcmFuc2FjdGlvblN0YXR1c1wiLFxyXG4gICAgICAgICAgICAweEFCOiBcInJlcXVlc3RFbXZEYXRhXCIsXHJcbiAgICAgICAgICAgIDB4MzA6IFwiZ2V0S3NuXCIsXHJcbiAgICAgICAgICAgIDB4MDU6IFwiY2FuY2VsQ29tbWFuZFwiLFxyXG4gICAgICAgICAgICAweDFBOiBcInJlcXVlc3REZXZpY2VJbmZvXCIsXHJcbiAgICAgICAgICAgIDB4MTA6IFwic2VuZEJpZ0Jsb2NrRGF0YVwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZFR5cGVzRW51bSA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIk90aGVyXCIsXHJcbiAgICAgICAgICAgIDB4MDE6IFwiRmluYW5jaWFsXCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiQUFNVkFcIixcclxuICAgICAgICAgICAgMHgwMzogXCJNYW51YWxcIixcclxuICAgICAgICAgICAgMHgwNDogXCJVbmtub3duXCIsXHJcbiAgICAgICAgICAgIDB4MDU6IFwiSUNDXCIsXHJcbiAgICAgICAgICAgIDB4MDY6IFwiQ29udGFjdGxlc3MgSUNDIC0gRU1WXCIsXHJcbiAgICAgICAgICAgIDB4MDc6IFwiRmluYW5jaWFsIE1TUiArIElDQ1wiLFxyXG4gICAgICAgICAgICAweDA4OiBcIkNvbnRhY3RsZXNzIElDQyAtIE1TRFwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZGV2aWNlU3RhdGUgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgMHgwMDogXCJJZGxlXCIsXHJcbiAgICAgICAgICAgIDB4MDE6IFwiU2Vzc2lvblwiLFxyXG4gICAgICAgICAgICAweDAyOiBcIldhaXQgRm9yIENhcmRcIixcclxuICAgICAgICAgICAgMHgwMzogXCJXYWl0IEZvciBQSU5cIixcclxuICAgICAgICAgICAgMHgwNDogXCJXYWl0IEZvciBTZWxlY3Rpb25cIixcclxuICAgICAgICAgICAgMHgwNTogXCJEaXNwbGF5aW5nIE1lc3NhZ2VcIixcclxuICAgICAgICAgICAgMHgwNjogXCJUZXN0IChSZXNlcnZlZCBmb3IgZnV0dXJlIHVzZSlcIixcclxuICAgICAgICAgICAgMHgwNzogXCJNYW51YWwgQ2FyZCBFbnRyeVwiLFxyXG4gICAgICAgICAgICAweDA5OiBcIldhaXQgQ2FyZGhvbGRlciBFbnRyeVwiLFxyXG4gICAgICAgICAgICAweDBBOiBcIkNoaXAgQ2FyZFwiLFxyXG4gICAgICAgICAgICAweDBCOiBcIklDQyBLZXJuZWwgVGVzdFwiLFxyXG4gICAgICAgICAgICAweDBDOiBcIkVNViBUcmFuc2FjdGlvblwiLFxyXG4gICAgICAgICAgICAweDBEOiBcIlNob3cgUEFOXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5waW5LZXlTdGF0dXNFbnVtID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIFwiMDBcIjogXCJQSU4gS2V5IE9LXCIsXHJcbiAgICAgICAgICAgIFwiMDFcIjogXCJQSU4gS2V5IEV4aGF1c3RlZFwiLFxyXG4gICAgICAgICAgICBcIjEwXCI6IFwiTm8gUElOIEtleVwiLFxyXG4gICAgICAgICAgICBcIjExXCI6IFwiUElOIEtleSBOb3QgQm91bmRcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm1zcktleVN0YXR1c0VudW0gPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgXCIwMFwiOiBcIk1TUiBLZXkgT0tcIixcclxuICAgICAgICAgICAgXCIwMVwiOiBcIk1TUiBLZXkgRXhoYXVzdGVkXCIsXHJcbiAgICAgICAgICAgIFwiMTBcIjogXCJObyBNU1IgS2V5XCIsXHJcbiAgICAgICAgICAgIFwiMTFcIjogXCJNU1IgS2V5IE5vdCBCb3VuZFwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZERhdGFJZHMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgMHgwMTogXCJ0cmFjazFcIixcclxuICAgICAgICAgICAgMHgwMjogXCJ0cmFjazJcIixcclxuICAgICAgICAgICAgMHgwMzogXCJ0cmFjazNcIixcclxuICAgICAgICAgICAgMHgwNDogXCJlbmNyeXB0ZWRUcmFjazFcIixcclxuICAgICAgICAgICAgMHgwNTogXCJlbmNyeXB0ZWRUcmFjazJcIixcclxuICAgICAgICAgICAgMHgwNjogXCJlbmNyeXB0ZWRUcmFjazNcIixcclxuICAgICAgICAgICAgMHgwNzogXCJtYWduZVByaW50XCIsXHJcbiAgICAgICAgICAgIDB4NDA6IFwiZW5jcnlwdGVkUGFuQW5kRXhwXCIsXHJcbiAgICAgICAgICAgIDB4NDE6IFwic2VyaWFsTnVtYmVyXCIsXHJcbiAgICAgICAgICAgIDB4NjM6IFwia3NuQW5kTWFnbmVQcmludFN0YXR1c1wiLFxyXG4gICAgICAgICAgICAweDY0OiBcIkNCQy1NQUNcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNhcmRob2xkZXJTdGF0dXNJZHMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgMHgwMTogXCJXYWl0aW5nIGZvciBhbW91bnQgY29uZmlybWF0aW9uIHNlbGVjdGlvblwiLFxyXG4gICAgICAgICAgICAweDAyOiBcIkFtb3VudCBjb25maXJtYXRpb24gc2VsZWN0ZWRcIixcclxuICAgICAgICAgICAgMHgwMzogXCJXYWl0aW5nIGZvciBtdWx0aS1wYXltZW50IElDQyBBcHBsaWNhdGlvbiBzZWxlY3Rpb25cIixcclxuICAgICAgICAgICAgMHgwNDogXCJJQ0MgQXBwbGljYXRpb24gc2VsZWN0ZWRcIixcclxuICAgICAgICAgICAgMHgwNzogXCJXYWl0aW5nIGZvciBsYW5ndWFnZSBzZWxlY3Rpb25cIixcclxuICAgICAgICAgICAgMHgwODogXCJMYW5ndWFnZSBzZWxlY3RlZFwiLFxyXG4gICAgICAgICAgICAweDA5OiBcIldhaXRpbmcgZm9yIGNyZWRpdC9kZWJpdCBzZWxlY3Rpb25cIixcclxuICAgICAgICAgICAgMHgwQTogXCJDcmVkaXQvRGViaXQgc2VsZWN0ZWRcIixcclxuICAgICAgICAgICAgMHgwQjogXCJXYWl0aW5nIGZvciBQaW4gRW50cnkgZm9yIElDQ1wiLFxyXG4gICAgICAgICAgICAweDBDOiBcIlBJTiBlbnRlcmVkIGZvciBJQ0NcIixcclxuICAgICAgICAgICAgMHgwRDogXCJXYWl0aW5nIGZvciBQaW4gRW50cnkgZm9yIE1TUlwiLFxyXG4gICAgICAgICAgICAweDBFOiBcIlBJTiBlbnRlcmVkIGZvciBNU1JcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmJ1ZmZlclR5cGVzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIDB4MDI6IFwiRGV2aWNlIENlcnRpZmljYXRlXCIsXHJcbiAgICAgICAgICAgIDB4MzI6IFwiU2V0IEJJTiAoTUFDKVwiLFxyXG4gICAgICAgICAgICAweDQyOiBcIkNTUlwiLFxyXG4gICAgICAgICAgICAweEExOiBcIkVNViBkYXRhIGluIFRMViBmb3JtYXQsIFRhZyBEYXRhIChNQUMpXCIsXHJcbiAgICAgICAgICAgIDB4QTI6IFwiUkVTRVJWRURcIixcclxuICAgICAgICAgICAgMHhBMzogXCJSRVNFUlZFRFwiLFxyXG4gICAgICAgICAgICAweEE0OiBcIkVNViBkYXRhIGluIFRMViBmb3JtYXQsIEF1dGhvcml6YXRpb24gUmVxdWVzdCAoQVJRQylcIixcclxuICAgICAgICAgICAgMHhBNTogXCJDQSBQdWJsaWMgS2V5IChNQUMpXCIsXHJcbiAgICAgICAgICAgIDB4QUI6IFwiRU1WIGRhdGEgaW4gVExWIGZvcm1hdCwgQmF0Y2ggRGF0YVwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZERhdGFPYmogPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5hcnFjQXJyaXZpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmJhdGNoRGF0YUFycml2aW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuYXJxY1RvdGFsTGVuID0gMDtcclxuICAgICAgICB0aGlzLmJhdGNoVG90YWxMZW4gPSAwO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXR1c0VudW0gPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgb2s6IDB4MDAsXHJcbiAgICAgICAgICAgIGVtcHR5OiAweDAxLFxyXG4gICAgICAgICAgICBlcnJvcjogMHgwMixcclxuICAgICAgICAgICAgZGlzYWJsZWQ6IDB4MDNcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jb252ZXJ0U3RhdHVzVG9TdHJpbmcgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgMHgwMDogXCJPa1wiLFxyXG4gICAgICAgICAgICAweDAxOiBcIkVtcHR5XCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiRXJyb3JcIixcclxuICAgICAgICAgICAgMHgwNDogXCJEaXNhYmxlZFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZEVtdkNhcmRob2xkZXJTdGF0dXMgPSBjYXJkSG9sZGVyU3RhdHVzQnl0ZSA9PiAgKHtcclxuICAgICAgICBlbXZDYXJkaG9sZGVyU3RhdHVzOiAodGhpcy5jYXJkaG9sZGVyU3RhdHVzSWRzWyBjYXJkSG9sZGVyU3RhdHVzQnl0ZSBdIHx8IGAke3Vua25vd259L1VuZG9jdW1lbnRlZCBDYXJkaG9sZGVyIEludGVyYWN0aW9uIFN0YXR1cyBJRDogJHtjYXJkSG9sZGVyU3RhdHVzQnl0ZX1gKVxyXG4gICAgfSk7XHJcblxyXG4gICAgZmluZE9wZXJhdGlvblN0YXR1cyA9IHN0YXR1c0lkID0+ICh7XHJcbiAgICAgICAgb3BlcmF0aW9uU3RhdHVzOiAodGhpcy5vcGVyYXRpb25TdGF0dXNbIHN0YXR1c0lkIF0gfHwgYCR7dW5rbm93bn0gT3BlcmF0aW9uIFN0YXR1c2ApXHJcbiAgICB9KTtcclxuXHJcbiAgICBwYXJzZURpc3BsYXlNZXNzYWdlRG9uZSA9IGRpc3BsYXlTdGF0dXMgPT4gdGhpcy5maW5kT3BlcmF0aW9uU3RhdHVzKGRpc3BsYXlTdGF0dXNbMl0pO1xyXG5cclxuICAgIHBhcnNlRW12Q29tcGxldGlvbiA9IGNvbW1hbmRSZXNwID0+IHtcclxuICAgICAgICAvL1RPRE86XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJbIS0hLSEtIS0gZW12Q29tcGxldGlvbiAtIS0hLSEtIVwiLCBjb21tYW5kUmVzcCk7XHJcbiAgICAgICAgcmV0dXJuICh7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZvcm1hdFNlcmlhbE51bWJlciA9IGNvbW1hbmRSZXNwID0+IHtcclxuICAgICAgICB0aGlzLnJlcXVlc3RlZFNuID0ge1xyXG4gICAgICAgICAgICBzZXJpYWxOdW1iZXI6IHRoaXMuZmluZE51bGxUZXJtaW5hdGVkU3RyaW5nKGNvbW1hbmRSZXNwKVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmdldFNlcmlhbE51bWJlciA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGZvcm1hdEtzbkFuZFNuID0gY29tbWFuZFJlc3AgPT4ge1xyXG4gICAgICAgIHRoaXMucmVxdWVzdGVkS3NuID0ge1xyXG4gICAgICAgICAgICBrc246IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIGNvbW1hbmRSZXNwLnNsaWNlKDIsIDEyKSApLFxyXG4gICAgICAgICAgICBzZXJpYWxOdW1iZXI6IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIGNvbW1hbmRSZXNwLnNsaWNlKDEyLCAyMCkgKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0S3NuQXZhaWxhYmxlID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm47XHJcbn1cclxuXHJcbiAgICBoYW5kbGVCaWdCbG9ja0JlZ2luID0gYmlnQmxvY2tEYXRhID0+IHtcclxuICAgICAgICBzd2l0Y2goYmlnQmxvY2tEYXRhWzFdKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMHhBNDpcclxuICAgICAgICAgICAgICAgIHRoaXMuYXJxY0Fycml2aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXJxY1RvdGFsTGVuID0gdGhpcy5yZWFkVHdvQnl0ZUxlbmd0aChbIGJpZ0Jsb2NrRGF0YVs1XSwgYmlnQmxvY2tEYXRhWzRdIF0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMHhBQjpcclxuICAgICAgICAgICAgICAgIHRoaXMuYmF0Y2hEYXRhQXJyaXZpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYXRjaFRvdGFsTGVuID0gdGhpcy5yZWFkVHdvQnl0ZUxlbmd0aChbIGJpZ0Jsb2NrRGF0YVs1XSwgYmlnQmxvY2tEYXRhWzRdIF0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMHgxODpcclxuICAgICAgICAgICAgY2FzZSAweDIwOlxyXG4gICAgICAgICAgICBjYXNlIDB4MjE6XHJcbiAgICAgICAgICAgICAgICAvL0RlYnVnIGRhdGEuIElnbm9yZS5cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICBidWZmZXJUeXBlOiAodGhpcy5idWZmZXJUeXBlc1sgYmlnQmxvY2tEYXRhWzFdIF0gfHwgXCJCdWZmZXIgdHlwZSBub3QgZG9jdW1lbnRlZFwiKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVBcnFjQmlnQmxvY2tGaW5pc2ggPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYXJxYyA9IHRoaXMuYnVpbGRJbml0aWFsRGF0YUFycmF5KGZhbHNlKTtcclxuICAgICAgICBjb25zdCBkYXRhRm9yQXJxYyA9IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIGFycWMgKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0FSUUNdOiAke2RhdGFGb3JBcnFjfWApO1xyXG5cclxuICAgICAgICB0aGlzLmNhcmREYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICBhcnFjRGF0YTogZGF0YUZvckFycWMsXHJcbiAgICAgICAgICAgIGFycWNEYXRhUGFyc2VkOiB0aGlzLnRsdlBhcnNlcihcclxuICAgICAgICAgICAgICAgIGFycWMuc2xpY2UoMilcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5yYXdEYXRhID0ge307XHJcblxyXG4gICAgICAgIHRoaXMuYXJxY0Fycml2aW5nID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuICghdGhpcy5pc1F1aWNrQ2hpcFRyYW5zYWN0aW9uKSA/IHRoaXMudHJhbnNhY3Rpb25DYWxsYmFjayggdGhpcy5jYXJkRGF0YU9iaiApIDogdm9pZCgwKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVCYXRjaEJpZ0Jsb2NrRmluaXNoID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJhdGNoID0gdGhpcy5idWlsZEluaXRpYWxEYXRhQXJyYXkoZmFsc2UpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFGb3JCYXRjaCA9IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIGJhdGNoICk7XHJcblxyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtCQVRDSCBEQVRBXTogJHtkYXRhRm9yQmF0Y2h9YCk7XHJcblxyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25IYXNTdGFydGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcnNlZEJhdGNoRGF0YSA9IHRoaXMudGx2UGFyc2VyKFxyXG4gICAgICAgICAgICBiYXRjaC5zbGljZSgyKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGlzU2lnbmF0dXJlUmVxdWlyZWQgPSBwYXJzZWRCYXRjaERhdGEuZmluZCggKHsgdGFnIH0pID0+IHRhZyA9PT0gXCJERkRGNDBcIik7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZERhdGFPYmogPSAoaXNTaWduYXR1cmVSZXF1aXJlZCkgPyAoe1xyXG4gICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICBiYXRjaERhdGE6IGRhdGFGb3JCYXRjaCxcclxuICAgICAgICAgICAgYmF0Y2hEYXRhUGFyc2VkOiBwYXJzZWRCYXRjaERhdGEsXHJcbiAgICAgICAgICAgIHNpZ25hdHVyZVJlcXVpcmVkOiAoaXNTaWduYXR1cmVSZXF1aXJlZCA9PT0gMHgwMSlcclxuICAgICAgICB9KSA6ICh7XHJcbiAgICAgICAgICAgIC4uLnRoaXMuY2FyZERhdGFPYmosXHJcbiAgICAgICAgICAgIGJhdGNoRGF0YTogZGF0YUZvckJhdGNoLFxyXG4gICAgICAgICAgICBiYXRjaERhdGFQYXJzZWQ6IHBhcnNlZEJhdGNoRGF0YVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnJhd0RhdGEgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5iYXRjaERhdGFBcnJpdmluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2FjdGlvbkNhbGxiYWNrKCB0aGlzLmNhcmREYXRhT2JqICk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQmlnQmxvY2tGaW5pc2ggPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXJxY0Fycml2aW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUFycWNCaWdCbG9ja0ZpbmlzaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmJhdGNoRGF0YUFycml2aW5nKSB7XHJcbiAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQmF0Y2hCaWdCbG9ja0ZpbmlzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwYXJzZUVtdkNhcmRob2xkZXJJbnRlcmFjdGlvblN0YXR1cyA9IGNhcmRob2xkZXJSZXNwID0+IHtcclxuICAgICAgICBzd2l0Y2goY2FyZGhvbGRlclJlc3BbMV0pIHtcclxuICAgICAgICAgICAgY2FzZSAweDAyOiBcclxuICAgICAgICAgICAgICAgIHJldHVybiAoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZmluZEVtdkNhcmRob2xkZXJTdGF0dXMoY2FyZGhvbGRlclJlc3BbMV0pLFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudENvbmZpcm1lZDogKGNhcmRob2xkZXJSZXNwWzRdID09PSAweDAxKSA/IHRydWUgOiAoY2FyZGhvbGRlclJlc3BbNF0gPT09IDB4MDIpID8gZmFsc2UgOiBcIlVua25vd24vVW5kb2N1bWVudGVkIEFtb3VudCBDb25maXJtZWQgU3RhdHVzXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYXNlIDB4MDQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHtcclxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmZpbmRFbXZDYXJkaG9sZGVyU3RhdHVzKGNhcmRob2xkZXJSZXNwWzFdKSxcclxuICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbk9yTGFiZWxOYW1lOiB0aGlzLmJ1ZmZlclRvVXRmOCggY2FyZGhvbGRlclJlc3Auc2xpY2UoNCkgKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNhc2UgMHgwQTpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZmluZEVtdkNhcmRob2xkZXJTdGF0dXMoY2FyZGhvbGRlclJlc3BbMV0pLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZFNlbGVjdGVkOiAoY2FyZGhvbGRlclJlc3BbNF0gPT09IDB4MDEpID8gXCJDcmVkaXRcIiA6IFxyXG4gICAgICAgICAgICAgICAgICAgIChjYXJkaG9sZGVyUmVzcFs0XSA9PT0gMHgwMikgPyBcIkRlYml0XCIgOiBgJHt1bmtub3dufS9VbmRvY3VtZW50ZWQgcGF5bWVudCBtZXRob2Qgc2VsZWN0ZWRgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2FzZSAweDIwOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5maW5kRW12Q2FyZGhvbGRlclN0YXR1cyhjYXJkaG9sZGVyUmVzcFsxXSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGx2RGF0YTogdGhpcy50bHZQYXJzZXIoIGNhcmRob2xkZXJSZXNwLnNsaWNlKDQpICkgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAodHlwZW9mIGNhcmRob2xkZXJSZXNwWzRdID09PSAndW5kZWZpbmVkJykgPyB0aGlzLmZpbmRFbXZDYXJkaG9sZGVyU3RhdHVzKGNhcmRob2xkZXJSZXNwWzFdKSBcclxuICAgICAgICAgICAgICAgICAgICA6ICh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZmluZEVtdkNhcmRob2xkZXJTdGF0dXMoY2FyZGhvbGRlclJlc3BbMV0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmRvY3VtZW50ZWREYXRhOiB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKCBjYXJkaG9sZGVyUmVzcC5zbGljZSg0KSApXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlQ2FyZFN0YXR1c1JlcG9ydCA9IGNhcmRTdGF0dXMgPT4gKGNhcmRTdGF0dXMubGVuZ3RoIDwgNCkgPyAgXHJcbiAgICAgICAgdGhpcy5maW5kT3BlcmF0aW9uU3RhdHVzKGNhcmRTdGF0dXNbMl0pXHJcbiAgICAgICAgOiAoe1xyXG4gICAgICAgICAgICAuLi50aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMoY2FyZFN0YXR1c1syXSksXHJcbiAgICAgICAgICAgIGNhcmRTdGF0dXM6IChjYXJkU3RhdHVzWzJdID09PSAweDAwKSA/IFwiT2tcIiA6IFwiRXJyb3JcIixcclxuICAgICAgICAgICAgY2FyZFR5cGU6IHRoaXMuY2FyZFR5cGVzRW51bVsgY2FyZFN0YXR1c1szXSBdXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgcGFyc2VBY2tSZXNwb25zZSA9IGFja1Jlc3AgPT4gKHtcclxuICAgICAgICBjb2RlOiBhY2tSZXNwWzFdLFxyXG4gICAgICAgIG1lc3NhZ2U6IHRoaXMuQUNLU1RTWyBhY2tSZXNwWzFdIF0sXHJcbiAgICAgICAgY29tbWFuZFR5cGU6ICggdGhpcy5waW5Db21tYW5kSWRzWyBhY2tSZXNwWzJdIF0gfHwgXCJEZXZpY2UgZXJyb3Igb3IgY29tbWFuZCB0eXBlIG5vdCBkb2N1bWVudGVkXCIgKVxyXG4gICAgfSk7XHJcblxyXG4gICAgcGFyc2VEZXZpY2VTdGF0ZVJlcG9ydCA9IGRldmljZVJlc3AgPT4gKHtcclxuICAgICAgICBkZXZpY2VTdGF0ZTogdGhpcy5kZXZpY2VTdGF0ZVsgZGV2aWNlUmVzcFsxXSBdLCBcclxuICAgICAgICBzZXNzaW9uU3RhdGU6IHRoaXMucGFyc2VTZXNzaW9uU3RhdGUoXHJcbiAgICAgICAgICAgIHRoaXMuZGVjaW1hbFRvQmluYXJ5KCBkZXZpY2VSZXNwWzJdIClcclxuICAgICAgICApLFxyXG4gICAgICAgIGRldmljZVN0YXR1czogdGhpcy5wYXJzZURldmljZVN0YXR1cyhcclxuICAgICAgICAgICAgdGhpcy5kZWNpbWFsVG9CaW5hcnkoZGV2aWNlUmVzcFszXSlcclxuICAgICAgICApLFxyXG4gICAgICAgIGRldmljZUNlcnRTdGF0dXM6IHRoaXMucGFyc2VDZXJ0U3RhdHVzKCBcclxuICAgICAgICAgICAgdGhpcy5kZWNpbWFsVG9CaW5hcnkoIGRldmljZVJlc3BbNF0gKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgaGFyZHdhcmVTdGF0dXM6IHRoaXMucGFyc2VIYXJkd2FyZVN0YXR1cyhcclxuICAgICAgICAgICAgdGhpcy5kZWNpbWFsVG9CaW5hcnkoZGV2aWNlUmVzcFs1XSlcclxuICAgICAgICApLFxyXG4gICAgICAgIGFkZGl0aW9uYWxJbmZvOiB0aGlzLnBhcnNlQWRkaXRpb25hbEluZm8oXHJcbiAgICAgICAgICAgIHRoaXMuZGVjaW1hbFRvQmluYXJ5KGRldmljZVJlc3BbNl0pXHJcbiAgICAgICAgKVxyXG4gICAgfSk7XHJcblxyXG4gICAgcGFyc2VTZXNzaW9uU3RhdGUgPSBiaW5hcnlTdHJpbmcgPT4gKHtcclxuICAgICAgICBwb3dlckRpZENoYW5nZTogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1swXSApLFxyXG4gICAgICAgIGNhcmREYXRhSXNBdmFpbGFibGU6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbNF0gKSxcclxuICAgICAgICBwYW5QYXJzZWRGcm9tQ2FyZDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s1XSApLFxyXG4gICAgICAgIGV4dGVybmFsUGFuU2VudDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s2XSApLFxyXG4gICAgICAgIGFtb3VudFdhc1NlbnQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbN10gKVxyXG4gICAgfSk7XHJcblxyXG4gICAgcGFyc2VDZXJ0U3RhdHVzID0gYmluYXJ5U3RyaW5nID0+ICh7XHJcbiAgICAgICAgbXNyQ3JsQ2VydEV4aXN0czogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1swXSApLFxyXG4gICAgICAgIHBpbkNybENlcnRFeGlzdHM6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbMV0gKSxcclxuICAgICAgICBtZmdVbmJpbmRDZXJ0RXhpc3RzOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzNdICksXHJcbiAgICAgICAgbXNyQ2FDZXJ0RXhpc3RzOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzRdICksXHJcbiAgICAgICAgcGluQ2FDZXJ0RXhpc3RzOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzVdICksXHJcbiAgICAgICAgZGV2aWNlQ2FDZXJ0RXhpc3RzOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzZdICksXHJcbiAgICAgICAgZGV2aWNlQ2VydEV4aXN0czogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s3XSApXHJcbiAgICB9KTtcclxuXHJcbiAgICBwYXJzZURldmljZVN0YXR1cyA9IGJpbmFyeVN0cmluZyA9PiAoYmluYXJ5U3RyaW5nICE9PSBcIjAwMDAwMDAwXCIpID8gKHtcclxuICAgICAgICBwaW5LZXlTdGF0dXM6IHRoaXMucGluS2V5U3RhdHVzRW51bVsgYmluYXJ5U3RyaW5nLnNsaWNlKDYpIF0sXHJcbiAgICAgICAgbXNyS2V5U3RhdHVzOiB0aGlzLm1zcktleVN0YXR1c0VudW1bIGJpbmFyeVN0cmluZy5zbGljZSg0LCA2KSBdLFxyXG4gICAgICAgIHRhbXBlckRldGVjdGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzNdICksXHJcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzFdICksXHJcbiAgICAgICAgZGV2aWNlRXJyb3JEZXRlY3RlZDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1swXSApXHJcbiAgICB9KVxyXG4gICAgOiBcIk9rXCI7XHJcblxyXG4gICAgcGFyc2VIYXJkd2FyZVN0YXR1cyA9IGJpbmFyeVN0cmluZyA9PiAoe1xyXG4gICAgICAgIElFM19vbmx5OiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzBdICksXHJcbiAgICAgICAgU1JFRDogdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1sxXSApLFxyXG4gICAgICAgIE1hZ0hlYWRJc1Byb2dyYW1tZWQ6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbNl0gKSxcclxuICAgICAgICB0YW1wZXJTZW5zb3JzQXJlQWN0aXZlOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzddIClcclxuICAgIH0pO1xyXG5cclxuICAgIHBhcnNlQWRkaXRpb25hbEluZm8gPSBiaW5hcnlTdHJpbmcgPT4gKHtcclxuICAgICAgICBJQ0NfQWNxdWlyZXJNYXN0ZXJLZXlJc0luamVjdGVkOiAhdGhpcy5zdHJpbmdOdW1Ub0Jvb2woIGJpbmFyeVN0cmluZ1s3XSApLFxyXG4gICAgICAgIElDQ19TZXNzaW9uS2V5SXNBY3RpdmU6ICF0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzZdICksXHJcbiAgICAgICAgQ0FQS19FbXZEYXRhYmFzZUlzQ29ycnVwdGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzVdICksXHJcbiAgICAgICAgRW12VGVybWluYWxEYXRhYmFzZUlzQ29ycnVwdGVkOiB0aGlzLnN0cmluZ051bVRvQm9vbCggYmluYXJ5U3RyaW5nWzRdICksXHJcbiAgICAgICAgY2FyZElzUHJlc2VudEluQ2hpcENhcmRDb25uZWN0b3I6IHRoaXMuc3RyaW5nTnVtVG9Cb29sKCBiaW5hcnlTdHJpbmdbM10gKVxyXG4gICAgfSk7XHJcblxyXG4gICAgcGFyc2VDYXJkRGF0YSA9IHBhcnRpYWxOb3RpZmljYXRpb24gPT4ge1xyXG4gICAgICAgIGNvbnN0IHRyYWNrS2V5ID0gKHRoaXMuY2FyZERhdGFJZHNbIHBhcnRpYWxOb3RpZmljYXRpb25bMV0gXSB8fCBgdHJhY2tOYW1lJHt1bmtub3dufWApO1xyXG5cclxuICAgICAgICBpZiAocGFydGlhbE5vdGlmaWNhdGlvblsyXSA9PT0gdGhpcy5zdGF0dXNFbnVtLm9rKSB7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2godHJhY2tLZXkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFjazFcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmREYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHJhY2tLZXldOiB0aGlzLmJ1ZmZlclRvVXRmOChwYXJ0aWFsTm90aWZpY2F0aW9uLnNsaWNlKDQpKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFjazJcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmREYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHJhY2tLZXldOiB0aGlzLmJ1ZmZlclRvVXRmOChwYXJ0aWFsTm90aWZpY2F0aW9uLnNsaWNlKDQpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5mb3JtYXRFeHBQQU4oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsTm90aWZpY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImtzbkFuZE1hZ25lUHJpbnRTdGF0dXNcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmREYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrc246IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcocGFydGlhbE5vdGlmaWNhdGlvbi5zbGljZSg0LCAxNCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWduZVByaW50U3RhdHVzOiB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHBhcnRpYWxOb3RpZmljYXRpb24uc2xpY2UoLTQpKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZERhdGFPYmogPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuY2FyZERhdGFPYmosXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0cmFja0tleV06IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcocGFydGlhbE5vdGlmaWNhdGlvbi5zbGljZSg0KSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FyZERhdGFPYmogPSB7XHJcbiAgICAgICAgICAgICAgICAuLi50aGlzLmNhcmREYXRhT2JqLFxyXG4gICAgICAgICAgICAgICAgW3RyYWNrS2V5XTogdGhpcy5jb252ZXJ0U3RhdHVzVG9TdHJpbmdbIHBhcnRpYWxOb3RpZmljYXRpb25bMl0gXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlUGluUmVzcG9uc2UgPSBwaW5SZXNwID0+IHtcclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbUElOIFJlc3BvbnNlXTogUmVzcG9uc2UgZnJvbSBQSU4gRW50cnk6ICR7dGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhwaW5SZXNwKX1gKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gKHBpblJlc3AubGVuZ3RoID4gMikgPyAoe1xyXG4gICAgICAgICAgICBwaW5EYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMocGluUmVzcFsxXSksXHJcbiAgICAgICAgICAgICAgICBwaW5Lc246IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIHBpblJlc3Auc2xpY2UoMiwgMTIpICksXHJcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRQaW5CbG9jazogdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggcGluUmVzcC5zbGljZSgxMiwgMjApIClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgOiB0aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMocGluUmVzcFsxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VDYXJkaG9sZGVyUmVzcG9uc2UgPSBzZWxlY3Rpb25SZXNwID0+IHtcclxuICAgICAgICBjb25zdCBkZXZpY2VLZXlzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIDB4NzE6IFwiTGVmdCBmdW5jdGlvbiBrZXlcIixcclxuICAgICAgICAgICAgMHg3MjogXCJNaWRkbGUgZnVuY3Rpb24ga2V5XCIsXHJcbiAgICAgICAgICAgIDB4NzQ6IFwiUmlnaHQgZnVuY3Rpb24ga2V5XCIsXHJcbiAgICAgICAgICAgIDB4Nzg6IFwiRW50ZXIga2V5XCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChzZWxlY3Rpb25SZXNwLmxlbmd0aCA+IDIpID8gKHtcclxuICAgICAgICAgICAgLi4udGhpcy5maW5kT3BlcmF0aW9uU3RhdHVzKHNlbGVjdGlvblJlc3BbMV0pLFxyXG4gICAgICAgICAgICBrZXlQcmVzc2VkOiAoZGV2aWNlS2V5c1sgc2VsZWN0aW9uUmVzcFsyXSBdIHx8IGAke3Vua25vd259L1VuZG9jdW1lbnRlZCBLZXlgKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgOiB0aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMoc2VsZWN0aW9uUmVzcFsxXSlcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGluU3RhdHVzUGFyc2VyOyIsImltcG9ydCBQaW5TdGF0dXNQYXJzZXIgZnJvbSAnLi4vcGFyc2Vycy9waW5TdGF0dXNQYXJzZXInO1xyXG5pbXBvcnQgeyBcclxuICAgIGRldmljZU5vdEZvdW5kLCBcclxuICAgIHJlYWRGYWlsZWQsIFxyXG4gICAgY29tbWFuZE5vdFNlbnRGcm9tSG9zdCwgXHJcbiAgICBjb21tYW5kTm90U2VudCxcclxuICAgIGRldmljZU5vdE9wZW4sXHJcbiAgICByZXNwb25zZU5vdFJlY2VpdmVkXHJcbn0gZnJvbSAnLi4vZXJyb3JIYW5kbGVyL2VyckNvbnN0YW50cyc7XHJcbmltcG9ydCB7IG9wZW5TdWNjZXNzLCBzdWNjZXNzQ29kZSwgbm9TZXNzaW9uVG9DbGVhciwgZ2F0dEJ1c3ksIHN1Y2Nlc3NmdWxDbG9zZSB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XHJcblxyXG5jbGFzcyBQaW5QYWQgZXh0ZW5kcyBQaW5TdGF0dXNQYXJzZXIge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsQmFja3MpIHtcclxuICAgICAgICBzdXBlcihkZXZpY2UsIGNhbGxCYWNrcyk7XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbkNhbGxiYWNrID0gY2FsbEJhY2tzLnRyYW5zYWN0aW9uQ2FsbGJhY2sgfHwgY2FsbEJhY2tzO1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayA9IGNhbGxCYWNrcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrO1xyXG5cclxuICAgICAgICB0aGlzLmRldmljZUZyb21Ib3N0TGVuID0gJzA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDIyMCc7XHJcbiAgICAgICAgdGhpcy5kZXZpY2VGcm9tSG9zdERhdGEgPSAnMDUwOGU2ZjgtYWQ4Mi04OThmLWY4NDMtZTM0MTBjYjYwMjIxJztcclxuICAgICAgICB0aGlzLmRldmljZVRvSG9zdExlbiA9ICcwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAyMjInO1xyXG4gICAgICAgIHRoaXMuZGV2aWNlVG9Ib3N0RGF0YSA9ICcwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAyMjMnO1xyXG5cclxuICAgICAgICB0aGlzLmNhcmREYXRhTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZURhdGFDaGFyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZW5kTGVuVG9EZXZpY2UgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmNvbW1hbmRTZW50ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zd2lwZUhhc0JlZ3VuID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbkhhc1N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRhdGFHYXRoZXJlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNRdWlja0NoaXBUcmFuc2FjdGlvbiA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMuZW12T3B0aW9ucyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAnbm9ybWFsJzogMHgwMCxcclxuICAgICAgICAgICAgJ2J5cGFzc3Bpbic6IDB4MDEsXHJcbiAgICAgICAgICAgICdmb3JjZW9ubGluZSc6IDB4MDIsXHJcbiAgICAgICAgICAgICdhY3F1aXJlcm5vdGF2YWlsYWJsZSc6IDB4MDRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5kaXNwbGF5VHlwZXMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgJ3N3aXBlaWRsZWFsdGVybmF0ZSc6IDB4MDAsXHJcbiAgICAgICAgICAgICdzd2lwZWNhcmQnOiAweDAxLFxyXG4gICAgICAgICAgICAncGxlYXNlc3dpcGUnOiAweDAyLFxyXG4gICAgICAgICAgICAncGxlYXNlc3dpcGVhZ2Fpbic6IDB4MDMsXHJcbiAgICAgICAgICAgICdjaGlwZXJyb3J1c2Vzd2lwZSc6IDB4MDRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXBvcnRJZHMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgcmVzcG9uc2VBY2s6IDB4MDEsXHJcbiAgICAgICAgICAgIGVuZFNlc3Npb246IDB4MDIsXHJcbiAgICAgICAgICAgIHJlcXVlc3RDYXJkU3dpcGU6IDB4MDMsXHJcbiAgICAgICAgICAgIGNhcmRTdGF0dXNSZXBvcnQ6IDB4MjIsXHJcbiAgICAgICAgICAgIGRldmljZVN0YXRlUmVwb3J0OiAweDIwLFxyXG4gICAgICAgICAgICBjYXJkRGF0YVJlcG9ydDogMHgyMyxcclxuICAgICAgICAgICAgZW12Q2FyZGhvbGRlclN0YXR1czogMHgyQyxcclxuICAgICAgICAgICAgYmlnQmxvY2tEYXRhOiAweDI5LFxyXG4gICAgICAgICAgICBlbXZDb21wbGV0aW9uOiAweEEyLFxyXG4gICAgICAgICAgICBnZXRLc246IDB4MzAsXHJcbiAgICAgICAgICAgIHJlcXVlc3RTbjogMHgxQSxcclxuICAgICAgICAgICAgZGV2aWNlQ29uZmlnOiAweDA5LFxyXG4gICAgICAgICAgICBwaW5SZXNwb25zZTogMHgyNCxcclxuICAgICAgICAgICAgc2VsZWN0aW9uUmVzcG9uc2U6IDB4MjUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlSZXNwOiAweDI3XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMudG9uZUNob2ljZSA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAnbm9zb3VuZCc6IDB4MDAsXHJcbiAgICAgICAgICAgICdvbmViZWVwJzogMHgwMSxcclxuICAgICAgICAgICAgJ3R3b2JlZXBzJzogMHgwMlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRpYWxOb3RpZmljYXRpb24gPSBbMHgwMF07XHJcblxyXG4gICAgICAgIHRoaXMuY2xlYXJTZXNzaW9uQ21kID0gWzB4MDEsIDB4MDIsIDB4MDBdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENhcmRTZXJ2aWNlID0gKCkgPT4gbmV3IFByb21pc2UoIChwYXJlbnRSZXNvbHZlLCBwYXJlbnRSZWplY3QpID0+ICghdGhpcy5kZXZpY2UpID9cclxuICAgICAgICBwYXJlbnRSZWplY3QoXHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90Rm91bmQpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIDpcclxuICAgICAgICB0aGlzLmNvbm5lY3RBbmRDYWNoZSgyKVxyXG4gICAgICAgICAgICAudGhlbiggc2VydmljZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbR0FUVF06IENhY2hlIEFwcERhdGFUb0hvc3RMZW5ndGggQ2hhcmFjdGVyaXN0aWMgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLmdldENoYXJhY3RlcmlzdGljKHRoaXMuZGV2aWNlVG9Ib3N0TGVuKSBcclxuICAgICAgICAgICAgfSkudGhlbiggY2hhcmFjdGVyaXN0aWMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0dBVFRdOiBCZWdpbiBub3RpZmljYXRpb25zIG9uIEFwcERhdGFUb0hvc3RMZW5ndGggQ2hhcmFjdGVyaXN0aWMgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpYy5zdGFydE5vdGlmaWNhdGlvbnMoKVxyXG4gICAgICAgICAgICB9KS50aGVuKCBjaGFyYWN0ZXJpc3RpYyA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbR0FUVF06IEFkZCBsaXN0ZW5lciB0byBub3RpZmljYXRpb25zIHx8ICR7bmV3IERhdGUoKX1gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFyYWN0ZXJpc3RpY3ZhbHVlY2hhbmdlZCcsIHRoaXMuZGF0YVdhdGNoZXIpO1xyXG4gICAgICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuYWRkRXZlbnRMaXN0ZW5lcignY2hhcmFjdGVyaXN0aWN2YWx1ZWNoYW5nZWQnLCB0aGlzLmRhdGFXYXRjaGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhcmREYXRhTGlzdGVuZXIgPSBjaGFyYWN0ZXJpc3RpYztcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtHQVRUXTogQ2FjaGUgQXBwRGF0YVRvSG9zdCBDaGFyYWN0ZXJpc3RpYyB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FyZFNlcnZpY2UuZ2V0Q2hhcmFjdGVyaXN0aWModGhpcy5kZXZpY2VUb0hvc3REYXRhKTtcclxuICAgICAgICAgICAgfSkudGhlbiggY2hhcmFjdGVyaXN0aWMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVjZWl2ZURhdGFDaGFyID0gY2hhcmFjdGVyaXN0aWM7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0dBVFRdOiBDYWNoZSBBcHBEYXRhRnJvbUhvc3RMZW5ndGggQ2hhcmFjdGVyaXN0aWMgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJkU2VydmljZS5nZXRDaGFyYWN0ZXJpc3RpYyh0aGlzLmRldmljZUZyb21Ib3N0TGVuKVxyXG4gICAgICAgICAgICB9KS50aGVuKCBjaGFyYWN0ZXJpc3RpYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kTGVuVG9EZXZpY2UgPSBjaGFyYWN0ZXJpc3RpYztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbR0FUVF06IENhY2hlIEFwcERhdGFGcm9tSG9zdCBDaGFyYWN0ZXJpc3RpYyB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcmRTZXJ2aWNlLmdldENoYXJhY3RlcmlzdGljKHRoaXMuZGV2aWNlRnJvbUhvc3REYXRhKVxyXG4gICAgICAgICAgICB9KS50aGVuKCBjaGFyYWN0ZXJpc3RpYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQ2hhcmFjdGVyaXN0aWMgPSBjaGFyYWN0ZXJpc3RpYztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgICAgICAgICAgSWYgdGhpcyBsaWJyYXJ5IGlzIGJlaW5nIHVzZWQgaW4gYSB3ZWIgYXBwbGljYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgTWFrZSBzdXJlIHRoZSBkZXZpY2UgY2FuY2VscyBhbnkgYWN0aXZlIGNvbW1hbmQsIGFuZCBkaXNjb25uZWN0cyBwcm9wZXJseVxyXG4gICAgICAgICAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMub25EZXN0cm95SGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCB0aGlzLm9uRGVzdHJveUhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0dBVFRdOiBTdWNjZXNzZnVsbHkgY2FjaGVkIGFsbCBHQVRUIHNlcnZpY2VzIGFuZCBjaGFyYWN0ZXJpc3RpY3MuIFJldHVybmluZyBzdWNjZXNzZnVsIHBhaXIgdG8gdXNlciB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlbGF5UHJvbWlzZSg0MDApXHJcbiAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gcGFyZW50UmVzb2x2ZSh7IFxyXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IHN1Y2Nlc3NDb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wZW5TdWNjZXNzXHJcbiAgICAgICAgICAgIH0pKS5jYXRjaChlcnIgPT4gcGFyZW50UmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikgKSlcclxuICAgICk7XHJcbiAgICBcclxuICAgIGRhdGFXYXRjaGVyID0gZXZlbnQgPT4ge1xyXG4gICAgICAgIGxldCBkYXRhRXZlbnQgPSBldmVudC50YXJnZXQudmFsdWUuZ2V0VWludDgoMCk7XHJcbiAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW05PVElGWTogQXBwRGF0YVRvSG9zdExlbmd0aF06ICR7dGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhbZGF0YUV2ZW50XSl9IHx8ICR7bmV3IERhdGUoKX1gKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29tbWFuZFNlbnQgJiYgZGF0YUV2ZW50ID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRSZXNwQXZhaWxhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZFNlbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlYWRDb21tYW5kUmVzcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRDb21tYW5kUmVzcCA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiAoIXRoaXMucmVjZWl2ZURhdGFDaGFyKSA/XHJcbiAgICAgICAgcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKHJlYWRGYWlsZWQpKVxyXG4gICAgICAgIDogXHJcbiAgICAgICAgdGhpcy5yZWNlaXZlRGF0YUNoYXIucmVhZFZhbHVlKClcclxuICAgICAgICAgICAgLnRoZW4odmFsdWUgPT4gdGhpcy5yZWFkVmFsdWVIYW5kbGVyKHZhbHVlKSApXHJcbiAgICAgICAgICAgIC50aGVuKHZhbHVlID0+IHJlc29sdmUodmFsdWUpKVxyXG4gICAgICAgICAgICAuY2F0Y2goIGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyLmNvZGUgPT09IGdhdHRCdXN5LmNvZGUgJiYgZXJyLm1lc3NhZ2UgPT09IGdhdHRCdXN5Lm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbSU5GT106IFJlYWQgZmFpbGVkIGR1ZSB0byBkZXZpY2UgYmVpbmcgYnVzeS4gQXR0ZW1wdGluZyByZWFkIGFnYWluIHx8ICR7bmV3IERhdGUoKX1gKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlbGF5UHJvbWlzZSgxMDApLnRoZW4oKCkgPT4gcmVzb2x2ZSggdGhpcy5yZWFkQ29tbWFuZFJlc3AoKSApKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSByZXR1cm4gcmVqZWN0KHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSlcclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgIHJlYWRWYWx1ZUhhbmRsZXIgPSByZWFkVmFsdWUgPT4gbmV3IFByb21pc2UoIHJlc29sdmUgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbW1hbmRSZXNwID0gdGhpcy5yZWFkQnl0ZUFycmF5KHJlYWRWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW1JFQUQ6IEFwcERhdGFUb0hvc3RdOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoY29tbWFuZFJlc3ApfSB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgIGlmIChjb21tYW5kUmVzcC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc3dpdGNoKGNvbW1hbmRSZXNwWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMucmVwb3J0SWRzLnJlc3BvbnNlQWNrOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCB0aGlzLnBhcnNlQWNrUmVzcG9uc2UoY29tbWFuZFJlc3ApIClcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMuZGV2aWNlU3RhdGVSZXBvcnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuaGFuZGxlRGV2aWNlU3RhdGVSZXBvcnQoY29tbWFuZFJlc3ApIClcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMuY2FyZFN0YXR1c1JlcG9ydDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggdGhpcy5oYW5kbGVDYXJkU3RhdHVzUmVwb3J0KGNvbW1hbmRSZXNwKSApXHJcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMucmVwb3J0SWRzLmNhcmREYXRhUmVwb3J0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCB0aGlzLmhhbmRsZUNhcmREYXRhUmVwb3J0KGNvbW1hbmRSZXNwKSApXHJcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMucmVwb3J0SWRzLmVtdkNhcmRob2xkZXJTdGF0dXM6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuaGFuZGxlQ2FyZGhvbGRlclN0YXR1c1JlcG9ydChjb21tYW5kUmVzcCkgKVxyXG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLnJlcG9ydElkcy5lbXZDb21wbGV0aW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCB0aGlzLmhhbmRsZUVtdkNvbXBsZXRpb24oY29tbWFuZFJlc3ApIClcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMuYmlnQmxvY2tEYXRhOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCB0aGlzLmhhbmRsZUJpZ0Jsb2NrRGF0YShjb21tYW5kUmVzcCkgKVxyXG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLnJlcG9ydElkcy5nZXRLc246XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuZm9ybWF0S3NuQW5kU24oY29tbWFuZFJlc3ApIClcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5yZXBvcnRJZHMucmVxdWVzdFNuOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCB0aGlzLmZvcm1hdFNlcmlhbE51bWJlcihjb21tYW5kUmVzcCkgKVxyXG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLnJlcG9ydElkcy5kZXZpY2VDb25maWc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMucGFyc2VEZXZpY2VDb25maWd1cmF0aW9uKGNvbW1hbmRSZXNwKSApXHJcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMucmVwb3J0SWRzLnBpblJlc3BvbnNlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvbkNhbGxiYWNrKCB0aGlzLnBhcnNlUGluUmVzcG9uc2UocGluUmVzcCkgKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMucmVwb3J0SWRzLnNlbGVjdGlvblJlc3BvbnNlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCB0aGlzLnBhcnNlQ2FyZGhvbGRlclJlc3BvbnNlKGNvbW1hbmRSZXNwKSApXHJcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMucmVwb3J0SWRzLmRpc3BsYXlSZXNwOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrKCB0aGlzLmZpbmRPcGVyYXRpb25TdGF0dXMoY29tbWFuZFJlc3BbMV0pIClcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgW0RhdGEgUmVzcF06IFRoZXJlIGlzIG5vIHBhcnNlciBmb3IgdGhpcyBkYXRhLCByZXR1cm5pbmcgdG8gY2FsbGVyOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoY29tbWFuZFJlc3ApfSB8fCAke25ldyBEYXRlKCl9YFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMudHJhbnNhY3Rpb25DYWxsYmFjayggY29tbWFuZFJlc3AgKSApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJlc29sdmUoIGNvbW1hbmRSZXNwICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBoYW5kbGVFbXZDb21wbGV0aW9uID0gY29tbWFuZFJlc3AgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiWyFdIEVNViBDb21wbGV0aW9uOiBcIiwgY29tbWFuZFJlc3ApO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2soXHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VFbXZDb21wbGV0aW9uKGNvbW1hbmRSZXNwKVxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVCaWdCbG9ja0RhdGEgPSBiaWdCbG9ja0RhdGEgPT4ge1xyXG4gICAgICAgIHN3aXRjaChiaWdCbG9ja0RhdGFbMl0pIHtcclxuICAgICAgICAgICAgY2FzZSAweDAwOlxyXG4gICAgICAgICAgICAgICB0aGlzLmhhbmRsZUJpZ0Jsb2NrQmVnaW4oIGJpZ0Jsb2NrRGF0YSApO1xyXG4gICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAweDYzOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhCbG9ja0lkID0gTWF0aC5tYXgoLi4uT2JqZWN0LmtleXModGhpcy5yYXdEYXRhKSkgKyAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVCaWdCbG9ja0ZpbmlzaCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhd0RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5yYXdEYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIFsgYmlnQmxvY2tEYXRhWzJdIF06IGJpZ0Jsb2NrRGF0YS5zbGljZSg0KVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUNhcmRob2xkZXJTdGF0dXNSZXBvcnQgPSBjb21tYW5kUmVzcCA9PiB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2soXHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VFbXZDYXJkaG9sZGVySW50ZXJhY3Rpb25TdGF0dXMoY29tbWFuZFJlc3ApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICBoYW5kbGVDYXJkU3RhdHVzUmVwb3J0ID0gY29tbWFuZFJlc3AgPT4gbmV3IFByb21pc2UoIHJlc29sdmUgPT4ge1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhcclxuICAgICAgICAgICAgdGhpcy5wYXJzZUNhcmRTdGF0dXNSZXBvcnQoY29tbWFuZFJlc3ApXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gKHRoaXMuc3dpcGVIYXNCZWd1biB8fCB0aGlzLnRyYW5zYWN0aW9uSGFzU3RhcnRlZCkgPyBcclxuICAgICAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKCBcclxuICAgICAgICAgICAgICAgICh0aGlzLnN3aXBlSGFzQmVndW4gPyBbMHgwMSwgMHgwQSwgMHgwMF0gOiBbMHgwMSwgMHhBQiwgMHgwMF0pXHJcbiAgICAgICAgICAgICkudGhlbiggYWNrUmVzcCA9PiByZXNvbHZlKCB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2soYWNrUmVzcCkgKVxyXG4gICAgICAgICAgICApLmNhdGNoKGVyciA9PiB0aGlzLnNlbmRFcnJUb0NhbGxiYWNrKCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikgKSlcclxuICAgICAgICA6IHJlc29sdmUoKVxyXG4gICAgfSk7XHJcblxyXG4gICAgaGFuZGxlRGV2aWNlU3RhdGVSZXBvcnQgPSBjb21tYW5kUmVzcCA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YUdhdGhlcmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YUdhdGhlcmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL1NlbmQgYXNzZW1ibGVkIHRyYW5zYWN0aW9uIGRhdGEgdG8gY2FsbGJhY2tcclxuICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvbkNhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgIHN3aXBlRGF0YTogdGhpcy5jYXJkRGF0YU9ialxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhcclxuICAgICAgICAgICAgdGhpcy5wYXJzZURldmljZVN0YXRlUmVwb3J0KGNvbW1hbmRSZXNwKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ2FyZERhdGFSZXBvcnQgPSBjb21tYW5kUmVzcCA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3dpcGVIYXNCZWd1bikge1xyXG4gICAgICAgICAgICB0aGlzLnN3aXBlSGFzQmVndW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhR2F0aGVyZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbW1hbmRSZXNwLmxlbmd0aCAhPT0gMykge1xyXG4gICAgICAgICAgICB0aGlzLnBhcnNlQ2FyZERhdGEoY29tbWFuZFJlc3ApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUT0RPOlxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlRyYWlsaW5nIGNhcmQgZGF0YTogXCIsIGNvbW1hbmRSZXNwKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoXCJbRVJST1JdIFVuZG9jdW1lbnRlZCBDYXJkIERhdGEgYmVsb3dcIik7XHJcbiAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoY29tbWFuZFJlc3ApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXF1ZXN0Q2FyZFN3aXBlID0gc3dpcGVPcHRpb25zID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5zd2lwZUhhc0JlZ3VuID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmNhcmREYXRhT2JqID0ge307XHJcblxyXG4gICAgICAgIHJldHVybiAoIXRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSA/IHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihkZXZpY2VOb3RPcGVuKSlcclxuICAgICAgICAgICAgOiBcclxuICAgICAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKCB0aGlzLmNsZWFyU2Vzc2lvbkNtZCApXHJcbiAgICAgICAgICAgIC50aGVuKCBhY2tSZXNwID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhhY2tSZXNwKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRTd2lwZUNvbW1hbmQoIChzd2lwZU9wdGlvbnMgfHwge30pIClcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSkudGhlbiggcmVzcCA9PiByZXNvbHZlKHJlc3ApXHJcbiAgICAgICAgICAgICkuY2F0Y2goIGVyciA9PiByZWplY3QoZXJyKSlcclxuICAgIH0pO1xyXG5cclxuICAgIGJ1aWxkU3dpcGVDb21tYW5kID0gKHsgdGltZW91dCwgaXNGYWxsYmFjaywgdG9uZUNob2ljZSwgZGlzcGxheVR5cGUgfSkgPT4gKFsgXHJcbiAgICAgICAgMHgwMSwgMHgwMywgKHRpbWVvdXQgfHwgMHgzQyksXHJcbiAgICAgICAgKGlzRmFsbGJhY2sgPT09IHRydWUpID8gMHgwNCA6ICh0eXBlb2YoZGlzcGxheVR5cGUpICE9PSAndW5kZWZpbmVkJykgPyB0aGlzLmRpc3BsYXlUeXBlc1sgZGlzcGxheVR5cGUudG9Mb3dlckNhc2UoKSBdIDogMHgwMixcclxuICAgICAgICAodHlwZW9mKHRvbmVDaG9pY2UpICE9PSAndW5kZWZpbmVkJykgPyB0aGlzLnRvbmVDaG9pY2VbIHRvbmVDaG9pY2UudG9Mb3dlckNhc2UoKSBdIDogMHgwMVxyXG4gICAgXSk7XHJcbiAgICAgICAgXHJcbiAgICBzdGFydFRyYW5zYWN0aW9uID0gZW12T3B0aW9ucyA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25IYXNTdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmNhcmREYXRhT2JqID0ge307XHJcbiAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0lORk9dOiBFTVYgdHJhbnNhY3Rpb24gYmVndW4gfHwgJHtuZXcgRGF0ZSgpfWApXHJcblxyXG4gICAgICAgIHJldHVybiAoIXRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSA/IHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihkZXZpY2VOb3RPcGVuKSlcclxuICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AodGhpcy5jbGVhclNlc3Npb25DbWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbiggYWNrUmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhhY2tSZXNwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKCAoKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcCggdGhpcy5idWlsZEVtdkNvbW1hbmQoIGVtdk9wdGlvbnMgfHwge30gKSApXHJcbiAgICAgICAgICAgICAgICApLnRoZW4oIHJlc3AgPT4gcmVzb2x2ZShyZXNwKVxyXG4gICAgICAgICAgICAgICAgKS5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYnVpbGRFbXZDb21tYW5kID0gKHsgXHJcbiAgICAgICAgdGltZW91dCwgXHJcbiAgICAgICAgcGluVGltZW91dCwgXHJcbiAgICAgICAgY2FyZFR5cGUsIFxyXG4gICAgICAgIHRyYW5zYWN0aW9uVHlwZSwgXHJcbiAgICAgICAgY2FzaEJhY2ssIFxyXG4gICAgICAgIGN1cnJlbmN5Q29kZSxcclxuICAgICAgICB0b25lQ2hvaWNlLCBcclxuICAgICAgICBpc1F1aWNrQ2hpcCwgXHJcbiAgICAgICAgYXV0aG9yaXplZEFtb3VudCwgXHJcbiAgICAgICAgZW12T3B0aW9ucyBcclxuICAgIH0pID0+IHtcclxuICAgICAgICB0aGlzLmlzUXVpY2tDaGlwVHJhbnNhY3Rpb24gPSAoaXNRdWlja0NoaXAgPT09IGZhbHNlKSA/IGZhbHNlIDogdHJ1ZTtcclxuXHJcbiAgICAgICAgbGV0IGNvbW1hbmQgPSBbIFxyXG4gICAgICAgICAgICAweDAxLCAweEEyLFxyXG4gICAgICAgICAgICAodGltZW91dCB8fCAweDNDKSxcclxuICAgICAgICAgICAgKHBpblRpbWVvdXQgfHwgMHgxNCksXHJcbiAgICAgICAgICAgIDB4MDAsXHJcbiAgICAgICAgICAgICh0eXBlb2YodG9uZUNob2ljZSkgIT09ICd1bmRlZmluZWQnKSA/ICh0aGlzLnRvbmVDaG9pY2VbIHRvbmVDaG9pY2UudG9Mb3dlckNhc2UoKSBdIHx8IDB4MDEpIDogMHgwMSxcclxuICAgICAgICAgICAgKGNhcmRUeXBlKSA/IHRoaXMuY2FyZFR5cGVzKCBjYXJkVHlwZS50b0xvd2VyQ2FzZSgpICkgOiB0aGlzLmNhcmRUeXBlcyhcImFsbFwiKSxcclxuICAgICAgICAgICAgKHR5cGVvZihlbXZPcHRpb25zKSAhPT0gJ3VuZGVmaW5lZCcpID8gdGhpcy5lbXZPcHRpb25zWyBlbXZPcHRpb25zLnRvTG93ZXJDYXNlKCkgXSA6IDB4MDBcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBjb21tYW5kID0gKHR5cGVvZihhdXRob3JpemVkQW1vdW50KSAhPT0gJ3VuZGVmaW5lZCcpID8gXHJcbiAgICAgICAgICAgIGNvbW1hbmQuY29uY2F0KCB0aGlzLmNvbnZlcnROdW1Ub0Ftb3VudChhdXRob3JpemVkQW1vdW50KSApIFxyXG4gICAgICAgICAgICA6IGNvbW1hbmQuY29uY2F0KCBbMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSwgMHgwMF0gKTtcclxuXHJcbiAgICAgICAgY29tbWFuZCA9ICh0eXBlb2YodHJhbnNhY3Rpb25UeXBlKSAhPT0gJ3VuZGVmaW5lZCcpID8gXHJcbiAgICAgICAgICAgIGNvbW1hbmQuY29uY2F0KHRoaXMudHJhbnNhY3Rpb25UeXBlc1sgdHJhbnNhY3Rpb25UeXBlLnRvTG93ZXJDYXNlKCkgXSlcclxuICAgICAgICAgICAgOiBjb21tYW5kLmNvbmNhdCgweDAwKVxyXG5cclxuICAgICAgICBjb21tYW5kID0gKHR5cGVvZihjYXNoQmFjaykgIT09ICd1bmRlZmluZWQnKSA/IGNvbW1hbmQuY29uY2F0KCB0aGlzLmNvbnZlcnROdW1Ub0Ftb3VudCggY2FzaEJhY2sgKSApIFxyXG4gICAgICAgICAgICA6IGNvbW1hbmQuY29uY2F0KCB0aGlzLm5ld0FycmF5UGFydGlhbCgweDAwLCA2KSApO1xyXG5cclxuICAgICAgICBjb21tYW5kID0gY29tbWFuZC5jb25jYXQoIHRoaXMubmV3QXJyYXlQYXJ0aWFsKDB4MDAsIDEyKSApO1xyXG5cclxuICAgICAgICBjb21tYW5kID0gKGN1cnJlbmN5Q29kZSkgPyBjb21tYW5kLmNvbmNhdCgoIHRoaXMuY3VycmVuY3lDb2RlWyBjdXJyZW5jeUNvZGUudG9Mb3dlckNhc2UoKSBdIHx8ICB0aGlzLmN1cnJlbmN5Q29kZVsnZGVmYXVsdCddICkpXHJcbiAgICAgICAgICAgIDogY29tbWFuZC5jb25jYXQodGhpcy5jdXJyZW5jeUNvZGVbJ2RvbGxhciddKVxyXG5cclxuICAgICAgICBjb21tYW5kLnB1c2goMHgwMCk7XHJcblxyXG4gICAgICAgIGNvbW1hbmQucHVzaChcclxuICAgICAgICAgICAgKHRoaXMuaXNRdWlja0NoaXBUcmFuc2FjdGlvbikgPyAweDAxIDogMHgwMCBcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIGNvbW1hbmQgPSBjb21tYW5kLmNvbmNhdCggdGhpcy5uZXdBcnJheVBhcnRpYWwoMHgwMCwgMjgpIClcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbW1hbmQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVxdWVzdFBpbkVudHJ5ID0gcGluT3B0aW9ucyA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtQSU5dOiBSZXF1ZXN0IGZvciBQSU4gZW50cnkgc3RhcnQgfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwicGlub3B0aW9uczogXCIsIHBpbk9wdGlvbnMpO1xyXG5cclxuICAgICAgICByZXR1cm4gKCF0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCkgPyByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90T3BlbikpXHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKCB0aGlzLmJ1aWxkUGluQ29tbWFuZCggcGluT3B0aW9ucyB8fCB7fSApIClcclxuICAgICAgICAgICAgICAgIC50aGVuKCByZXNwID0+IHJlc29sdmUocmVzcClcclxuICAgICAgICAgICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcclxuICAgIH0pOyBcclxuXHJcbiAgICBidWlsZFBpbkNvbW1hbmQgPSAoe1xyXG4gICAgICAgIGxhbmd1YWdlU2VsZWN0aW9uLFxyXG4gICAgICAgIGRpc3BsYXlUeXBlLFxyXG4gICAgICAgIHRpbWVvdXQsXHJcbiAgICAgICAgbWF4UGluTGVuZ3RoLFxyXG4gICAgICAgIG1pblBpbkxlbmd0aCxcclxuICAgICAgICB0b25lQ2hvaWNlLFxyXG4gICAgICAgIHdhaXRNZXNzYWdlLFxyXG4gICAgICAgIHZlcmlmeVBpbixcclxuICAgICAgICBwaW5CbG9ja0Zvcm1hdFxyXG4gICAgfSkgPT4ge1xyXG5cclxuICAgICAgICBjb25zdCBwaW5EaXNwbGF5T3B0aW9ucyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICBcImVudGVycGluXCI6IDB4MDAsXHJcbiAgICAgICAgICAgIFwiZW50ZXJwaW5hbW91bnRcIjogMHgwMSxcclxuICAgICAgICAgICAgXCJyZWVudGVycGluYW1vdW50XCI6IDB4MDIsXHJcbiAgICAgICAgICAgIFwicmVlbnRlcnBpblwiOiAweDAzLFxyXG4gICAgICAgICAgICBcInZlcmlmeXBpblwiOiAweDA0XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBpbkNtZCA9IFtcclxuICAgICAgICAgICAgMHgwMSwgMHgwNCxcclxuICAgICAgICAgICAgKHRpbWVvdXQgfHwgMHgxRSksXHJcbiAgICAgICAgICAgICgoZGlzcGxheVR5cGUpID8gKHBpbkRpc3BsYXlPcHRpb25zWyBkaXNwbGF5VHlwZS50b0xvd2VyQ2FzZSgpIF0gfHwgMHgwMCk6IDB4MDApLFxyXG4gICAgICAgICAgICAodGhpcy5maW5kUGluTGVuZ3RoKG1heFBpbkxlbmd0aCwgbWluUGluTGVuZ3RoKSksXHJcbiAgICAgICAgICAgICh0eXBlb2YodG9uZUNob2ljZSkgIT09ICd1bmRlZmluZWQnKSA/IHRoaXMudG9uZUNob2ljZVsgdG9uZUNob2ljZS50b0xvd2VyQ2FzZSgpIF0gOiAweDAxLFxyXG4gICAgICAgICAgICAodGhpcy5idWlsZFBpbk9wdGlvbnNCeXRlKGxhbmd1YWdlU2VsZWN0aW9uLCB3YWl0TWVzc2FnZSwgdmVyaWZ5UGluLCBwaW5CbG9ja0Zvcm1hdCkpXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tQSU4gQ01EXSBCdWlsdCBQSU4gQ29tbWFuZDogJywgcGluQ21kKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBpbkNtZDtcclxuICAgIH1cclxuXHJcbiAgICBidWlsZEFycGNDb21tYW5kID0gKGxlbiwgZGF0YSkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2VuZEJpZ0Jsb2NrRGF0YSgweEE0LCBsZW4sIGRhdGEpLnRoZW4oXHJcbiAgICAgICAgICAgICgpID0+IHJlc29sdmUoWzB4MDEsIDB4QTQsIC4uLnRoaXMubmV3QXJyYXlQYXJ0aWFsKDB4MDAsIDEwKV0pXHJcbiAgICAgICAgKS5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpO1xyXG4gICAgfSlcclxuXHJcbiAgICBzZW5kQmlnQmxvY2tEYXRhID0gKGRhdGFUeXBlLCBkYXRhTGVuLCBkYXRhKSA9PiBuZXcgUHJvbWlzZSgocGFyZW50UmVzb2x2ZSwgcGFyZW50UmVqZWN0KSA9PiB7XHJcbiAgICAgICAgbGV0IGJsb2NrWmVybyA9IFsweDAxLCAweDEwLCBkYXRhVHlwZSwgMHgwMCwgKGRhdGFMZW4gJiAweEZGKV07XHJcblxyXG4gICAgICAgIGlmIChkYXRhTGVuIDwgNjApIHtcclxuICAgICAgICAgICAgYmxvY2taZXJvID0gYmxvY2taZXJvLmNvbmNhdCguLi50aGlzLm5ld0FycmF5UGFydGlhbCgweDAwLCA2MCkpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgYmxvY2taZXJvIGxlbmd0aDogJHtibG9ja1plcm8ubGVuZ3RofWApO1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbU2VuZCBCaWcgQmxvY2sgRGF0YSBMZWdhY3ldOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoYmxvY2taZXJvKX1gKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBsZWdhY3lEYXRhID0gWzB4MDEsIDB4MTAsIGRhdGFUeXBlLCAweDAxLCBkYXRhTGVuLCAuLi5kYXRhXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsZWdhY3lEYXRhLmxlbmd0aCA8IDY1KVxyXG4gICAgICAgICAgICAgICAgbGVnYWN5RGF0YSA9IGxlZ2FjeURhdGEuY29uY2F0KC4uLnRoaXMubmV3QXJyYXlQYXJ0aWFsKDB4MDAsICg2NSAtIGxlZ2FjeURhdGEubGVuZ3RoKSkpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kUGluQ29tbWFuZChibG9ja1plcm8pLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImJsb2NrIHplcm8gcmVzcDpcIiwgcmVzcCwgbmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kUGluQ29tbWFuZChsZWdhY3lEYXRhKVxyXG4gICAgICAgICAgICB9KS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xlZ2FjeSBibG9jayByZXNwOiAnLCByZXNwKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnRSZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiBwYXJlbnRSZWplY3QodGhpcy5idWlsZERldmljZUVycihlcnIpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRFeHRlbmRlZEJpZ0Jsb2NrRGF0YShkYXRhVHlwZSwgZGF0YUxlbiwgZGF0YSwgYmxvY2taZXJvKS50aGVuKGJlZ2luUXVlUmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImJlZ2luUXVlUmVzcFwiLCBiZWdpblF1ZVJlc3ApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudFJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2VuZEV4dGVuZGVkQmlnQmxvY2tEYXRhID0gKGRhdGFUeXBlLCBkYXRhTGVuLCBkYXRhLCBibG9ja1plcm8pID0+IG5ldyBQcm9taXNlKCAocGFyZW50UmVzb2x2ZSwgcGFyZW50UmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZCbG9ja3MgPSBNYXRoLmNlaWwoZGF0YUxlbiAvIDYwKTtcclxuICAgICAgICBsZXQgd29ya2luZ09uUHJvbWlzZSA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBjb21tYW5kQmxvY2tzID0gW107XHJcblxyXG4gICAgICAgIGJsb2NrWmVybyA9IGJsb2NrWmVyby5jb25jYXQoW1xyXG4gICAgICAgICAgICAoKGRhdGFMZW4gPj4gOCkgJiAweEZGKSwgXHJcbiAgICAgICAgICAgICgoZGF0YUxlbiA+PiAxNikgJiAweEZGKSwgXHJcbiAgICAgICAgICAgICgoZGF0YUxlbiA+PiAyNCkgJiAweEZGKSwgXHJcbiAgICAgICAgICAgIDB4MDEsIFxyXG4gICAgICAgICAgICAuLi50aGlzLm5ld0FycmF5UGFydGlhbCgweDAwLCA1NilcclxuICAgICAgICBdKVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhgYmxvY2taZXJvIGxlbmd0aDogJHtibG9ja1plcm8ubGVuZ3RofWAsIG5ldyBEYXRlKCkpO1xyXG4gICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtTZW5kIEJpZyBCbG9jayBEYXRhIEV4dGVuZGVkXTogJHt0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKGJsb2NrWmVybyl9IHx8ICR7bmV3IERhdGUoKX1gKTtcclxuXHJcbiAgICAgICAgY29uc3QgYmVnaW5RdWV1ZSA9ICgpID0+IG5ldyBQcm9taXNlKChiZWdpblF1ZXVlUmVzb2x2ZSwgYmVnaW5RdWV1ZVJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAod29ya2luZ09uUHJvbWlzZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlbGF5UHJvbWlzZSg1MDApLnRoZW4oKCkgPT4gYmVnaW5RdWV1ZVJlc29sdmUoIGJlZ2luUXVldWUoKSApKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFCbG9jayA9IGNvbW1hbmRCbG9ja3Muc2hpZnQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghZGF0YUJsb2NrKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJlZ2luUXVldWVSZXNvbHZlKHRydWUpO1xyXG5cclxuICAgICAgICAgICAgd29ya2luZ09uUHJvbWlzZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YUJsb2NrLnByb21pc2UoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gZGF0YUJsb2NrLnJlc29sdmUoKVxyXG4gICAgICAgICAgICAgICAgKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB3b3JraW5nT25Qcm9taXNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJlZ2luUXVldWVSZXNvbHZlKCBiZWdpblF1ZXVlKCkgKVxyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB3b3JraW5nT25Qcm9taXNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW5RdWV1ZVJlamVjdCggZGF0YUJsb2NrLnJlamVjdChlcnIpICk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBlbnF1ZXVlID0gcHJvbWlzZSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb21tYW5kQmxvY2tzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSxcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbnF1ZXVlKCAoKSA9PiBuZXcgUHJvbWlzZShpbm5lclJlc29sdmUgPT4gdGhpcy5zZW5kUGluQ29tbWFuZChibG9ja1plcm8pLnRoZW4ocmVzcCA9PiB7IFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImJsb2NrIHplcm8gcmVzcDpcIiwgcmVzcCwgbmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBpbm5lclJlc29sdmUoKTtcclxuICAgICAgICB9KSkgKVxyXG5cclxuICAgICAgICAgXHJcbiAgICAvLyAgICAgY29tbWFuZEJsb2NrcyA9IGNvbW1hbmRCbG9ja3MudGhlbigoKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgIC8vICAgICAgICAgY29uc29sZS5sb2coJ2V4ZWN1dGluZzonLCBuZXcgRGF0ZSgpKTtcclxuXHJcbiAgICAvLyAgICAgICAgIHJldHVybiB0aGlzLnNlbmRQaW5Db21tYW5kKGJsb2NrWmVybykudGhlbihyZXNwID0+IHsgXHJcbiAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImJsb2NrIHplcm8gcmVzcDpcIiwgcmVzcCwgbmV3IERhdGUoKSk7XHJcbiAgICAvLyAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggdGhpcy5kZWxheVByb21pc2UoMTAwMCkgKTtcclxuICAgIC8vICAgICB9KVxyXG4gICAgLy8gfSkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8qUHJvbWlzZS5yZXNvbHZlOyovXHJcbiAgICAgICAgLy8gY29tbWFuZEJsb2NrcyA9IGNvbW1hbmRCbG9ja3MudGhlbigoKSA9PiBcclxuICAgICAgICAvLyAgICAgdGhpcy5zZW5kUGluQ29tbWFuZChibG9ja1plcm8pLnRoZW4ocmVzcCA9PiB7IFxyXG4gICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coXCJibG9jayB6ZXJvIHJlc3A6XCIsIHJlc3AsIG5ldyBEYXRlKCkpO1xyXG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuIHRoaXMuZGVsYXlQcm9taXNlKDEwMDApO1xyXG4gICAgICAgIC8vICAgICB9KVxyXG4gICAgICAgIC8vICk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBibG9jayA9IDE7IGJsb2NrIDw9IG51bWJlck9mQmxvY2tzOyBpICsgNjAsIGJsb2NrKyspIHtcclxuICAgICAgICAgICAgbGV0IGRhdGFGb3JCbG9jayA9IGRhdGEuc2xpY2UoaSwgKGkgKyA2MCkpO1xyXG4gICAgICAgICAgICBsZXQgYmxvY2tDbWQgPSBbMHgwMSwgMHgxMCwgZGF0YVR5cGUsIGJsb2NrLCBkYXRhRm9yQmxvY2subGVuZ3RoLCAuLi5kYXRhRm9yQmxvY2tdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGJsb2NrQ21kLmxlbmd0aCAhPT0gNjUpXHJcbiAgICAgICAgICAgICAgICBibG9ja0NtZCA9IGJsb2NrQ21kLmNvbmNhdCggLi4udGhpcy5uZXdBcnJheVBhcnRpYWwoMHgwMCwgKDY1IC0gYmxvY2tDbWQubGVuZ3RoKSkgKVxyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2FkZGluZyBuZXcgaXRlcmF0aW9uOiAnLCBibG9ja0NtZCwgbmV3IERhdGUoKSlcclxuICAgICAgICAgICAgZW5xdWV1ZSggKCkgPT4gbmV3IFByb21pc2UoIGlubmVyUmVzb2x2ZSA9PiB0aGlzLnNlbmRQaW5Db21tYW5kKGJsb2NrQ21kKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oIHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVzcCBmcm9tIHNlbmRQaW5Db21tYW5kIGluIGl0ZXJhdGlvblwiLCByZXNwLCBuZXcgRGF0ZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5uZXJSZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdkYXRhIEJsb2NrcycsIGNvbW1hbmRCbG9ja3MsIG5ldyBEYXRlKCkpO1xyXG5cclxuICAgICAgICByZXR1cm4gYmVnaW5RdWV1ZSgpLnRoZW4oYmVnaW5RdWVSZXNwID0+IHBhcmVudFJlc29sdmUoYmVnaW5RdWVSZXNwKSkuY2F0Y2goZXJyID0+IHBhcmVudFJlamVjdChlcnIpKTtcclxuXHJcbiAgICAgICAgLy8gcmV0dXJuIGNvbW1hbmRCbG9ja3MoKS50aGVuKHJlc3VsdHMgPT4ge1xyXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnUXVldWUgUmVzdWx0czogJywgcmVzdWx0cyk7XHJcbiAgICAgICAgLy8gICAgIHJldHVybiBwYXJlbnRSZXNvbHZlKClcclxuICAgICAgICAvLyB9KS5jYXRjaChlcnIgPT4gcGFyZW50UmVqZWN0KHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2VuZEFycGMgPSBhcnBjUmVzcCA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB0aGlzLnNlbmRBcnBjQmFzZShhcnBjUmVzcClcclxuICAgICAgICAudGhlbihhcnBjQ21kID0+IHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcChhcnBjQ21kKSlcclxuICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW1NlbmQgQVJQQyBSZXNwXTogJHt0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHJlc3ApfWApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQVJQQyBGaW5hbCBSZXN1bHQ6JywgcmVzcCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXNwKTtcclxuICAgICAgICAgICAgLy8gY29uc3QgcmVzdWx0Q29kZSA9IChyZXNwLmxlbmd0aCA+IDUpID8gdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggcmVzcC5zbGljZSg0LCA2KSApIDogXCJcIjtcclxuXHJcbiAgICAgICAgICAgIC8vIHJldHVybiByZXNvbHZlKHtcclxuICAgICAgICAgICAgLy8gICAgIHNlbmRBcnBjUmVzcG9uc2U6ICh0aGlzLnJlc3VsdENvZGVzWyByZXN1bHRDb2RlIF0gfHwgXCJVbmtub3duIG9yIHVuZG9jdW1lbnRlZCByZXN1bHQgY29kZVwiKVxyXG4gICAgICAgICAgICAvLyB9KVxyXG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiByZWplY3QodGhpcy5idWlsZERldmljZUVycihlcnIpKSlcclxuICAgICk7XHJcblxyXG4gICAgc2VuZFBpbkNvbW1hbmQgPSB3cml0ZUNvbW1hbmQgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbQXBwRnJvbUhvc3RMZW5ndGhdOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoW3dyaXRlQ29tbWFuZC5sZW5ndGhdKX0gfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG5cclxuICAgICAgICByZXR1cm4gKCF0aGlzLnNlbmRMZW5Ub0RldmljZSkgPyByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoY29tbWFuZE5vdFNlbnRGcm9tSG9zdCkgKVxyXG4gICAgICAgIDogdGhpcy5zZW5kTGVuVG9EZXZpY2Uud3JpdGVWYWx1ZShVaW50OEFycmF5Lm9mKCB3cml0ZUNvbW1hbmQubGVuZ3RoICkpXHJcbiAgICAgICAgICAgIC50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbQXBwRnJvbUhvc3REYXRhXTogJHt0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHdyaXRlQ29tbWFuZCl9IHx8ICR7bmV3IERhdGUoKX1gKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZFNlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuY29tbWFuZENoYXJhY3RlcmlzdGljLndyaXRlVmFsdWUoIFVpbnQ4QXJyYXkuZnJvbSh3cml0ZUNvbW1hbmQpICkgKVxyXG4gICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kU2VudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2VuZENvbW1hbmRXaXRoUmVzcCA9IHdyaXRlQ29tbWFuZCA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gdGhpcy5zZW5kUGluQ29tbWFuZCh3cml0ZUNvbW1hbmQpXHJcbiAgICAgICAgLnRoZW4oICgpID0+ICh0aGlzLmNvbW1hbmRSZXNwQXZhaWxhYmxlKSA/IFByb21pc2UucmVzb2x2ZSh0cnVlKSA6IHRoaXMud2FpdEZvckRldmljZVJlc3BvbnNlKDE2KSApXHJcbiAgICAgICAgLnRoZW4oIHdhaXRSZXNwID0+ICh3YWl0UmVzcCkgPyB0aGlzLnJlYWRDb21tYW5kUmVzcCgpIDogdGhpcy50cnlDb21tYW5kQWdhaW4od3JpdGVDb21tYW5kKSApXHJcbiAgICAgICAgLnRoZW4oIHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb21tYW5kUmVzcEF2YWlsYWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHJlc3BvbnNlICk7XHJcbiAgICAgICAgfSkuY2F0Y2goIGVyciA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZFJlc3BBdmFpbGFibGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSApXHJcbiAgICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgdHJ5Q29tbWFuZEFnYWluID0gd3JpdGVDb21tYW5kID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB0aGlzLnNlbmRQaW5Db21tYW5kKHdyaXRlQ29tbWFuZClcclxuICAgICAgICAudGhlbiggKCkgPT4gdGhpcy53YWl0Rm9yRGV2aWNlUmVzcG9uc2UoNSkgKVxyXG4gICAgICAgIC50aGVuKCB3YWl0UmVzcCA9PiAod2FpdFJlc3ApID8gcmVzb2x2ZSggdGhpcy5yZWFkQ29tbWFuZFJlc3AoKSApXHJcbiAgICAgICAgICAgIDogcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKHJlc3BvbnNlTm90UmVjZWl2ZWQpIClcclxuICAgICAgICApXHJcbiAgICApO1xyXG5cclxuICAgIGNhbmNlbFRyYW5zYWN0aW9uID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+ICghdGhpcy5jb21tYW5kQ2hhcmFjdGVyaXN0aWMpID8gXHJcbiAgICAgICAgcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGNvbW1hbmROb3RTZW50KSlcclxuICAgICAgICA6XHJcbiAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKFsweDAxLCAweDA1LCAweDAwXSlcclxuICAgICAgICAudGhlbiggYWNrUmVzcCA9PiByZXNvbHZlKGFja1Jlc3ApIClcclxuICAgICAgICAuY2F0Y2goIGVyciA9PiByZWplY3QoZXJyKSApXHJcbiAgICApO1xyXG5cclxuICAgIGNsZWFyU2Vzc2lvbiA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0NsZWFyU2Vzc2lvbl06IFJlcXVlc3QgdG8gY2xlYXIgc2Vzc2lvbiB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgIHJldHVybiAoIXRoaXMuc2VuZExlblRvRGV2aWNlKSA/IHJlc29sdmUobm9TZXNzaW9uVG9DbGVhcikgXHJcbiAgICAgICAgICAgIDogdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKHRoaXMuY2xlYXJTZXNzaW9uQ21kKVxyXG4gICAgICAgICAgICAudGhlbiggYWNrUmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2soYWNrUmVzcCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbQ2xlYXJTZXNzaW9uXTogUmVjZWl2ZWQgY2xlYXIgc2Vzc2lvbiByZXNwb25zZSB8fCAke25ldyBEYXRlKCl9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShhY2tSZXNwKVxyXG4gICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikgKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjbG9zZVBpbkRldmljZSA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiAoIXRoaXMuY2FyZERhdGFMaXN0ZW5lcikgP1xyXG4gICAgICAgIHRoaXMuZGlzY29ubmVjdCgpLnRoZW4oICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0Nsb3NlIERldmljZV06IERldmljZSBDbG9zZWQuIENsZWFyaW5nIEpTIGNhY2hlIHx8ICR7bmV3IERhdGUoKX1gKTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckdhdHRDYWNoZSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcclxuICAgICAgICB9KS5jYXRjaChlcnIgPT4gcmVqZWN0KCBlcnIgKSApXHJcbiAgICAgICAgOlxyXG4gICAgICAgIHRoaXMuY2FyZERhdGFMaXN0ZW5lci5zdG9wTm90aWZpY2F0aW9ucygpXHJcbiAgICAgICAgLnRoZW4oICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0Nsb3NlIERldmljZV06IEdBVFQgbm90aWZpY2F0aW9ucyBzdG9wcGVkLiBDbGVhcmluZyBKUyBjYWNoZSB8fCAke25ldyBEYXRlKCl9YCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhcmREYXRhTGlzdGVuZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhcmFjdGVyaXN0aWN2YWx1ZWNoYW5nZWQnLCB0aGlzLmRhdGFXYXRjaGVyKTtcclxuICAgICAgICAgICAgdGhpcy5jYXJkRGF0YUxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckdhdHRDYWNoZSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIHRoaXMuZGlzY29ubmVjdCgpIClcclxuICAgICAgICB9KS5jYXRjaChlcnIgPT4gcmVqZWN0KCBlcnIgKSApXHJcbiAgICApO1xyXG5cclxuICAgIGNsb3NlRGV2aWNlID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+ICghdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpID8gXHJcbiAgICAgICAgcmVzb2x2ZShzdWNjZXNzZnVsQ2xvc2UpIFxyXG4gICAgICAgIDogdGhpcy5jbGVhclNlc3Npb24oKVxyXG4gICAgICAgICAgICAudGhlbiggKCkgPT4gXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlUGluRGV2aWNlKClcclxuICAgICAgICAgICAgKS50aGVuKCgpPT4gcmVzb2x2ZShzdWNjZXNzZnVsQ2xvc2UpXHJcbiAgICAgICAgICAgICkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdCh0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikgKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICBjbGVhckdhdHRDYWNoZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uSGFzU3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZURhdGFDaGFyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZW5kTGVuVG9EZXZpY2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY29tbWFuZFNlbnQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbW1hbmRSZXNwQXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zd2lwZUhhc0JlZ3VuID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kYXRhR2F0aGVyZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzUXVpY2tDaGlwVHJhbnNhY3Rpb24gPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQaW5QYWQ7IiwiaW1wb3J0IFBpblBhZCBmcm9tICcuL3BpblBhZCc7XHJcbmltcG9ydCB7IGRldmljZU5vdElkbGUsIGRwTWluaSB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IHJlc3BvbnNlTm90UmVjZWl2ZWQsIGRldmljZU5vdEZvdW5kIH0gZnJvbSAnLi4vZXJyb3JIYW5kbGVyL2VyckNvbnN0YW50cyc7XHJcblxyXG5jbGFzcyBEcE1pbmkgZXh0ZW5kcyBQaW5QYWQge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsQmFja3MpIHtcclxuICAgICAgICBzdXBlcihkZXZpY2UsIGNhbGxCYWNrcyk7XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0S3NuQXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0ZWRLc24gPSBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZ2V0U2VyaWFsTnVtYmVyID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0ZWRTbiA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuZGV2aWNlVHlwZSA9IGRwTWluaTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gR2V0RGV2aWNlSW5mb1xyXG4gICAgZ2V0RGV2aWNlSW5mbyA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiAoIXRoaXMuZGV2aWNlKSA/XHJcbiAgICAgICAgcmVqZWN0KHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90Rm91bmQpKSBcclxuICAgICAgICA6IHRoaXMuZ2F0aGVyRGV2aWNlSW5mbygpXHJcbiAgICAgICAgICAgIC50aGVuKCBkZXZpY2VJbmZvID0+IHJlc29sdmUoZGV2aWNlSW5mbylcclxuICAgICAgICAgICAgKS5jYXRjaChlcnIgPT4gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikpIClcclxuICAgICk7XHJcblxyXG4gICAgZ2F0aGVyRGV2aWNlSW5mbyA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRGV2aWNlSWRsZSgpXHJcbiAgICAgICAgLnRoZW4oICgpID0+IHRoaXMuZ2V0RGV2aWNlSW5mb1Byb2NlZWQoKVxyXG4gICAgICAgICkudGhlbiggZGV2aWNlSW5mbyA9PiBcclxuICAgICAgICAgICAgIHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgIC4uLmRldmljZUluZm8sXHJcbiAgICAgICAgICAgICAgICAgZGV2aWNlTmFtZTogdGhpcy5kZXZpY2UubmFtZSxcclxuICAgICAgICAgICAgICAgICBpc0Nvbm5lY3RlZDogdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQsXHJcbiAgICAgICAgICAgICB9KVxyXG4gICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKVxyXG4gICAgIH0pO1xyXG5cclxuICAgIGdldERldmljZUluZm9CYXNlID0gKCkgPT4gbmV3IFByb21pc2UoIHJlc29sdmUgPT4ge1xyXG4gICAgICAgIHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcChbMHgwMSwgMHgxQSwgMHgwNV0pXHJcbiAgICAgICAgLnRoZW4oIGFja1Jlc3AgPT4gcmVzb2x2ZShhY2tSZXNwKSlcclxuICAgIH0pO1xyXG5cclxuICAgIGdldERldmljZUluZm9Qcm9jZWVkID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLnNlbmRQaW5Db21tYW5kKFsweDAwLCAweDFBLCAweDA1XSlcclxuICAgICAgICAudGhlbiggKCkgPT4gKHRoaXMuZ2V0U2VyaWFsTnVtYmVyIHx8IHRoaXMud2FpdEZvclNuKDUpKSBcclxuICAgICAgICApLnRoZW4oIHdhaXRSZXNwID0+ICh3YWl0UmVzcCkgPyBQcm9taXNlLnJlc29sdmUoKSA6IFxyXG4gICAgICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIocmVzcG9uc2VOb3RSZWNlaXZlZCkpXHJcbiAgICAgICAgKS50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCByZXR1cm5TbiA9IHsgXHJcbiAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXI6IHRoaXMuaGV4VG9Bc2NpaSh0aGlzLnJlcXVlc3RlZFNuLnNlcmlhbE51bWJlcikgXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmdldFNlcmlhbE51bWJlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RlZFNuID0gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoICByZXR1cm5TbiApO1xyXG4gICAgICAgIH0pLmNhdGNoKCBlcnIgPT4gcmVqZWN0KGVycikpXHJcbiAgICB9KVxyXG5cclxuICAgIGNoZWNrSWZEZXZpY2VJZGxlID0gKCkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgdGhpcy5nZXREZXZpY2VJbmZvQmFzZSgpXHJcbiAgICAgICAgLnRoZW4oIGFja1Jlc3AgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYWNrUmVzcC5tZXNzYWdlID09PSBkZXZpY2VOb3RJZGxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbGVhclNlc3Npb24oKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oICgpID0+IHRoaXMuZ2V0RGV2aWNlSW5mb0Jhc2UoKSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrKGFja1Jlc3ApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oYWNrUmVzcCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhhY2tSZXNwKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG4gICAgd2FpdEZvclNuID0gbWF4VHJpZXMgPT4gbmV3IFByb21pc2UoIHJlc29sdmUgPT4ge1xyXG5cclxuICAgICAgICBsZXQgd2FpdEZvclJlc3BvbnNlID0gdHJ5TnVtYmVyID0+IFxyXG4gICAgICAgICAgICAodHJ5TnVtYmVyIDwgbWF4VHJpZXMpID8gXHJcbiAgICAgICAgICAgICAgICAodGhpcy5nZXRTZXJpYWxOdW1iZXIpID8gcmVzb2x2ZSggdHJ1ZSApIDogc2V0VGltZW91dCgoKSA9PiB3YWl0Rm9yUmVzcG9uc2UodHJ5TnVtYmVyICsgMSksIDIwMClcclxuICAgICAgICAgICAgOiByZXNvbHZlKCBmYWxzZSApO1xyXG5cclxuICAgICAgICB3YWl0Rm9yUmVzcG9uc2UoMCk7XHJcbiAgICB9KTtcclxuICAgIC8vI2VuZHJlZ2lvblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEcE1pbmk7IiwiaW1wb3J0IFBpblBhZCBmcm9tICcuL3BpblBhZCc7XHJcbmltcG9ydCB7IGRldmljZU5vdElkbGUsIGR5bmFQcm9HbyB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IHJlc3BvbnNlTm90UmVjZWl2ZWQsIGRldmljZU5vdEZvdW5kLCBkZXZpY2VOb3RPcGVuLCBtaXNzaW5nUmVxdWlyZWRGaWVsZHMgfSBmcm9tICcuLi9lcnJvckhhbmRsZXIvZXJyQ29uc3RhbnRzJztcclxuXHJcbmNsYXNzIER5bmFQcm9HbyBleHRlbmRzIFBpblBhZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIGNhbGxCYWNrcykge1xyXG4gICAgICAgIHN1cGVyKGRldmljZSwgY2FsbEJhY2tzKTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRLc25BdmFpbGFibGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJlcXVlc3RlZEtzbiA9IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5nZXRTZXJpYWxOdW1iZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJlcXVlc3RlZFNuID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5kZXZpY2VUeXBlID0gZHluYVByb0dvO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERpc3BsYXlNZXNzYWdlID0gZGlzcGxheU9wdGlvbnMgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gXHJcbiAgICAgICAgKHRoaXMuZGV2aWNlICYmIHRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSA/IFxyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkRGlzcGxheUNtZCggKGRpc3BsYXlPcHRpb25zIHx8IHt9KSApLnRoZW4oIGNtZCA9PiB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AoY21kKSBcclxuICAgICAgICAgICAgICAgICkudGhlbihyZXNwID0+IHJlc29sdmUocmVzcClcclxuICAgICAgICAgICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihlcnIpICkpXHJcbiAgICAgICAgICAgIDogcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGRldmljZU5vdE9wZW4pKSApO1xyXG5cclxuICAgIGJ1aWxkRGlzcGxheUNtZCA9ICh7IGRpc3BsYXlUaW1lLCBtZXNzYWdlSWQsIH0pID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiBcclxuICAgICAgICAodHlwZW9mKG1lc3NhZ2VJZCkgPT09ICd1bmRlZmluZWQnKSA/IFxyXG4gICAgICAgICAgICByZWplY3QoIG1pc3NpbmdSZXF1aXJlZEZpZWxkcyhcIm1lc3NhZ2VJZFwiKSApIFxyXG4gICAgICAgICAgICA6IHJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgMHgwMSwgMHgwNyxcclxuICAgICAgICAgICAgICAgICh0eXBlb2YoZGlzcGxheVRpbWUpICE9PSAndW5kZWZpbmVkJykgPyBkaXNwbGF5VGltZSA6IDB4MEYsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlSWRcclxuICAgICAgICAgICAgXSlcclxuICAgICAgICApO1xyXG5cclxuICAgIC8vI3JlZ2lvbiBHZXREZXZpY2VJbmZvXHJcbiAgICBnZXREZXZpY2VJbmZvID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+ICghdGhpcy5kZXZpY2UpID9cclxuICAgICAgICByZWplY3QodGhpcy5idWlsZERldmljZUVycihkZXZpY2VOb3RGb3VuZCkpIFxyXG4gICAgICAgIDogdGhpcy5nYXRoZXJEZXZpY2VJbmZvKClcclxuICAgICAgICAgICAgLnRoZW4oIGRldmljZUluZm8gPT4gcmVzb2x2ZShkZXZpY2VJbmZvKVxyXG4gICAgICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSkgKVxyXG4gICAgKTtcclxuXHJcbiAgICBnYXRoZXJEZXZpY2VJbmZvID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLmNoZWNrSWZEZXZpY2VJZGxlKClcclxuICAgICAgICAudGhlbiggKCkgPT4gdGhpcy5nZXREZXZpY2VJbmZvUHJvY2VlZCgpXHJcbiAgICAgICAgKS50aGVuKCBkZXZpY2VJbmZvID0+IFxyXG4gICAgICAgICAgICAgcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICAgLi4uZGV2aWNlSW5mbyxcclxuICAgICAgICAgICAgICAgICBkZXZpY2VOYW1lOiB0aGlzLmRldmljZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgIGlzQ29ubmVjdGVkOiB0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCxcclxuICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpXHJcbiAgICAgfSk7XHJcblxyXG4gICAgZ2V0RGV2aWNlSW5mb0Jhc2UgPSAoKSA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKFsweDAxLCAweDFBLCAweDA1XSlcclxuICAgICAgICAudGhlbiggYWNrUmVzcCA9PiByZXNvbHZlKGFja1Jlc3ApKVxyXG4gICAgfSk7XHJcblxyXG4gICAgZ2V0RGV2aWNlSW5mb1Byb2NlZWQgPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2VuZFBpbkNvbW1hbmQoWzB4MDAsIDB4MUEsIDB4MDVdKVxyXG4gICAgICAgIC50aGVuKCAoKSA9PiAodGhpcy5nZXRTZXJpYWxOdW1iZXIpID8gUHJvbWlzZS5yZXNvbHZlKHRydWUpIDogdGhpcy53YWl0Rm9yU24oNSkgXHJcbiAgICAgICAgKS50aGVuKCB3YWl0UmVzcCA9PiAod2FpdFJlc3ApID8gUHJvbWlzZS5yZXNvbHZlKCkgOiBcclxuICAgICAgICAgICAgcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKHJlc3BvbnNlTm90UmVjZWl2ZWQpKVxyXG4gICAgICAgICkudGhlbiggKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcmV0dXJuU24gPSB7IFxyXG4gICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyOiB0aGlzLmhleFRvQXNjaWkodGhpcy5yZXF1ZXN0ZWRTbi5zZXJpYWxOdW1iZXIpIFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5nZXRTZXJpYWxOdW1iZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0ZWRTbiA9IG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCAgcmV0dXJuU24gKTtcclxuICAgICAgICB9KS5jYXRjaCggZXJyID0+IHJlamVjdChlcnIpKVxyXG4gICAgfSlcclxuXHJcbiAgICBjaGVja0lmRGV2aWNlSWRsZSA9ICgpID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgIHRoaXMuZ2V0RGV2aWNlSW5mb0Jhc2UoKVxyXG4gICAgICAgIC50aGVuKCBhY2tSZXNwID0+IHtcclxuICAgICAgICAgICAgaWYgKGFja1Jlc3AubWVzc2FnZSA9PT0gZGV2aWNlTm90SWRsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xlYXJTZXNzaW9uKClcclxuICAgICAgICAgICAgICAgIC50aGVuKCAoKSA9PiB0aGlzLmdldERldmljZUluZm9CYXNlKCkgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayhhY2tSZXNwKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKGFja1Jlc3AgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2soYWNrUmVzcCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG5cclxuICAgIHdhaXRGb3JTbiA9IG1heFRyaWVzID0+IG5ldyBQcm9taXNlKCByZXNvbHZlID0+IHtcclxuXHJcbiAgICAgICAgbGV0IHdhaXRGb3JSZXNwb25zZSA9IHRyeU51bWJlciA9PiBcclxuICAgICAgICAgICAgKHRyeU51bWJlciA8IG1heFRyaWVzKSA/IFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuZ2V0U2VyaWFsTnVtYmVyKSA/IHJlc29sdmUoIHRydWUgKSA6IHNldFRpbWVvdXQoKCkgPT4gd2FpdEZvclJlc3BvbnNlKHRyeU51bWJlciArIDEpLCAyMDApXHJcbiAgICAgICAgICAgIDogcmVzb2x2ZSggZmFsc2UgKTtcclxuXHJcbiAgICAgICAgd2FpdEZvclJlc3BvbnNlKDApO1xyXG4gICAgfSk7XHJcbiAgICAvLyNlbmRyZWdpb25cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRHluYVByb0dvOyIsImltcG9ydCBEZXZpY2VCYXNlIGZyb20gJy4uL2RldmljZXMvYmFzZUNsYXNzJztcclxuXHJcbmNsYXNzIFNjcmFTd2lwZVBhcnNlciBleHRlbmRzIERldmljZUJhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsQmFja3MpIHtcclxuICAgICAgICBzdXBlcihkZXZpY2UsIGNhbGxCYWNrcyk7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YU5hbWVzID0gW1xyXG4gICAgICAgICAgICAndHJhY2sxJyxcclxuICAgICAgICAgICAgJ3RyYWNrMicsXHJcbiAgICAgICAgICAgICd0cmFjazMnLFxyXG4gICAgICAgICAgICAna3NuJyxcclxuICAgICAgICAgICAgJ21hZ25lUHJpbnQnLFxyXG4gICAgICAgICAgICAnbWFnbmVQcmludFN0YXR1cycsXHJcbiAgICAgICAgICAgICdzZXJpYWxOdW1iZXInLFxyXG4gICAgICAgICAgICAnZW5jU2Vzc2lvbklkJyxcclxuICAgICAgICAgICAgJ3RyYWNrMU1hc2tlZCcsXHJcbiAgICAgICAgICAgICd0cmFjazJNYXNrZWQnLFxyXG4gICAgICAgICAgICAndHJhY2szTWFza2VkJ1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gMztcclxuXHJcbiAgICAgICAgLy9Nb3ZlZCBTdGF0dXMgRW51bXMgdG8gRGV2aWNlQmFzZSBmb3IgaW5oZXJpdGFuY2UuXHJcbiAgICB9XHJcblxyXG4gICAgdHJhY2tJbmRpY2VzID0gb2Zmc2V0ID0+IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgIHRyYWNrMURlY29kZVN0YXR1czogb2Zmc2V0LFxyXG4gICAgICAgIHRyYWNrMkRlY29kZVN0YXR1czogb2Zmc2V0ICsgMSxcclxuICAgICAgICB0cmFjazNEZWNvZGVTdGF0dXM6IG9mZnNldCArIDIsXHJcbiAgICAgICAgdHJhY2sxTGVuOiBvZmZzZXQgKyAzLFxyXG4gICAgICAgIHRyYWNrMkxlbjogb2Zmc2V0ICsgNCxcclxuICAgICAgICB0cmFjazNMZW46IG9mZnNldCArIDUsXHJcbiAgICAgICAgY2FyZEVuY29kZVR5cGU6IG9mZnNldCArIDYsXHJcbiAgICAgICAgdHJhY2sxU3RhcnQ6IG9mZnNldCArIDcsXHJcbiAgICAgICAgdHJhY2sxRW5kOiBvZmZzZXQgKyAxMTgsXHJcbiAgICAgICAgdHJhY2syU3RhcnQ6IG9mZnNldCArIDExOSxcclxuICAgICAgICB0cmFjazJFbmQ6IG9mZnNldCArIDIzMCxcclxuICAgICAgICB0cmFjazNTdGFydDogb2Zmc2V0ICsgMjMxLFxyXG4gICAgICAgIHRyYWNrM0VuZDogb2Zmc2V0ICsgMzQyLFxyXG4gICAgICAgIGNhcmRTdGF0dXM6IG9mZnNldCArIDM0MyxcclxuICAgICAgICBtYWduZVByaW50U3RhdHVzU3RhcnQ6IG9mZnNldCArIDM0NCxcclxuICAgICAgICBtYWduZVByaW50U3RhdHVzRW5kOiBvZmZzZXQgKyAgMzQ3LFxyXG4gICAgICAgIG1hZ25lUHJpbnRMZW46IG9mZnNldCArIDM0OCxcclxuICAgICAgICBtYWduZVByaW50U3RhcnQ6IG9mZnNldCArIDM0OSxcclxuICAgICAgICBtYWduZVByaW50RW5kOiBvZmZzZXQgKyA0NzYsXHJcbiAgICAgICAgc2VyaWFsTnVtYmVyU3RhcnQ6IG9mZnNldCArIDQ3NyxcclxuICAgICAgICBzZXJpYWxOdW1iZXJFbmQ6IG9mZnNldCArIDQ5MixcclxuICAgICAgICBkZXZpY2VFbmNTdGF0dXNTdGFydDogb2Zmc2V0ICsgNDkzLFxyXG4gICAgICAgIGRldmljZUVuY1N0YXR1c0VuZDogb2Zmc2V0ICsgNDk0LFxyXG4gICAgICAgIGtzblN0YXJ0OiBvZmZzZXQgKyA0OTUsXHJcbiAgICAgICAga3NuRW5kOiBvZmZzZXQgKyA1MDQsXHJcbiAgICAgICAgdHJhY2sxTWFza2VkTGVuOiBvZmZzZXQgKyA1MDUsXHJcbiAgICAgICAgdHJhY2syTWFza2VkTGVuOiBvZmZzZXQgKyA1MDYsXHJcbiAgICAgICAgdHJhY2szTWFza2VkTGVuOiBvZmZzZXQgKyA1MDcsXHJcbiAgICAgICAgdHJhY2sxTWFza2VkU3RhcnQ6IG9mZnNldCArIDUwOCxcclxuICAgICAgICB0cmFjazFNYXNrZWRFbmQ6IG9mZnNldCArIDYxOSxcclxuICAgICAgICB0cmFjazJNYXNrZWRTdGFydDogb2Zmc2V0ICsgNjIwLFxyXG4gICAgICAgIHRyYWNrMk1hc2tlZEVuZDogb2Zmc2V0ICsgNzMxLFxyXG4gICAgICAgIHRyYWNrM01hc2tlZFN0YXJ0OiBvZmZzZXQgKyA3MzIsXHJcbiAgICAgICAgdHJhY2szTWFza2VkRW5kOiBvZmZzZXQgKyA4NDMsXHJcbiAgICAgICAgZW5jU2Vzc2lvbklkU3RhcnQ6IG9mZnNldCArIDg0NCxcclxuICAgICAgICBlbmNTZXNzaW9uSWRFbmQ6IG9mZnNldCArIDg1MSxcclxuICAgICAgICB0cmFjazFBYnNMZW46IG9mZnNldCArIDg1MixcclxuICAgICAgICB0cmFjazJBYnNMZW46IG9mZnNldCArIDg1MyxcclxuICAgICAgICB0cmFjazNBYnNMZW46IG9mZnNldCArIDg1NCxcclxuICAgICAgICBtYWduZVByaW50QWJzTGVuOiBvZmZzZXQgKyA4NTVcclxuICAgIH0pO1xyXG5cclxuICAgIHBhcnNlSGlkRGF0YSA9IGRhdGEgPT4ge1xyXG4gICAgICAgIGxldCB0cmFja1Bvc2l0aW9ucyA9IHRoaXMudHJhY2tJbmRpY2VzKHRoaXMub2Zmc2V0KTtcclxuICAgICAgICBsZXQgdHJhY2tJbmZvID0ge307XHJcbiAgICBcclxuICAgICAgICAvL0l0ZXJhdGUgdGhyb3VnaCB0cmFjayBuYW1lcyBhbmQgZm9ybWF0IGluIGtleSB2YWx1ZSBwYWlyIGZvcm1hdC5cclxuICAgICAgICB0aGlzLmRhdGFOYW1lcy5mb3JFYWNoKCBkYXRhUHJvcCA9PiB7XHJcblxyXG4gICAgICAgICAgICBsZXQgdHJhY2tEYXRhID0gZGF0YS5zbGljZShcclxuICAgICAgICAgICAgICAgIHRyYWNrUG9zaXRpb25zW2Ake2RhdGFQcm9wfVN0YXJ0YF0sIHRyYWNrUG9zaXRpb25zW2Ake2RhdGFQcm9wfUVuZGBdICsgMVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRyYWNrUG9zaXRpb25zLmhhc093blByb3BlcnR5KGAke2RhdGFQcm9wfUxlbmApKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFja0RhdGEgPSB0cmFja0RhdGEuc2xpY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgMCwgZGF0YVt0cmFja1Bvc2l0aW9uc1tgJHtkYXRhUHJvcH1MZW5gXV1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9TcGVjaWFsIGZvcm1hdHRpbmcgaXMgbmVlZGVkIGZvciB0cmFjazJNYXNrZWQsIHRyYWNrcyB3aXRoIGEgXCJEZWNvZGVTdGF0dXNcIiBmaWVsZCwgRGV2aWNlIFNlcmlhbCBOdW1iZXIsIGFuZCB0cmFja3MgdGhhdCBoYXZlIGEgXCJtYXNrZWRcIiBzdWZmaXguXHJcbiAgICAgICAgICAgIC8vVGhlIGJlbG93IHRlcm5hcnkgcmV0dXJucyB0aGUgcHJvcGVyIGZvcm1hdCwgZGVwZW5kaW5nIG9uIHRyYWNrIG5hbWUsIGFuZCBwZXJmb3JtcyBtdWNoIGJldHRlciB0aGFuIGlmL2Vsc2VpZi9lbHNlIHN0YXRlbWVudC5cclxuICAgICAgICAgICAgdHJhY2tJbmZvID0gKGRhdGFQcm9wID09PSAndHJhY2syTWFza2VkJykgPyB0aGlzLmZvcm1hdFRyYWNrMk1hc2tlZCggdHJhY2tJbmZvLCBkYXRhUHJvcCwgdGhpcy5idWZmZXJUb1V0ZjgodHJhY2tEYXRhKSApIDogXHJcbiAgICAgICAgICAgICAgICAodHJhY2tQb3NpdGlvbnMuaGFzT3duUHJvcGVydHkoYCR7ZGF0YVByb3B9RGVjb2RlU3RhdHVzYCkpID8gdGhpcy5mb3JtYXRUcmFja1dpdGhEZWNvZGUoIHRyYWNrSW5mbywgZGF0YVByb3AsIGRhdGFbdHJhY2tQb3NpdGlvbnNbYCR7ZGF0YVByb3B9RGVjb2RlU3RhdHVzYF1dLCB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHRyYWNrRGF0YSkgKSA6IFxyXG4gICAgICAgICAgICAgICAgICAgIChkYXRhUHJvcCA9PT0gJ3NlcmlhbE51bWJlcicpID8gdGhpcy5mb3JtYXRTZXJpYWxOdW1iZXIodHJhY2tJbmZvLCB0cmFja0RhdGEpIDogXHJcbiAgICAgICAgICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4udHJhY2tJbmZvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbZGF0YVByb3BdIDogKGRhdGFQcm9wLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ21hc2tlZCcpKSA/IHRoaXMuYnVmZmVyVG9VdGY4KHRyYWNrRGF0YSkgOiB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHRyYWNrRGF0YSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4geyBzd2lwZURhdGE6IHsgLi4udHJhY2tJbmZvIH0gfTtcclxuICAgIH1cclxuXHJcbiAgICBmb3JtYXRTZXJpYWxOdW1iZXIgPSAodHJhY2tJbmZvLCB0cmFja0RhdGEpID0+ICh7XHJcbiAgICAgICAgLi4udHJhY2tJbmZvLFxyXG4gICAgICAgIHNlcmlhbE51bWJlcjogdGhpcy5idWZmZXJUb1V0ZjgoICh0cmFja0RhdGEubGVuZ3RoID4gNyA/IHRyYWNrRGF0YS5zbGljZSgwLCA3KSA6IHRyYWNrRGF0YSApIClcclxuICAgIH0pO1xyXG5cclxuICAgIC8vTW92ZWQgRXhwIGFuZCBQQU4gZm9ybWF0aW5nIHRvIFV0aWxzIGNsYXNzIC0gZm9yIGluaGVyaXRhbmNlLlxyXG5cclxuICAgIGZvcm1hdFRyYWNrMk1hc2tlZCA9ICh0cmFja0luZm8sIGRhdGFQcm9wLCB0cmFjazJNYXNrZWQpID0+ICh7XHJcbiAgICAgICAgLi4udHJhY2tJbmZvLFxyXG4gICAgICAgIFtkYXRhUHJvcF0gOiB0cmFjazJNYXNrZWQsXHJcbiAgICAgICAgLi4udGhpcy5mb3JtYXRFeHBQQU4odHJhY2syTWFza2VkKVxyXG4gICAgfSk7XHJcblxyXG4gICAgZm9ybWF0VHJhY2tXaXRoRGVjb2RlID0gKHRyYWNrSW5mbywgZGF0YVByb3AsIGRlY29kZVN0YXR1c1ZhbHVlLCB0cmFja1ZhbHVlKSA9PiAoe1xyXG4gICAgICAgIC4uLnRyYWNrSW5mbyxcclxuICAgICAgICBbZGF0YVByb3BdIDogdHJhY2tWYWx1ZSxcclxuICAgICAgICBbYCR7ZGF0YVByb3B9RGVjb2RlU3RhdHVzYF0gOiBkZWNvZGVTdGF0dXNWYWx1ZSA9PT0gMHgwMCA/IFwiT2tcIiA6IFwiRXJyb3JcIixcclxuICAgICAgICBbYCR7ZGF0YVByb3B9RGVjb2RlU3RhdHVzQ29kZWBdIDogZGVjb2RlU3RhdHVzVmFsdWVcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTY3JhU3dpcGVQYXJzZXI7IiwiaW1wb3J0IFNjcmFTd2lwZVBhcnNlciBmcm9tICcuLi9wYXJzZXJzL3NjcmFTd2lwZVBhcnNlcic7XHJcblxyXG5jbGFzcyBUcnhTdGF0dXNQYXJzZXIgZXh0ZW5kcyBTY3JhU3dpcGVQYXJzZXIge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBjYWxsQmFja3MpIHtcclxuICAgICAgICBzdXBlcihkZXZpY2UsIGNhbGxCYWNrcyk7XHJcblxyXG4gICAgICAgIHRoaXMuVHJ4U3RhdHVzRW51bSA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIlRyYW5zYWN0aW9uIFN0YXJ0ZWQgYW5kIElkbGVcIixcclxuICAgICAgICAgICAgMHgwMTogXCJDYXJkIGlzIEluc2VydGVkXCIsXHJcbiAgICAgICAgICAgIDB4MDI6IFwiRXJyb3JcIixcclxuICAgICAgICAgICAgMHgwMzogXCJUcmFuc2FjdGlvbiBQcm9ncmVzcyBDaGFuZ2VcIixcclxuICAgICAgICAgICAgMHgwNDogXCJXYWl0aW5nIGZvciBVc2VyIFJlc3BvbnNlXCIsXHJcbiAgICAgICAgICAgIDB4MDU6IFwiVGltZWQgT3V0XCIsXHJcbiAgICAgICAgICAgIDB4MDY6IFwiVHJhbnNhY3Rpb24gQ29tcGxldGVcIixcclxuICAgICAgICAgICAgMHgwNzogXCJDYW5jZWxsZWQgYnkgSG9zdFwiLFxyXG4gICAgICAgICAgICAweDA4OiBcIkNhcmQgUmVtb3ZlZFwiLFxyXG4gICAgICAgICAgICAweDA5OiBcIkNvbnRhY3RsZXNzIFRva2VuIERldGVjdGVkLCBQb3dlcmluZyBVcCBDYXJkXCIsXHJcbiAgICAgICAgICAgIDB4MEE6IFwiTVNSIFN3aXBlIERldGVjdGVkXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5UcnhQcm9ncmVzc0luZGljYXRvciA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAweDAwOiBcIk5vIHRyYW5zYWN0aW9uIGluIHByb2dyZXNzXCIsXHJcbiAgICAgICAgICAgIDB4MDE6IFwiV2FpdGluZyBmb3IgY2FyZGhvbGRlciB0byBwcmVzZW50IHBheW1lbnRcIixcclxuICAgICAgICAgICAgMHgwMjogXCJQb3dlcmluZyB1cCB0aGUgY2FyZFwiLFxyXG4gICAgICAgICAgICAweDAzOiBcIlNlbGVjdGluZyB0aGUgYXBwbGljYXRpb25cIixcclxuICAgICAgICAgICAgMHgwNDogXCJXYWl0aW5nIGZvciB1c2VyIGxhbmd1YWdlIHNlbGVjdGlvblwiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgwNTogXCJXYWl0aW5nIGZvciB1c2VyIGFwcGxpY2F0aW9uIHNlbGVjdGlvblwiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgwNjogXCJJbml0aWF0aW5nIGFwcGxpY2F0aW9uXCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDA3OiBcIlJlYWRpbmcgYXBwbGljYXRpb24gZGF0YVwiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgwODogXCJPZmZsaW5lIGRhdGEgYXV0aGVudGljYXRpb25cIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MDk6IFwiUHJvY2VzcyByZXN0cmljdGlvbnNcIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MEE6IFwiQ2FyZGhvbGRlciB2ZXJpZmljYXRpb25cIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MEI6IFwiVGVybWluYWwgcmlzayBtYW5hZ2VtZW50XCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDBDOiBcIlRlcm1pbmFsIGFjdGlvbiBhbmFseXNpc1wiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgwRDogXCJHZW5lcmF0aW5nIGZpcnN0IGFwcGxpY2F0aW9uIGNyeXB0b2dyYW1cIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MEU6IFwiQ2FyZCBhY3Rpb24gYW5hbHlzaXNcIiwgIC8vQ29udGFjdCBPbmx5XHJcbiAgICAgICAgICAgIDB4MEY6IFwiT25saW5lIHByb2Nlc3NpbmdcIixcclxuICAgICAgICAgICAgMHgxMDogXCJXYWl0aW5nIG9ubGluZSBwcm9jZXNzaW5nIHJlc3BvbnNlXCIsXHJcbiAgICAgICAgICAgIDB4MTE6IFwiVHJhbnNhY3Rpb24gQ29tcGxldGVcIixcclxuICAgICAgICAgICAgMHgxMjogXCJUcmFuc2FjdGlvbiBFcnJvclwiLFxyXG4gICAgICAgICAgICAweDEzOiBcIlRyYW5zYWN0aW9uIEFwcHJvdmVkXCIsXHJcbiAgICAgICAgICAgIDB4MTQ6IFwiVHJhbnNhY3Rpb24gRGVjbGluZWRcIixcclxuICAgICAgICAgICAgMHgxNTogXCJUcmFuc2FjdGlvbiBDYW5jZWxsZWQgYnkgTVNSIFN3aXBlXCIsICAvL01TUiBPbmx5XHJcbiAgICAgICAgICAgIDB4MTY6IFwiRU1WIGVycm9yIC0gQ29uZGl0aW9ucyBOb3QgU2F0aXNmaWVkXCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDE3OiBcIkVNViBlcnJvciAtIENhcmQgQmxvY2tlZFwiLCAgLy9Db250YWN0IE9ubHlcclxuICAgICAgICAgICAgMHgxODogXCJBcHBsaWNhdGlvbiBzZWxlY3Rpb24gZmFpbGVkXCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDE5OiBcIkVNViBlcnJvciAtIENhcmQgTm90IEFjY2VwdGVkXCIsICAvL0NvbnRhY3QgT25seVxyXG4gICAgICAgICAgICAweDFBOiBcIkVtcHR5IENhbmRpZGF0ZSBMaXN0XCIsXHJcbiAgICAgICAgICAgIDB4MUI6IFwiQXBwbGljYXRpb24gQmxvY2tlZFwiLFxyXG4gICAgICAgICAgICAweDI5OiBcIkNvbnRhY3RsZXNzIFJlbW92ZSBDYXJkXCIsXHJcbiAgICAgICAgICAgIDB4MkE6IFwiQ29sbGlzaW9uIERldGVjdGVkXCIsXHJcbiAgICAgICAgICAgIDB4MkI6IFwiUmVmZXIgdG8gTW9iaWxlIERldmljZSBQcm9tcHRcIixcclxuICAgICAgICAgICAgMHgyQzogXCJDb250YWN0bGVzcyBUcmFuc2FjdGlvbiBDb21wbGV0ZVwiLFxyXG4gICAgICAgICAgICAweDJEOiBcIlJlcXVlc3QgU3dpdGNoIHRvIElDQy9NU1IgLSBLZXJuZWwgaGFzIHJlZnVzZWQgY29udGFjdGxlc3MgcGF5bWVudFwiLFxyXG4gICAgICAgICAgICAweDJFOiBcIldyb25nIENhcmQgVHlwZSAoTVNEIG9yIEVNVilcIixcclxuICAgICAgICAgICAgMHgyRjogXCJObyBBcHBsaWNhdGlvbiBJbnRlcmNoYW5nZSBQcm9maWxlIChUYWcgODIpIFJlY2VpdmVkXCIsXHJcbiAgICAgICAgICAgIDB4MzE6IFwiTWFnbmV0aWMgc3RyaXBlIGRlY29kaW5nIGVycm9yLlwiLFxyXG4gICAgICAgICAgICAweDNDOiBcIk1hZ25ldGljIHN0cmlwZSBkZWNvZGluZyBkdXJpbmcgVGVjaG5pY2FsIEZhbGxiYWNrLiBSZXZlcnQgdG8gTVNSLCBwb3dlcmluZyB1cCBidXQgbm90IHJlY2VpdmluZyBhbiBBbnN3ZXIgdG8gUmVzZXQgZnJvbSBjYXJkLlwiLFxyXG4gICAgICAgICAgICAweDNEOiBcIk1hZ25ldGljIHN0cmlwZSBjYXJkIGRlY29kZWQgZHVyaW5nIE1TUiBGYWxsYmFjay4gRGV2aWNlIHJldmVydGVkIHRvIE1TUiwgYnV0IGVuY291bnRlcmVkIGZhdGFsIGVycm9ycy5cIixcclxuICAgICAgICAgICAgMHgzRTogXCJNYWduZXRpYyBzdHJpcGUgY2FyZCBkZWNvZGVkIGR1cmluZyBhIE5vIEZhbGxiYWNrIE1TUiByZWFkLlwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VUcmFuc2FjdGlvblN0YXR1cyA9IG5vdGlmaWNhdGlvbiA9PiB7XHJcbiAgICAgICAgbGV0IGRhdGFMZW4gPSB0aGlzLnJlYWRUd29CeXRlTGVuZ3RoKFtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uWzFdLFxyXG4gICAgICAgICAgICBub3RpZmljYXRpb25bMl1cclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgbGV0IG5ld05vdGlmaWNhdGlvbiA9IG5vdGlmaWNhdGlvbi5zbGljZSgzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChuZXdOb3RpZmljYXRpb24ubGVuZ3RoID09PSBkYXRhTGVuKSA/IHRoaXMucGFyc2VOb3RpZmljYXRpb25zKG5ld05vdGlmaWNhdGlvbikgOiB0aGlzLnRocm93TGVuRXJyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBwYXJzZU5vdGlmaWNhdGlvbnMgPSBub3RpZmljYXRpb25TbGljZSA9PiB7XHJcbiAgICAgICAgbGV0IG5ld05vdGlmaWNhdGlvblNsaWNlID0gbm90aWZpY2F0aW9uU2xpY2Uuc2xpY2UoNik7XHJcblxyXG4gICAgICAgIGxldCBub3RpZmljYXRpb25MZW5ndGggPSB0aGlzLnJlYWRUd29CeXRlTGVuZ3RoKFtcclxuICAgICAgICAgICAgbmV3Tm90aWZpY2F0aW9uU2xpY2VbMF0sXHJcbiAgICAgICAgICAgIG5ld05vdGlmaWNhdGlvblNsaWNlWzFdXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIGxldCBub3RpZmljYXRpb25Db250ZW50ID0gbmV3Tm90aWZpY2F0aW9uU2xpY2Uuc2xpY2UoMik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cclxuICAgICAgICAgICAgLy9ub3RpZmljYXRpb25Db250ZW50IEZvcm1hdCBieSBJbmRleDpcclxuICAgICAgICAgICAgLy8wOiBFdmVudCA9PiBTZWUgdGhpcy5UcnhTdGF0dXNFbnVtIGZvciBjb2Rlcy5cclxuICAgICAgICAgICAgLy8xOiBDdXJyZW50IE9wZXJhdGlvbiBUaW1lIHJlbWFpbmluZyBpbiBzZWNvbmRzLlxyXG4gICAgICAgICAgICAvLzI6IEN1cnJlbnQgVHJhbnNhY3Rpb24gUHJvZ3Jlc3MgSW5kaWNhdG9yID0+IFNlZSB0aGlzLlRyeFByb2dyZXNzSW5kaWNhdG9yIGZvciBjb2Rlcy5cclxuICAgICAgICAgICAgLy8zIC0gNDogRmluYWwgU3RhdHVzID0+IE5vIGRvY3VtZW50YXRpb24gcHJvdmlkZWQgZm9yIHRoaXMgKHVzdWFsbHkgaXMgMDAwMCkuXHJcbiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cclxuXHJcbiAgICAgICAgbGV0IHRyeFN0YXR1c0NvZGUgPSBub3RpZmljYXRpb25Db250ZW50WzBdO1xyXG4gICAgICAgIGxldCB0cnhQcm9ncmVzc0NvZGUgPSBub3RpZmljYXRpb25Db250ZW50WzJdO1xyXG5cclxuICAgICAgICByZXR1cm4gKG5vdGlmaWNhdGlvbkNvbnRlbnQubGVuZ3RoID09PSBub3RpZmljYXRpb25MZW5ndGgpID8gIHtcclxuICAgICAgICAgICAgdHJhbnNhY3Rpb25TdGF0dXM6IHtcclxuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IHRyeFN0YXR1c0NvZGUsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXNNc2c6ICggdGhpcy5UcnhTdGF0dXNFbnVtWyB0cnhTdGF0dXNDb2RlIF0gfHwgXCJTdGF0dXMgY29kZSBtZXNzYWdlIG5vdCBkb2N1bWVudGVkXCIgKSxcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ29kZTogdHJ4UHJvZ3Jlc3NDb2RlLFxyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NNc2c6ICggdGhpcy5UcnhQcm9ncmVzc0luZGljYXRvclsgdHJ4UHJvZ3Jlc3NDb2RlIF0gfHwgXCJQcm9ncmVzcyBjb2RlIG1lc3NhZ2Ugbm90IGRvY3VtZW50ZWRcIiApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgOlxyXG4gICAgICAgIHRoaXMudGhyb3dMZW5FcnIoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVHJ4U3RhdHVzUGFyc2VyOyIsImltcG9ydCBUcnhTdGF0dXNQYXJzZXIgZnJvbSAnLi90cnhTdGF0dXNQYXJzZXInO1xyXG5cclxuY29uc3QgZHVrcHRGYWlsdXJlQmFzZSA9IFwiRmFpbHVyZSwgRFVLUFQgc2NoZW1lIGlzIFwiO1xyXG5jb25zdCBpbnZhbGlkQmFzZSA9IFwiSW52YWxpZCBcIjtcclxuXHJcblxyXG5jbGFzcyBTY3JhRW12UGFyc2VyIGV4dGVuZHMgVHJ4U3RhdHVzUGFyc2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGRldmljZSwgY2FsbEJhY2tzKSB7XHJcbiAgICAgICAgc3VwZXIoZGV2aWNlLCBjYWxsQmFja3MpO1xyXG5cclxuICAgICAgICB0aGlzLmVtdlJlc3VsdENvZGVzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIDB4ODE6IGR1a3B0RmFpbHVyZUJhc2UgKyBcIm5vdCBsb2FkZWRcIixcclxuICAgICAgICAgICAgMHg4MjogZHVrcHRGYWlsdXJlQmFzZSArIFwibG9hZGVkIGJ1dCBhbGwgb2YgaXRzIGtleXMgaGF2ZSBiZWVuIHVzZWRcIixcclxuICAgICAgICAgICAgMHg4MzogZHVrcHRGYWlsdXJlQmFzZSArIFwibm90IGxvYWRlZCAoU2VjdXJpdHkgTGV2ZWwgbm90IDMgb3IgNClcIixcclxuICAgICAgICAgICAgMHg4NDogaW52YWxpZEJhc2UgKyBcIlRvdGFsIFRyYW5zYWN0aW9uIFRpbWUgRmllbGRcIixcclxuICAgICAgICAgICAgMHg4NTogaW52YWxpZEJhc2UgKyBcIkNhcmQgVHlwZSBGaWVsZFwiLFxyXG4gICAgICAgICAgICAweDg2OiBpbnZhbGlkQmFzZSArIFwiT3B0aW9ucyBGaWVsZFwiLFxyXG4gICAgICAgICAgICAweDg3OiBpbnZhbGlkQmFzZSArIFwiQW1vdW50IEF1dGhvcml6ZWQgRmllbGRcIixcclxuICAgICAgICAgICAgMHg4ODogaW52YWxpZEJhc2UgKyBcIlRyYW5zYWN0aW9uIFR5cGUgRmllbGRcIixcclxuICAgICAgICAgICAgMHg4OTogaW52YWxpZEJhc2UgKyAgXCJDYXNoIEJhY2sgRmllbGRcIixcclxuICAgICAgICAgICAgMHg4QTogaW52YWxpZEJhc2UgKyBcIlRyYW5zYWN0aW9uIEN1cnJlbmN5IENvZGUgRmllbGRcIixcclxuICAgICAgICAgICAgMHg4RTogaW52YWxpZEJhc2UgKyBcIlJlcG9ydGluZyBPcHRpb25cIixcclxuICAgICAgICAgICAgMHg4RjogXCJUcmFuc2FjdGlvbiBBbHJlYWR5IEluIFByb2dyZXNzXCIsXHJcbiAgICAgICAgICAgIDB4OTE6IGludmFsaWRCYXNlICsgXCJEZXZpY2UgU2VyaWFsIE51bWJlclwiLFxyXG4gICAgICAgICAgICAweDk2OiBpbnZhbGlkQmFzZSArIFwiU3lzdGVtIERhdGUgYW5kIFRpbWVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlRW12RGF0YSA9IChlbXZEYXRhLCBpc0FycWMpID0+IChpc0FycWMpID8gKHtcclxuICAgICAgICBhcnFjRGF0YTogdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggZW12RGF0YS5zbGljZSgxMSkgKSxcclxuICAgICAgICBhcnFjRGF0YVBhcnNlZDpcclxuICAgICAgICAgICAgdGhpcy50bHZQYXJzZXIoXHJcbiAgICAgICAgICAgICAgICBlbXZEYXRhLnNsaWNlKDEzKSxcclxuICAgICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgOlxyXG4gICAgICAgICh7XHJcbiAgICAgICAgICAgIHNpZ25hdHVyZVJlcXVpcmVkOiAoZW12RGF0YVsxMV0gPT09IDB4ODApID8gXCJDQkMtTUFDIGNoZWNrZWQgaW4gQVJRQyBvbmxpbmUgcmVzcG9uc2VcIiA6IChlbXZEYXRhWzExXSA9PT0gMHgwMSksXHJcbiAgICAgICAgICAgIGJhdGNoRGF0YTogdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyggZW12RGF0YS5zbGljZSgxMSkgKSxcclxuICAgICAgICAgICAgYmF0Y2hEYXRhUGFyc2VkOiB0aGlzLnRsdlBhcnNlciggZW12RGF0YS5zbGljZSgxNCksIHRydWUgKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgLy9SZWFkIFJlc3VsdCBDb2RlIGZyb20gc3RhcnRUcmFuc2FjdGlvbiBjb21tYW5kIGFuZCByZXR1cm4gdG8gdXNlci4gSWYgbm90IDAgLSByZXR1cm4gZXJyb3IgbWVzc2FnZS5cclxuICAgIHBhcnNlRW12Q29tbWFuZFJlc3BvbnNlID0gcmVzcCA9PiAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdENvZGUgPSByZXNwLnNsaWNlKDQsIDYpO1xyXG5cclxuICAgICAgICAvL3Jlc3VsdCBjb2RlIG9mIFsweDAwLCAweDAwXSBpcyBzdWNjZXNzLlxyXG4gICAgICAgIHJldHVybiAocGFyc2VJbnQoIHJlc3VsdENvZGUuam9pbihcIlwiKSApKSA/XHJcbiAgICAgICAgICAgICh7XHJcbiAgICAgICAgICAgICAgICBjb2RlOiBwYXJzZUludCh0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKCByZXN1bHRDb2RlICksIDE2KSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiU3RhcnRUcmFuc2FjdGlvbkVycm9yXCIsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVtdlJlc3VsdENvZGVzWyByZXN1bHRDb2RlWzFdIF0gfHwgXCJUcmFuc2FjdGlvbiBFcnJvciBNZXNzYWdlIG5vdCB5ZXQgZG9jdW1lbnRlZFwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgKHtcclxuICAgICAgICAgICAgICAgIGNvZGU6IDAsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlN1Y2Nlc3MsIHRyYW5zYWN0aW9uIGhhcyBzdGFydGVkXCJcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVVzZXJTZWxlY3Rpb25SZXF1ZXN0ID0gc2VsZWN0aW9uUmVxdWVzdCA9PiAoe1xyXG4gICAgICAgIHVzZXJTZWxlY3Rpb25SZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgIHNlbGVjdGlvblR5cGU6IChzZWxlY3Rpb25SZXF1ZXN0WzBdID09PSAweDAwKSA/IFwiQXBwbGljYXRpb24gU2VsZWN0aW9uXCIgOiBcIkxhbmd1YWdlIFNlbGVjdGlvblwiLFxyXG4gICAgICAgICAgICB0aW1lUmVtYWluaW5nOiAgc2VsZWN0aW9uUmVxdWVzdFsxXSxcclxuICAgICAgICAgICAgbWVudUl0ZW1zOiB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHNlbGVjdGlvblJlcXVlc3Quc2xpY2UoMikpXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2NyYUVtdlBhcnNlcjsiLCJpbXBvcnQgU2NyYUVtdlBhcnNlciBmcm9tICcuLi9wYXJzZXJzL3NjcmFFbXZQYXJzZXInO1xyXG5pbXBvcnQgeyBcclxuICAgIGNvbW1hbmROb3RTZW50LFxyXG4gICAgcmVzcG9uc2VOb3RSZWNlaXZlZCxcclxuICAgIGRldmljZU5vdEZvdW5kLFxyXG4gICAgZGV2aWNlTm90T3BlbixcclxuICAgIGdhdHRTZXJ2ZXJOb3RDb25uZWN0ZWRcclxufSBmcm9tICcuLi9lcnJvckhhbmRsZXIvZXJyQ29uc3RhbnRzJztcclxuaW1wb3J0IHsgXHJcbiAgICBjbG9zZVN1Y2Nlc3MsIFxyXG4gICAgc3VjY2Vzc0NvZGUsIFxyXG4gICAgb3BlblN1Y2Nlc3MgXHJcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuXHJcbmNsYXNzIFNjcmEgZXh0ZW5kcyBTY3JhRW12UGFyc2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGRldmljZSwgY2FsbEJhY2tzKSB7XHJcbiAgICAgICAgc3VwZXIoZGV2aWNlLCBjYWxsQmFja3MpO1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25DYWxsYmFjayA9IGNhbGxCYWNrcy50cmFuc2FjdGlvbkNhbGxiYWNrIHx8IGNhbGxCYWNrcztcclxuICAgICAgICB0aGlzLmRpc3BsYXlDYWxsYmFjayA9IGNhbGxCYWNrcy5kaXNwbGF5Q2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvblN0YXR1c0NhbGxiYWNrID0gY2FsbEJhY2tzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy51c2VyU2VsZWN0aW9uQ2FsbGJhY2sgPSBjYWxsQmFja3MudXNlclNlbGVjdGlvbkNhbGxiYWNrO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubWF4QmxvY2tJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsTm90aWZpY2F0aW9uID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJhd0RhdGEgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhUmVhZFN0YXR1c0NoYXJhY3RlcmlzdGljID0gbnVsbDtcclxuICAgICAgICB0aGlzLmRhdGFSZWFkeUNoYXJhY3RlcmlzdGljID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jYXJkRGF0YUxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNhcmREYXRhTm90aWZpY2F0aW9uID1cIjA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDIwMVwiO1xyXG4gICAgICAgIHRoaXMuY29tbWFuZENoYXJJZCA9ICcwNTA4ZTZmOC1hZDgyLTg5OGYtZjg0My1lMzQxMGNiNjAyMDAnO1xyXG4gICAgICAgIHRoaXMuZGF0YVJlYWR5SWQgPSBcIjA1MDhlNmY4LWFkODItODk4Zi1mODQzLWUzNDEwY2I2MDIwMlwiO1xyXG4gICAgICAgIHRoaXMuZGF0YVJlYWRTdGF0dXNJZCA9IFwiMDUwOGU2ZjgtYWQ4Mi04OThmLWY4NDMtZTM0MTBjYjYwMjAzXCI7XHJcblxyXG4gICAgICAgIHRoaXMuZW12T3B0aW9ucyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgICAgICAnbm9ybWFsJzogMHgwMCxcclxuICAgICAgICAgICAgJ2J5cGFzc3Bpbic6IDB4MDEsXHJcbiAgICAgICAgICAgICdmb3JjZW9ubGluZSc6IDB4MDIsXHJcbiAgICAgICAgICAgICdxdWlja2NoaXAnOiAweDgwLFxyXG4gICAgICAgICAgICAncGluYnlwYXNzcXVpY2tjaGlwJzogMHg4MSxcclxuICAgICAgICAgICAgJ2ZvcmNlb25saW5lcXVpY2tjaGlwJzogMHg4MlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnJlc3VsdENvZGVzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgICcwMDAwJzogXCJTdWNjZXNzXCIsXHJcbiAgICAgICAgICAgICcwMzhCJzogXCJJbnZhbGlkIFNlbGVjdGlvbiBTdGF0dXNcIixcclxuICAgICAgICAgICAgJzAzOEMnOiAnSW52YWxpZCBTZWxlY3Rpb24gUmVzdWx0JyxcclxuICAgICAgICAgICAgJzAzOEQnOiBcIkZhaWx1cmUsIG5vIHRyYW5zYWN0aW9uIGN1cnJlbnRseSBpbiBwcm9ncmVzc1wiLFxyXG4gICAgICAgICAgICAnMDM4Ric6IFwiRmFpbHVyZSwgdHJhbnNhY3Rpb24gYWxyZWFkeSBpbiBwcm9ncmVzc1wiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZW12Q29tbWFuZEJhc2UgPSBbMHg0OSwgMHgxOSwgMHgwMCwgMHgwMCwgMHgwMywgMHgwMCwgMHgwMCwgMHgxM107XHJcblxyXG4gICAgICAgIHRoaXMuY2FuY2VsRW12Q29tbWFuZCA9IFVpbnQ4QXJyYXkub2YoXHJcbiAgICAgICAgICAgIDB4NDksIDB4MDYsIDB4MDAsIDB4MDAsIDB4MDMsIDB4MDQsIDB4MDAsIDB4MDBcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENhcmRTZXJ2aWNlQmFzZSA9IG9wdGlvbmFsSW5kZXggPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+ICghdGhpcy5kZXZpY2UpID9cclxuICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90Rm91bmQpKVxyXG4gICAgICAgIDpcclxuICAgICAgICB0aGlzLmNvbm5lY3RBbmRDYWNoZShvcHRpb25hbEluZGV4KVxyXG4gICAgICAgICAgICAudGhlbiggc2VydmljZSA9PlxyXG4gICAgICAgICAgICAgICAgc2VydmljZS5nZXRDaGFyYWN0ZXJpc3RpYyh0aGlzLmNhcmREYXRhTm90aWZpY2F0aW9uKVxyXG4gICAgICAgICAgICApLnRoZW4oY2hhcmFjdGVyaXN0aWMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0dBVFQgTk9USUZJQ0FUSU9OU106IFJlcXVlc3QgdG8gY2FjaGUgY2hhcmFjdGVyaXN0aWNzLCBzdGFydCBub3RpZmljYXRpb25zLCBhbmQgYXR0YWNoIGxpc3RlbmVycy4gfHwgJHtuZXcgRGF0ZSgpfWApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcmFjdGVyaXN0aWMuc3RhcnROb3RpZmljYXRpb25zKClcclxuICAgICAgICAgICAgfSkudGhlbihjaGFyYWN0ZXJpc3RpYyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFyYWN0ZXJpc3RpY3ZhbHVlY2hhbmdlZCcsIHRoaXMuY2FyZERhdGFIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYXJhY3RlcmlzdGljdmFsdWVjaGFuZ2VkJywgdGhpcy5jYXJkRGF0YUhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhcmREYXRhTGlzdGVuZXIgPSBjaGFyYWN0ZXJpc3RpYztcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSkudGhlbiggXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLmNhcmRTZXJ2aWNlLmdldENoYXJhY3RlcmlzdGljKHRoaXMuY29tbWFuZENoYXJJZClcclxuICAgICAgICAgICAgKS50aGVuKGNoYXJhY3RlcmlzdGljID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZENoYXJhY3RlcmlzdGljID0gY2hhcmFjdGVyaXN0aWM7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9JZiB0aGlzIGxpYnJhcnkgaXMgYmVpbmcgdXNlZCBpbiBhIHdlYiBhcHBsaWNhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9NYWtlIHN1cmUgdGhlIGRldmljZSBkaXNjb25uZWN0cyBwcm9wZXJseSB1cG9uIHdpbmRvdyB1bmxvYWQuXHJcbiAgICAgICAgICAgICAgICBpZiAod2luZG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMub25EZXN0cm95SGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMub25EZXN0cm95SGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KS50aGVuKFxyXG4gICAgICAgICAgICAgICAgKCkgPT4gdGhpcy5jYXJkU2VydmljZS5nZXRDaGFyYWN0ZXJpc3RpYyh0aGlzLmRhdGFSZWFkeUlkKVxyXG4gICAgICAgICAgICApLnRoZW4oIGNoYXJhY3RlcmlzdGljID0+IGNoYXJhY3RlcmlzdGljLnN0YXJ0Tm90aWZpY2F0aW9ucygpXHJcbiAgICAgICAgICAgICkudGhlbiggY2hhcmFjdGVyaXN0aWMgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhcmFjdGVyaXN0aWN2YWx1ZWNoYW5nZWQnLCB0aGlzLmRhdGFSZWFkeUhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuYWRkRXZlbnRMaXN0ZW5lcignY2hhcmFjdGVyaXN0aWN2YWx1ZWNoYW5nZWQnLCB0aGlzLmRhdGFSZWFkeUhhbmRsZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVJlYWR5Q2hhcmFjdGVyaXN0aWMgPSBjaGFyYWN0ZXJpc3RpYztcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSkudGhlbihcclxuICAgICAgICAgICAgICAgICgpID0+IHRoaXMuY2FyZFNlcnZpY2UuZ2V0Q2hhcmFjdGVyaXN0aWModGhpcy5kYXRhUmVhZFN0YXR1c0lkKVxyXG4gICAgICAgICAgICApLnRoZW4oIGNoYXJhY3RlcmlzdGljID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVJlYWRTdGF0dXNDaGFyYWN0ZXJpc3RpYyA9IGNoYXJhY3RlcmlzdGljO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgW0dBVFQgTk9USUZJQ0FUSU9OU106IFN1Y2Nlc3MhIENhY2hlZCBjaGFyYWN0ZXJpc3RpY3MsIHN0YXJ0ZWQgbm90aWZpY2F0aW9ucywgYW5kIGF0dGFjaGVkIGxpc3RlbmVycy4gfHwgJHtuZXcgRGF0ZSgpfWApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogc3VjY2Vzc0NvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogb3BlblN1Y2Nlc3NcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gcmVqZWN0KCBlcnIgKSlcclxuICAgICk7XHJcblxyXG4gICAgZGF0YVJlYWR5SGFuZGxlciA9IGV2ZW50ID0+IHtcclxuICAgICAgICBsZXQgZXZlbnRWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICBsZXQgZm9ybWF0dGVkRXZlbnRWYWx1ZSA9IHRoaXMucmVhZEJ5dGVBcnJheShldmVudFZhbHVlKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgZGF0YVJlYWR5IGxpc3RlbmVyOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoZm9ybWF0dGVkRXZlbnRWYWx1ZSl9YCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbW1hbmRTZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZFJlc3BBdmFpbGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRTZW50ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNhcmREYXRhSGFuZGxlciA9IGV2ZW50ID0+IHtcclxuICAgICAgICBsZXQgZXZlbnRWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuXHJcbiAgICAgICAgLy9JZiB0aGUgZmlyc3QgcG9zaXRpb24gaW4gdGhlIGFycmF5ID09PSAyNTUsIGNhcmQgZGF0YSBub3RpZmljYXRpb25zIGhhdmUgZmluaXNoZWQuXHJcbiAgICAgICAgaWYgKGV2ZW50VmFsdWUuZ2V0VWludDgoMCkgIT09IDI1NSkge1xyXG4gICAgICAgICAgICBsZXQgbm90aWZpY2F0aW9uQXJyYXkgPSB0aGlzLnJlYWRCeXRlQXJyYXkoZXZlbnRWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJhd0RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAuLi50aGlzLnJhd0RhdGEsXHJcbiAgICAgICAgICAgICAgICBbbm90aWZpY2F0aW9uQXJyYXlbMF1dOiBub3RpZmljYXRpb25BcnJheS5zbGljZSgxKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvL0tlZXAgdHJhY2sgb2YgdGhlIGFtb3VudCBvZiBub3RpZmljYXRpb25zIHNlbnQgZnJvbSBkZXZpY2UuXHJcbiAgICAgICAgICAgIHRoaXMubWF4QmxvY2tJZCA9IGV2ZW50VmFsdWUuZ2V0VWludDgoMSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja05vdGlmaWNhdGlvbkxlbmd0aCgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxOb3RpZmljYXRpb24gPSAodGhpcy5ybGVGb3JtYXRzWyB0aGlzLnJhd0RhdGFbMF1bMF0gXSkgPyB0aGlzLmRlY29kZVJMRSh0aGlzLnJhd0RhdGFbMF0pIDogdGhpcy5yYXdEYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZSh0aGlzLnJhd0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvL0NoZWNrIGlmIHN3aXBlIGRhdGFcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmluaXRpYWxOb3RpZmljYXRpb25bMF0gPT09IDAgfHwgdGhpcy5pbml0aWFsTm90aWZpY2F0aW9uWzBdID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0dXJuVG9Vc2VyKHRoaXMudHJhbnNhY3Rpb25DYWxsYmFjaykoIHRoaXMucGFyc2VIaWREYXRhKCB0aGlzLmJ1aWxkSW5pdGlhbERhdGFBcnJheSh0cnVlKSApICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbm90aWZpY2F0aW9uSWQgPSB0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsTm90aWZpY2F0aW9uWzddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxOb3RpZmljYXRpb25bOF1cclxuICAgICAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kTm90aWZpY2F0aW9uVHlwZShub3RpZmljYXRpb25JZClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgZWxzZSB0aGlzLnNlbmRFcnJUb0NhbGxiYWNrKCB0aGlzLnRocm93TGVuRXJyKCkgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZmluZE5vdGlmaWNhdGlvblR5cGUgPSBub3RpZmljYXRpb25JZCA9PiB7XHJcbiAgICAgICAgbGV0IGJ1aWx0Tm90aWZpY2F0aW9uID0gdGhpcy5idWlsZEluaXRpYWxEYXRhQXJyYXkodHJ1ZSk7XHJcblxyXG4gICAgICAgIHN3aXRjaChub3RpZmljYXRpb25JZCkge1xyXG4gICAgICAgICAgICBjYXNlIFwiMDMwMFwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZSgnPT1UcmFuc2FjdGlvbiBTdGF0dXM9PScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0dXJuVG9Vc2VyKHRoaXMudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjaykodGhpcy5wYXJzZVRyYW5zYWN0aW9uU3RhdHVzKCBidWlsdE5vdGlmaWNhdGlvbiApKTtcclxuICAgICAgICAgICAgY2FzZSBcIjAzMDFcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoXCI9PURpc3BsYXkgTWVzc2FnZSBSZXF1ZXN0PT1cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXR1cm5Ub1VzZXIodGhpcy5kaXNwbGF5Q2FsbGJhY2spKHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TWVzc2FnZTogdGhpcy5idWZmZXJUb1V0ZjgoIGJ1aWx0Tm90aWZpY2F0aW9uLnNsaWNlKDExKSApXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2FzZSBcIjAzMDJcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoXCI9PVVzZXIgU2VsZWN0aW9uIFJlcXVlc3Q9PVwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUodGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhidWlsdE5vdGlmaWNhdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgLy9UT0RPOiBGdXJ0aGVyIGludmVzdGlnYXRpb24gd2FycmFudGVkIGZvciB0aGlzIGNpcmN1bXN0YW5jZS5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJldHVyblRvVXNlcih0aGlzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2spKCB0aGlzLnBhcnNlVXNlclNlbGVjdGlvblJlcXVlc3QoYnVpbGROb3RpZmljYXRpb24pICk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIjAzMDNcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoXCI9PUFSUUMgTWVzc2FnZT09XCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0dXJuVG9Vc2VyKHRoaXMudHJhbnNhY3Rpb25DYWxsYmFjaykodGhpcy5wYXJzZUVtdkRhdGEoIGJ1aWx0Tm90aWZpY2F0aW9uLCB0cnVlICkpIDtcclxuICAgICAgICAgICAgY2FzZSBcIjAzMDRcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoJz09QmF0Y2ggRGF0YSBNZXNzYWdlPT0nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJldHVyblRvVXNlcih0aGlzLnRyYW5zYWN0aW9uQ2FsbGJhY2spKHRoaXMucGFyc2VFbXZEYXRhKCBidWlsdE5vdGlmaWNhdGlvbiwgZmFsc2UgKSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBVbmRvY3VtZW50ZWQgTm90aWZpY2F0aW9uIElEOiAke25vdGlmaWNhdGlvbklkfWAsIGJ1aWx0Tm90aWZpY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoIHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIGJ1aWx0Tm90aWZpY2F0aW9uICkgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnRUcmFuc2FjdGlvbiA9IGVtdk9wdGlvbnMgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+ICghdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpID8gXHJcbiAgICAgICAgcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGRldmljZU5vdE9wZW4pIClcclxuICAgICAgICA6XHJcbiAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKFxyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkRW12Q29tbWFuZCggZW12T3B0aW9ucyB8fCB7fSApXHJcbiAgICAgICAgKS50aGVuKCB2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjb21tYW5kUmVzcCA9IHRoaXMucGFyc2VFbXZDb21tYW5kUmVzcG9uc2UodmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGNvbW1hbmRSZXNwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChjb21tYW5kUmVzcC5jb2RlID09PSAwKSA/IHJlc29sdmUoY29tbWFuZFJlc3ApIDpcclxuICAgICAgICAgICAgICAgIChjb21tYW5kUmVzcC5jb2RlICE9PSA5MTgpID8gcmVqZWN0KHRoaXMuYnVpbGREZXZpY2VFcnIoY29tbWFuZFJlc3ApKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREZXZpY2VEYXRlVGltZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oICgpID0+IHRoaXMuZGVsYXlQcm9taXNlKDUwMCkgKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCAoKSA9PiByZXNvbHZlKCB0aGlzLnN0YXJ0VHJhbnNhY3Rpb24oZW12T3B0aW9ucykgKSApXHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihlcnIpKSApXHJcbiAgICApOyBcclxuXHJcbiAgICBidWlsZEVtdkNvbW1hbmQgPSAoeyBcclxuICAgICAgICB0aW1lb3V0LCBcclxuICAgICAgICBjYXJkVHlwZSwgXHJcbiAgICAgICAgdHJhbnNhY3Rpb25UeXBlLCBcclxuICAgICAgICBjYXNoQmFjaywgXHJcbiAgICAgICAgY3VycmVuY3lDb2RlLCBcclxuICAgICAgICByZXBvcnRWZXJib3NpdHksXHJcbiAgICAgICAgZW12T3B0aW9ucyxcclxuICAgICAgICBhdXRob3JpemVkQW1vdW50XHJcbiAgICB9KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYHRpbWVvdXQ6ICR7dGltZW91dH0gfHwgY2FyZFR5cGU6ICR7Y2FyZFR5cGV9IHx8IHRyYW5zYWN0aW9uVHlwZTogJHt0cmFuc2FjdGlvblR5cGV9IHx8IGVtdk9wdGlvbnM6ICR7ZW12T3B0aW9uc30gfHwgYXV0aG9yaXplZEFtb3VudDogJHthdXRob3JpemVkQW1vdW50fSB8fCBjYXNoQmFjazogJHtjYXNoQmFja30gfHwgY3VycmVuY3lDb2RlOiAke2N1cnJlbmN5Q29kZX0gfHwgcmVwb3J0VmVyYm9zaXR5OiAke3JlcG9ydFZlcmJvc2l0eX1gKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBjb21tYW5kID0gWyBcclxuICAgICAgICAgICAgLi4udGhpcy5lbXZDb21tYW5kQmFzZSwgXHJcbiAgICAgICAgICAgIHRpbWVvdXQgfHwgMHgzQywgXHJcbiAgICAgICAgICAgIChjYXJkVHlwZSkgPyB0aGlzLmNhcmRUeXBlcyggY2FyZFR5cGUudG9Mb3dlckNhc2UoKSApIDogMHgwMyxcclxuICAgICAgICAgICAgKHR5cGVvZihlbXZPcHRpb25zKSAhPT0gJ3VuZGVmaW5lZCcpID8gKHRoaXMuZW12T3B0aW9uc1sgZW12T3B0aW9ucy50b0xvd2VyQ2FzZSgpIF0pIDogMHg4MFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdiYXNlIGNvbW1hbmQ6ICcsIGNvbW1hbmQpO1xyXG5cclxuICAgICAgICBjb21tYW5kID0gKGF1dGhvcml6ZWRBbW91bnQpID8gXHJcbiAgICAgICAgICAgIGNvbW1hbmQuY29uY2F0KCB0aGlzLmNvbnZlcnROdW1Ub0Ftb3VudChhdXRob3JpemVkQW1vdW50KSApXHJcbiAgICAgICAgICAgIDogY29tbWFuZC5jb25jYXQoIFsweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAxLCAweDAwXSApO1xyXG5cclxuICAgICAgICBjb21tYW5kID0gKHRyYW5zYWN0aW9uVHlwZSkgPyBcclxuICAgICAgICAgICAgY29tbWFuZC5jb25jYXQodGhpcy50cmFuc2FjdGlvblR5cGVzWyB0cmFuc2FjdGlvblR5cGUudG9Mb3dlckNhc2UoKSBdIHx8IDB4MDApIFxyXG4gICAgICAgICAgICA6IGNvbW1hbmQuY29uY2F0KDB4MDApXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29tbWFuZCA9IChjYXNoQmFjaykgPyBjb21tYW5kLmNvbmNhdCggdGhpcy5jb252ZXJ0TnVtVG9BbW91bnQoY2FzaEJhY2spIClcclxuICAgICAgICAgICAgOiBjb21tYW5kLmNvbmNhdCggdGhpcy5uZXdBcnJheVBhcnRpYWwoMHgwMCwgNikgKTtcclxuXHJcbiAgICAgICAgY29tbWFuZCA9IChjdXJyZW5jeUNvZGUpID8gY29tbWFuZC5jb25jYXQoIHRoaXMuY3VycmVuY3lDb2RlWyBjdXJyZW5jeUNvZGUudG9Mb3dlckNhc2UoKSBdIHx8ICB0aGlzLmN1cnJlbmN5Q29kZVsnZGVmYXVsdCddIClcclxuICAgICAgICAgICAgOiBjb21tYW5kLmNvbmNhdCggWzB4MDgsIDB4NDBdICk7XHJcblxyXG4gICAgICAgIGNvbW1hbmQucHVzaChcclxuICAgICAgICAgICAgKHJlcG9ydFZlcmJvc2l0eSkgPyAoIHRoaXMuc3RhdHVzVmVyYm9zaXR5WyByZXBvcnRWZXJib3NpdHkudG9Mb3dlckNhc2UoKSBdIHx8IDB4MDAgKSA6IDB4MDFcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBjb21tYW5kO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRDb21tYW5kVmFsdWUgPSAoKSA9PiBuZXcgUHJvbWlzZSAocmVzb2x2ZSA9PiB0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYy5yZWFkVmFsdWUoKVxyXG4gICAgICAgIC50aGVuKCB2YWx1ZSA9PiByZXNvbHZlKCB0aGlzLnJlYWRCeXRlQXJyYXkodmFsdWUpICkpKTtcclxuXHJcbiAgICByZWFkQmF0dGVyeUxldmVsID0gKCkgPT4gbmV3IFByb21pc2UoIHJlc29sdmUgPT4gXHJcbiAgICAgICAgdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKFsweDQ1LCAweDAwXSkudGhlbih2YWx1ZSA9PiByZXNvbHZlKCB2YWx1ZVsyXSApKVxyXG4gICAgKTtcclxuXHJcbiAgICBjaGVja05vdGlmaWNhdGlvbkxlbmd0aCA9ICgpID0+IE1hdGgubWF4KC4uLk9iamVjdC5rZXlzKHRoaXMucmF3RGF0YSkpID09PSB0aGlzLm1heEJsb2NrSWQgLSAxO1xyXG4gICBcclxuICAgIHNlbmRDb21tYW5kV2l0aFJlc3AgPSB3cml0ZUNvbW1hbmQgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuY29tbWFuZENoYXJhY3RlcmlzdGljKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoY29tbWFuZE5vdFNlbnQpKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dEZXZpY2VTdGF0ZShgU2VuZGluZyBjb21tYW5kOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcod3JpdGVDb21tYW5kKX1gKTtcclxuICAgICAgICAgICAgdGhpcy5jb21tYW5kU2VudCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21tYW5kQ2hhcmFjdGVyaXN0aWMud3JpdGVWYWx1ZShVaW50OEFycmF5LmZyb20od3JpdGVDb21tYW5kKSlcclxuICAgICAgICAgICAgLnRoZW4oICgpID0+ICh0aGlzLmNvbW1hbmRSZXNwQXZhaWxhYmxlKSA/IFByb21pc2UucmVzb2x2ZSggdHJ1ZSApIDogdGhpcy53YWl0Rm9yRGV2aWNlUmVzcG9uc2UoMTUpKVxyXG4gICAgICAgICAgICAudGhlbiggd2FpdFJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kUmVzcEF2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKCF3YWl0UmVzcCkgPyBcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIocmVzcG9uc2VOb3RSZWNlaXZlZCkpIDogdGhpcy5yZWFkQ29tbWFuZFZhbHVlKClcclxuICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiByZXNvbHZlKHJlc3BvbnNlKVxyXG4gICAgICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSApKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm5Ub1VzZXIgPSBzcGVjaWZpZWRDYWxsYmFjayA9PiByZXR1cm5PYmogPT4ge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbE5vdGlmaWNhdGlvbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5tYXhCbG9ja0lkID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJhd0RhdGEgPSB7fTtcclxuICAgICAgICByZXR1cm4gc3BlY2lmaWVkQ2FsbGJhY2socmV0dXJuT2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBidWlsZERhdGVUaW1lQ29tbWFuZCA9IHNwZWNpZmljVGltZSA9PiB7XHJcbiAgICAgICAgbGV0IGRhdGVUaW1lQ29tbWFuZCA9IFsweDQ5LCAweDIyLCAweDAwLCAweDAwLCAweDAzLCAweDBDLCAweDAwLCAweDFDXTtcclxuICAgICAgICBkYXRlVGltZUNvbW1hbmQgPSBkYXRlVGltZUNvbW1hbmQuY29uY2F0KCB0aGlzLm5ld0FycmF5UGFydGlhbCgweDAwLCAxNykgKTtcclxuICAgICAgICAvL0Zvcm1hdCBEYXRlIHNlZ21lbnQgYmVsb3dcclxuICAgICAgICBjb25zdCBjdXJyZW50ID0gKHNwZWNpZmljVGltZSBpbnN0YW5jZW9mIERhdGUpID8gc3BlY2lmaWNUaW1lIDogbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgLy9Nb250aCAoemVybyBiYXNlZCBpbmRleCwgc28gYWRkIDEpLlxyXG4gICAgICAgIGRhdGVUaW1lQ29tbWFuZC5wdXNoKCBcclxuICAgICAgICAgICAgdGhpcy5jYXN0RGVjVG9IZXgoIGN1cnJlbnQuZ2V0TW9udGgoKSArIDEpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgZGF0ZVRpbWVDb21tYW5kLnB1c2goXHJcbiAgICAgICAgICAgIHRoaXMuY2FzdERlY1RvSGV4KCBjdXJyZW50LmdldERhdGUoKSApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgZGF0ZVRpbWVDb21tYW5kLnB1c2goXHJcbiAgICAgICAgICAgIHRoaXMuY2FzdERlY1RvSGV4KCBjdXJyZW50LmdldEhvdXJzKCkgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGRhdGVUaW1lQ29tbWFuZC5wdXNoKFxyXG4gICAgICAgICAgICB0aGlzLmNhc3REZWNUb0hleCggY3VycmVudC5nZXRNaW51dGVzKCkgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGRhdGVUaW1lQ29tbWFuZC5wdXNoKFxyXG4gICAgICAgICAgICB0aGlzLmNhc3REZWNUb0hleCggY3VycmVudC5nZXRTZWNvbmRzKCkgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vQ3VycmVudGx5IHVudXNlZCBvZmZzZXQuICAweDAwIC0gMHgwNiBpcyB2YWxpZCAtIGJ1dCBpcyBub3QgZXhhbWluZWQuXHJcbiAgICAgICAgZGF0ZVRpbWVDb21tYW5kLnB1c2goMHgwMCk7XHJcblxyXG4gICAgICAgIC8vWWVhciBpcyBiYXNlZCB1cG9uIDIwMDggPT09IDB4MDAuXHJcbiAgICAgICAgZGF0ZVRpbWVDb21tYW5kLnB1c2goXHJcbiAgICAgICAgICAgIHRoaXMuY2FzdERlY1RvSGV4KCBjdXJyZW50LmdldEZ1bGxZZWFyKCkgLSAyMDA4IClcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIC8vTUFDIC0gZm9yIGFsbCBkZXZpY2VzIGV4Y2VwdCB0d28gZXhjZXB0aW9ucyAoc2VlIGRvY3VtZW50YXRpb24pIHRoaXMgY2FuIGJlIHBhZGRlZCB3aXRoIHplcm9zLlxyXG4gICAgICAgIGRhdGVUaW1lQ29tbWFuZCA9IGRhdGVUaW1lQ29tbWFuZC5jb25jYXQoIHRoaXMubmV3QXJyYXlQYXJ0aWFsKDB4MDAsIDQpICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGRhdGVUaW1lQ29tbWFuZDtcclxuICAgIH1cclxuXHJcbiAgICBzZXREZXZpY2VEYXRlVGltZSA9IHNwZWNpZmljVGltZSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiBcclxuICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AoXHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGREYXRlVGltZUNvbW1hbmQoc3BlY2lmaWNUaW1lKVxyXG4gICAgICAgICkudGhlbihyZXNwID0+IHJlc29sdmUocmVzcClcclxuICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QodGhpcy5idWlsZERldmljZUVycihlcnIpKSlcclxuICAgICk7XHJcblxyXG4gICAgZ2V0S3NuID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IFxyXG4gICAgICAgICghdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpID8gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGdhdHRTZXJ2ZXJOb3RDb25uZWN0ZWQpKSBcclxuICAgICAgICA6IHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcChbMHgwOSwgMHgwMF0pXHJcbiAgICAgICAgLnRoZW4oIHJlc3AgPT4gdGhpcy5jb252ZXJ0QXJyYXlUb0hleFN0cmluZyhyZXNwLnNsaWNlKDIpKSApXHJcbiAgICAgICAgLnRoZW4oZm9ybWF0dGVkVmFsdWUgPT4gcmVzb2x2ZShmb3JtYXR0ZWRWYWx1ZSkpXHJcbiAgICApO1xyXG5cclxuICAgIGdldERldmljZVNuID0gKCkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBcclxuICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AoWzB4MDAsIDB4MDEsIDB4MDNdKVxyXG4gICAgICAgIC50aGVuKCByZXNwID0+IHRoaXMuYnVmZmVyVG9VdGY4KHJlc3Auc2xpY2UoMikpIFxyXG4gICAgICAgICkudGhlbihmb3JtYXR0ZWRWYWx1ZSA9PiByZXNvbHZlKGZvcm1hdHRlZFZhbHVlKSlcclxuICAgICk7XHJcblxyXG4gICAgZ2F0aGVyRGV2aWNlSW5mbyA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgbGV0IGJhdHRlcnk7XHJcbiAgICAgICAgbGV0IHNlcmlhbE51bTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWFkQmF0dGVyeUxldmVsKClcclxuICAgICAgICAudGhlbiggcmVzcEJhdHRlcnkgPT4ge1xyXG4gICAgICAgICAgICBiYXR0ZXJ5ID0gcmVzcEJhdHRlcnk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERldmljZVNuKClcclxuICAgICAgICB9KS50aGVuKCByZXNwU24gPT4ge1xyXG4gICAgICAgICAgICBzZXJpYWxOdW0gPSByZXNwU247XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKFsgYmF0dGVyeSwgc2VyaWFsTnVtIF0pXHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpIClcclxuICAgIH0pO1xyXG5cclxuICAgIGdldERldmljZUluZm8gPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gKCF0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCkgP1xyXG4gICAgICAgIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihkZXZpY2VOb3RPcGVuKSApIFxyXG4gICAgICAgIDogdGhpcy5nYXRoZXJEZXZpY2VJbmZvKClcclxuICAgICAgICAgICAgLnRoZW4oXHJcbiAgICAgICAgICAgICAgICBkZXZpY2VJbmZvID0+IHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRldmljZU5hbWU6IHRoaXMuZGV2aWNlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlVHlwZTogdGhpcy5kZXZpY2VUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhdHRlcnlMZXZlbDogZGV2aWNlSW5mb1swXSxcclxuICAgICAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXI6IGRldmljZUluZm9bMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgaXNDb25uZWN0ZWQ6IHRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSApKVxyXG4gICAgKTtcclxuXHJcbiAgICBzZW5kVXNlclNlbGVjdGlvbiA9IHNlbGVjdGlvblJlc3VsdCA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiAoIXRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSA/IFxyXG4gICAgICAgIHJlamVjdCggdGhpcy5idWlsZERldmljZUVycihkZXZpY2VOb3RPcGVuKSApIFxyXG4gICAgICAgIDogdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKFsweDQ5LCAweDA4LCAweDAwLCAweDAwLCAweDAzLCAweDAyLCAweDAwLCAweDAyLCAweDAwLCBzZWxlY3Rpb25SZXN1bHRdKVxyXG4gICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRGV2aWNlU3RhdGUoYFtVc2VyIFNlbGVjdGlvbiBSZXNwXTogJHt0aGlzLmNvbnZlcnRBcnJheVRvSGV4U3RyaW5nKHJlc3ApfWApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclNlbGVjdGlvblJlc3BvbnNlOiAodGhpcy5yZXN1bHRDb2Rlc1sgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIHJlc3Auc2xpY2UoNCwgNikgKSBcclxuICAgICAgICAgICAgICAgICAgICBdIHx8IFwiVW5rbm93biBvciB1bmRvY3VtZW50ZWQgcmVzdWx0IGNvZGVcIilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikgKSlcclxuICAgIClcclxuXHJcbiAgICBidWlsZEFycGNDb21tYW5kID0gKGxlbiwgZGF0YSkgPT4gKFsweDQ5LCAobGVuICsgNiksIDB4MDAsIDB4MDAsIDB4MDMsIDB4MDMsIDB4MDAsIGxlbiwgLi4uZGF0YSBdKTtcclxuXHJcbiAgICBzZW5kQXJwYyA9IGFycGNSZXNwID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHRoaXMuc2VuZEFycGNCYXNlKGFycGNSZXNwKVxyXG4gICAgICAgIC50aGVuKGFycGNDbWQgPT4gdGhpcy5zZW5kQ29tbWFuZFdpdGhSZXNwKGFycGNDbWQpKVxyXG4gICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0RldmljZVN0YXRlKGBbU2VuZCBBUlBDIFJlc3BdOiAke3RoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcocmVzcCl9YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdENvZGUgPSAocmVzcC5sZW5ndGggPiA1KSA/IHRoaXMuY29udmVydEFycmF5VG9IZXhTdHJpbmcoIHJlc3Auc2xpY2UoNCwgNikgKSA6IFwiXCI7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICBzZW5kQXJwY1Jlc3BvbnNlOiAodGhpcy5yZXN1bHRDb2Rlc1sgcmVzdWx0Q29kZSBdIHx8IFwiVW5rbm93biBvciB1bmRvY3VtZW50ZWQgcmVzdWx0IGNvZGVcIilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KS5jYXRjaChlcnIgPT4gcmVqZWN0KHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSkpXHJcbiAgICApO1xyXG5cclxuICAgIGNsZWFyR2F0dENhY2hlID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh3aW5kb3cpXHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCB0aGlzLm9uRGVzdHJveUhhbmRsZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubWF4QmxvY2tJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsTm90aWZpY2F0aW9uID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJhd0RhdGEgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhUmVhZFN0YXR1c0NoYXJhY3RlcmlzdGljID0gbnVsbDtcclxuICAgICAgICB0aGlzLmRhdGFSZWFkeUNoYXJhY3RlcmlzdGljID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jYXJkRGF0YUxpc3RlbmVyID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBjZWFzZU5vdGlmaWNhdGlvbnMgPSAoKSA9PiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiAoIXRoaXMuY2FyZERhdGFMaXN0ZW5lcikgPyByZXNvbHZlKCkgOiB0aGlzLmNhcmREYXRhTGlzdGVuZXIuc3RvcE5vdGlmaWNhdGlvbnMoKVxyXG4gICAgICAgIC50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FyZERhdGFMaXN0ZW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFyYWN0ZXJpc3RpY3ZhbHVlY2hhbmdlZCcsIHRoaXMuY2FyZERhdGFIYW5kbGVyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVJlYWRTdGF0dXNDaGFyYWN0ZXJpc3RpYy5zdG9wTm90aWZpY2F0aW9ucygpXHJcbiAgICAgICAgfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVJlYWR5Q2hhcmFjdGVyaXN0aWMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhcmFjdGVyaXN0aWN2YWx1ZWNoYW5nZWQnLCB0aGlzLmRhdGFSZWFkeUhhbmRsZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpXHJcbiAgICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgY2FuY2VsVHJhbnNhY3Rpb24gPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gKCF0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYykgPyBcclxuICAgICAgICByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoY29tbWFuZE5vdFNlbnQpKVxyXG4gICAgICAgIDpcclxuICAgICAgICB0aGlzLmNvbW1hbmRDaGFyYWN0ZXJpc3RpYy53cml0ZVZhbHVlKHRoaXMuY2FuY2VsRW12Q29tbWFuZClcclxuICAgICAgICAudGhlbigoKSA9PiByZXNvbHZlKCkpXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiByZWplY3QodGhpcy5idWlsZERldmljZUVycihlcnIpKSlcclxuICAgICk7XHJcblxyXG4gICAgY2xvc2VEZXZpY2UgPSAoKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4gXHJcbiAgICAgICAgKCF0aGlzLmRldmljZS5nYXR0LmNvbm5lY3RlZCkgPyByZXNvbHZlKHtcclxuICAgICAgICAgICAgY29kZTogc3VjY2Vzc0NvZGUsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGNsb3NlU3VjY2Vzc1xyXG4gICAgICAgIH0pIFxyXG4gICAgICAgIDpcclxuICAgICAgICB0aGlzLmNlYXNlTm90aWZpY2F0aW9ucygpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyR2F0dENhY2hlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICB9KS50aGVuKCgpID0+IHJlc29sdmUoe1xyXG4gICAgICAgICAgICBjb2RlOiBzdWNjZXNzQ29kZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogY2xvc2VTdWNjZXNzXHJcbiAgICAgICAgfSkpLmNhdGNoKGVyciA9PiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSApKVxyXG4gICAgKSBcclxuXHJcbiAgICBjbGVhclNlc3Npb24gPSAoKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiBcclxuICAgICAgICAodGhpcy5kZXZpY2UgJiYgdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpID8gXHJcbiAgICAgICAgICAgIHJlc29sdmUoXCJTQ1JBIGRldmljZXMgZG8gbm90IGNhcnJ5IGEgc2Vzc2lvblwiKSBcclxuICAgICAgICAgICAgOiByZWplY3QoIHRoaXMuYnVpbGREZXZpY2VFcnIoZGV2aWNlTm90T3BlbikpIClcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2NyYTsiLCJpbXBvcnQgU2NyYSBmcm9tICcuL3NjcmEnO1xyXG5pbXBvcnQgeyBcclxuICAgIHN3aXBlTGlzdGVuaW5nLFxyXG4gICAgc3VjY2Vzc0NvZGUsXHJcbiAgICBlRHluYW1vXHJcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuXHJcbmNsYXNzIEVEeW5hbW8gZXh0ZW5kcyBTY3JhIHtcclxuICAgIGNvbnN0cnVjdG9yKGRldmljZSwgY2FsbEJhY2tzKSB7XHJcbiAgICAgICAgc3VwZXIoZGV2aWNlLCBjYWxsQmFja3MpO1xyXG5cclxuICAgICAgICB0aGlzLmRldmljZVR5cGUgPSBlRHluYW1vO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENhcmRTZXJ2aWNlID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IFxyXG4gICAgICAgIHRoaXMuZ2V0Q2FyZFNlcnZpY2VCYXNlKDEpXHJcbiAgICAgICAgLnRoZW4ocmVzcCA9PiByZXNvbHZlKHJlc3ApXHJcbiAgICAgICAgKS5jYXRjaCggZXJyID0+IHJlamVjdCh0aGlzLmJ1aWxkRGV2aWNlRXJyKGVycikpIClcclxuICAgICk7XHJcblxyXG4gICAgcmVxdWVzdENhcmRTd2lwZSA9ICgpID0+IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiBcclxuICAgICAgICAoIXRoaXMuZGV2aWNlLmdhdHQuY29ubmVjdGVkKSA/IFxyXG4gICAgICAgICAgICB0aGlzLmdldENhcmRTZXJ2aWNlQmFzZSgxKVxyXG4gICAgICAgICAgICAudGhlbiggKCkgPT4gXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogc3VjY2Vzc0NvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogc3dpcGVMaXN0ZW5pbmdcclxuICAgICAgICAgICAgICAgIH0pIFxyXG4gICAgICAgICAgICApLmNhdGNoKGVyciA9PiByZWplY3QodGhpcy5idWlsZERldmljZUVycihlcnIpICkpXHJcbiAgICAgICAgOiByZXNvbHZlKHtcclxuICAgICAgICAgICAgY29kZTogc3VjY2Vzc0NvZGUsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHN3aXBlTGlzdGVuaW5nXHJcbiAgICAgICAgfSkgXHJcbiAgICApO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBFRHluYW1vOyIsImltcG9ydCBTY3JhIGZyb20gJy4vc2NyYSc7XHJcbmltcG9ydCB7IFxyXG4gICAgc3dpcGVMaXN0ZW5pbmcsXHJcbiAgICBzdWNjZXNzQ29kZSxcclxuICAgIHREeW5hbW9cclxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBjb21tYW5kTm90QWNjZXB0ZWQgfSBmcm9tICcuLi9lcnJvckhhbmRsZXIvZXJyQ29uc3RhbnRzJztcclxuXHJcbmNsYXNzIFREeW5hbW8gZXh0ZW5kcyBTY3JhIHtcclxuICAgIGNvbnN0cnVjdG9yKGRldmljZSwgY2FsbEJhY2tzKSB7XHJcbiAgICAgICAgc3VwZXIoZGV2aWNlLCBjYWxsQmFja3MpO1xyXG5cclxuICAgICAgICB0aGlzLnNldEhlYWRBbHdheXNPbiA9IFsweDU4LCAweDAxLCAweDAxXTtcclxuICAgICAgICAvL3RoaXMuc2V0SGVhZE9mZldoZW5JZGxlID0gVWludDhBcnJheS5vZigweDU4LCAweDAxLCAweDAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5kZXZpY2VUeXBlID0gdER5bmFtb1xyXG4gICAgfVxyXG5cclxuICAgIGdldENhcmRTZXJ2aWNlID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IFxyXG4gICAgICAgIHRoaXMuZ2V0Q2FyZFNlcnZpY2VCYXNlKClcclxuICAgICAgICAudGhlbihyZXNwID0+IHJlc29sdmUocmVzcClcclxuICAgICAgICApLmNhdGNoKCBlcnIgPT4gcmVqZWN0KHRoaXMuYnVpbGREZXZpY2VFcnIoZXJyKSkgKVxyXG4gICAgKTtcclxuXHJcbiAgICByZXF1ZXN0Q2FyZFN3aXBlID0gKCkgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+ICghdGhpcy5kZXZpY2UuZ2F0dC5jb25uZWN0ZWQpID9cclxuICAgICAgICB0aGlzLmdldENhcmRTZXJ2aWNlQmFzZSgpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4gXHJcbiAgICAgICAgICAgIHRoaXMuc2VuZENvbW1hbmRXaXRoUmVzcCh0aGlzLnNldEhlYWRBbHdheXNPbilcclxuICAgICAgICApLnRoZW4oc2V0SGVhZE9wZW5SZXNwID0+IChwYXJzZUludChzZXRIZWFkT3BlblJlc3ApID09PSAwKSA/IFxyXG4gICAgICAgICAgICByZXNvbHZlKHsgXHJcbiAgICAgICAgICAgICAgICBjb2RlOiBzdWNjZXNzQ29kZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHN3aXBlTGlzdGVuaW5nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGNvbW1hbmROb3RBY2NlcHRlZCkgKVxyXG4gICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKVxyXG4gICAgICAgIDpcclxuICAgICAgICB0aGlzLnNlbmRDb21tYW5kV2l0aFJlc3AodGhpcy5zZXRIZWFkQWx3YXlzT24pXHJcbiAgICAgICAgLnRoZW4oc2V0SGVhZE9wZW5SZXNwID0+IChwYXJzZUludChzZXRIZWFkT3BlblJlc3ApID09PSAwKSA/IFxyXG4gICAgICAgICAgICByZXNvbHZlKHsgXHJcbiAgICAgICAgICAgICAgICBjb2RlOiBzdWNjZXNzQ29kZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHN3aXBlTGlzdGVuaW5nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgcmVqZWN0KCB0aGlzLmJ1aWxkRGV2aWNlRXJyKGNvbW1hbmROb3RBY2NlcHRlZClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKVxyXG4gICAgKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVER5bmFtbzsiLCJpbXBvcnQgRHBNaW5pIGZyb20gJy4uL2RldmljZXMvZHluYVByb01pbmknO1xyXG5pbXBvcnQgRHluUHJvR28gZnJvbSAnLi4vZGV2aWNlcy9keW5hUHJvR28nO1xyXG5pbXBvcnQgRUR5bmFtbyBmcm9tICcuLi9kZXZpY2VzL2VEeW5hbW8nO1xyXG5pbXBvcnQgVER5bmFtbyBmcm9tICcuLi9kZXZpY2VzL3REeW5hbW8nO1xyXG5pbXBvcnQgeyBcclxuICAgIHREeW5hbW8sXHJcbiAgICBlRHluYW1vLFxyXG4gICAgZHluYVByb0dvLFxyXG4gICAgZHBNaW5pIFxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7IFxyXG5cclxuY29uc3QgY29tbWFuZE5vdFVzZWQgPSBpc1NjcmEgPT4gXHJcbiAgICAoKSA9PiBQcm9taXNlLnJlc29sdmUoYCR7KGlzU2NyYSA/ICdTQ1JBJyA6ICdQaW5QYWQnKX0gZGV2aWNlcyBkbyBub3QgdXNlIHRoaXMgY29tbWFuZGApO1xyXG5cclxuICAgIFxyXG5jbGFzcyBEZXZpY2VJbnRlcmZhY2Uge1xyXG4gICAgY29uc3RydWN0b3IoeyBcclxuICAgICAgICBnZXRDYXJkU2VydmljZSxcclxuICAgICAgICBzdGFydFRyYW5zYWN0aW9uLFxyXG4gICAgICAgIGNhbmNlbFRyYW5zYWN0aW9uLFxyXG4gICAgICAgIHNlbmRDb21tYW5kV2l0aFJlc3AsXHJcbiAgICAgICAgY2xlYXJTZXNzaW9uLFxyXG4gICAgICAgIGNsb3NlRGV2aWNlLFxyXG4gICAgICAgIGdldERldmljZUluZm8sXHJcbiAgICAgICAgcmVxdWVzdENhcmRTd2lwZSxcclxuICAgICAgICBpc0RldmljZUNvbm5lY3RlZCxcclxuICAgICAgICBkaXNjb25uZWN0LFxyXG4gICAgICAgIHJlcXVlc3RQaW5FbnRyeSxcclxuICAgICAgICBzZXREaXNwbGF5TWVzc2FnZSxcclxuICAgICAgICBzZW5kVXNlclNlbGVjdGlvbixcclxuICAgICAgICBzZW5kQXJwYyxcclxuICAgICAgICBzZXREZXZpY2VEYXRlVGltZVxyXG4gICAgfSkge1xyXG4gICAgICAgIHRoaXMub3BlbkRldmljZSA9IGdldENhcmRTZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc3RhcnRUcmFuc2FjdGlvbiA9IHN0YXJ0VHJhbnNhY3Rpb247XHJcbiAgICAgICAgdGhpcy5jYW5jZWxUcmFuc2FjdGlvbiA9IGNhbmNlbFRyYW5zYWN0aW9uO1xyXG4gICAgICAgIHRoaXMuc2VuZENvbW1hbmQgPSBzZW5kQ29tbWFuZFdpdGhSZXNwO1xyXG4gICAgICAgIHRoaXMuY2xlYXJTZXNzaW9uID0gY2xlYXJTZXNzaW9uO1xyXG4gICAgICAgIHRoaXMuY2xvc2VEZXZpY2UgPSBjbG9zZURldmljZTtcclxuICAgICAgICB0aGlzLmRldmljZUluZm8gPSBnZXREZXZpY2VJbmZvO1xyXG4gICAgICAgIHRoaXMucmVxdWVzdENhcmRTd2lwZSA9IHJlcXVlc3RDYXJkU3dpcGU7XHJcbiAgICAgICAgdGhpcy5pc0RldmljZU9wZW4gPSBpc0RldmljZUNvbm5lY3RlZDtcclxuICAgICAgICB0aGlzLmZvcmNlRGlzY29ubmVjdCA9IGRpc2Nvbm5lY3Q7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0UGluRW50cnkgPSAocmVxdWVzdFBpbkVudHJ5KSA/IHJlcXVlc3RQaW5FbnRyeSA6IGNvbW1hbmROb3RVc2VkKHRydWUpO1xyXG4gICAgICAgIHRoaXMuc2V0RGlzcGxheU1lc3NhZ2UgPSAoc2V0RGlzcGxheU1lc3NhZ2UpID8gc2V0RGlzcGxheU1lc3NhZ2UgOiBjb21tYW5kTm90VXNlZCh0cnVlKTtcclxuICAgICAgICB0aGlzLnNlbmRVc2VyU2VsZWN0aW9uID0gKHNlbmRVc2VyU2VsZWN0aW9uKSA/IHNlbmRVc2VyU2VsZWN0aW9uIDogY29tbWFuZE5vdFVzZWQoKTtcclxuICAgICAgICB0aGlzLnNlbmRBcnBjUmVzcG9uc2UgPSAoc2VuZEFycGMpID8gc2VuZEFycGMgOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoXCJGZWF0dXJlIFBlbmRpbmcgQ29tcGxldGlvblwiKTtcclxuICAgICAgICB0aGlzLnNldERldmljZURhdGVUaW1lID0gKHNldERldmljZURhdGVUaW1lKSA/IHNldERldmljZURhdGVUaW1lIDogY29tbWFuZE5vdFVzZWQoKTtcclxuICAgIH1cclxufTtcclxuXHJcbmNvbnN0IG5ld0RldmljZUluc3RhbmNlID0ge1xyXG4gICAgW2VEeW5hbW9dOiAoZGV2aWNlLCBjYWxsYmFja3MpID0+IG5ldyBFRHluYW1vKGRldmljZSwgY2FsbGJhY2tzKSxcclxuICAgIFt0RHluYW1vXTogIChkZXZpY2UsIGNhbGxiYWNrcykgPT4gbmV3IFREeW5hbW8oZGV2aWNlLCBjYWxsYmFja3MpLFxyXG4gICAgW2R5bmFQcm9Hb106IChkZXZpY2UsIGNhbGxiYWNrcykgPT4gbmV3IER5blByb0dvKGRldmljZSwgY2FsbGJhY2tzKSxcclxuICAgIFtkcE1pbmldOiAoZGV2aWNlLCBjYWxsYmFja3MpID0+IG5ldyBEcE1pbmkoZGV2aWNlLCBjYWxsYmFja3MpLFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYnVpbGREZXZpY2VPYmplY3QgPSAoZGV2aWNlLCBjYWxsYmFja3MsIGRldmljZVR5cGVTdHJpbmcpID0+ICh7XHJcbiAgICBpZDogZGV2aWNlLmlkLFxyXG4gICAgbmFtZTogZGV2aWNlLm5hbWUsXHJcbiAgICBkZXZpY2VUeXBlOiBkZXZpY2VUeXBlU3RyaW5nLFxyXG4gICAgZGV2aWNlSW50ZXJmYWNlOiBuZXcgRGV2aWNlSW50ZXJmYWNlKFxyXG4gICAgICAgIG5ld0RldmljZUluc3RhbmNlWyBkZXZpY2VUeXBlU3RyaW5nIF0oZGV2aWNlLCBjYWxsYmFja3MpXHJcbiAgICApXHJcbn0pO1xyXG5cclxuIiwiaW1wb3J0IHtcclxuICAgIHREeW5hbW8sXHJcbiAgICBlRHluYW1vLFxyXG4gICAgZHluYVByb0dvLFxyXG4gICAgZHBNaW5pXHJcbn0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBub3RGb3VuZE9iaiB9IGZyb20gJy4uL2Vycm9ySGFuZGxlci9lcnJDb25zdGFudHMnO1xyXG5cclxuY29uc3QgZUR5bmFtb1BhdHRlcm4gPSBuZXcgUmVnRXhwKC9eZUR5bmFtby0vKTtcclxuY29uc3QgdER5bmFtb1BhdHRlcm4gPSBuZXcgUmVnRXhwKC9edER5bmFtby0vKTtcclxuY29uc3QgZHBNaW5pUGF0dGVybiA9IG5ldyBSZWdFeHAoL15EUE1pbmkvKTtcclxuY29uc3QgZHBHb1BhdHRlcm4gPSBuZXcgUmVnRXhwKC9eRFBHLyk7XHJcblxyXG5cclxuY29uc3QgaW5zcGVjdERldmljZU5hbWUgPSBkZXZpY2VOYW1lID0+ICh0RHluYW1vUGF0dGVybi50ZXN0KGRldmljZU5hbWUpKSA/IHREeW5hbW8gOiBcclxuICAgIChlRHluYW1vUGF0dGVybi50ZXN0KGRldmljZU5hbWUpKSA/IGVEeW5hbW8gOiBcclxuICAgICAgICAoZHBHb1BhdHRlcm4udGVzdChkZXZpY2VOYW1lKSkgPyBkeW5hUHJvR28gOiBcclxuICAgICAgICAgICAgKGRwTWluaVBhdHRlcm4udGVzdChkZXZpY2VOYW1lKSkgPyBkcE1pbmkgOiBcIlwiO1xyXG5cclxuY29uc3QgZm9ybWF0VHlwZVN0cmluZyA9IGRldmljZVR5cGVTdHIgPT4ge1xyXG4gICAgY29uc3QgZGV2aWNlVHlwZUFyciA9IFtkeW5hUHJvR28sIGRwTWluaSwgZUR5bmFtbywgdER5bmFtb107XHJcbiAgICBsZXQgcmV0dXJuU3RyID0gXCJcIjtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRldmljZVR5cGVBcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoZGV2aWNlVHlwZVN0ci50b0xvd2VyQ2FzZSgpID09PSBkZXZpY2VUeXBlQXJyW2ldLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuU3RyID0gZGV2aWNlVHlwZUFycltpXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXR1cm5TdHI7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmaW5kRGV2aWNlVHlwZVN0cmluZyA9IChuYW1lU3RyLCB0eXBlU3RyKSA9PiB7XHJcbiAgICBpZiAodHlwZVN0cikge1xyXG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZFN0ciA9IGZvcm1hdFR5cGVTdHJpbmcodHlwZVN0cik7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJbISFdOiBcIiwgZm9ybWF0dGVkU3RyKTtcclxuXHJcbiAgICAgICAgaWYgKGZvcm1hdHRlZFN0cikge1xyXG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkU3RyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaW5zcGVjdERldmljZU5hbWUobmFtZVN0cilcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGZpbmREZXZpY2VCeVByb2R1Y3ROYW1lID0gc2VsZWN0ZWREZXZpY2UgPT4gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGxldCBtb2RlbE5hbWVTdHJpbmc7XHJcblxyXG4gICAgcmV0dXJuIHNlbGVjdGVkRGV2aWNlLmdhdHQuY29ubmVjdCgpXHJcbiAgICAudGhlbihzZXJ2ZXIgPT4gc2VydmVyLmdldFByaW1hcnlTZXJ2aWNlKCdkZXZpY2VfaW5mb3JtYXRpb24nKVxyXG4gICAgKS50aGVuKHNlcnZpY2UgPT4gc2VydmljZS5nZXRDaGFyYWN0ZXJpc3RpYygnbW9kZWxfbnVtYmVyX3N0cmluZycpXHJcbiAgICApLnRoZW4oY2hhcmFjdGVyaXN0aWMgPT4gY2hhcmFjdGVyaXN0aWMucmVhZFZhbHVlKClcclxuICAgICkudGhlbih2YWx1ZSA9PiB7XHJcbiAgICAgICAgbW9kZWxOYW1lU3RyaW5nID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpLmRlY29kZSh2YWx1ZSkudHJpbSgpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoIHNlbGVjdGVkRGV2aWNlLmdhdHQuZGlzY29ubmVjdCgpICk7XHJcbiAgICB9KS50aGVuKCAoKSA9PiByZXNvbHZlKCBtb2RlbE5hbWVTdHJpbmcgKVxyXG4gICAgKS5jYXRjaChlcnIgPT4gKFxyXG4gICAgICAgICAgICBlcnIuY29kZSA9PT0gbm90Rm91bmRPYmouZXJyb3JDb2RlICYmIFxyXG4gICAgICAgICAgICBlcnIubmFtZSA9PT0gbm90Rm91bmRPYmouZXJyb3JOYW1lICYmIFxyXG4gICAgICAgICAgICBlcnIubWVzc2FnZS5pbmNsdWRlcyhcIjAwMDAxODBhLTAwMDAtMTAwMC04MDAwLTAwODA1ZjliMzRmYlwiKVxyXG4gICAgICAgICkgPyAoIXNlbGVjdGVkRGV2aWNlLmdhdHQuY29ubmVjdGVkKSA/IHJlc29sdmUoIGR5bmFQcm9HbyApIFxyXG4gICAgICAgICAgICA6IFByb21pc2UucmVzb2x2ZSggc2VsZWN0ZWREZXZpY2UuZ2F0dC5kaXNjb25uZWN0KCkgKS50aGVuKCgpID0+IHJlc29sdmUoIGR5bmFQcm9HbyApKVxyXG4gICAgICAgIDogcmVqZWN0KGVycilcclxuICAgICk7XHJcbn0pO1xyXG4iLCJpbXBvcnQgQXBpRXJyb3IgZnJvbSAnLi9lcnJvckhhbmRsZXIvYXBpRXJyb3InO1xyXG5pbXBvcnQgeyBhbGxEZXZpY2VDb25maWcsIGZpbmREZXZpY2VCeURldmljZU5hbWUgfSBmcm9tICcuL2NvbmZpZ3VyYXRpb25zJztcclxuaW1wb3J0IHsgYnVpbGREZXZpY2VPYmplY3QgfSBmcm9tICcuL3V0aWxzL2luc3RhbmNpYXRlRGV2aWNlJztcclxuaW1wb3J0IHsgZmluZERldmljZVR5cGVTdHJpbmcsIGZpbmREZXZpY2VCeVByb2R1Y3ROYW1lIH0gZnJvbSAnLi91dGlscy9pZGVudGlmeURldmljZSc7XHJcblxyXG5cclxuY29uc3QgYXJyYW5nZUNhbGxiYWNrcyA9IGNhbGxCYWNrcyA9PiB7XHJcblxyXG4gICAgY29uc3QgZGVmYXVsdENhbGxiYWNrID0gZGF0YU9iaiA9PiB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKFwiQ2FsbGJhY2sgbm90IHByb3ZpZGVkIHRvICdzY2FuRm9yRGV2aWNlcycgZnVuY3Rpb24uIFBsZWFzZSBwcm92aWRlIGF0IGxlYXN0IG9uZSBjYWxsYmFjayBmdW5jdGlvbiB0byB0aGlzIG1ldGhvZFwiKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInRyYW5zYWN0aW9uQ2FsbGJhY2sgZGF0YTogXCIsIGRhdGFPYmopO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGxCYWNrcyA9IGNhbGxCYWNrcyB8fCBkZWZhdWx0Q2FsbGJhY2s7XHJcbiAgICBcclxuICAgIGNvbnN0IGlzRnVuY1R5cGUgPSAodHlwZW9mIGNhbGxCYWNrcyA9PT0gJ2Z1bmN0aW9uJyk7XHJcblxyXG4gICAgY29uc3QgcHJvcEFzc2lnbm1lbnQgPSBwcm9wTmFtZSA9PiAoY2FsbEJhY2tzW3Byb3BOYW1lXSkgPyBjYWxsQmFja3NbcHJvcE5hbWVdIDogXHJcbiAgICAgICAgKGlzRnVuY1R5cGUpID8gY2FsbEJhY2tzIDogY2FsbEJhY2tzLnRyYW5zYWN0aW9uQ2FsbGJhY2s7XHJcblxyXG4gICAgY29uc3QgZGVmYXVsdEVyckNhbGxiYWNrID0gZXJyT2JqID0+IFxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbTWFnZW5zYUJsdWV0b290aCBJbnRlcm5hbCBFcnJvcl06IFwiLCBlcnJPYmopO1xyXG5cclxuICAgIGNhbGxCYWNrcy5lcnJvckNhbGxiYWNrID0gKGNhbGxCYWNrcy5lcnJvckNhbGxiYWNrIHx8IGRlZmF1bHRFcnJDYWxsYmFjayk7XHJcbiAgICBjYWxsQmFja3MudHJhbnNhY3Rpb25TdGF0dXNDYWxsYmFjayA9ICggY2FsbEJhY2tzLnRyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2sgfHwgcHJvcEFzc2lnbm1lbnQoJ3RyYW5zYWN0aW9uU3RhdHVzQ2FsbGJhY2snKSApO1xyXG4gICAgY2FsbEJhY2tzLnVzZXJTZWxlY3Rpb25DYWxsYmFjayA9ICggY2FsbEJhY2tzLnVzZXJTZWxlY3Rpb25DYWxsYmFjayB8fCBwcm9wQXNzaWdubWVudCgndXNlclNlbGVjdGlvbkNhbGxiYWNrJykgKTtcclxuICAgIGNhbGxCYWNrcy5kaXNwbGF5Q2FsbGJhY2sgPSAoIGNhbGxCYWNrcy5kaXNwbGF5Q2FsbGJhY2sgfHwgcHJvcEFzc2lnbm1lbnQoJ2Rpc3BsYXlDYWxsYmFjaycpICk7XHJcbiAgICBjYWxsQmFja3MuZGlzY29ubmVjdEhhbmRsZXIgPSAoY2FsbEJhY2tzLmRpc2Nvbm5lY3RIYW5kbGVyIHx8IHByb3BBc3NpZ25tZW50KCd0cmFuc2FjdGlvbkNhbGxiYWNrJykgKTtcclxuXHJcbiAgICByZXR1cm4gY2FsbEJhY2tzO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3Qgc2NhbkZvckRldmljZXMgPSAoY2FsbEJhY2tzLCBkZXZpY2VOYW1lLCBkZXZpY2VUeXBlKSA9PiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBjYWxsQmFja3MgPT09ICdvYmplY3QnICYmIHR5cGVvZiBjYWxsQmFja3MudHJhbnNhY3Rpb25DYWxsYmFjayA9PT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgcmV0dXJuIHJlamVjdChcIldoZW4gcHJvdmlkaW5nIG11bHRpcGxlIGNhbGxiYWNrcyBpbiBhbiBvYmplY3QsICd0cmFuc2FjdGlvbkNhbGxiYWNrJyBtdXN0IGJlIHByb3ZpZGVkXCIpO1xyXG5cclxuICAgIGNhbGxCYWNrcyA9IGFycmFuZ2VDYWxsYmFja3MoY2FsbEJhY2tzKTtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gKGRldmljZU5hbWUpID8gZmluZERldmljZUJ5RGV2aWNlTmFtZShkZXZpY2VOYW1lKSA6IGFsbERldmljZUNvbmZpZztcclxuICAgIFxyXG4gICAgcmV0dXJuIG5hdmlnYXRvci5ibHVldG9vdGgucmVxdWVzdERldmljZSggb3B0aW9ucyApXHJcbiAgICAgICAgLnRoZW4oZGV2aWNlID0+IHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRldmljZVR5cGVOYW1lID0gZmluZERldmljZVR5cGVTdHJpbmcoZGV2aWNlLm5hbWUsIGRldmljZVR5cGUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChkZXZpY2VUeXBlTmFtZSkgPyByZXNvbHZlKCBidWlsZERldmljZU9iamVjdChkZXZpY2UsIGNhbGxCYWNrcywgZGV2aWNlVHlwZU5hbWUpICkgOlxyXG4gICAgICAgICAgICAgICAgZmluZERldmljZUJ5UHJvZHVjdE5hbWUoZGV2aWNlKS50aGVuKCBcclxuICAgICAgICAgICAgICAgICAgICBkZXZpY2VUeXBlU3RyaW5nID0+ICghZGV2aWNlVHlwZVN0cmluZykgPyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiU2VsZWN0ZWQgZGV2aWNlIGlzIG5vdCBzdXBwb3J0ZWRcIikgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVzb2x2ZSggYnVpbGREZXZpY2VPYmplY3QoZGV2aWNlLCBjYWxsQmFja3MsIGRldmljZVR5cGVTdHJpbmcpIClcclxuICAgICAgICAgICAgICAgICkuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcclxuICAgICAgICB9KS5jYXRjaChlcnIgPT4gKHR5cGVvZiBlcnIgPT09IFwib2JqZWN0XCIpID8gXHJcbiAgICAgICAgICAgIHJlamVjdCggbmV3IEFwaUVycm9yKGVycikgKSA6IFxyXG4gICAgICAgICAgICByZWplY3QoXCJTZWxlY3RlZCBkZXZpY2UgaXMgbm90IHN1cHBvcnRlZFwiKVxyXG4gICAgICAgIClcclxufSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=